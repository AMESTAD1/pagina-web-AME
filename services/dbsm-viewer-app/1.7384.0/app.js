!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("_")):"function"==typeof define&&define.amd?define("dbsm-viewer-app",["_"],t):"object"==typeof exports?exports["dbsm-viewer-app"]=t(require("_")):e["dbsm-viewer-app"]=t(e._)}("undefined"!=typeof self?self:this,(function(e){return function(){var t,r,n={9025:function(e,t,r){e.exports={ITEM_TYPES:r(8834).iB}},8834:function(e,t){"use strict";t.iB=t._5=void 0,t._5="STATIC_PAGE_V2",t.iB={DEFAULT:"DEFAULT",STATIC_PAGE:"STATIC_PAGE",STATIC_PAGE_V2:t._5,STORES_PRODUCT:"STORES_PRODUCT",FORUM_POST:"FORUM_POST",FORUM_CATEGORY:"FORUM_CATEGORY",PRO_GALLERY_ITEM:"PRO_GALLERY_ITEM",BLOG_POST:"BLOG_POST",BLOG_CATEGORY:"BLOG_CATEGORY",BLOG_TAGS:"BLOG_TAGS",BLOG_ARCHIVE:"BLOG_ARCHIVE",GROUPS_PAGE:"GROUPS_PAGE",GROUPS_POST:"GROUPS_POST",EVENTS_PAGE:"EVENTS_PAGE",CHALLENGES_PAGE:"CHALLENGES_PAGE",SEARCH_PAGE:"SEARCH_PAGE",BOOKINGS_SERVICE:"BOOKINGS_SERVICE",BOOKINGS_CALENDAR:"BOOKINGS_CALENDAR",BOOKINGS_FORM:"BOOKINGS_FORM",BREADCRUMBS_COMPONENT:"BREADCRUMBS_COMPONENT",BLOG_HASHTAGS:"BLOG_HASHTAGS",RESTAURANTS_ORDER_PAGE:"RESTAURANTS_ORDER_PAGE",MEMBERS_AREA_PROFILE:"MEMBERS_AREA_PROFILE",VIDEO_COMPONENT:"VIDEO_COMPONENT",PORTFOLIO_COLLECTIONS:"PORTFOLIO_COLLECTIONS",PORTFOLIO_PROJECTS:"PORTFOLIO_PROJECTS",GIFT_CARD:"GIFT_CARD",SCHEDULE_PAGE:"SCHEDULE_PAGE",WIX_DATA_PAGE_ITEM:"WIX_DATA_PAGE_ITEM",REVIEWS_COMPONENT:"REVIEWS_COMPONENT",STORES_CATEGORY:"STORES_CATEGORY",STORES_GALLERY_COMPONENT:"STORES_GALLERY_COMPONENT",RESTAURANTS_MENU_PAGE:"RESTAURANTS_MENU_PAGE",MEMBERS_AREA_PROFILE_TABS:"MEMBERS_AREA_PROFILE_TABS",PROGRAMS_COMPONENT:"PROGRAMS_COMPONENT"}},483:function(e,t,r){"use strict";r.r(t),r.d(t,{bulkGetDataCollections:function(){return K},createDataCollection:function(){return Y},deleteDataCollection:function(){return Z},getDataCollection:function(){return X},listDataCollections:function(){return J},updateDataCollection:function(){return Q}});var n=function(e){return e.split("#")};var o=/{(.*)}/,a=new RegExp("\\.(".concat(["wix.com","editorx.com"].join("|"),")$")),i=new RegExp("\\.(".concat(["42.wixprod.net"].join("|"),")$"));function s(e){var t,r,n=function(e,t){var r=t[e]||t._;if(!r&&function(e){return!!e.match(/\._base_domain_$/)}(e))return t[u];return r}(function(e){return e.replace("create.editorx.com","editor.editorx.com")}(e.host).replace(a,"._base_domain_").replace(i,"._api_base_domain_"),e.domainToMappings),s=(t=e.protoPath,r=e.data||{},t.split("/").map((function(e){return function(e,t){var r=e.match(o)||[],n=r[1];if(n){var a=e.replace(r[0],"");return function(e,t,r,n){for(var o=e,a=0,i=t.split(".");a<i.length;a++){var s=i[a];if(!o)return r;o=o[s]}return"".concat(o).concat(n)}(t,n,e,a)}return e}(e,r)})).join("/"));return function(e,t){var r=null==t?void 0:t.find((function(t){return e.startsWith(t.destPath)}));if(!r)return e;return r.srcPath+e.slice(r.destPath.length)}(s,n)}var c,l,u="www._base_domain_";function d(e,t){void 0===t&&(t="");var r={};return Object.entries(e).forEach((function(e){var n=e[0],o=e[1],a=null!==o&&"object"==typeof o&&!Array.isArray(o),i=function(e,t){return"".concat(e).concat(e?".":"").concat(t)}(t,n);if(a){var s=d(o,i);Object.assign(r,s)}else r[i]=o})),r}function p(e){var t=d(e);return Object.entries(t).reduce((function(e,t){var r=t[0],n=t[1];return(Array.isArray(n)?n:[n]).forEach((function(t){null!=t&&e.append(r,t)})),e}),new URLSearchParams)}function f(e,t,r){return void 0===t&&(t={}),function(o,a){return void 0===o&&(o={}),"string"==typeof o?o:i(e,o);function i(e,t){var r={};return[null,void 0].includes(t)?t:(Object.entries(t).forEach((function(t){var o,a,i,l,u=t[0],d=t[1],p=function(e){void 0===e&&(e="");var t=n(e),r=t[0],o=t[1];return o?{schemaName:o,schemaType:r}:{schemaName:r}}(e[u]),f=p.schemaName,h="Map"===p.schemaType;l=(null!==(i=null===(a=null===(o=c(f))||void 0===o?void 0:o.checkRepetable)||void 0===a?void 0:a.call(o,d))&&void 0!==i?i:Array.isArray(d))?d.map((function(e){return s(e,f)})):h?function(e,t){return Object.entries(e).reduce((function(e,r){var n=r[0],o=r[1];return e[n]=s(o,t),e}),{})}(d,f):s(d,f),r[u]=l})),r)}function s(e,r){if(!r)return e;var n=t[r];if(c(r))return c(r).transform(e);if(n)return i(n,e);throw new Error("".concat(r," is neither schema nor serializable type"))}function c(e){var t;return null===(t=r[e])||void 0===t?void 0:t[a]}}}!function(e){e[e.TO_JSON=0]="TO_JSON",e[e.FROM_JSON=1]="FROM_JSON"}(c||(c={}));var h,m,g,y,v=((l={types:["google.protobuf.Timestamp"]})[c.TO_JSON]={transform:function(e){return e.toISOString()}},l[c.FROM_JSON]={transform:function(e){return new Date(e)}},l),w=((h={types:["google.protobuf.FieldMask"]})[c.TO_JSON]={transform:function(e){return e.join(",")},checkRepetable:function(e){return e.some((function(e){return Array.isArray(e)}))}},h[c.FROM_JSON]={transform:function(e){return"object"==typeof e?e.paths:e.split(",")}},h),I=((m={types:["google.protobuf.BytesValue","BYTES"]})[c.TO_JSON]={transform:function(e){var t=e.reduce((function(e,t){return e+String.fromCharCode(t)}),"");return btoa(t)}},m[c.FROM_JSON]={transform:function(e){return Uint8Array.from(atob(e),(function(e){return e.charCodeAt(0)}))}},m),_=((g={types:["google.protobuf.Duration"]})[c.TO_JSON]={transform:function(e){var t=e.seconds,r=void 0===t?"0":t,n=e.nanos,o=void 0===n?0:n,a="";return 0!==o&&(a=".".concat(o.toString().padStart(9,"0"))),"".concat(r).concat(a,"s")}},g[c.FROM_JSON]={transform:function(e){var t=e.substring(0,e.length-1).split(".");return{seconds:t[0],nanos:E(t[1])}}},g);function E(e){var t=0;if(void 0!==e){var r=3-e.length/3;t=parseInt(e,10)*Math.pow(1e3,r)}return t}var b=((y={types:["FLOAT","DOUBLE","google.protobuf.FloatValue","google.protobuf.DoubleValue"]})[c.TO_JSON]={transform:function(e){return isFinite(e)?e:e.toString()}},y[c.FROM_JSON]={transform:function(e){return"NaN"===e?NaN:"Infinity"===e?1/0:"-Infinity"===e?-1/0:e}},y),S=function(){return S=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},S.apply(this,arguments)};var R=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},T=R([],[v,w,I,_,b],!0).reduce((function(e,t){var r=t.types.reduce((function(e,r){var n;return S(S({},e),((n={})[r]=t,n))}),{});return S(S({},e),r)}),{});function O(e,t){void 0===t&&(t={});var r=f(e,t,T);return{fromJSON:function(e){var t=function(e){try{return JSON.parse(e)}catch(e){}}(e)||e;return r(t,c.FROM_JSON)},toJSON:function(e){return r(e,c.TO_JSON)}}}var C={typeMetadata:"_typeMetadata"},P={},D={activeCollections:"_dataCollection",deletedCollections:"_dataCollection"},N={collection:"_dataCollection"},A={collection:"_dataCollection"},x={createdDate:"google.protobuf.Timestamp",updatedDate:"google.protobuf.Timestamp",fields:"_field"},F={},M={},L={numberRange:"_numberRange",typeMetadata:"_typeMetadata"},U={},k={collection:"_dataCollection",referencedCollections:"_dataCollection"},j={},V={collections:"_dataCollection"},G={min:"google.protobuf.DoubleValue",max:"google.protobuf.DoubleValue"},W={fields:"_objectField"},B={typeMetadata:"_typeMetadata"},q={object:"_object",array:"_array"},z={collection:"_dataCollection"},$={collection:"_dataCollection"};function H(e){return s(Object.assign(e,{domainToMappings:{"api._api_base_domain_":[{srcPath:"/cloud-data",destPath:""}],"code._base_domain_":[{srcPath:"/_api/cloud-data/v1/data-settings",destPath:"/v1/data-settings"},{srcPath:"/_api/cloud-data/v1/schemas",destPath:"/v1/schemas"},{srcPath:"/_api/cloud-data/v1/connector",destPath:"/v1/connector"},{srcPath:"/_api/data/v1/data-settings",destPath:"/v1/data-settings"},{srcPath:"/_api/data/v1/schemas",destPath:"/v1/schemas"},{srcPath:"/_api/data/v1/connector",destPath:"/v1/connector"},{srcPath:"/_api/cloud-data/v1/wix-data",destPath:"/v1/wix-data"}],"cloud-data.wix-code.com":[{srcPath:"",destPath:""}],_:[{srcPath:"/_api/cloud-data",destPath:""},{srcPath:"/_api/cloud-data/v1/schemas",destPath:"/v1/schemas"}],"www._base_domain_":[{srcPath:"/_api/cloud-data",destPath:""},{srcPath:"/_api/data",destPath:""},{srcPath:"/[a-z0-9-_/]+/_api/cloud-data",destPath:""}],"dev._base_domain_":[{srcPath:"/_api/cloud-data",destPath:""}],"bo._base_domain_":[{srcPath:"/_api/cloud-data/v1",destPath:"/v1"},{srcPath:"/[a-z0-9-_/]+/_api/cloud-data",destPath:""}],"manage._base_domain_":[{srcPath:"/_api/cloud-data",destPath:""},{srcPath:"/_api/data",destPath:""},{srcPath:"/[a-z0-9-_/]+/_api/cloud-data",destPath:""}],"editor._base_domain_":[{srcPath:"/_api/cloud-data/v1/schemas",destPath:"/v1/schemas"},{srcPath:"/_api/cloud-data/dbs/tasks",destPath:"/dbs/tasks"},{srcPath:"/_api/data/v1/schemas",destPath:"/v1/schemas"},{srcPath:"/_api/data/dbs/tasks",destPath:"/dbs/tasks"},{srcPath:"/_api/cloud-data/v1/wix-data",destPath:"/v1/wix-data"},{srcPath:"/_api/cloud-data/v1/data-settings",destPath:"/v1/data-settings"},{srcPath:"/_api/data/v2/indexes",destPath:"/v2/indexes"},{srcPath:"/_api/cloud-data/v1/external-database-connections",destPath:"/v1/external-database-connections"},{srcPath:"/_api/data/v1/data-collection-sharing",destPath:"/v1/data-collection-sharing"},{srcPath:"/_api/cloud-data/v2/collections",destPath:"/v2/collections"}],"blocks._base_domain_":[{srcPath:"/_api/cloud-data/v1/schemas",destPath:"/v1/schemas"},{srcPath:"/_api/cloud-data/dbs/tasks",destPath:"/dbs/tasks"},{srcPath:"/_api/data/v1/schemas",destPath:"/v1/schemas"},{srcPath:"/_api/data/dbs/tasks",destPath:"/dbs/tasks"},{srcPath:"/_api/cloud-data/v1/wix-data",destPath:"/v1/wix-data"},{srcPath:"/_api/cloud-data/v1/data-settings",destPath:"/v1/data-settings"},{srcPath:"/_api/data/v2/indexes",destPath:"/v2/indexes"},{srcPath:"/_api/cloud-data/v1/external-database-connections",destPath:"/v1/external-database-connections"},{srcPath:"/_api/data/v1/data-collection-sharing",destPath:"/v1/data-collection-sharing"},{srcPath:"/_api/cloud-data/v2/collections",destPath:"/v2/collections"}],"create.editorx":[{srcPath:"/_api/cloud-data/v1/schemas",destPath:"/v1/schemas"},{srcPath:"/_api/cloud-data/dbs/tasks",destPath:"/dbs/tasks"},{srcPath:"/_api/data/v1/schemas",destPath:"/v1/schemas"},{srcPath:"/_api/data/dbs/tasks",destPath:"/dbs/tasks"},{srcPath:"/_api/cloud-data/v1/wix-data",destPath:"/v1/wix-data"},{srcPath:"/_api/cloud-data/v1/data-settings",destPath:"/v1/data-settings"},{srcPath:"/_api/data/v2/indexes",destPath:"/v2/indexes"},{srcPath:"/_api/cloud-data/v1/external-database-connections",destPath:"/v1/external-database-connections"},{srcPath:"/_api/data/v1/data-collection-sharing",destPath:"/v1/data-collection-sharing"},{srcPath:"/_api/cloud-data/v2/collections",destPath:"/v2/collections"}],"www.wixapis.com":[{srcPath:"/wix-data/v1/collections",destPath:"/v1/wix-data/collections"},{srcPath:"/wix-data/v1/external-database-connections",destPath:"/v1/external-database-connections"},{srcPath:"/wix-data/v2/indexes",destPath:"/v2/indexes"},{srcPath:"/wix-data/v1/items",destPath:"/v1/items"},{srcPath:"/wix-data/v1/bulk",destPath:"/v1/bulk"},{srcPath:"/wix-data/v1/external-databases",destPath:"/v1/external-databases"},{srcPath:"/wix-data/v2",destPath:"/v2"}],"www.wixgateway.com":[{srcPath:"/wix-data/v1/items",destPath:"/v1/items"},{srcPath:"/wix-data/v1/bulk",destPath:"/v1/bulk"}]}}))}function Y(e){var t=O(N,{_array:C,_dataCollection:x,_field:L,_numberRange:G,_object:W,_objectField:B,_typeMetadata:q}),r=t.toJSON,n=t.fromJSON,o=O(A,{_array:C,_dataCollection:x,_field:L,_numberRange:G,_object:W,_objectField:B,_typeMetadata:q}).fromJSON;function a(t){var n=t.host,a=r(e);return{entityFqdn:"wix.data.v2.data_collection",method:"POST",methodFqn:"com.wixpress.cloud.data.api.collectionservice.DataCollectionService.CreateDataCollection",url:H({protoPath:"/v2/collections",data:a,host:n}),data:a,transformResponse:o}}return a.fromReq=n,a}function X(e){var t=O(U,{}),r=t.toJSON,n=t.fromJSON,o=O(k,{_array:C,_dataCollection:x,_field:L,_numberRange:G,_object:W,_objectField:B,_typeMetadata:q}).fromJSON;function a(t){var n=t.host,a=r(e);return{entityFqdn:"wix.data.v2.data_collection",method:"GET",methodFqn:"com.wixpress.cloud.data.api.collectionservice.DataCollectionService.GetDataCollection",url:H({protoPath:"/v2/collections/{dataCollectionId}",data:a,host:n}),params:p(a),transformResponse:o}}return a.fromReq=n,a}function J(e){var t=O(j,{}),r=t.toJSON,n=t.fromJSON,o=O(V,{_array:C,_dataCollection:x,_field:L,_numberRange:G,_object:W,_objectField:B,_typeMetadata:q}).fromJSON;function a(t){var n=t.host,a=r(e);return{entityFqdn:"wix.data.v2.data_collection",method:"GET",methodFqn:"com.wixpress.cloud.data.api.collectionservice.DataCollectionService.ListDataCollections",url:H({protoPath:"/v2/collections",data:a,host:n}),params:p(a),transformResponse:o}}return a.fromReq=n,a}function K(e){var t=O(P,{}),r=t.toJSON,n=t.fromJSON,o=O(D,{_array:C,_dataCollection:x,_field:L,_numberRange:G,_object:W,_objectField:B,_typeMetadata:q}).fromJSON;function a(t){var n=t.host,a=r(e);return{entityFqdn:"wix.data.v2.data_collection",method:"POST",methodFqn:"com.wixpress.cloud.data.api.collectionservice.DataCollectionService.BulkGetDataCollections",url:H({protoPath:"/v2/bulk/collections/get",data:a,host:n}),data:a,transformResponse:o}}return a.fromReq=n,a}function Q(e){var t=O(z,{_array:C,_dataCollection:x,_field:L,_numberRange:G,_object:W,_objectField:B,_typeMetadata:q}),r=t.toJSON,n=t.fromJSON,o=O($,{_array:C,_dataCollection:x,_field:L,_numberRange:G,_object:W,_objectField:B,_typeMetadata:q}).fromJSON;function a(t){var n=t.host,a=r(e);return{entityFqdn:"wix.data.v2.data_collection",method:"PUT",methodFqn:"com.wixpress.cloud.data.api.collectionservice.DataCollectionService.UpdateDataCollection",url:H({protoPath:"/v2/collections",data:a,host:n}),data:a,transformResponse:o}}return a.fromReq=n,a}function Z(e){var t=O(F,{}),r=t.toJSON,n=t.fromJSON,o=O(M,{}).fromJSON;function a(t){var n=t.host,a=r(e);return{entityFqdn:"wix.data.v2.data_collection",method:"DELETE",methodFqn:"com.wixpress.cloud.data.api.collectionservice.DataCollectionService.DeleteDataCollection",url:H({protoPath:"/v2/collections/{dataCollectionId}",data:a,host:n}),params:p(a),transformResponse:o}}return a.fromReq=n,a}},5965:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.WIX_FAQ=t.WIX_SITE_SEARCH=t.WIX_MUSIC=t.BANDSINTOWN=t.WIX_PORTFOLIO=t.WIX_PRO_GALLERY=t.WIX_PHOTO_ALBUMS=t.WIX_HOTELS_RUNNER=t.WIX_VIDEO=t.WIX_GET_SUBSCRIBERS=t.INSTAGRAM_FEED=t.DEVIANTART_FEED=t.WIX_CHAT=t.WIX_RESTAURANTS_TABLE_RESERVATIONS=t.WIX_RESTAURANTS_MENUS_NEW=t.WIX_RESTAURANTS_MENUS=t.WIX_RESTAURANTS_ORDERS_NEW=t.WIX_RESTAURANTS_ORDERS=t.WIX_RESERVATIONS=t.NOTIFICATIONS=t.META_SITE=t.MEMBERS=t.MEMBERS_AREA_V2=t.MEMBERS_AREA=t.WIX_NEW_STORES=t.WIX_STORES=t.WIX_ECOM=t.PRICING_PLANS=t.WIX_FORUM=t.WIX_BOOKINGS=t.WIX_EVENTS=t.WIX_BLOG=t.WIX_HOTELS=t.ADMIN_PAGES=t.DASHBOARD_SALES=t.DASHBOARD_SUGGESTIONS=t.DASHBOARD_SETUP=t.BUSINESS_DASHBOARD=t.WIX_CODE_PLATFORM_VISIBILITY=t.WIX_ACCESSIBILITY_WIZARD=t.WIX_CODE_SITE_MONITORING=t.WIX_CODE_SECRETS_MANAGER=t.WIX_CODE_RELEASE_MANAGER=t.CLOUD_DATA_SCHEMA_NOTIFIER=t.OLD_BLOG=t.SITE_MEMBERS=t.DATA_BINDING=t.WIX_CODE_DUPLEXER=t.WIX_CODE_SITE_EXTENSION=t.WIX_CODE=void 0,t.getAppDependencies=t.FERA_REVIEWS=t.MEMBERS_ACCOUNT_INFO=t.MEMBERS_ABOUT=t.MY_SUBSCRIPTIONS=t.MAP_PLUGIN=t.WIX_REVIEWS=t.WISHLIST_BLOCKS=t.RESTAURANTS=t.WIX_FILE_SHARE=t.RICH_CONTENT=t.WIX_GROUPS=t.WIX_CHALLENGES=t.WIX_FORMS=void 0,t.WIX_CODE="wix-code",t.WIX_CODE_SITE_EXTENSION="CloudSiteExtension",t.WIX_CODE_DUPLEXER="af6d536e-0fc6-428b-a7f9-1d8cd6aa3703",t.DATA_BINDING="dataBinding",t.SITE_MEMBERS="SiteMembers",t.OLD_BLOG="79f391eb-7dfc-4adf-be6e-64434c4838d9",t.CLOUD_DATA_SCHEMA_NOTIFIER="f1fbeff1-05c3-4121-bdb5-75e74b6e9e51",t.WIX_CODE_RELEASE_MANAGER="8c41f3a6-47f7-40be-ad77-02a72cb2ddb3",t.WIX_CODE_SECRETS_MANAGER="4b10fcce-732d-4be3-9d46-801d271acda9",t.WIX_CODE_SITE_MONITORING="675bbcef-18d8-41f5-800e-131ec9e08762",t.WIX_ACCESSIBILITY_WIZARD="9699c03d-5c19-4a7c-a454-e8109a6e43fc",t.WIX_CODE_PLATFORM_VISIBILITY="8048f115-449b-4dab-b0e6-e09d5ffc8199",t.BUSINESS_DASHBOARD="a7597ab5-1ed4-458f-a5c1-5884d5e14281",t.DASHBOARD_SETUP="0750d046-d599-4cfc-9f6b-e9f4af169aa9",t.DASHBOARD_SUGGESTIONS="cead4297-02ee-4c0f-ae07-461f4ba71b3b",t.DASHBOARD_SALES="f95c72b1-84de-48ec-a61b-d96d61315ffe",t.ADMIN_PAGES="1514b01b-cb08-41b4-8582-0a88551ac769",t.WIX_HOTELS="135aad86-9125-6074-7346-29dc6a3c9bcf",t.WIX_BLOG="14bcded7-0066-7c35-14d7-466cb3f09103",t.WIX_EVENTS="140603ad-af8d-84a5-2c80-a0f60cb47351",t.WIX_BOOKINGS="13d21c63-b5ec-5912-8397-c3a5ddb27a97",t.WIX_FORUM="14724f35-6794-cd1a-0244-25fd138f9242",t.PRICING_PLANS="1522827f-c56c-a5c9-2ac9-00f9e6ae12d3",t.WIX_ECOM="1380b703-ce81-ff05-f115-39571d94dfcd",t.WIX_STORES="1380b703-ce81-ff05-f115-39571d94dfcd",t.WIX_NEW_STORES="215238eb-22a5-4c36-9e7b-e7c08025e04e",t.MEMBERS_AREA="14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9",t.MEMBERS_AREA_V2="b976560c-3122-4351-878f-453f337b7245",t.MEMBERS="14dbefd2-01b4-fb61-32a7-3abd44da4908",t.META_SITE="22bef345-3c5b-4c18-b782-74d4085112ff",t.NOTIFICATIONS="14f25924-5664-31b2-9568-f9c5ed98c9b1",t.WIX_RESERVATIONS="1475ab65-206b-d79a-856d-fa10bdb479ea",t.WIX_RESTAURANTS_ORDERS="13e8d036-5516-6104-b456-c8466db39542",t.WIX_RESTAURANTS_ORDERS_NEW="9a5d83fd-8570-482e-81ab-cfa88942ee60",t.WIX_RESTAURANTS_MENUS="13c1402c-27f2-d4ab-7463-ee7c89e07578",t.WIX_RESTAURANTS_MENUS_NEW="b278a256-2757-4f19-9313-c05c783bec92",t.WIX_RESTAURANTS_TABLE_RESERVATIONS="f9c07de2-5341-40c6-b096-8eb39de391fb",t.WIX_CHAT="14517e1a-3ff0-af98-408e-2bd6953c36a2",t.DEVIANTART_FEED="7d297b79-baed-46d7-ac58-4bd68dcb70d0",t.INSTAGRAM_FEED="14635256-b183-1c71-a4d2-f55179b80e8a",t.WIX_GET_SUBSCRIBERS="1375baa8-8eca-5659-ce9d-455b2009250d",t.WIX_VIDEO="14409595-f076-4753-8303-9a86f9f71469",t.WIX_HOTELS_RUNNER="826670ba-3a6b-4157-ac72-7c4fca9ce220",t.WIX_PHOTO_ALBUMS="13ff8629-c1fc-e289-e81f-bc8c8968e9d6",t.WIX_PRO_GALLERY="14271d6f-ba62-d045-549b-ab972ae1f70e",t.WIX_PORTFOLIO="d90652a2-f5a1-4c7c-84c4-d4cdcc41f130",t.BANDSINTOWN="1405ef82-0ee0-65fb-88a1-2f172aa3573c",t.WIX_MUSIC="13bb5d67-1add-e770-a71f-001277e17c57",t.WIX_SITE_SEARCH="1484cb44-49cd-5b39-9681-75188ab429de",t.WIX_FAQ="14c92d28-031e-7910-c9a8-a670011e062d",t.WIX_FORMS="14ce1214-b278-a7e4-1373-00cebd1bef7c",t.WIX_CHALLENGES="2936472a-a1ed-4ae5-9f71-614313a9f4e7",t.WIX_GROUPS="148c2287-c669-d849-d153-463c7486a694",t.RICH_CONTENT="949cfcc9-2a3f-4a96-bd6c-11d9d82763a4",t.WIX_FILE_SHARE="1537b24e-29d1-6d8f-b8e1-d6860f2f70b9",t.RESTAURANTS="9142e27e-2e30-4948-ad8f-7e128939efc4",t.WISHLIST_BLOCKS="a97c0203-062a-4dd5-97cf-a90f9800a13a",t.WIX_REVIEWS="a95a5fce-e370-4402-9ce4-96956acc747d",t.MAP_PLUGIN="c5fedde3-63c7-4041-a5fb-c77bbe6308dc",t.MY_SUBSCRIPTIONS="2bef2abe-7abe-43da-889c-53c1500a328c",t.MEMBERS_ABOUT="14dbef06-cc42-5583-32a7-3abd44da4908",t.MEMBERS_ACCOUNT_INFO="14cffd81-5215-0a7f-22f8-074b0e2401fb",t.FERA_REVIEWS="c9064755-5cc8-4faf-a5a6-41a0150a6640";var r={};t.getAppDependencies=function(e){return r[e]||[]}},9540:function(e){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}var r="User",n="Error",o="EDM",a=function(e,r){e&&"object"===t(e)&&(e.errorGroup=r)};e.exports={markUserError:function(e){return a(e,r)},isUserError:function(e){return e&&e.errorGroup===r},markAppError:function(e){return a(e,n)},isAppError:function(e){return e&&e.errorGroup===n},markEdmError:function(e){return a(e,o)},isEdmError:function(e){return e&&e.errorGroup===o},markError:a,isMarked:function(e){return!!e&&void 0!==e.errorGroup},USER_ERROR_GROUP:r,APP_ERROR_GROUP:n,EDM_ERROR_GROUP:o,UNKNOWN_ERROR_GROUP:"Unknown"}},3164:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}var d=r(9540),p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(u,e);var t,r,n,c=s(u);function u(){var e;a(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=c.call.apply(c,[this].concat(r)),Error.captureStackTrace&&Error.captureStackTrace(l(e),e.constructor),e.name=u.name,d.markUserError(l(e)),e}return t=u,r&&o(t.prototype,r),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error));e.exports={UserCodeError:p}},3065:function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(9540),s=r(3164);e.exports=o(o({},s),i)},5882:function(e,t,r){"use strict";t.PL=t.ah=void 0;var n=r(4725);Object.defineProperty(t,"ah",{enumerable:!0,get:function(){return n.convertToCustomFormat}}),Object.defineProperty(t,"PL",{enumerable:!0,get:function(){return n.convertFromCustomFormat}});var o=r(6658)},4455:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConvertersComposer=void 0;var n=r(1561),o=function(e){return null!==e&&"object"==typeof e},a=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._converters=e}return e.prototype.convertToCustomFormat=function(e,t,r){var n;if(void 0===t&&(t=new Set),void 0===r&&(r=!1),o(e)){if(t.has(e))throw new TypeError("Converting circular structure to JSON");t.add(e)}if(Array.isArray(e))return this._convertArray(e,t);var a=null===(n=this._findConverterToCustomFormat(e))||void 0===n?void 0:n.convertToCustomFormat(e,r);return o(e)?this._convertObject(a,e,t):a},e.prototype.convertFromCustomFormat=function(e){var t,r=this,a=e;return Array.isArray(e)?a=e.map((function(e){return r.convertFromCustomFormat(e)})):o(e)&&(a=(0,n.mapValues)(e,this.convertFromCustomFormat.bind(this))),null===(t=this._findConverterFromCustomFormat(a))||void 0===t?void 0:t.convertFromCustomFormat(a)},e.prototype._convertObject=function(e,t,r){var o,a=this;return o="function"==typeof e.toJSON?(0,n.mapValues)(e.toJSON(),(function(e){return a.convertToCustomFormat(e,r)})):(0,n.mapValues)(e,(function(e){return a.convertToCustomFormat(e,r)})),r.delete(t),o},e.prototype._convertArray=function(e,t){var r=this,n=e.map((function(e){return r.convertToCustomFormat(e,t,!0)}));return t.delete(e),n},e.prototype._findConverterFromCustomFormat=function(e){return this._converters.find((function(t){return t.canConvertFromCustomFormat(e)}))},e.prototype._findConverterToCustomFormat=function(e){return this._converters.find((function(t){return t.canConvertToCustomFormat(e)}))},e}();t.ConvertersComposer=a},5362:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DateConverter=void 0;var r=function(){function e(){}return e.prototype.canConvertToCustomFormat=function(e){return e instanceof Date},e.prototype.convertToCustomFormat=function(e){return{$date:e.toISOString()}},e.prototype.canConvertFromCustomFormat=function(e){return this._isObjectWith$Date(e)&&"string"==typeof e.$date&&(t=e.$date,!Number.isNaN(Date.parse(t)));var t},e.prototype.convertFromCustomFormat=function(e){return new Date(e.$date)},e.prototype._isObjectWith$Date=function(e){return!!e&&"object"==typeof e&&"$date"in e},e}();t.DateConverter=r},5574:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultConverter=void 0;var r=function(){function e(){}return e.prototype.canConvertToCustomFormat=function(){return!0},e.prototype.convertToCustomFormat=function(e,t){return t&&void 0===e?null:e},e.prototype.canConvertFromCustomFormat=function(){return!0},e.prototype.convertFromCustomFormat=function(e){return e},e}();t.DefaultConverter=r},4725:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertFromCustomFormat=t.convertToCustomFormat=void 0;var n=r(4455),o=r(5362),a=r(5574),i=new n.ConvertersComposer(new o.DateConverter,new a.DefaultConverter);t.convertToCustomFormat=function(e){return i.convertToCustomFormat(e)};t.convertFromCustomFormat=function(e){return i.convertFromCustomFormat(e)}},1561:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapValues=void 0,t.mapValues=function(e,t){var r={};return Object.keys(e).forEach((function(n){var o=t(e[n]);void 0!==o&&(r[n]=o)})),r}},6658:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBackendPackageNameFromImportName=t.generateBackendPackageWebMethodUrl=t.generatePackageWebMethodUrl=t.exceptionToWebMethodPayload=t.resultToWebMethodPayload=void 0;var n=r(4725);t.resultToWebMethodPayload=function(e,t){var r=t?JSON.parse(JSON.stringify(e,t)):(0,n.convertToCustomFormat)(e);return void 0===r?{}:{result:r}};t.exceptionToWebMethodPayload=function(e,t,r){return void 0===t&&(t=function(e){return e}),void 0===r&&(r=function(e){return""}),{result:e instanceof Error?{message:t(e.message),name:e.name,stack:r(e.stack),code:e.code,_elementoryError:!0}:e,exception:!0}};var o=function(e,t){return"/_webMethods/packages/".concat(encodeURIComponent(e),"/").concat(t,".ajax")};t.generatePackageWebMethodUrl=o;t.generateBackendPackageWebMethodUrl=function(e,t){return o("".concat(e,"-backend"),t)};t.getBackendPackageNameFromImportName=function(e){return"".concat(e,"-backend")}},4479:function(e,t,r){"use strict";const n=r(7030),o=r(1290),a="currentUser";e.exports.X=e=>n(e)&&e[o]===a},8031:function(e,t,r){"use strict";const n=r(7030),{DATA_BINDING:o}=r(5965),a=r(1290),i=o;e.exports.X=e=>n(e)&&e[a]===i},1290:function(e){"use strict";e.exports="@resolver"},3878:function(e,t,r){"use strict";const n=r(7030),o=r(1290),a="userInput";e.exports.X=e=>n(e)&&e[o]===a},8582:function(e){"use strict";e.exports=(e,t)=>t.reduce(((e,t)=>e.chain((e=>t.map((t=>Array.isArray(t)?e.concat([t]):e.concat(t)))))),e.of([]))},7538:function(e){e.exports.l={COMPONENT:"COMPONENT_SCOPE",GLOBAL:"GLOBAL_SCOPE"}},477:function(e,t,r){const n=r(4169),o=r(3297),a=r(6939);e.exports={union:n,Result:o,Maybe:a}},6939:function(e){"use strict";const t=e=>({map:r=>t(r(e)),chain:t=>t(e),fold:(t,r)=>r(e),getOrElse:()=>e,orElse:()=>t(e),filter:n=>n(e)?t(e):r()}),r=()=>({map:()=>r(),chain:()=>r(),fold:e=>e(),getOrElse:e=>e,orElse:e=>e(),filter:()=>r()}),n={Just:t,Nothing:r,fromNullable:e=>null!=e?t(e):r(),of:e=>t(e)};e.exports=n},3297:function(e){"use strict";const t=e=>({map:r=>t(r(e)),chain:t=>t(e),fold:(t,r)=>r(e),getOrElse:()=>e,merge:()=>e}),r=e=>({map:()=>r(e),chain:()=>r(e),fold:t=>t(e),getOrElse:e=>e,merge:()=>e}),n={Ok:t,Error:r,try:e=>{try{return t(e())}catch(e){return r(e)}},fromNullable:(e,n)=>null!=e?t(e):r(n),fromMaybe:(e,n)=>e.fold((()=>r(n)),(e=>t(e))),of:e=>t(e)};e.exports=n},4169:function(e){const t=Symbol.for("union-type-any-symbol"),r=e=>r=>{const n=Object.keys(r);for(const t of n)if(t===e.name)return r[t](e.payload);if(r[t])return r[t]();throw new Error(`Variant "${e.name}" not covered in pattern with keys [${n}].\nThis could mean you did not include all variants in your Union's matchWith function.`)},n=(e,t,n={})=>Object.keys(t).reduce(((o,a)=>(o[a]=((e,t,n,o)=>{const a=Symbol(`[${e}:${t}]`),i=(...e)=>{const i=n(...e),s={matchWith:r({name:t,payload:i}),toString:()=>t,[a]:!0};return Object.keys(o).forEach((e=>{s[e]=o[e](s)})),s};return i.hasInstance=e=>e&&!0===e[a],i})(e,a,t[a],n),o)),{});n.any=t,e.exports=n},3121:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultMaxPageSize=void 0;const n=r(3810);t.DefaultMaxPageSize={[n.PagingMode.Offset]:1e3,[n.PagingMode.Cursor]:100}},2295:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AllowedFilterOperator=t.FieldType=void 0,function(e){e.number="number",e.text="text",e.image="image",e.boolean="boolean",e.document="document",e.url="url",e.richText="richtext",e.date="date",e.dateTime="datetime",e.video="video",e.reference="reference",e.multiReference="multi-reference",e.pageLink="pagelink",e.object="object",e.mediaGallery="media-gallery",e.address="address",e.stringArray="array<string>",e.color="color",e.audio="audio",e.time="time",e.array="array",e.richContent="rich-content",e.language="language",e.documentArray="array<document>",e.any="any"}(t.FieldType||(t.FieldType={})),function(e){e.eq="eq",e.ne="ne",e.lt="lt",e.lte="lte",e.gt="gt",e.gte="gte",e.hasSome="hasSome",e.hasAll="hasAll",e.contains="contains",e.startsWith="startsWith",e.endsWith="endsWith",e.urlized="urlized"}(t.AllowedFilterOperator||(t.AllowedFilterOperator={}))},2722:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Operator=void 0,function(e){e.and="$and",e.or="$or",e.not="$not",e.eq="$eq",e.ne="$ne",e.lt="$lt",e.lte="$lte",e.gt="$gt",e.gte="$gte",e.hasSome="$hasSome",e.hasAll="$hasAll",e.contains="$contains",e.startsWith="$startsWith",e.endsWith="$endsWith",e.urlized="$urlized"}(t.Operator||(t.Operator={}))},4361:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(9166),t),o(r(2722),t),o(r(2295),t),o(r(3530),t),o(r(3810),t),o(r(47),t),o(r(3121),t)},9166:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Direction=void 0,function(e){e.asc="asc",e.desc="desc"}(t.Direction||(t.Direction={}))},3810:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PagingMode=void 0,function(e){e.Offset="OFFSET",e.Cursor="CURSOR"}(t.PagingMode||(t.PagingMode={}))},47:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHARED_PLUGIN_ID=t.MULTILINGUAL_PLUGIN_ID=t.UrlizedFormat=t.URLIZED_PLUGIN_ID=t.SINGLE_ITEM_ID=t.SINGLES_PLUGIN_ID=t.GRID_APPLESS_PLUGIN_ID=t.PublishingStatus=t.DRAFT_DATE_FIELD_KEY=t.PUBLISH_DATE_FIELD_KEY=t.PUBLISH_STATUS_FIELD_KEY=t.PUBLISHING_PLUGIN_ID=void 0,t.PUBLISHING_PLUGIN_ID="publishing",t.PUBLISH_STATUS_FIELD_KEY="_publishStatus",t.PUBLISH_DATE_FIELD_KEY="_publishDate",t.DRAFT_DATE_FIELD_KEY="_draftDate",function(e){e.DRAFT="DRAFT",e.PUBLISHED="PUBLISHED"}(t.PublishingStatus||(t.PublishingStatus={})),t.GRID_APPLESS_PLUGIN_ID="gridAppless",t.SINGLES_PLUGIN_ID="singleItem",t.SINGLE_ITEM_ID="SINGLE_ITEM_ID",t.URLIZED_PLUGIN_ID="urlized",function(e){e.PLAIN="plain",e.ORIGINAL="original"}(t.UrlizedFormat||(t.UrlizedFormat={})),t.MULTILINGUAL_PLUGIN_ID="multilingual",t.SHARED_PLUGIN_ID="shared"},3530:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=t.PermissionRole=t.DataOperation=void 0,function(e){e.aggregate="aggregate",e.bulkInsert="bulkInsert",e.bulkRemove="bulkRemove",e.bulkSave="bulkSave",e.bulkUpdate="bulkUpdate",e.count="count",e.distinct="distinct",e.find="find",e.get="get",e.insert="insert",e.insertReference="insertReference",e.isReferenced="isReferenced",e.queryReferenced="queryReferenced",e.remove="remove",e.removeReference="removeReference",e.replaceReferences="replaceReferences",e.save="save",e.truncate="truncate",e.update="update"}(t.DataOperation||(t.DataOperation={})),function(e){e.anyone="anyone",e.siteMember="siteMember",e.siteMemberAuthor="siteMemberAuthor",e.admin="admin"}(t.PermissionRole||(t.PermissionRole={})),function(e){e.driver="driver",e.docstore="docstore",e.app="app",e.external="external",e.dynamicApplication="dynamicApplication",e.staticAppSchema="staticAppSchema"}(t.Storage||(t.Storage={}))},5675:function(e){var t=Object.prototype.toString;e.exports=function(e){var r=typeof e;return"undefined"===r?"undefined":null===e?"null":!0===e||!1===e||e instanceof Boolean?"boolean":"string"===r||e instanceof String?"string":"number"===r||e instanceof Number?"number":"function"===r||e instanceof Function?void 0!==e.constructor.name&&"Generator"===e.constructor.name.slice(0,9)?"generatorfunction":"function":void 0!==Array.isArray&&Array.isArray(e)?"array":e instanceof RegExp?"regexp":e instanceof Date?"date":"[object RegExp]"===(r=t.call(e))?"regexp":"[object Date]"===r?"date":"[object Arguments]"===r?"arguments":"[object Error]"===r?"error":"[object Promise]"===r?"promise":function(e){return e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}(e)?"buffer":"[object Set]"===r?"set":"[object WeakSet]"===r?"weakset":"[object Map]"===r?"map":"[object WeakMap]"===r?"weakmap":"[object Symbol]"===r?"symbol":"[object Map Iterator]"===r?"mapiterator":"[object Set Iterator]"===r?"setiterator":"[object String Iterator]"===r?"stringiterator":"[object Array Iterator]"===r?"arrayiterator":"[object Int8Array]"===r?"int8array":"[object Uint8Array]"===r?"uint8array":"[object Uint8ClampedArray]"===r?"uint8clampedarray":"[object Int16Array]"===r?"int16array":"[object Uint16Array]"===r?"uint16array":"[object Int32Array]"===r?"int32array":"[object Uint32Array]"===r?"uint32array":"[object Float32Array]"===r?"float32array":"[object Float64Array]"===r?"float64array":"object"}},3741:function(){if("function"!=typeof self.queueMicrotask&&(self.queueMicrotask=function(e){Promise.resolve().then(e).catch((e=>setTimeout((()=>{throw e}))))}),"function"!=typeof Array.prototype.at){const e=Reflect.getPrototypeOf(Int8Array);for(const t of[Array,String,e])Object.defineProperty(t.prototype,"at",{value:function(e){if((e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this[e]},writable:!0,enumerable:!1,configurable:!0})}},5554:function(e){"use strict";var t="%[a-f0-9]{2}",r=new RegExp("("+t+")|([^%]+?)","gi"),n=new RegExp("("+t+")+","gi");function o(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],o(r),o(n))}function a(e){try{return decodeURIComponent(e)}catch(a){for(var t=e.match(r)||[],n=1;n<t.length;n++)t=(e=o(t,n).join("")).match(r)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},r=n.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(e){var o=a(r[0]);o!==r[0]&&(t[r[0]]=o)}r=n.exec(e)}t["%C2"]="\ufffd";for(var i=Object.keys(t),s=0;s<i.length;s++){var c=i[s];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},857:function(e,t,r){var n=r(7772).Symbol;e.exports=n},3366:function(e,t,r){var n=r(857),o=r(2107),a=r(7157),i=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?o(e):a(e)}},1242:function(e,t,r){var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},7353:function(e,t,r){var n=r(241)(Object.getPrototypeOf,Object);e.exports=n},2107:function(e,t,r){var n=r(857),o=Object.prototype,a=o.hasOwnProperty,i=o.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=a.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(e){}var o=i.call(e);return n&&(t?e[s]=r:delete e[s]),o}},7157:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},241:function(e){e.exports=function(e,t){return function(r){return e(t(r))}}},7772:function(e,t,r){var n=r(1242),o="object"==typeof self&&self&&self.Object===Object&&self,a=n||o||Function("return this")();e.exports=a},5125:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},7030:function(e,t,r){var n=r(3366),o=r(7353),a=r(5125),i=Function.prototype,s=Object.prototype,c=i.toString,l=s.hasOwnProperty,u=c.call(Object);e.exports=function(e){if(!a(e)||"[object Object]"!=n(e))return!1;var t=o(e);if(null===t)return!0;var r=l.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&c.call(r)==u}},7320:function(e){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,a){for(var i,s,c=o(e),l=1;l<arguments.length;l++){for(var u in i=Object(arguments[l]))r.call(i,u)&&(c[u]=i[u]);if(t){s=t(i);for(var d=0;d<s.length;d++)n.call(i,s[d])&&(c[s[d]]=i[s[d]])}}return c}},4126:function(e,t,r){"use strict";var n=r(2938),o=r(7320),a=r(5554);function i(e,t){return t.encode?t.strict?n(e):encodeURIComponent(e):e}function s(e){return Array.isArray(e)?e.sort():"object"==typeof e?s(Object.keys(e)).sort((function(e,t){return Number(e)-Number(t)})).map((function(t){return e[t]})):e}function c(e){var t=e.indexOf("?");return-1===t?"":e.slice(t+1)}function l(e,t){var r=function(e){var t;switch(e.arrayFormat){case"index":return function(e,r,n){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=r):n[e]=r};case"bracket":return function(e,r,n){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],r):n[e]=[r]:n[e]=r};default:return function(e,t,r){void 0!==r[e]?r[e]=[].concat(r[e],t):r[e]=t}}}(t=o({arrayFormat:"none"},t)),n=Object.create(null);return"string"!=typeof e?n:(e=e.trim().replace(/^[?#&]/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),o=t.shift(),i=t.length>0?t.join("="):void 0;i=void 0===i?null:a(i),r(a(o),i,n)})),Object.keys(n).sort().reduce((function(e,t){var r=n[t];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?e[t]=s(r):e[t]=r,e}),Object.create(null))):n}t.extract=c,t.parse=l,t.stringify=function(e,t){!1===(t=o({encode:!0,strict:!0,arrayFormat:"none"},t)).sort&&(t.sort=function(){});var r=function(e){switch(e.arrayFormat){case"index":return function(t,r,n){return null===r?[i(t,e),"[",n,"]"].join(""):[i(t,e),"[",i(n,e),"]=",i(r,e)].join("")};case"bracket":return function(t,r){return null===r?i(t,e):[i(t,e),"[]=",i(r,e)].join("")};default:return function(t,r){return null===r?i(t,e):[i(t,e),"=",i(r,e)].join("")}}}(t);return e?Object.keys(e).sort(t.sort).map((function(n){var o=e[n];if(void 0===o)return"";if(null===o)return i(n,t);if(Array.isArray(o)){var a=[];return o.slice().forEach((function(e){void 0!==e&&a.push(r(n,e,a.length))})),a.join("&")}return i(n,t)+"="+i(o,t)})).filter((function(e){return e.length>0})).join("&"):""},t.parseUrl=function(e,t){return{url:e.split("?")[0]||"",query:l(c(e),t)}}},2938:function(e){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}},7375:function(e,t){"use strict";var r=Object.prototype.hasOwnProperty;function n(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function o(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var n,a,i=[];for(a in"string"!=typeof t&&(t="?"),e)if(r.call(e,a)){if((n=e[a])||null!=n&&!isNaN(n)||(n=""),a=o(a),n=o(n),null===a||null===n)continue;i.push(a+"="+n)}return i.length?t+i.join("&"):""},t.parse=function(e){for(var t,r=/([^=?#&]+)=?([^&]*)/g,o={};t=r.exec(e);){var a=n(t[1]),i=n(t[2]);null===a||null===i||a in o||(o[a]=i)}return o}},4438:function(e){"use strict";var t=function(e){return null!=e&&"function"==typeof e.run&&"boolean"==typeof e.isQueued&&(!e.resultActionCreator||"function"==typeof e.resultActionCreator)};e.exports={isEffect:t,isImmediateEffect:function(e){return t(e)&&!e.isQueued},isQueuedEffect:function(e){return t(e)&&e.isQueued}}},6286:function(e,t,r){"use strict";var n=r(6356);e.exports={createMiddleware:n}},6356:function(e,t,r){"use strict";var n=r(4520).isPromise,o=r(8620),a=o.sequence,i=o.try_,s=r(5676),c=r(4438),l=c.isEffect,u=c.isImmediateEffect,d=c.isQueuedEffect,p=function(e){return function(t){return e.push(t),function(){var r=e.indexOf(t);r>=0&&e.splice(r,1)}}};e.exports=function(){var e=[],t=[],r=Promise.resolve();return{middleware:function(o){return function(c){return function(p){var f=function(e){var t=i((function(){return e.run()}));return t.fold((function(r){var n=e.resultActionCreator?o.dispatch(e.resultActionCreator(!0,r)):Promise.resolve();return[t,n]}),(function(r){if(n(r)){var a=r.then((function(t){return e.resultActionCreator?o.dispatch(e.resultActionCreator(!1,t)):Promise.resolve()}),(function(t){throw e.resultActionCreator&&o.dispatch(e.resultActionCreator(!0,t)).catch((function(){})),t}));return[t,a]}var i=e.resultActionCreator?o.dispatch(e.resultActionCreator(!1,r)):Promise.resolve();return[t,i]}))},h=function(){var e=void 0,n=new Promise((function(t){return e=t})),o=new Promise((function(e,o){var a=r=r.then((function(){return n})).then(function(e,t){return function(r){if(r.length>0){var n=r.filter(d).map(f);return Promise.all(n.map((function(e){return e[1]}))).then((function(){return e()}),t),Promise.all(n.map((function(e){return e[0]})).map((function(e){return e.fold((function(e){return Promise.reject(e)}),(function(e){return e}))}))).catch(t)}return e(),Promise.resolve()}}(e,o),o).catch(o).then((function(){a===r&&t.slice().forEach((function(e){return e()}))}))}));return{promise:o,trigger:e}},m=function(e){var t=h(),r=t.promise,n=t.trigger;return i((function(){return function(e){var t=e.filter(u).map(f);return t.map((function(e){return e[0]})).map((function(e){return e.fold((function(e){throw e}),(function(e){return e}))})),t.map((function(e){return e[1]})).map((function(e){return e.catch((function(){}))})),e.filter(d)}(e)})).fold((function(e){throw n([]),e}),(function(e){return n(e),r}))},g=o.getState(),y=c(p),v=o.getState();if(g!==v){var w=s(g,v);return a(e.slice().map((function(e){return i((function(){return e(w)||[]}))}))).fold((function(e){throw e}),(function(e){return m(e.filter(l))}))}return Promise.resolve(y)}}},subscribe:p(e),onIdle:p(t)}}},8620:function(e){"use strict";var t=function(){},r=function(e,r){return e.fold(r.Error||t,r.Ok||t)},n=function(e){return{map:function(e){return this},fold:function(t,r){return t(e)},chain:function(e){return this},match:function(e){return r(this,e)},value:e}},o=function e(t){return{map:function(r){return e(r(t))},fold:function(e,r){return r(t)},chain:function(e){return e(t)},match:function(e){return r(this,e)},value:t}},a={Left:n,Right:o};e.exports={Either:a,sequence:function(e){return e.reduce((function(e,t){return e.chain((function(e){return t.map((function(t){return e.concat(t)}))}))}),o([]))},try_:function(e){try{return o(e())}catch(e){return n(e)}}}},4520:function(e){"use strict";e.exports.isPromise=function(e){return null!=e&&"function"==typeof e.then}},5676:function(e){"use strict";e.exports=function(e,t){var r={from:e,to:t,hasChanged:function(r){return r(e)!==r(t)},hasChangedToMatch:function(e,n){return r.hasChanged(e)&&n(e(t))},hasChangedToTrue:function(e){return r.hasChangedToMatch(e,(function(e){return!0===e}))},hasChangedToFalse:function(e){return r.hasChangedToMatch(e,(function(e){return!1===e}))},hasChangedToNull:function(e){return r.hasChangedToMatch(e,(function(e){return null===e}))},hasChangedToNotNull:function(e){return r.hasChangedToMatch(e,(function(e){return null!==e}))}};return r}},7245:function(e){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},5174:function(e){var t=Object.prototype.hasOwnProperty;function r(e){return"[Throws: "+(e?e.message:"?")+"]"}function n(e){var n=[];return function e(o){if(null===o||"object"!=typeof o)return o;if(-1!==n.indexOf(o))return"[Circular]";if(n.push(o),"function"==typeof o.toJSON)try{var a=e(o.toJSON());return n.pop(),a}catch(e){return r(e)}if(Array.isArray(o)){var i=o.map(e);return n.pop(),i}var s=Object.keys(o).reduce((function(n,a){return n[a]=e(function(e,n){if(t.call(e,n))try{return e[n]}catch(e){return r(e)}return e[n]}(o,a)),n}),{});return n.pop(),s}(e)}e.exports=function(e,t,r){return JSON.stringify(n(e),t,r)},e.exports.ensureProperties=n},4846:function(e,t,r){"use strict";var n=r(7245),o=r(7375),a=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,i=/[\n\r\t]/g,s=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,u=/^[a-zA-Z]:/;function d(e){return(e||"").toString().replace(a,"")}var p=[["#","hash"],["?","query"],function(e,t){return m(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],f={hash:1,query:1};function h(e){var t,n=("undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{}).location||{},o={},a=typeof(e=e||n);if("blob:"===e.protocol)o=new y(unescape(e.pathname),{});else if("string"===a)for(t in o=new y(e,{}),f)delete o[t];else if("object"===a){for(t in e)t in f||(o[t]=e[t]);void 0===o.slashes&&(o.slashes=s.test(e.href))}return o}function m(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function g(e,t){e=(e=d(e)).replace(i,""),t=t||{};var r,n=l.exec(e),o=n[1]?n[1].toLowerCase():"",a=!!n[2],s=!!n[3],c=0;return a?s?(r=n[2]+n[3]+n[4],c=n[2].length+n[3].length):(r=n[2]+n[4],c=n[2].length):s?(r=n[3]+n[4],c=n[3].length):r=n[4],"file:"===o?c>=2&&(r=r.slice(2)):m(o)?r=n[4]:o?a&&(r=r.slice(2)):c>=2&&m(t.protocol)&&(r=n[4]),{protocol:o,slashes:a||m(o),slashesCount:c,rest:r}}function y(e,t,r){if(e=(e=d(e)).replace(i,""),!(this instanceof y))return new y(e,t,r);var a,s,c,l,f,v,w=p.slice(),I=typeof t,_=this,E=0;for("object"!==I&&"string"!==I&&(r=t,t=null),r&&"function"!=typeof r&&(r=o.parse),a=!(s=g(e||"",t=h(t))).protocol&&!s.slashes,_.slashes=s.slashes||a&&t.slashes,_.protocol=s.protocol||t.protocol||"",e=s.rest,("file:"===s.protocol&&(2!==s.slashesCount||u.test(e))||!s.slashes&&(s.protocol||s.slashesCount<2||!m(_.protocol)))&&(w[3]=[/(.*)/,"pathname"]);E<w.length;E++)"function"!=typeof(l=w[E])?(c=l[0],v=l[1],c!=c?_[v]=e:"string"==typeof c?~(f="@"===c?e.lastIndexOf(c):e.indexOf(c))&&("number"==typeof l[2]?(_[v]=e.slice(0,f),e=e.slice(f+l[2])):(_[v]=e.slice(f),e=e.slice(0,f))):(f=c.exec(e))&&(_[v]=f[1],e=e.slice(0,f.index)),_[v]=_[v]||a&&l[3]&&t[v]||"",l[4]&&(_[v]=_[v].toLowerCase())):e=l(e,_);r&&(_.query=r(_.query)),a&&t.slashes&&"/"!==_.pathname.charAt(0)&&(""!==_.pathname||""!==t.pathname)&&(_.pathname=function(e,t){if(""===e)return t;for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=r.length,o=r[n-1],a=!1,i=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),i++):i&&(0===n&&(a=!0),r.splice(n,1),i--);return a&&r.unshift(""),"."!==o&&".."!==o||r.push(""),r.join("/")}(_.pathname,t.pathname)),"/"!==_.pathname.charAt(0)&&m(_.protocol)&&(_.pathname="/"+_.pathname),n(_.port,_.protocol)||(_.host=_.hostname,_.port=""),_.username=_.password="",_.auth&&(~(f=_.auth.indexOf(":"))?(_.username=_.auth.slice(0,f),_.username=encodeURIComponent(decodeURIComponent(_.username)),_.password=_.auth.slice(f+1),_.password=encodeURIComponent(decodeURIComponent(_.password))):_.username=encodeURIComponent(decodeURIComponent(_.auth)),_.auth=_.password?_.username+":"+_.password:_.username),_.origin="file:"!==_.protocol&&m(_.protocol)&&_.host?_.protocol+"//"+_.host:"null",_.href=_.toString()}y.prototype={set:function(e,t,r){var a=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(r||o.parse)(t)),a[e]=t;break;case"port":a[e]=t,n(t,a.protocol)?t&&(a.host=a.hostname+":"+t):(a.host=a.hostname,a[e]="");break;case"hostname":a[e]=t,a.port&&(t+=":"+a.port),a.host=t;break;case"host":a[e]=t,c.test(t)?(t=t.split(":"),a.port=t.pop(),a.hostname=t.join(":")):(a.hostname=t,a.port="");break;case"protocol":a.protocol=t.toLowerCase(),a.slashes=!r;break;case"pathname":case"hash":if(t){var i="pathname"===e?"/":"#";a[e]=t.charAt(0)!==i?i+t:t}else a[e]=t;break;case"username":case"password":a[e]=encodeURIComponent(t);break;case"auth":var s=t.indexOf(":");~s?(a.username=t.slice(0,s),a.username=encodeURIComponent(decodeURIComponent(a.username)),a.password=t.slice(s+1),a.password=encodeURIComponent(decodeURIComponent(a.password))):a.username=encodeURIComponent(decodeURIComponent(t))}for(var l=0;l<p.length;l++){var u=p[l];u[4]&&(a[u[1]]=a[u[1]].toLowerCase())}return a.auth=a.password?a.username+":"+a.password:a.username,a.origin="file:"!==a.protocol&&m(a.protocol)&&a.host?a.protocol+"//"+a.host:"null",a.href=a.toString(),a},toString:function(e){e&&"function"==typeof e||(e=o.stringify);var t,r=this,n=r.host,a=r.protocol;a&&":"!==a.charAt(a.length-1)&&(a+=":");var i=a+(r.protocol&&r.slashes||m(r.protocol)?"//":"");return r.username?(i+=r.username,r.password&&(i+=":"+r.password),i+="@"):r.password?(i+=":"+r.password,i+="@"):"file:"!==r.protocol&&m(r.protocol)&&!n&&"/"!==r.pathname&&(i+="@"),(":"===n[n.length-1]||c.test(r.hostname)&&!r.port)&&(n+=":"),i+=n+r.pathname,(t="object"==typeof r.query?e(r.query):r.query)&&(i+="?"!==t.charAt(0)?"?"+t:t),r.hash&&(i+=r.hash),i}},y.extractProtocol=g,y.location=h,y.trimLeft=d,y.qs=o,e.exports=y},8022:function(e,t,r){var n=r(4481),o=r(6426),a=o;a.v1=n,a.v4=o,e.exports=a},8725:function(e){for(var t=[],r=0;r<256;++r)t[r]=(r+256).toString(16).substr(1);e.exports=function(e,r){var n=r||0,o=t;return[o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]]].join("")}},9157:function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}},4481:function(e,t,r){var n,o,a=r(9157),i=r(8725),s=0,c=0;e.exports=function(e,t,r){var l=t&&r||0,u=t||[],d=(e=e||{}).node||n,p=void 0!==e.clockseq?e.clockseq:o;if(null==d||null==p){var f=a();null==d&&(d=n=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==p&&(p=o=16383&(f[6]<<8|f[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:c+1,g=h-s+(m-c)/1e4;if(g<0&&void 0===e.clockseq&&(p=p+1&16383),(g<0||h>s)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=h,c=m,o=p;var y=(1e4*(268435455&(h+=122192928e5))+m)%4294967296;u[l++]=y>>>24&255,u[l++]=y>>>16&255,u[l++]=y>>>8&255,u[l++]=255&y;var v=h/4294967296*1e4&268435455;u[l++]=v>>>8&255,u[l++]=255&v,u[l++]=v>>>24&15|16,u[l++]=v>>>16&255,u[l++]=p>>>8|128,u[l++]=255&p;for(var w=0;w<6;++w)u[l+w]=d[w];return t||i(u)}},6426:function(e,t,r){var n=r(9157),o=r(8725);e.exports=function(e,t,r){var a=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||n)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var s=0;s<16;++s)t[a+s]=i[s];return t||o(i)}},9479:function(t){"use strict";t.exports=e},7544:function(e){e.exports=function(e,t){return t.get?t.get.call(e):t.value},e.exports.__esModule=!0,e.exports.default=e.exports},2440:function(e){e.exports=function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}},e.exports.__esModule=!0,e.exports.default=e.exports},2132:function(e){e.exports=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7481:function(e,t,r){var n=r(7544),o=r(2132);e.exports=function(e,t){var r=o(e,t,"get");return n(e,r)},e.exports.__esModule=!0,e.exports.default=e.exports},4070:function(e,t,r){var n=r(2440),o=r(2132);e.exports=function(e,t,r){var a=o(e,t,"set");return n(e,a,r),r},e.exports.__esModule=!0,e.exports.default=e.exports},6290:function(e,t,r){var n=r(7739);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},8064:function(e,t,r){var n=r(7425).default;e.exports=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7739:function(e,t,r){var n=r(7425).default,o=r(8064);e.exports=function(e){var t=o(e,"string");return"symbol"===n(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},7425:function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={exports:{}};return n[e].call(r.exports,r,r.exports,a),r.exports}a.m=n,a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},r=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},a.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var o=Object.create(null);a.r(o);var i={};t=t||[null,r({}),r([]),r(r)];for(var s=2&n&&e;"object"==typeof s&&!~t.indexOf(s);s=r(s))Object.getOwnPropertyNames(s).forEach((function(t){i[t]=function(){return e[t]}}));return i.default=function(){return e},a.d(o,i),o},a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,r){return a.f[r](e,t),t}),[]))},a.u=function(e){return"formulajs.chunk.min.js"},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="https://static.parastorage.com/services/dbsm-viewer-app/a6ca619ee7384ce3652417195e7ea46f50a2e2844b54fd05df4857da/webworker/",function(){var e={143:1};a.f.i=function(t,r){e[t]||importScripts(a.p+a.u(t))};var t=("undefined"!=typeof self?self:this).webpackJsonp__wix_dbsm_viewer_app=("undefined"!=typeof self?self:this).webpackJsonp__wix_dbsm_viewer_app||[],r=t.push.bind(t);t.push=function(t){var n=t[0],o=t[1],i=t[2];for(var s in o)a.o(o,s)&&(a.m[s]=o[s]);for(i&&i(a);n.length;)e[n.pop()]=1;r(t)}}();var i={};return function(){"use strict";a.r(i),a.d(i,{createControllers:function(){return km},initAppForPage:function(){return Um}});var e={};a.r(e),a.d(e,{READ:function(){return Ye},READ_WRITE:function(){return He},WRITE:function(){return Xe}});var t={};a.r(t),a.d(t,{t:function(){return Sr},ROUTER_DATASET:function(){return Rr}});var r={};a.r(r),a.d(r,{DBSMViewer:function(){return Do},UserErrors:function(){return No},WixData:function(){return Ao}});var n=a(6290),o=a.n(n),s=a(7481),c=a.n(s),l=a(4070),u=a.n(l),d=a(5965);const p={"tpa/addVariantToCart":async({wixSdk:e,currentItem:t})=>{var r;const{window:n,location:o,site:a}=e,i=await a.getPublicAPI(d.WIX_STORES),s="Mobile"===n.formFactor;if(t.managedVariant)await i.cart.addProducts([{productId:t.productId,quantity:1,options:{choices:t.choices}}]),s?await i.navigate.toCart():i.cart.showMinicart();else if(s){const e=await i.product.getRelativeProductUrl({id:t.productId});null===(r=o.to)||void 0===r||r.call(o,e)}else await i.product.openQuickView(t.productId)},"tpa/addProductToCart":async({wixSdk:e,currentItem:t})=>{var r;const{window:n,location:o,site:a}=e,i=await a.getPublicAPI(d.WIX_STORES),s="Mobile"===n.formFactor;var c;(c=t).customFields&&c.customFields.length>0||Object.keys(c.productOptions||{}).length>0?s?null===(r=o.to)||void 0===r||r.call(o,t.productPageUrl):await i.product.openQuickView(t._id):(await i.cart.addProducts([{productId:t._id,quantity:1}]),s?await i.navigate.toCart():i.cart.showMinicart())},"tpa/quicklyViewProduct":async({wixSdk:e,currentItem:t})=>{const r=await e.site.getPublicAPI(d.WIX_STORES);await r.product.openQuickView(t._id)},"tpa/purchasePricingPlan":async({wixSdk:e,currentItem:t})=>{await e["pricing-plans"].checkout.startOnlinePurchase(t._id)}};a(3741);var f=a(4846),h=a.n(f);var m=a(4361);const{text:g,boolean:y,number:v,dateTime:w,date:I,richText:_,url:E,reference:b,stringArray:S}=m.FieldType,R=[g,_,y,w,I,b,v,E,S];var T=a(8022),O=a.n(T);const C=({httpClient:e})=>({reportFormEventToAutomationCreator:()=>async({detailedEventPayload:t,eventUTCTime:r})=>{const n={eventIdentifier:{eventUniqueId:O().v4(),eventType:"form/form/code",sourceUniqueId:"675bbcef-18d8-41f5-800e-131ec9e08762"},eventUTCTime:r,detailedEventPayload:t};await e.post("/_api/action-triggers-server/v1/report-event",n)}});class P extends Error{static withMessage(e){return class extends(this){constructor(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];super(e,...r)}}}static with(e){let{message:t,options:r}=e;return class extends(this){constructor(e){super(t||e instanceof String&&e,{...r,...e instanceof Object?e:{}})}}}constructor(e,t,r){void 0===r&&(r="DataBindingError"),super(e,t);const{cause:n,...o}=t||{};this.name=r,this.options=o,this.cause||(this.cause=n)}toString(){return this.cause?super.toString()+"\nCaused by "+this.cause.toString():super.toString()}}o()(P,"scopes",{USER_SCOPE:"userCodeZone",APPLICATION_SCOPE:"applicationCodeZone",SERVER_SCOPE:"wixDataCodeZone"});class D extends P{constructor(e,t){super(e,t,"AppError"),this.scope=P.scopes.APPLICATION_SCOPE}}class N extends P{constructor(e,t,r){void 0===r&&(r="UserError"),super(e,t,r),this.scope=P.scopes.USER_SCOPE}}class A extends N{constructor(e,t){const{code:r,...n}=t;super(e,n,"DatasetError"),this.code=r}}class x extends N{constructor(e,t){super(e,t,"ServerValidationError")}}o()(x,"codes",["WD_SITE_IN_TEMPLATE_MODE","WD_PERMISSION_DENIED","WD_COLLECTION_DELETED","WD_VALIDATION_FAILED"]);class F extends P{constructor(e,t){const{code:r,...n}=t;super(e,n,"ServerError"),this.scope=P.scopes.SERVER_SCOPE,this.code=r}}class M extends P{constructor(e){super("Async operation error wasn't handled",e,"UnhandledPromiseRejection")}}function L(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var U=new WeakMap;const k=new class{constructor(){L(this,U,{writable:!0,value:new Proxy({},{get(e,t){if(e[t])return e[t];throw new ReferenceError("There is no "+t+" in context. Check if the context has been already set")}})})}set(e){Object.entries(e).forEach((e=>{let[t,r]=e;c()(this,U)[t]=r}))}get(){return c()(this,U)}},j=k.get(),V=k.set.bind(k);function G(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var W=new WeakMap,B=new WeakMap;class q{constructor(e){G(this,W,{writable:!0,value:void 0}),G(this,B,{writable:!0,value:new Y}),u()(this,W,e)}dispatch(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return c()(this,B).has(e)?c()(this,B).get(e).reduce(((t,n)=>[...t,j.errorReporting(n,D.with({message:e+" listener failed",options:{extra:c()(this,W)}}))(c()(this,W),...r)]),[]):void 0}subscribe(e,t){return e.constructor===Object?Object.entries(e).reduce(((e,t)=>{let[r,n]=t;return[...e,this.subscribe(r,n)]}),[]):(c()(this,B).getOrDefault(e,new X).add(t),()=>this.unsubscribe(e,t))}unsubscribe(e,t){return c()(this,B).has(e)&&c()(this,B).get(e).delete(t)}}class z{constructor(){const e={};return e.promise=new Promise(((t,r)=>{e.resolve=function(){return t(...arguments),e.promise},e.reject=function(){return r(...arguments),e.promise}})),e}}const $=(e,t)=>function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];try{const r=e(...n);return(null==r?void 0:r.catch)instanceof Function?r.catch((e=>t(e,...n))):r}catch(e){return t(e,...n)}};class H{constructor(e){return null!=e&&e.then?e:{then:t=>t(e)}}}class Y extends Map{getOrDefault(e,t){return this.has(e)?this.get(e):this.set(e,t).get(e)}find(e){const[,t]=Array.from(this).find((t=>{let[r,n]=t;return e(n,r,this)}))||[];return t}}class X extends Set{reduce(e,t){return Array.from(this).reduce(((t,r,n)=>e(t,r,n,this)),t)}}const J="unknown",K=e=>{const t=e.split("/"),r=t[t.length-3],n=t[t.length-2];if(!/^\d+\.\d+\.\d+$/.test(n))throw new Error(`Invalid version string ${n}`);return{appName:r,version:n}},Q=e=>{try{const{appName:t,version:r}=K(e);return`${t}@${r}`}catch(e){return J}},Z=()=>{const e=new Error;return e.stack?e.stack.toString():""},ee=e=>{const t=Z().match(new RegExp(`https?://.*?${e}.*?.js`));return t?t[0]:""},te="detailsRepeaterRole",re="detailsDatasetRole",ne="filterInputRole",oe="textRole",ae="galleryRole",ie="mediaGalleryRole",se="ratingsDisplayRole",ce="dropdownOptionsRole",le="MobuiPickerOptionsRole",ue="gridRole",de="datepickerRole",pe="radioGroupRole",fe="uploadButtonRole",he="repeaterRole",me="pageRole",ge="paginationRole",ye="addressInputRole",ve="googleMapRole",we="timePickerRole",Ie="progressBarRole",_e="selectionTagsOptionsRole",Ee="signatureInputRole",be="richContentRole",Se="userInputFilterDropdownRole",Re="userInputFilterCheckboxRole",Te="userInputFilterRadioGroupRole",Oe="userInputFilterCheckboxGroupRole",Ce="userInputFilterSelectionTagsRole",Pe="userInputFilterRangeSliderRole",De=[Se,Re,Te,Oe,Ce,Pe],Ne="RESET_ALL",Ae=[Se,Te,Oe,Ce],xe=new Map([["new","add"]]),Fe="dbsm-viewer-app";function Me(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}class Le{constructor(e){let{collectionId:t,collectionName:r,componentType:n,datasetId:a,datasetMode:i,datasetType:s,fieldType:c,filteredBy:l,id:u,numberOfResults:p,pageId:f,pageUrl:h,viewMode:m}=e;o()(this,"type",Le.types.EVENT),o()(this,"event",void 0),this.event={pageId:f,src:79,ver:Q(ee(Fe)),app_name:Fe,app_id:d.DATA_BINDING,evid:u,ds_id:a,ds_type:s,mode:i,collection_name:r,collection_id:t,component_type:n,filtered_by:l,field_type:c,number_of_results:p,viewmode:m,page_url:h}}}o()(Le,"types",{EVENT:"event",ERROR:"error"});class Ue extends Le{constructor(e){let{message:t,code:r}=e;super({}),o()(this,"type",Le.types.ERROR),this.event={evid:10,dsc:t,errn:t,errc:r||1}}}var ke=new WeakMap,je=new WeakMap,Ve=new WeakMap;class Ge{constructor(e,t,r){o()(this,"onStart",(e=>u()(this,ke,e))),o()(this,"onEnd",(e=>u()(this,je,e))),Me(this,ke,{writable:!0,value:()=>{}}),Me(this,je,{writable:!0,value:()=>{}}),Me(this,Ve,{writable:!0,value:{[Ge.types.TRACE]:e=>(c()(this,ke).call(this),new H(e()).then((e=>(c()(this,je).call(this),e)))),[Ge.types.START]:()=>c()(this,ke).call(this),[Ge.types.END]:()=>c()(this,je).call(this)}});const{type:n,fn:a}=t instanceof Function?{type:Ge.types.TRACE,fn:t}:{type:t};this.name=e,this.params=r,this.run=()=>c()(this,Ve)[n](a)}}o()(Ge,"types",{START:"START",END:"END",TRACE:"TRACE"});class We{static with(e){let{category:t,message:r,level:n,data:o}=e;return class extends(this){constructor(e){let{category:a=t,message:i=r,level:s=n,data:c}=e;super({category:a,message:i,level:s,data:c||o?{...c,...o}:void 0})}}}constructor(e){let{category:t,message:r,level:n="info",data:o}=e;this.event={category:t,message:r,level:n,data:o}}}var Be=new WeakMap,qe=new WeakMap;class ze{static with(e){return class extends(this){constructor(t,r){void 0===r&&(r={}),super(t,{...e,...r})}}}constructor(e,t){o()(this,"messages",[]),Me(this,Be,{writable:!0,value:{[ze.types.COMPONENT.BOUND]:e=>{let{collectionId:t,description:r}=e;return r?["[Dataset - Connected] '"+t+"' collection to element '"+this._getComponentPresentation()+"':",r]:["[Dataset - Connected] '"+t+"' collection to element '"+this._getComponentPresentation()+"'"]},[ze.types.COMPONENT.FILLED]:e=>{let{collectionId:t,description:r}=e;return["[Dataset - Populated] '"+t+"' collection into element '"+this._getComponentPresentation()+"':",r]},[ze.types.DS_API.CALLED]:e=>{let{methodName:t,args:r}=e;return 0===r.length?["[wix-dataset."+t+"] called"]:["[wix-dataset."+t+"] called with (",JSON.stringify(r),")"]},[ze.types.DS_API.SUCCED]:e=>{let{methodName:t,result:r}=e;return void 0===r?["[wix-dataset."+t+"] returned"]:["[wix-dataset."+t+"] returned with (",JSON.stringify(r),")"]},[ze.types.DS_API.DEPRECATED]:e=>{let{methodName:t,replacementMethodName:r}=e;return["[wix-dataset."+t+"] is deprecated"+(r?"; use [wix-dataset."+r+"] instead":"")]},[ze.types.DS_API.REGISTERED]:e=>{let{methodName:t}=e;return["["+t+" callback registered] on wix-dataset"]},[ze.types.DS_API.TRIGGERED]:e=>{let{eventName:t,eventArgs:r=[]}=e;if(r.length){const e=r.map((e=>e instanceof Error?e.toString():e));return["["+t+" event] triggered on wix-dataset with (",JSON.stringify(e),")"]}return["["+t+" event] triggered on wix-dataset"]}}}),Me(this,qe,{writable:!0,value:{}}),u()(this,qe,t),this.messages=c()(this,Be)[e](t)}_getComponentPresentation(){const{component:{nickname:e,parentRepeater:t}}=c()(this,qe);return t?"#"+t.nickname+".#"+e:"#"+e}}o()(ze,"types",{COMPONENT:{BOUND:"COMPONENT_BOUND",FILLED:"COMPONENT_FILLED"},DS_API:{CALLED:"DS_API_CALLED",SUCCED:"DS_API_SUCCED",DEPRECATED:"DS_API_DEPRECATED",REGISTERED:"DS_API_REGISTERED",TRIGGERED:"DS_API_TRIGGERED"}});class $e{constructor(e,t){void 0===t&&(t="log"),o()(this,"message",void 0),o()(this,"level",void 0),this.message=e,this.level=t}}const He="READ_WRITE",Ye="READ",Xe="WRITE";var Je=(e,t)=>[ue,ge].includes(e)||t&&t.properties&&Object.keys(t.properties).length>0,Ke=a(9479),Qe=a(477);const Ze=Object.keys,et=(Object.values,Object.entries,{AddressInput:{viewerType:["wixui.AddressInput"],sdkType:"$w.AddressInput"},Text:{viewerType:["wysiwyg.viewer.components.WRichText"],sdkType:"$w.Text"},Image:{viewerType:["wysiwyg.viewer.components.WPhoto","wixui.ImageX"],sdkType:"$w.Image"},TextInput:{viewerType:["wysiwyg.viewer.components.inputs.TextInput"],sdkType:"$w.TextInput"},TimePicker:{viewerType:["wixui.TimePicker"],sdkType:"$w.TimePicker"},Button:{viewerType:["wysiwyg.viewer.components.SiteButton"],sdkType:"$w.Button"},IconButton:{viewerType:["wysiwyg.common.components.imagebutton.viewer.ImageButton"],sdkType:"$w.IconButton"},RatingsDisplay:{viewerType:["wixui.RatingsDisplay"],sdkType:"$w.RatingsDisplay"},RatingsInput:{viewerType:["wixui.RatingsInput"],sdkType:"$w.RatingsInput"},VerticalMenu:{viewerType:["wysiwyg.common.components.verticalmenu.viewer.VerticalMenu"],sdkType:"$w.VerticalMenu"},Checkbox:{viewerType:["wysiwyg.viewer.components.inputs.Checkbox"],sdkType:"$w.Checkbox"},Gallery:{viewerType:["wysiwyg.viewer.components.MatrixGallery","wysiwyg.viewer.components.SliderGallery","wysiwyg.viewer.components.SlideShowGallery","wysiwyg.viewer.components.PaginatedGridGallery","wysiwyg.viewer.components.tpapps.TPAWidget"],sdkType:"$w.Gallery"},Dropdown:{viewerType:["wysiwyg.viewer.components.inputs.ComboBoxInput","wixui.Dropdown"],sdkType:"$w.Dropdown"},TextBox:{viewerType:["wysiwyg.viewer.components.inputs.TextAreaInput"],sdkType:"$w.TextBox"},RichTextBox:{viewerType:["wixui.RichTextBox"],sdkType:"$w.RichTextBox"},Table:{viewerType:["wysiwyg.viewer.components.Grid"],sdkType:"$w.Table"},DatePicker:{viewerType:["wysiwyg.viewer.components.inputs.DatePicker"],sdkType:"$w.DatePicker"},RadioButtonGroup:{viewerType:["wysiwyg.viewer.components.inputs.RadioGroup"],sdkType:"$w.RadioButtonGroup"},UploadButton:{viewerType:["wysiwyg.viewer.components.inputs.UploadButton","wixui.FileUploaderNew","wysiwyg.viewer.components.inputs.FileUploader"],sdkType:"$w.UploadButton"},ClassicSection:{viewerType:["wysiwyg.viewer.components.ClassicSection"],sdkType:"$w.Section"},Column:{viewerType:["wysiwyg.viewer.components.Column"],sdkType:"$w.Column"},Video:{viewerType:["wysiwyg.viewer.components.Video"],sdkType:"$w.Video"},VideoPlayer:{viewerType:["wixui.VideoPlayer"],sdkType:"$w.VideoPlayer"},VideoBox:{viewerType:["wysiwyg.viewer.components.MediaPlayer"],sdkType:"$w.VideoBox"},MusicPlayer:{viewerType:["wixui.MusicPlayer"],sdkType:"$w.AudioPlayer"},Repeater:{viewerType:["wysiwyg.viewer.components.Repeater"],sdkType:"$w.Repeater"},Pagination:{viewerType:["wixui.Pagination"],sdkType:"$w.Pagination"},Page:{viewerType:["mobile.core.components.Page"],sdkType:"$w.Page"},Document:{viewerType:["fake-document-type"],sdkType:"$w.Document"},MediaContainer:{viewerType:["wysiwyg.viewer.components.MediaContainer"],sdkType:"$w.Container"},StripColumnsContainer:{viewerType:["wysiwyg.viewer.components.StripColumnsContainer"],sdkType:"$w.ColumnStrip"},ToggleSwitch:{viewerType:["wixui.ToggleSwitch"],sdkType:"$w.Switch"},Slider:{viewerType:["wixui.Slider"],sdkType:"$w.Slider"},RangeSlider:{viewerType:["wixui.RangeSlider"],sdkType:"$w.RangeSlider"},StylableButton:{viewerType:["wixui.StylableButton"],sdkType:"$w.StylableButton"},GoogleMap:{viewerType:["wysiwyg.viewer.components.GoogleMap"],sdkType:"$w.GoogleMap"},CheckboxGroup:{viewerType:["wysiwyg.viewer.components.inputs.CheckboxGroup"],sdkType:"$w.CheckboxGroup"},ProgressBar:{viewerType:["wixui.ProgressBar"],sdkType:"$w.ProgressBar"},VectorImage:{viewerType:["wysiwyg.viewer.components.VectorImage","wysiwyg.viewer.components.svgshape.SvgShape"],sdkType:"$w.VectorImage"},SelectionTags:{viewerType:["wixui.SelectionTagsList"],sdkType:"$w.SelectionTags"},Section:{viewerType:["responsive.components.Section"],sdkType:"$w.Section"},SignatureInput:{viewerType:["wixui.SignatureInput"],sdkType:"$w.SignatureInput"},RefComponent:{viewerType:["wysiwyg.viewer.components.RefComponent"],sdkType:"$w.RefComponent"},RichContent:{viewerType:["wysiwyg.viewer.components.tpapps.TPAWidget"],sdkType:"$w.RichContent"},AppController:{viewerType:["platform.components.AppController"],sdkType:"$w.AppController"}});var tt=(0,Ke.mapValues)(et,(({sdkType:e})=>e));Ze(et).reduce(((e,t)=>(e.concat(et[t].viewerType),e)),[]),Ze(et).map((e=>et[e].viewerType)).reduce(((e,t)=>e.concat(t)),[]).reduce(((e,t)=>(e[t.split(".").reverse()[0]]=t,e)),{}),Ze(et).map((e=>et[e].sdkType));const{AddressInput:rt,RatingsInput:nt,TextInput:ot,TextBox:at,RichTextBox:it,Checkbox:st,DatePicker:ct,RadioButtonGroup:lt,Dropdown:ut,UploadButton:dt,ToggleSwitch:pt,Slider:ft,TimePicker:ht,CheckboxGroup:mt,SelectionTags:gt,SignatureInput:yt}=tt,vt=[{type:rt,role:ye},{type:nt,role:"ratingsInputRole"},{type:ot,role:"textInputRole"},{type:at,role:"textAreaRole"},{type:it,role:"richTextBoxRole"},{type:st,role:"checkboxRole"},{type:ct,role:de},{type:lt,role:pe},{type:ut,role:"dropdownRole"},{type:dt,role:fe},{type:pt,role:"toggleSwitchRole"},{type:ft,role:"sliderRole"},{type:ht,role:we},{type:mt,role:"checkboxGroupRole"},{type:gt,role:"selectionTagsRole"},{type:yt,role:Ee}],wt=(vt.map((e=>e.type)),vt.map((e=>e.role))),It=e=>e.some((e=>{return t=(0,Ke.get)(e,"role"),wt.includes(t);var t}));var _t=(e,t)=>(e=>[Xe,He].includes(e))(e)&&(e=>e.some((e=>"save"===(0,Ke.get)(e,"config.events.onClick.action"))))(t)&&It(t);function Et(e){return Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Et(e)}function bt(e){var t=function(e,t){if("object"!==Et(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Et(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Et(t)?t:String(t)}function St(e,t,r){return(t=bt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Tt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rt(Object(r),!0).forEach((function(t){St(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ot(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Ct="function"==typeof Symbol&&Symbol.observable||"@@observable",Pt=function(){return Math.random().toString(36).substring(7).split("").join(".")},Dt={INIT:"@@redux/INIT"+Pt(),REPLACE:"@@redux/REPLACE"+Pt(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Pt()}};function Nt(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function At(e,t,r){var n;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(Ot(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(Ot(1));return r(At)(e,t)}if("function"!=typeof e)throw new Error(Ot(2));var o=e,a=t,i=[],s=i,c=!1;function l(){s===i&&(s=i.slice())}function u(){if(c)throw new Error(Ot(3));return a}function d(e){if("function"!=typeof e)throw new Error(Ot(4));if(c)throw new Error(Ot(5));var t=!0;return l(),s.push(e),function(){if(t){if(c)throw new Error(Ot(6));t=!1,l();var r=s.indexOf(e);s.splice(r,1),i=null}}}function p(e){if(!Nt(e))throw new Error(Ot(7));if(void 0===e.type)throw new Error(Ot(8));if(c)throw new Error(Ot(9));try{c=!0,a=o(a,e)}finally{c=!1}for(var t=i=s,r=0;r<t.length;r++){(0,t[r])()}return e}function f(e){if("function"!=typeof e)throw new Error(Ot(10));o=e,p({type:Dt.REPLACE})}function h(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(Ot(11));function r(){e.next&&e.next(u())}return r(),{unsubscribe:t(r)}}})[Ct]=function(){return this},e}return p({type:Dt.INIT}),(n={dispatch:p,subscribe:d,getState:u,replaceReducer:f})[Ct]=h,n}function xt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}const Ft={collectionName:null,readWriteType:Ye,filter:null,sort:null,includes:null,nested:[],pageSize:12,deferred:!1};var Mt="SET_CURRENT_RECORD",Lt="UPDATE_FIELDS",Ut="REFRESH_CURRENT_RECORD",kt="REFRESH_CURRENT_VIEW",jt="INCREMENT_NUM_PAGES_TO_SHOW",Vt="SET_DEFAULT_RECORD",Gt="GO_TO_INDEX",Wt="GO_TO_NEXT_PAGE",Bt="GO_TO_PREVIOUS_PAGE",qt="LOAD_PAGE",zt="GET_RECORD_BY_INDEX_RESULT",$t="CURRENT_VIEW_UPDATED",Ht="REVERT_CHANGES",Yt="RECORD_REVERTED",Xt="SAVE_RECORD",Jt="SAVE_RECORD_RESULT",Kt="REMOVE_CURRENT_RECORD",Qt="REMOVE_CURRENT_RECORD_RESULT",Zt="NEW_RECORD",er="NEW_RECORD_RESULT",tr="REFRESH",rr="SET_USER_INPUT_OPTION_VALUES";const nr={INIT:"INIT",SET_PAGINATION_DATA:"SET_PAGINATION_DATA"};var or=nr,ar=e=>{let{controllerConfig:t={},connections:r=[],isScoped:n=!1,datasetType:o}=e;return{type:nr.INIT,datasetConfig:t.dataset||{},connections:r,isScoped:n,datasetType:o}},ir=e=>({type:nr.SET_PAGINATION_DATA,paginationData:e}),sr="SET_FILTER",cr="SET_SORT",lr="SET_IS_DATASET_READY",ur="SET_FIXED_FILTER_ITEM";const dr=e=>null==e?void 0:e.readWriteType;var pr=e=>null==e?void 0:e.pageSize,fr=dr;const hr=e=>{let{error:t,payload:r}=e;return t?Qe.Result.Error(r):Qe.Result.Ok(r)},mr={currentRecord:{index:void 0,data:void 0,fieldsToUpdate:void 0,updateSource:void 0},lastSavedRecord:{index:void 0,data:void 0},desiredIndex:void 0,refreshCurrentRecord:!1,removeCurrentRecord:!1,newRecordIndex:null,refreshCurrentView:!1,refreshController:!1,setFilterCalled:!1,revertChanges:!1,saveRecord:!1,defaultRecord:void 0,isForm:void 0,page:{numPagesToShow:1,offset:0,size:Ft.pageSize},schema:void 0,userFilterInitialData:null,isApplyUserInputFiltersActionBindingPresent:!1},gr=e=>((e,t)=>(0,Ke.inRange)(e,_r(t).offset,_r(t).offset+_r(t).size))(Er(e),e),yr=e=>e.some((e=>"applyUserInputFilters"===(0,Ke.get)(e,"config.events.onClick.action"))),vr=(e,t,r,n)=>{const o={...e,currentRecord:{index:t,data:r,updateSource:n},desiredIndex:t,refreshCurrentRecord:!1,refreshController:!1};return gr(o)?o:{...o,page:{...o.page,offset:Math.floor(o.currentRecord.index/o.page.size)*o.page.size,numPagesToShow:1}}},wr=e=>e.page.size,Ir=e=>e.currentRecord.data,_r=e=>e.page,Er=e=>e.currentRecord.index;var br={reducer:function(e,t){switch(void 0===e&&(e=mr),t.type){case Mt:{const{recordIndex:r,record:n,updateSource:o}=t;return vr(e,r,n,o)}case Zt:return{...e,newRecordIndex:t.atIndex};case er:return hr(t).fold((()=>({...e,newRecordIndex:null})),(t=>({...vr(e,e.newRecordIndex,t),newRecordIndex:null})));case Lt:{const{fieldsToUpdate:r,updateSource:n}=t;return{...e,currentRecord:{...e.currentRecord,fieldsToUpdate:r,updateSource:n}}}case Gt:return{...e,desiredIndex:t.index};case zt:return hr(t).fold((()=>({...e,desiredIndex:e.currentRecord.index,refreshCurrentRecord:!1,refreshController:!1})),(t=>t.matchWith({Record:t=>{let{index:r,record:n}=t;return vr(e,r,n)},InvalidIndex:()=>({...e,desiredIndex:e.currentRecord.index,refreshCurrentRecord:!1}),NoRecord:()=>vr(e,null,null)})));case Ut:return{...e,refreshCurrentRecord:!0};case Kt:return{...e,removeCurrentRecord:!0};case Qt:return hr(t).fold((()=>({...e,removeCurrentRecord:!1})),(()=>({...e,removeCurrentRecord:!1,refreshCurrentRecord:!0})));case kt:return{...e,refreshCurrentView:!0};case $t:return{...e,refreshCurrentView:!1};case Ht:return{...e,revertChanges:!0};case Yt:return{...e,revertChanges:!1};case Vt:{const{record:r}=t;return{...e,defaultRecord:r}}case or.INIT:{const{datasetConfig:r,connections:n}=t,o=pr(r),a=fr(r);return{...e,isForm:_t(a,n),page:{...e.page,size:o||e.page.size},isApplyUserInputFiltersActionBindingPresent:yr(n)}}case or.SET_PAGINATION_DATA:{const r={...e,page:{...e.page,...t.paginationData}};return gr(r)?r:{...r,desiredIndex:r.page.offset}}case Wt:{const t=_r(e),r=wr(e),n=t.offset+r,o={...e,page:{...e.page,numPagesToShow:1,offset:n}};return gr(o)?o:{...o,desiredIndex:o.page.offset}}case Bt:{const t=_r(e),r=Math.max(0,t.offset-t.size),n={...e,page:{...e.page,numPagesToShow:1,offset:r}};return gr(n)?n:{...n,desiredIndex:n.page.offset}}case qt:{const{size:r}=_r(e),n={...e,page:{...e.page,numPagesToShow:1,offset:r*(t.pageNumber-1)}};return gr(n)?n:{...n,desiredIndex:n.page.offset}}case jt:return{...e,page:{...e.page,numPagesToShow:e.page.numPagesToShow+1}};case Xt:return{...e,saveRecord:!0,lastSavedRecord:{index:void 0,data:void 0}};case Jt:return hr(t).fold((()=>({...e,saveRecord:!1})),(t=>({...e,saveRecord:!1,lastSavedRecord:{index:e.currentRecord.index,data:t}})));case sr:return{...e,setFilterCalled:!0,refreshController:!0};case cr:case tr:return{...e,refreshController:!0};case rr:return{...e,userFilterInitialData:t.userFilterInitialData};default:return e}},getPaginationData:_r,hasCurrentRecord:e=>!!Ir(e),selectDefaultDraft:e=>({...e.defaultRecord}),selectCurrentRecord:Ir,selectCurrentRecordIndex:Er,selectDesiredRecordIndex:e=>e.desiredIndex,selectFieldsToUpdate:e=>e.currentRecord.fieldsToUpdate,selectLastSavedRecord:e=>e.lastSavedRecord.data,selectLastSavedRecordIndex:e=>e.lastSavedRecord.index,selectRefreshCurrentRecord:e=>e.refreshCurrentRecord,selectRemoveCurrentRecord:e=>e.removeCurrentRecord,selectRefreshController:e=>e.refreshController,selectSetFilterCalled:e=>e.setFilterCalled,selectRefreshCurrentView:e=>e.refreshCurrentView,selectRevertChanges:e=>e.revertChanges,selectSaveRecord:e=>e.saveRecord,selectUpdateSource:e=>e.currentRecord.updateSource,selectNewRecordIndex:e=>e.newRecordIndex,isDuringSave:e=>e.saveRecord,isForm:e=>e.isForm,getUserFilterInitialData:e=>e.userFilterInitialData,selectIsApplyUserInputFiltersActionBindingPresent:e=>e.isApplyUserInputFiltersActionBindingPresent};const Sr="dataset",Rr="router_dataset",Tr=e=>{var t;const{prop:r,fieldName:n}=null!=(t=null==e?void 0:e.userInputFilter)?t:{};return!(!r||!n)},{WRITE:Or}=e,{ROUTER_DATASET:Cr}=t,Pr=["collectionName","readWriteType","includes","cursor"],Dr=["filter","sort"],Nr=e=>(0,Ke.pick)(e,Pr),Ar=e=>(0,Ke.pick)(e,Dr),xr=e=>{let{datasetConfig:t,connections:r,isScoped:n,datasetType:o}=e;const a=o===Cr,i=r.some((e=>{let{role:t}=e;return t===re})),s=n,c=!n,l=t.readWriteType===Or;return{datasetIsRouter:a,datasetIsMaster:i,datasetIsVirtual:s,datasetIsReal:c,datasetIsDeferred:Boolean(t.deferred)&&!(s||i||a||l),dynamicPageNavComponentsShouldBeLinked:a&&c,userFilterConnectionProps:r.filter((e=>{let{role:t,config:r}=e;return De.includes(t)&&Tr(r)})).map((e=>{let{config:{userInputFilter:t},role:r}=e;return{...t,role:r}}))}},Fr=(e,t)=>({...e,transientData:{...e.transientData,...t}}),Mr={canonicalData:Nr(Ft),canonicalCalculatedData:{},transientData:{isDatasetReady:!1,...Ar(Ft)}};var Lr={reducer:function(e,t){switch(void 0===e&&(e=Mr),t.type){case or.INIT:{const{datasetConfig:r,connections:n,isScoped:o,datasetType:a}=t;return{...e,canonicalData:{...e.canonicalData,...Nr(t.datasetConfig)},canonicalCalculatedData:xr({datasetConfig:r,connections:n,isScoped:o,datasetType:a}),transientData:{...e.transientData,...Ar(t.datasetConfig)}}}case sr:{const{filter:r}=t;return Fr(e,{filter:r})}case cr:{const{sort:r}=t;return Fr(e,{sort:r})}case lr:{const{isDatasetReady:r}=t;return Fr(e,{isDatasetReady:r})}case ur:{const{fixedFilterItem:r}=t;return Fr(e,{fixedFilterItem:r})}default:return e}},isWriteOnly:e=>(0,Ke.get)(e,["canonicalData","readWriteType"])===Xe,isReadOnly:e=>(0,Ke.get)(e,["canonicalData","readWriteType"])===Ye,getReadWriteMode:e=>(0,Ke.get)(e,["canonicalData","readWriteType"]),isDatasetReady:e=>(0,Ke.get)(e,["transientData","isDatasetReady"]),isDatasetConfigured:e=>!!(0,Ke.get)(e,["canonicalData","collectionName"]),isCursorPagingRequired:e=>!!(0,Ke.get)(e,["canonicalData","cursor"]),isDatasetRouter:e=>{let{canonicalCalculatedData:{datasetIsRouter:t}}=e;return t},isDatasetMaster:e=>{let{canonicalCalculatedData:{datasetIsMaster:t}}=e;return t},isDatasetVirtual:e=>{let{canonicalCalculatedData:{datasetIsVirtual:t}}=e;return t},isDatasetReal:e=>{let{canonicalCalculatedData:{datasetIsReal:t}}=e;return t},isDatasetDeferred:e=>{let{canonicalCalculatedData:{datasetIsDeferred:t}}=e;return t},shouldLinkDynamicPageNavComponents:e=>{let{canonicalCalculatedData:{dynamicPageNavComponentsShouldBeLinked:t}}=e;return t},getUserFilterConnectionProps:e=>{let{canonicalCalculatedData:{userFilterConnectionProps:t}}=e;return t},getFixedFilterItem:e=>(0,Ke.get)(e,["transientData","fixedFilterItem"]),getFilter:e=>(0,Ke.get)(e,["transientData","filter"]),getSort:e=>(0,Ke.get)(e,["transientData","sort"]),getIncludes:e=>(0,Ke.get)(e,["canonicalData","includes"])||[],getCollectionName:e=>(0,Ke.get)(e,["canonicalData","collectionName"])},Ur="NEXT_DYNAMIC_PAGE_URL_RESULT",kr="PREVIOUS_DYNAMIC_PAGE_URL_RESULT",jr="INITIALIZE";const Vr=(0,Qe.union)("DynamicPageUrlLoadState",{Empty(){},Loading(){},Loaded:e=>{if(!e)throw new Error("url must exist");return{url:e}}},{hasUrl:e=>()=>e.matchWith({Empty:()=>!1,Loading:()=>!1,Loaded:()=>!0}),shouldLoadUrl:e=>()=>e.matchWith({Empty:()=>!1,Loading:()=>!0,Loaded:()=>!1})});Vr.fromUrl=e=>e?Vr.Loaded(e):Vr.Empty();var Gr=Vr;const{fromUrl:Wr}=Vr,Br={nextDynamicPageUrl:Gr.Empty(),previousDynamicPageUrl:Gr.Empty()},qr=e=>{const t=(e=>{const t=e.filter((e=>!!(0,Ke.get)(e,"config.events.onClick.action")));return new Set(t.map((e=>(0,Ke.get)(e,"config.events.onClick.action"))))})(e),r=e=>e?Gr.Loading():Gr.Empty();return{nextDynamicPageUrl:r(t.has("nextDynamicPage")),previousDynamicPageUrl:r(t.has("previousDynamicPage"))}};var zr={reducer:function(e,t){switch(void 0===e&&(e=Br),t.type){case jr:return{...e,...qr(t.connections)};case Ur:return{...e,nextDynamicPageUrl:Gr.fromUrl(t.payload)};case kr:return{...e,previousDynamicPageUrl:Gr.fromUrl(t.payload)};default:return e}},selectNextDynamicPageUrl:e=>e.nextDynamicPageUrl,selectPreviousDynamicPageUrl:e=>e.previousDynamicPageUrl},$r=function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var o=t[n];0,"function"==typeof e[o]&&(r[o]=e[o])}var a,i=Object.keys(r);try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if(void 0===r(void 0,{type:Dt.INIT}))throw new Error(Ot(12));if(void 0===r(void 0,{type:Dt.PROBE_UNKNOWN_ACTION()}))throw new Error(Ot(13))}))}(r)}catch(e){a=e}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var n=!1,o={},s=0;s<i.length;s++){var c=i[s],l=r[c],u=e[c],d=l(u,t);if(void 0===d){t&&t.type;throw new Error(Ot(14))}o[c]=d,n=n||d!==u}return(n=n||i.length!==Object.keys(e).length)?o:e}}({records:br.reducer,config:Lr.reducer,dynamicPages:zr.reducer});const Hr=e=>Lr.getCollectionName(e.config),Yr=e=>Lr.getFilter(e.config),Xr=e=>Lr.getSort(e.config),Jr=e=>br.getPaginationData(e.records),Kr=e=>Lr.getReadWriteMode(e.config),Qr=e=>Lr.isDatasetConfigured(e.config),Zr=e=>Lr.isDatasetReady(e.config),en=e=>Lr.isReadOnly(e.config),tn=e=>Lr.isWriteOnly(e.config),rn=e=>(e=>br.hasCurrentRecord(e.records))(e)&&!en(e),nn=e=>Lr.isDatasetRouter(e.config),on=e=>Lr.isDatasetMaster(e.config),an=e=>Lr.isDatasetVirtual(e.config),sn=e=>Lr.isDatasetReal(e.config),cn=e=>Lr.isDatasetDeferred(e.config),ln=e=>Lr.shouldLinkDynamicPageNavComponents(e.config),un=e=>br.selectCurrentRecord(e.records),dn=e=>br.selectCurrentRecordIndex(e.records),pn=e=>br.selectDefaultDraft(e.records),fn=e=>br.selectDesiredRecordIndex(e.records),hn=e=>br.selectFieldsToUpdate(e.records),mn=e=>br.selectUpdateSource(e.records),gn=e=>br.selectNewRecordIndex(e.records),yn=e=>zr.selectNextDynamicPageUrl(e.dynamicPages),vn=e=>zr.selectPreviousDynamicPageUrl(e.dynamicPages),wn=e=>br.selectRefreshController(e.records),In=e=>br.selectSetFilterCalled(e.records),_n=e=>br.selectRefreshCurrentRecord(e.records),En=e=>br.selectRefreshCurrentView(e.records),bn=e=>br.selectRemoveCurrentRecord(e.records),Sn=e=>br.selectRevertChanges(e.records),Rn=e=>br.selectSaveRecord(e.records),Tn=e=>br.getUserFilterInitialData(e.records),{READ_WRITE:On,READ:Cn}=e;function Pn(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var Dn=new WeakMap,Nn=new WeakMap;class An{constructor(e,t){Pn(this,Dn,{writable:!0,value:void 0}),Pn(this,Nn,{writable:!0,value:new Y([[Le,e=>{let{mode:t,env:r}=e;return t.csr&&!r.dev}],[ze,e=>{let{mode:t,env:r}=e;return t.verbose&&r.preview}]])}),u()(this,Dn,e),this._listenToUnhandledErrors(t)}log(e){if(this._shouldLogErrorBi(e)&&c()(this,Dn).log(e,new Ue(e.cause||e)),this._shouldLog(e))return c()(this,Dn).log(e)}logError(e,t,r){this.log(e instanceof P?e:new D(t,{cause:e,...r}))}_shouldLog(e){return(c()(this,Nn).find(((t,r)=>e instanceof r))||(()=>!0))(j.platform.settings)}_shouldLogErrorBi(e){return e instanceof P&&!(e instanceof N)&&c()(this,Nn).get(Le)(j.platform.settings)}_listenToUnhandledErrors(e){e.addEventListener("unhandledrejection",(e=>{e.reason instanceof P&&(e.preventDefault(),c()(this,Dn).log(new M({cause:e.reason})))}))}}const xn=e=>(t,r)=>$(t,(t=>e.log(new r({cause:t})))),Fn=e=>(t,r)=>$((function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];const i=t(...o);return e.log(new r({data:{args:o,result:i}})),i}),(t=>{throw e.log(new r({data:{exception:t},level:"error"})),t})),Mn=e=>(t,r)=>function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];if(r.startsWith("on"))return e.log(new ze(ze.types.DS_API.REGISTERED,{methodName:r})),t(...o);if(e.log(new ze(ze.types.DS_API.CALLED,{methodName:r,args:o})),xe.has(r)){const t=xe.get(r);e.log(new ze(ze.types.DS_API.DEPRECATED,{methodName:r,replacementMethodName:t}))}return new H(t(...o)).then((t=>(e.log(new ze(ze.types.DS_API.SUCCED,{methodName:r,result:t})),t)))};class Ln{constructor(e){let{id:t,collectionId:r,collectionName:n,datasetId:o,datasetType:a,datasetMode:i,numberOfResults:s,filteredBy:c,componentType:l,fieldType:u}=e;const{platform:{location:{pageId:d,pageUrl:p},settings:{env:f}}}=j;return new Le({id:t,collectionId:r,collectionName:n,datasetId:o,datasetType:a,datasetMode:i,viewMode:f.name,pageId:d,pageUrl:p,numberOfResults:s,filteredBy:c,componentType:l,fieldType:u})}}var Un=a(5882);class kn{constructor(e){let{message:t,code:r}=e;const n=new Error(t);return n.code=r,n}}class jn{constructor(e){let{getRequestParams:t,httpClient:r}=e;this.getRequestParams=t,this.httpClient=r}async _makeRequestTo(e,t){const{instance:r,gridAppId:n}=this.getRequestParams();return(await this.httpClient.post("/_serverless/data-binding-server/"+e,t,{params:{gridAppId:n},headers:{Authorization:r,"Content-Type":"application/json"}})).data}async fetchBulkData(e){const{recordsByCollectionId:t,recordsInfoByDataset:r}=await this._makeRequestTo("fetch-initial-data",e);return{recordsInfoByDataset:r.reduce(((e,t)=>{let{itemIds:r=[],totalCount:n=0,error:o}=t;return[...e,{itemIds:r,totalCount:n,error:o?new kn(o):void 0}]}),[]),recordsByCollectionId:Object.entries(t).reduce(((e,t)=>{let[r,n]=t;return{...e,[r]:Object.entries(n).reduce(((e,t)=>{let[r,n]=t;return{...e,[r]:(0,Un.PL)(n)}}),{})}}),{})}}async fetchData(e){const{items:t,...r}=await this._makeRequestTo("fetch-data",e);return{...r,items:t.map((e=>(0,Un.PL)(e)))}}async remove(e){return this._makeRequestTo("remove",e)}async save(e){const{item:t}=await this._makeRequestTo("save",e);return(0,Un.PL)(t)}}const Vn=".",Gn=e=>(0,Ke.head)(e.split(Vn)),Wn=e=>e.split(Vn),Bn=e=>(0,Ke.isPlainObject)(e)&&(0,Ke.has)(e,"_id"),qn=(e,t)=>e!==t&&Bn(e)&&!Bn(t)?e:t,zn=function(e,t){void 0===t&&(t={});for(const r of e){const e=t[r._id];t[r._id]=(0,Ke.mergeWith)(e,r,qn)}return t},$n=(e,t)=>{const r=t.flatMap((e=>["fields",e])).concat("type");return(0,Ke.get)(e,r)},Hn=(e,t)=>r=>{const n=Wn(r);if(((e,t)=>t.length>=2&&$n(e,[t[0]])===m.FieldType.reference)(e,n)){const[r,...o]=n,a=e&&e.fields[r]?e.fields[r].referencedCollection:null,i=t&&a?t[a]:null;return $n(i,o)}return $n(e,n)},Yn=(e,t)=>null!=t&&null!=t.fields[e]?t.fields[e].referencedCollection:null,Xn=e=>null!=e?e.displayField:null,Jn=e=>null!=e?e.maxPageSize:void 0,Kn=e=>(0,Ke.includes)(e,Vn),Qn=e=>{var t;let{schema:r,defaultToDbDriverLimit:n}=e;const o=n?100:1e3;return null!=(t=Jn(r))?t:o},Zn=(e,t)=>async r=>{const{baseQuery:n,fieldName:o,schema:a}=r,i=((e,t,r)=>{var n;const o=null===(n=e.fields[t])||void 0===n?void 0:n.queryOperators;return!o||o.includes(r)})(a,o,m.AllowedFilterOperator.ne);if(i)return t({...r,baseQuery:n.ne(o,e)});const s=await t(r);return(0,Ke.filter)(s,(t=>((e=>(0,Ke.isObject)(e))(t)?t[o]:t)!==e))},eo=e=>Zn("",e),to=e=>Zn(void 0,e),ro=async e=>{let{baseQuery:t,schema:r,fieldName:n}=e;const o=Qn({schema:r,defaultToDbDriverLimit:!0}),{items:a}=await t.limit(o).find(),i=a.flatMap((e=>e[n]));return(0,Ke.uniq)(i)},no=async e=>{let{baseQuery:t,fieldName:r,schema:n}=e;const o=Qn({schema:n,defaultToDbDriverLimit:!1}),{items:a}=await t.limit(o).distinct(r,null);return a},oo=e=>{let{wixData:t,schema:r,sortModel:n,fieldName:o,filterModel:a}=e;const i=(e=>{let{wixData:t,schema:r,sortModel:n,fieldName:o}=e;const a=Gn(o);if(a){var i,s,c;const e=null==(i=null==(s=r.fields[a])?void 0:s.sortable)||i,o=r.defaultSort?[{[r.defaultSort.fieldName]:r.defaultSort.direction}]:null,l=(null==n?void 0:n.length)>0,u=!((null==n?void 0:n.find((e=>e[a])))||(null==r||null==(c=r.defaultSort)?void 0:c.fieldName)===a)&&e,d=t.sort().ascending(a).getSortModel();if(l)return u?[...n,...d]:n;if(o)return u?[...o,...d]:o;if(e)return d}return null})({wixData:t,schema:r,sortModel:n,fieldName:o});return t.query(r.id).setFilterModel(a).setSortModel(i)},ao=async e=>{let{baseQuery:t,schema:r,references:n}=e;const o=Qn({schema:r,defaultToDbDriverLimit:!0}),{items:a}=await t.hasSome("_id",n).limit(o).find();return a},io=async e=>{let{baseQuery:t,schema:r,wixData:n,customSortExists:o,referencingFieldName:a,referencedFieldName:i,referencedSchema:s}=e;const c=Qn({schema:r,defaultToDbDriverLimit:!1}),{items:l}=await t.limit(c).distinct(a,null),u=eo(to(ao)),d=await u({baseQuery:n.query(s.id),schema:s,fieldName:i,references:l});return o?l.flatMap((e=>d.filter((t=>t._id===e)))):d},so=async e=>{let{baseQuery:t,schema:r,fieldName:n}=e;const o=Qn({schema:r,defaultToDbDriverLimit:!0}),{items:a}=await t.limit(o).include(n).find();return a},co=async e=>{let{baseQuery:t,schema:r,referencingFieldName:n,referencedFieldName:o}=e;const a=to(so),i=await a({baseQuery:t,schema:r,fieldName:n});return(0,Ke.uniqBy)(i.map((e=>e[n])).filter((e=>!["",void 0].includes(e[o]))),"_id")},lo=async e=>{var t;let{schema:r,schemas:n,wixData:o,fieldName:a,role:i,sortModel:s,filterModel:c}=e;const l=oo({wixData:o,schema:r,fieldName:a,sortModel:s,filterModel:c}),[u,d]=Wn(a),p=n[r.fields[u].referencedCollection],f=(null==s?void 0:s.length)>0,h=(null==(t=r.allowedOperations)?void 0:t.includes(m.DataOperation.distinct))?io:co,g=await h({baseQuery:l,schema:r,schemas:n,wixData:o,fieldName:a,customSortExists:f,referencingFieldName:u,referencedFieldName:d,referencedSchema:p}),y=(e=>{let{referencedItems:t,referencedSchema:r,referencedFieldName:n,customSortExists:o}=e;const a=(0,Ke.uniq)(t.flatMap((e=>e[n]))),i=r.fields[n].type;return o?a:i===m.FieldType.number?a.sort(((e,t)=>e-t)):a.sort()})({referencedItems:g,referencedSchema:p,referencedFieldName:d,customSortExists:f}),v=(e=>{let{referencedItems:t,referencedFieldName:r,options:n}=e;return Object.fromEntries(n.map((e=>[e,t.filter((t=>(0,Ke.isArray)(t[r])?t[r].includes(e):t[r]===e)).map((e=>e._id))])))})({referencedItems:g,options:y,referencedFieldName:d});return{fieldName:a,role:i,options:y,referencedItemIdsByOption:v}},uo=async e=>{var t;let{schema:r,wixData:n,fieldName:o,role:a,filterModel:i}=e;const s={wixData:n,schema:r,filterModel:i,fieldName:o,role:a};return(null==(t=r.allowedOperations)?void 0:t.includes(m.DataOperation.aggregate))?(async e=>{let{wixData:t,schema:r,filterModel:n,fieldName:o,role:a}=e;const i=t.filter().setFilterModel(n),{items:[{min:s,max:c}]}=await t.aggregate(r.id).filter(i).max(o,"max").min(o,"min").run();return{fieldName:o,role:a,min:s,max:c}})(s):(async e=>{let{wixData:t,schema:r,filterModel:n,fieldName:o,role:a}=e;const i=t.query(r.id).setFilterModel(n).limit(1),[{items:s},{items:c}]=await Promise.all([i.ascending(o).find(),i.descending(o).find()]),l=s.map((e=>e[o]))[0],u=c.map((e=>e[o]))[0];return{fieldName:o,role:a,min:l,max:u}})(s)};function po(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var fo=new WeakMap,ho=new WeakMap;class mo{constructor(e){let{wixData:t,wixDataSchemas:r}=e;po(this,fo,{writable:!0,value:void 0}),po(this,ho,{writable:!0,value:void 0}),u()(this,fo,go.reduce(((e,r)=>(e[r]=function(){const e=t[r](...arguments);return e.catch instanceof Function?e.catch((e=>{throw new Eo(e)})):e},e)),{...t})),u()(this,ho,r)}async fetchBulkData(e){const t=await Promise.all(e.map((e=>{let{collectionId:t,filter:r,sort:n,offset:o,cursor:a,length:i,includes:s,uniqueFieldValues:c}=e;return this.fetchData({collectionId:t,filter:r,sort:n,offset:o,cursor:a,length:i,includes:s,uniqueFieldValues:c}).catch((e=>({error:e})))})));return((e,t)=>t.reduce(((t,r,n)=>{let{items:o,nextCursor:a,totalCount:i,uniqueFieldValues:s,error:c}=r;if(c)return t.recordInfosInDatasetOrder.push({error:c}),t;t.recordInfosInDatasetOrder.push({itemIds:o.map((e=>{let{_id:t}=e;return t})),totalCount:i,nextCursor:a});const l=e[n].collectionId,u=t.recordsByCollectionId[l];return t.recordsByCollectionId[l]=zn(o,u),t.uniqueFieldValuesByCollection[l]={...t.uniqueFieldValuesByCollection[l],...s},t}),{recordInfosInDatasetOrder:[],recordsByCollectionId:{},uniqueFieldValuesByCollection:{}}))(e,t)}async fetchData(e){let{collectionId:t,filter:r,sort:n,offset:o=0,includes:a,cursor:i,length:s,uniqueFieldValues:l}=e;const u=i?c()(this,fo).fetch(t,i,s):(()=>{let e=c()(this,fo).query(t).setFilterModel(r).setSortModel(n).skip(o).limit(s);return null==a||a.forEach((t=>{e=e.include(t)})),e.find()})(),d=l.length>0?this._fetchUniqueValues({collectionId:t,fieldKeys:l}):Promise.resolve({}),[p,f]=await Promise.all([u,d]),{items:h,totalCount:m,nextCursor:g}=p;return{items:h,nextCursor:g,totalCount:m||0,uniqueFieldValues:f}}async fetchUserFilterInitialData(e){let{filter:t,sort:r,userFilterConnectionProps:n,schema:o,schemas:a}=e;const i=[Pe],s=(0,Ke.uniqBy)(n.filter((e=>{let{role:t}=e;return i.includes(t)})),"fieldName"),l=(0,Ke.uniqWith)(n.filter((e=>{let{role:t}=e;return Ae.includes(t)})),((e,t)=>e.fieldName===t.fieldName));return Promise.all([...s.map((async e=>{let{fieldName:r,role:n}=e;const a={schema:o,wixData:c()(this,fo),fieldName:r,role:n,filterModel:t};return uo(a)})),...l.map((async e=>{let{fieldName:n,role:i}=e;const s=Kn(n),l={wixData:c()(this,fo),schema:o,schemas:a,fieldName:n,role:i,sortModel:r,filterModel:t};return s?lo(l):(async e=>{var t;let{wixData:r,schema:n,fieldName:o,role:a,sortModel:i,filterModel:s}=e;const c=oo({wixData:r,schema:n,fieldName:o,sortModel:i,filterModel:s}),l=null==(t=n.allowedOperations)?void 0:t.includes(m.DataOperation.distinct),u=eo(l?no:to(ro));return{fieldName:o,role:a,options:await u({baseQuery:c,fieldName:o,schema:n})}})(l)}))])}async remove(e){let{collectionId:t,recordId:r}=e;return c()(this,fo).remove(t,r)}async save(e){let{collectionId:t,record:r,includeReferences:n}=e;return c()(this,fo).save(t,r,{includeReferences:n})}async getSibling(e){let{collectionName:t,filter:r,sort:n,fieldValues:o,sortFields:a,directionTowardSibling:i}=e;const s=c()(this,fo).query(t).setFilterModel(r),{items:[l]}=await yo({sort:n,sortFields:a,fieldValues:o,baseQuery:s,directionTowardSibling:i}).find();return l}fetchSchemas(e){return c()(this,ho).bulkGet(e,{referencedCollectionsDepth:1})}createSimpleFilter(e,t){return c()(this,fo).filter().eq(e,t).getFilterModel()}async _fetchUniqueValues(e){let{collectionId:t,fieldKeys:r}=e;return(await Promise.all(r.map((e=>c()(this,fo).query(t).distinct(e))))).reduce(((e,t,n)=>{let{_items:o}=t;return e[r[n]]=o,e}),{})}}const go=["save","remove","find","sort","filter","query","fetch","aggregate"],yo=e=>{let{sort:t,sortFields:r,directionTowardSibling:n,fieldValues:o,baseQuery:a}=e;return vo({sort:t,sortFields:r,directionTowardSibling:n,fieldValues:o,baseQuery:a})(r.length-1).reduce(((e,t)=>e.or(t)))},vo=e=>{let{baseQuery:t,sortFields:r,sort:n,directionTowardSibling:o,fieldValues:a}=e;return function e(i){if(-1===i)return[];const s=r[i];if(!a[s])return e(i-1);return[(0,Ke.flow)(wo(n,o),Io(n[s],o,s,a[s]),_o(i,r,a))(t),...e(i-1)]}},wo=(e,t)=>r=>Object.entries(e).reduce(((e,r)=>{let[n,o]=r;return o===t?e.ascending(n):e.descending(n)}),r),Io=(e,t,r,n)=>o=>e===t?o.gt(r,n):o.lt(r,n),_o=(e,t,r)=>n=>(0,Ke.range)(e).reduce(((e,n)=>e.eq(t[n],r[t[n]])),n).limit(1);class Eo{constructor(e){if(!e.stack){const{message:t,code:r}="string"==typeof e?{message:e,code:"WD_VALIDATION_FAILED"}:e,n=new Error(t);return n.code=r,n}return e}}class bo{constructor(e){o()(this,"warmupData",void 0),this.warmupData=e}getSchemas(){return this.warmupData.get("schemas")}setSchemas(e){this.warmupData.set("schemas",e)}getDataStore(){return this.warmupData.get("dataStore")}setDataStore(e){this.warmupData.set("dataStore",e)}getUserFilterInitialData(e){return this.warmupData.get("userFilterInitialData-"+e)}setUserFilterInitialData(e,t){this.warmupData.set("userFilterInitialData-"+e,t)}}function So(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var Ro=new WeakMap,To=new WeakMap,Oo=new WeakMap,Co=new WeakMap;class Po{constructor(e){if(So(this,Ro,{writable:!0,value:void 0}),So(this,To,{writable:!0,value:void 0}),So(this,Oo,{writable:!0,value:void 0}),So(this,Co,{writable:!0,value:void 0}),e&&e.config){u()(this,Ro,e.config.dataset.collectionName),u()(this,To,e.items),u()(this,Oo,e.schemas);const t=e.nextCursor||void 0,r=e.totalCount||0,n=(e.items||[]).length;u()(this,Co,{cursor:t,total:r,loaded:n})}}getSchemas(){return c()(this,Oo)}getDataStore(){if(c()(this,To))return(e=>{let{items:t,datasetSize:r,collectionId:n}=e;return{recordInfosInDatasetOrder:[{itemIds:t.map((e=>{let{_id:t}=e;return t})),datasetSize:r,collectionId:n}],recordsByCollectionId:{[n]:zn(t,{})}}})({items:c()(this,To),datasetSize:c()(this,Co),collectionId:c()(this,Ro)})}getItems(){return c()(this,To)}}const Do={dsn:"https://27180ecd50484e4eafe543b40d29866d@sentry.wixpress.com/89"},No={dsn:"https://73a0410004ae41b7b60ca1c4b4684996@sentry.wixpress.com/183"},Ao={dsn:"https://9653fbb3e48143d890dba8a09a5a98c6@sentry.wixpress.com/184"},xo=["ReactSource","EditorSource","experiments","petri_ovr","WixCodeRuntimeSource","js-wixcode-sdk-override","debug"],Fo=e=>{try{const t=(e=>Array.from(new URL(e).searchParams.entries()).reduce(((e,[t,r])=>Object.assign(Object.assign({},e),{[t]:r})),{}))(e||"");return(e=>"true"===e.forceReportSentry)(t)||(e=>Object.keys(e).every((e=>!xo.includes(e))))(t)}catch(e){return!0}},Mo=[e=>(e=>{var t,r,n;return[null===(r=null===(t=null==e?void 0:e.request)||void 0===t?void 0:t.headers)||void 0===r?void 0:r.Referer,null===(n=null==e?void 0:e.request)||void 0===n?void 0:n.url]})(e).every(Fo)],Lo=(e,t)=>Mo.concat(t||(e=>e)).every((t=>t(e))),Uo=e=>{try{return e()}catch(e){return"unknown"}},ko=e=>{try{return e()}catch(e){return"object"==typeof e&&null!==e&&"message"in e?e.message:void 0}},jo=({Raven:e,globalScope:t,dsn:r,params:n={},appName:o})=>{/https?:\/\/localhost/.test(Z())||((({Raven:e,appName:t,browserUrlGetter:r,dsn:n,params:o})=>{const a=ee(t),i=Q(a);e.config(n,{maxUrlLength:1e3,captureUnhandledRejections:!1,autoBreadcrumbs:{dom:!1}}),e.setRelease(o.release||i),e.setShouldSendCallback(o.shouldSendCallback||Lo),e.setDataCallback(((e,t)=>(e.request=Object.assign(e.request||{},{url:r()}),(t||(e=>e))(e))))})({Raven:e,appName:o,browserUrlGetter:()=>Uo((()=>{var e;return null===(e=null==t?void 0:t["wix-location"])||void 0===e?void 0:e.url})),dsn:r,params:n}),e.setDataCallback(((e,r=(e=>e))=>(e.extra=Object.assign(e.extra||{},(e=>({referrer:ko((()=>{var t;return null===(t=null==e?void 0:e["wix-window"])||void 0===t?void 0:t.referrer})),workerUrl:ko((()=>{var t;return null===(t=null==e?void 0:e.location)||void 0===t?void 0:t.href}))}))(t)),e.tags=Object.assign(e.tags||{},n.tags||{},(e=>({renderMode:Uo((()=>{var t,r;return null===(r=null===(t=null==e?void 0:e["wix-window"])||void 0===t?void 0:t.rendering)||void 0===r?void 0:r.env})),viewMode:Uo((()=>{var t;return null===(t=null==e?void 0:e["wix-window"])||void 0===t?void 0:t.viewMode})),santaVersion:Uo((()=>{var t;return(e=>{const t=e.match(/santa\/([^/]*)/);return t?t[1]:"unknown"})((null===(t=null==e?void 0:e.location)||void 0===t?void 0:t.href)||"")}))}))(t)),r(e)))))};function Vo(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}const{USER_SCOPE:Go,APPLICATION_SCOPE:Wo,SERVER_SCOPE:Bo}=P.scopes,{DBSMViewer:{dsn:qo},UserErrors:{dsn:zo},WixData:{dsn:$o}}=r,Ho={[Wo]:qo,[Go]:zo,[Bo]:$o};let Yo=function(e,t){return r=>this.mode.dev?(e===Error&&(this.console.error(r),r.cause&&this.console.error("Caused by:",r.cause)),null==r.run?void 0:r.run()):t(r)};var Xo=new WeakMap,Jo=new WeakMap,Ko=new WeakMap,Qo=new WeakMap,Zo=new WeakMap,ea=new WeakMap;class ta{constructor(e){let{fedops:t,bi:r,monitor:n,verbose:o,console:a,global:i,settings:s}=e;Vo(this,Xo,{writable:!0,value:void 0}),Vo(this,Jo,{writable:!0,value:void 0}),Vo(this,Ko,{writable:!0,value:void 0}),Vo(this,Qo,{writable:!0,value:void 0}),Vo(this,Zo,{writable:!0,value:void 0}),Vo(this,ea,{writable:!0,value:void 0});const c=a.factory();Yo=Yo.bind({mode:s.mode,console:c}),u()(this,Xo,this._createEventToHandler()),u()(this,Jo,this._createFedopsLogger(t)),u()(this,Ko,this._createBiLoggers({bi:r,settings:s})),u()(this,Qo,this._setupMonitor({monitor:n,global:i,settings:s})),u()(this,Zo,o.factory()),u()(this,ea,c)}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1)return t.map((e=>this.log(e)));const[n]=t,[,o]=Array.from(c()(this,Xo)).find((e=>{let[t]=e;return t.prototype.isPrototypeOf(n)}))||[];return o?o(n):c()(this,ea).error("Oj-vej! This event is not supported by logger",n)}_createEventToHandler(){return new Map([[Error,Yo(Error,(e=>{if(e instanceof M)c()(this,ea).warn("You have unhandled error in async operation. Consider catching it and handling accordingly.\n",e.cause);else{const{scope:t,cause:r,options:{extra:n,...o}={}}=e;e instanceof N&&(c()(this,ea).error(e),r&&c()(this,ea).error("Caused by:",r)),c()(this,Qo)[t].captureException(e,{zone:t,extra:{cause:r,...n},...o})}}))],[Le,Yo(Le,(e=>{let{event:t,type:r}=e;return r===Le.types.ERROR?c()(this,Ko).errorLogger.log(t):c()(this,Ko).logger.log(t)}))],[Ge,Yo(Ge,(e=>{let{name:t,params:r,run:n,onStart:o,onEnd:a}=e;return o((()=>c()(this,Jo).interactionStarted(t,r))),a((()=>c()(this,Jo).interactionEnded(t,r))),n()}))],[We,Yo(We,(e=>{let{event:t}=e;return c()(this,Qo)[Wo].captureBreadcrumb(t)}))],[ze,e=>{let{messages:t}=e;return c()(this,Zo).log(...t)}],[$e,e=>{let{message:t,level:r}=e;return c()(this,ea)[r](t)}]])}_createFedopsLogger(e){let{factory:t,hooks:{start:r,end:n}}=e;return t.getLoggerForWidget({appId:"databinding",appName:"databinding",startHook:r,endHook:n})}_createBiLoggers(e){let{bi:{factory:t},settings:{env:r}}=e;return{logger:t().logger({endpoint:r.editor?"platform":"platform-viewer"}),errorLogger:t().logger({endpoint:"trg"})}}_setupMonitor(e){let{monitor:{factory:t},global:r,settings:{metaSiteId:n,userId:o}}=e;return Object.entries(Ho).reduce(((e,a)=>{let[i,s]=a;const c=t(s);return e[i]=c,jo({dsn:s,Raven:c,globalScope:r,appName:Fe,user:{id:o},params:{tags:{msid:n}}}),e}),{})}}function ra(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var na=new WeakMap,oa=new WeakMap,aa=new WeakMap,ia=new WeakMap,sa=new WeakMap;class ca{constructor(){ra(this,na,{writable:!0,value:{}}),ra(this,oa,{writable:!0,value:{}}),ra(this,aa,{writable:!0,value:{}}),ra(this,ia,{writable:!0,value:{}}),ra(this,sa,{writable:!0,value:{}})}getData(e){let{datasetId:t,collectionId:r,includes:n}=e;const o=c()(this,na)[t];return o?{datasetSize:o.datasetSize,items:o.itemIds.map((e=>la(c()(this,oa)[r][e],this.getSchema(r),n)))}:null}getRecord(e){var t;let{collectionId:r,recordId:n,includes:o}=e;const a=null==(t=c()(this,oa)[r])?void 0:t[n];return a&&la(a,this.getSchema(r),o)}updateCollectionData(e){let{collectionId:t,data:r}=e;const{[t]:n}=c()(this,oa),{[t]:o}=c()(this,aa),{items:a,uniqueFieldValues:i}=r;c()(this,oa)[t]=ua(a,n),c()(this,aa)[t]=da(i,o)}getSchema(e){return c()(this,ia)[e]}updateStore(e){let{recordsByCollectionId:t={},recordInfosByDatasetId:r={},uniqueFieldValuesByCollection:n={}}=e;u()(this,na,{...c()(this,na),...r});for(const[e,r]of Object.entries(t))c()(this,oa)[e]={...c()(this,oa)[e],...r};for(const[e,t]of Object.entries(n))c()(this,aa)[e]={...c()(this,aa)[e],...t}}getStore(){return{recordInfosByDatasetId:c()(this,na),recordsByCollectionId:c()(this,oa),uniqueFieldValuesByCollection:c()(this,aa)}}hasDataset(e){return Boolean(c()(this,na)[e])}setUniqueFieldValues(e){let{collectionId:t,fieldKey:r,data:n}=e;c()(this,aa)[t]={...c()(this,aa)[t],[r]:n}}getUniqueFieldValues(e){var t;let{collectionId:r,fieldKey:n}=e;return null==(t=c()(this,aa)[r])?void 0:t[n]}updateSchemas(e){for(const[t,r]of Object.entries(e))c()(this,ia)[t]={...c()(this,ia)[t],...r}}getSchemas(){return c()(this,ia)}getUserFilterInitialData(e){return c()(this,sa)[e]}setUserFilterInitialData(e,t){c()(this,sa)[e]=t}}const la=(e,t,r)=>Object.entries(e).reduce(((e,n)=>{let[o,a]=n;return((e,t)=>{var r;return(null==t||null==(r=t.fields)||null==(r=r[e])?void 0:r.type)===m.FieldType.reference})(o,t)&&((e,t)=>!e||!e.includes(t))(r,o)&&Boolean(null==a?void 0:a._id)?e[o]=a._id:e[o]=a,e}),{}),ua=function(e,t){return void 0===t&&(t={}),e.reduce(((e,t)=>{const r=e[t._id];return e[t._id]=r?(0,Ke.mergeWith)(r,t,qn):t,e}),t)},da=function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),{...t,...e}};function pa(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var fa=new WeakMap,ha=new WeakMap,ma=new WeakMap,ga=new WeakMap,ya=new WeakMap,va=new WeakMap,wa=new WeakMap;class Ia{constructor(){pa(this,fa,{writable:!0,value:void 0}),pa(this,ha,{writable:!0,value:void 0}),pa(this,ma,{writable:!0,value:void 0}),pa(this,ga,{writable:!0,value:void 0}),pa(this,ya,{writable:!0,value:void 0}),pa(this,va,{writable:!0,value:void 0}),pa(this,wa,{writable:!0,value:void 0});const{logger:e,dataFetcher:t}=j;u()(this,ha,t),u()(this,fa,e),u()(this,ma,new ca),u()(this,ga,{}),u()(this,ya,Promise.resolve())}createInitialDataRequest(e){u()(this,ga,e.reduce(((e,t)=>{let{id:r,refresh:n}=t;return n||!c()(this,ma).hasDataset(r)?{...e,[r]:new z}:e}),{}));const t=Object.entries(c()(this,ga)).map((e=>{let[,{promise:t}]=e;return t}));u()(this,ya,this._waitForDataFetched(t).then((()=>u()(this,ga,{}))))}async getInitialData(e){let{datasetId:t,collectionId:r,cursorPaging:n,filter:o,sort:a,length:i,includes:s,uniqueFieldValues:l}=e;return c()(this,ga)[t]&&(c()(this,ga)[t].resolve({datasetId:t,collectionId:r,cursorPaging:n,filter:o,sort:a,length:i,includes:s,uniqueFieldValues:l}),await c()(this,ya)),c()(this,ma).getData({datasetId:t,collectionId:r,includes:s})||this.getData({datasetId:t,collectionId:r,cursorPaging:n,filter:o,sort:a,offset:0,length:i,includes:s,uniqueFieldValues:l})}async getData(e){const{collectionId:t,cursorPaging:r,offset:n,filter:o,sort:a,includes:i,length:s,datasetSize:l,uniqueFieldValues:u}=e,d=e=>!this.getUniqueFieldValues({collectionId:t,fieldKey:e}),{items:p,totalCount:f,nextCursor:h,uniqueFieldValues:m}=await c()(this,ha).fetchData({collectionId:t,offset:n,filter:o,sort:a,includes:i,cursor:r?null==l?void 0:l.cursor:void 0,length:s,uniqueFieldValues:u.filter((e=>d(e)))}).catch(Ea("Data fetching failed",{datasetConfig:e}));return await c()(this,va),c()(this,ma).updateCollectionData({collectionId:t,data:{items:p,uniqueFieldValues:m}}),{items:p,datasetSize:{total:f,loaded:((null==l?void 0:l.loaded)||0)+p.length,cursor:h},uniqueFieldValues:m}}async remove(e){let{collectionId:t,recordId:r}=e;return c()(this,ha).remove({collectionId:t,recordId:r}).catch(Ea("Record removing failed",{collectionId:t,recordId:r}))}async save(e){let{collectionId:t,record:r,includeReferences:n}=e;return c()(this,ha).save({collectionId:t,record:r,includeReferences:n}).catch(Ea("Record saving failed",{collectionId:t,record:r,includeReferences:n}))}async getSibling(e){return await c()(this,ha).getSibling(e)}async loadSchemas(e){const t=c()(this,ma).getSchemas(),r=e.filter((e=>!t[e]));u()(this,va,r.length?c()(this,ha).fetchSchemas(r).catch(Ea("Schema fetching failed",{collectionIds:r})):Promise.resolve({}));const n=await c()(this,va);return c()(this,ma).updateSchemas({...t,...n}),c()(this,ma).getSchemas()}async setSchemas(e){c()(this,ma).updateSchemas(e)}getSchemas(){return c()(this,ma).getSchemas()}getRecord(e){let{collectionId:t,recordId:r,includes:n}=e;return c()(this,ma).getRecord({collectionId:t,recordId:r,includes:n})}getSchema(e){return c()(this,ma).getSchema(e)}hasSchema(e){return Boolean(this.getSchema(e))}getReferencedSchemas(e){const t=this.getSchema(e),r=c()(this,ma).getSchemas();return(e=>e?(0,Ke.flow)((e=>(0,Ke.pickBy)(e,(e=>{let{referencedCollection:t}=e;return Boolean(t)}))),(e=>(0,Ke.map)(e,(e=>{let{referencedCollection:t}=e;return t}))),Ke.uniq,(e=>e.filter(Boolean)))(e.fields):[])(t).reduce(((e,t)=>({...e,[t]:r[t]})),{})}setCollectionData(e){let{collectionId:t,data:r}=e;r&&c()(this,ma).updateCollectionData({collectionId:t,data:r})}setStore(e){e&&c()(this,ma).updateStore(e)}setStaticStore(e){const{recordsByCollectionId:t,recordInfosInDatasetOrder:r,uniqueFieldValuesByCollectionId:n}=e,o=c()(this,wa).find((e=>{let{type:t}=e;return t===Rr}));if(o){const{datasetId:e}=o,a={[e]:r[0]};c()(this,ma).updateStore({recordsByCollectionId:t,recordInfosByDatasetId:a,uniqueFieldValuesByCollectionId:n})}}getStore(){return c()(this,ma).getStore()}setUniqueFieldValues(e){let{collectionId:t,fieldKey:r,data:n}=e;return c()(this,ma).setUniqueFieldValues({collectionId:t,fieldKey:r,data:n})}getUniqueFieldValues(e){let{collectionId:t,fieldKey:r}=e;return c()(this,ma).getUniqueFieldValues({collectionId:t,fieldKey:r})}createSimpleFilter(e,t){return c()(this,ha).createSimpleFilter(e,t)}setDatasetConfigs(e){u()(this,wa,e)}getUserFilterInitialData(e){return c()(this,ma).getUserFilterInitialData(e)}setUserFilterInitialData(e,t){c()(this,ma).setUserFilterInitialData(e,t)}async _fetchInitialData(e){try{const{recordsByCollectionId:t,recordInfosInDatasetOrder:r,uniqueFieldValuesByCollection:n}=await c()(this,fa).log(new Ge("dataset/fetchPrimaryInitialData",(()=>c()(this,ha).fetchBulkData(e))));return{recordsByCollectionId:t,recordInfosByDatasetId:r.reduce(((t,r,n)=>{let{itemIds:o=[],error:a,nextCursor:i,totalCount:s}=r;const l=e[n];return a&&c()(this,fa).log(new _a("Initial data fetching failed for one of the datasets",{cause:a,extra:{datasetConfig:l}})),t[l.datasetId]={itemIds:o,datasetSize:{total:s,loaded:o.length,cursor:i}},t}),{}),uniqueFieldValuesByCollection:n}}catch(t){throw new D("Initial data fetching failed",{cause:t,extra:{datasetConfigs:e}})}}async _waitForDataFetched(e){if(e.length){const t=await Promise.all(e),r=await this._fetchInitialData(t);await c()(this,va),c()(this,ma).updateStore(r)}}}class _a{constructor(e,t){let{cause:r,...n}=t;return new(x.codes.includes(r.code)?x:F)(e,{...n,cause:r,code:r.code})}}const Ea=(e,t)=>r=>{throw new _a(e,{cause:r,extra:t})},ba="PRIMARY";var Sa=a(8582),Ra=a.n(Sa);const Ta=function(e,t,r){return void 0===r&&(r=[]),e(t)?[{path:(0,Ke.clone)(r),filterExpression:t}]:(n=t,Array.isArray(n)||(0,Ke.isPlainObject)(n)?(0,Ke.flatMap)(t,((t,n)=>Ta(e,t,r.concat(n)))):[]);var n},Oa=e=>t=>t.reduce(((e,t)=>{let{path:r,filterExpression:n}=t;return((e,t,r)=>(0,Ke.set)(e,t,r))(e,r,n)}),(0,Ke.cloneDeep)(e)),Ca=(e,t,r)=>{const n=((e,t)=>Ra()(Qe.Maybe,t.map((t=>{let{path:r,filterExpression:n}=t;return e(n).map((e=>({path:r,filterExpression:e})))}))))(t,Ta(e,r));return n.map(Oa(r))};var Pa=()=>()=>Qe.Maybe.fromNullable(j.platform.user).map((e=>{let{id:t,loggedIn:r}=e;return r?t:null}));var Da=e=>t=>{let{filterId:r}=t;return Qe.Maybe.fromNullable(e(r)).chain((e=>{let t,{masterDataset:r,fieldName:n}=e;try{t=r.api.getCurrentItem()}catch(e){}return Qe.Maybe.fromNullable(t).map((e=>{const t=e[n];return void 0===t?null:t}))}))};const Na=e=>xa(e).chain((e=>{let[t,r]=e;return"$not"===t&&(0,Ke.isArray)(r)?Aa({positive:!1,filterExpression:r[0]}):Qe.Maybe.Nothing()})).orElse((()=>Aa({positive:!0,filterExpression:e}))),Aa=e=>{let{positive:t,filterExpression:r}=e;return xa(r).chain((e=>{let[r,n]=e;return xa(n).map((e=>{let[n,o]=e;return{field:r,condition:n,value:o,positive:t}}))}))},xa=e=>{if(!(0,Ke.isPlainObject)(e))return Qe.Maybe.Nothing();const t=(0,Ke.entries)(e)[0];return Qe.Maybe.fromNullable(t)},{stringArray:Fa,number:Ma}=m.FieldType;const La=(...e)=>[...e],Ua=({expression:e,functions:t,variables:r})=>{if("integer"===e.type)return parseInt(e.value);if("float"===e.type)return parseFloat(e.value);if("string"===e.type)return e.value;if("function"===e.type){const n="function"==typeof e.name?e.name:t[e.name];if(n)return n(...e.arguments.map((e=>Ua({expression:e,functions:t,variables:r}))));throw new Error("Unknown function "+e.name)}if("variable"===e.type){if("false"===e.name)return!1;if("true"===e.name)return!0;if("undefined"===e.name)return;if("null"===e.name)return null;if(!(e.name in r))throw new Error("Unknown variable "+e.name);return r[e.name]}throw new Error("Unknown AST node "+JSON.stringify(e))},ka=e=>new Error("Syntax error. "+e),ja=e=>{let t={type:"initial",parentFunction:void 0},r=0,n=e[r];const o=()=>{n=e[++r]},a=e=>{t={type:"initial",parentFunction:e},o()},i=()=>void 0===n||")"===n&&(t.parentFunction&&!t.parentFunction.closed||"function"===t.type&&!t.closed)||"]"===n&&(t.parentFunction&&t.parentFunction.name===La&&!t.parentFunction.closed||"function"===t.type&&t.name===La&&!t.closed),s=()=>{if(void 0===n){const r=t.parentFunction||t;if("function"===r.type&&!r.closed)throw ka("Function was not closed. Started at index "+r.startedAt+" with: "+e.slice(r.startedAt))}if(t.parentFunction)return"function"!==t.type||t.closed?(t.parentFunction.closed=!0,t=t.parentFunction,t.parentFunction&&(t=t.parentFunction)):(t.closed=!0,t=t.parentFunction),void o();for(o();/^\s$/.test(n||"");)o();if(void 0!==n)throw ka("Unexpected characters after a finished expression at index "+r+": "+e.slice(r));return t};for(;;){if("initial"===t.type){if("["===n){t={type:"function",parentFunction:t.parentFunction,closed:!1,name:La,startedAt:r,arguments:[]},t.parentFunction&&t.parentFunction.arguments.push(t),o();continue}if("-"===n){t={type:"integer",parentFunction:t.parentFunction,closed:!1,value:"-"},t.parentFunction&&t.parentFunction.arguments.push(t),o();continue}if(n>="0"&&n<="9"){t={type:"integer",parentFunction:t.parentFunction,closed:!1,value:n},t.parentFunction&&t.parentFunction.arguments.push(t),o();continue}if("_"===n||n>="a"&&n<="z"||n>="A"&&n<="Z"){t={type:"variable",parentFunction:t.parentFunction,closed:!1,name:n,startedAt:r},t.parentFunction&&t.parentFunction.arguments.push(t),o();continue}if('"'===n||"'"===n){t={type:"string",parentFunction:t.parentFunction,closed:!1,doubleQuoted:'"'===n,startedAt:r,value:""},t.parentFunction&&t.parentFunction.arguments.push(t),o();continue}if(void 0===n)throw ka("Expression is empty");if(/^\s$/.test(n)){o();continue}throw ka(`Unexpected character "${n}" near: ${e.slice(r)}`)}if("function"!==t.type){if("integer"===t.type){if("."===n){t.parentFunction&&t.parentFunction.arguments.pop(),t={type:"float",parentFunction:t.parentFunction,closed:!1,value:t.value+n},t.parentFunction&&t.parentFunction.arguments.push(t),o();continue}if(n>="0"&&n<="9"){if(t.closed)throw ka(`Integer has unexpected whitespace near: ${e.slice(r-1)}`);t.value+=n,o();continue}if(","===n&&t.parentFunction){a(t.parentFunction);continue}if(i()){const e=s();if(e)return e;continue}if(/^\s$/.test(n)){t.closed=!0,o();continue}throw ka(`Unexpected character "${n}" after integer near: ${e.slice(r)}`)}if("float"===t.type){if(n>="0"&&n<="9"){if(t.closed)throw ka(`Floating number has unexpected whitespace near: ${e.slice(r-1)}`);t.value+=n,o();continue}if(","===n&&t.parentFunction){a(t.parentFunction);continue}if(i()){const e=s();if(e)return e;continue}if(/^\s$/.test(n)){t.closed=!0,o();continue}throw ka(`Floating number has an unexpected character "${n}" near: ${e.slice(r)}`)}if("string"!==t.type){if("variable"===t.type){if(n>="0"&&n<="9"||"_"===n||n>="a"&&n<="z"||n>="A"&&n<="Z"){if(t.closed)throw ka(`Unexpected whitespace near: ${e.slice(r-1)}`);t.name+=n,o();continue}if("("===n){t.parentFunction&&t.parentFunction.arguments.pop(),t={type:"function",parentFunction:t.parentFunction,closed:!1,name:t.name,startedAt:t.startedAt,arguments:[]},t.parentFunction&&t.parentFunction.arguments.push(t),o();continue}if(","===n&&t.parentFunction){a(t.parentFunction);continue}if(i()){const e=s();if(e)return e;continue}if(/^\s$/.test(n)){t.closed=!0,o();continue}throw ka(`Unexpected character "${n}" in an identifier near: ${e.slice(r-1)}`)}}else{if(t.closed){if(","===n&&t.parentFunction){a(t.parentFunction);continue}if(i()){const e=s();if(e)return e;continue}if(/^\s$/.test(n)){o();continue}throw ka("Unexpected characters after a closed string at index "+r+": "+e.slice(r))}if(void 0===n)throw ka(`${t.doubleQuoted?"Double":"Single"}-quoted string was not closed. Started with: ${e.slice(t.startedAt)}`);if("\\"===n){if(!("\\"===e[r+1]||t.doubleQuoted&&'"'===e[r+1]||!t.doubleQuoted&&"'"===e[r+1]))throw ka(`Backslash cannot escape character ${e[r+1]} near: ${e.slice(r)}`);t.value+=e[r+1],o()}else t.doubleQuoted&&'"'===n||!t.doubleQuoted&&"'"===n?t.closed=!0:t.value+=n;o()}}else{if(","===n){if(0===t.arguments.length)throw ka("Function was not closed or first argument missing. Started at index "+t.startedAt+" with: "+e.slice(t.startedAt));a(t);continue}if(i()){const e=s();if(e)return e;continue}if(/^\s$/.test(n)){o();continue}t={type:"initial",parentFunction:t}}}};var Va=function(e,t){return Va=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},Va(e,t)};function Ga(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Va(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function Wa(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError;let Ba;const qa=async()=>{const e=await a.e(901).then(a.bind(a,1333)),{utils:t}=e,r=Wa(e,["utils"]);Ba=Object.assign(Object.assign({},r),t.symbols)},za=(e,t)=>(0,Ke.get)(e,t),$a=e=>{let{previousRecord:t,currentRecord:r,fieldName:n}=e;return!(0,Ke.isEqual)(za(t,n),za(r,n))},Ha=e=>{const{properties:t,events:r,behaviors:n}=e,o={};return(0,Ke.forEach)(t,((e,t)=>{let{fieldName:r}=e;o[t]=r})),(0,Ke.forEach)(r,((e,t)=>{let{action:r}=e;o[t]=r})),(0,Ke.forEach)(n,(e=>{let{type:t}=e;o.text=t})),o},{mediaGallery:Ya}=m.FieldType,Xa="datetime",Ja=e=>/^\d{2}:\d{2}:\d{2}\.\d{3}$/.test(e),Ka=e=>e instanceof Date&&!isNaN(e),Qa=e=>{let{time:t,date:r}=e;const[n,o]=t.split(":");return r.setHours(n),r.setMinutes(o),r.setSeconds(0),r.setMilliseconds(0),r},Za=e=>e.toTimeString().split(" ")[0]+".000",ei=e=>{const t=new Date(e);return Ka(t)?t:(()=>{const e=new Date;return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e})()},ti=e=>String(e).padStart(2,"0"),ri=e=>[e.getFullYear(),ti(e.getMonth()+1),ti(e.getDate())].join("-");var ni=e=>{let{value:t,formatter:r,fieldType:n,format:o}=e;return o?(e=>{let{value:t,formatter:r,fieldType:n,format:o}=e;if(o.type===Xa){const e=n===m.FieldType.date,a=e?new Date(t):t;return Ka(a)?r?r.formatDateTime(a,o.params.dateFormat,{timeZone:e?"UTC":void 0}):e&&"string"==typeof t?t:"":t}return t})({value:t,formatter:r,fieldType:n,format:o}):t},oi=e=>null==e||"function"!=typeof e.toString?"":Array.isArray(e)?e.join(", "):e.toString();const{mediaGallery:ai,address:ii,date:si}=m.FieldType;var ci=(e,t)=>{let{fieldType:r,role:n,componentIsInput:o,propPath:a}=t;const i=[{converter:e=>{let{formatted:t}=e;return t},condition:e&&r===ii&&n!==ye},{converter:oi,condition:n===oe||!o&&![se,ie,Ie,be].includes(n)&&r!==m.FieldType.boolean},{converter:e=>(e=>{let{value:t}=e;const{platform:{utils:{media:r}}}=j,n=r.parseMediaItemUri(t);if(n.error)return t;switch(n.type){case r.types.IMAGE:return r.getScaleToFillImageURL(n.mediaId,n.width,n.height,n.width,n.height,{name:n.title});case r.types.VIDEO:return"https://video.wixstatic.com/video/"+n.mediaId+"/file";case r.types.AUDIO:return"https://static.wixstatic.com/mp3/"+n.mediaId;default:return t}})({value:e}),condition:"link"===a&&n!==ve},{converter:()=>[],condition:!e&&r===ai},{converter:Za,condition:n===we&&Ka(e)},{converter:e=>{const t=new Date(e);return null!==e&&Ka(t)?t:""===e||null===e?void 0:e},condition:n===de&&r===si}],s=i.reduce(((e,t)=>{let{converter:r,condition:n}=t;return n&&e.push(r),e}),[]);return(0,Ke.flow)(s)(e)},li=function(e){var t=function(e){var t=0;if(void 0===e||0===e.length)return t;for(var r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t|=0}return t*=Math.sign(t),t=Math.sqrt(t),t=Math.floor(1e6*(t-Math.floor(t)))}(e);return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e,r){var n=Math.ceil(t/(r+1))%16;return("x"===e?n:3&n|8).toString(16)}))},ui=function(e){return void 0===e&&(e=""),e?e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-\.]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,""):""};function di(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?di(Object(r),!0).forEach((function(t){fi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):di(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fi(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var hi=function(e,t){switch(typeof e){case"object":return"direct"===e.type?pi(pi({},e),{},{type:"web"}):{type:"wix",data:e};case"string":return{type:"web",url:e,target:t,text:e};default:return{target:"_blank",type:"none"}}},mi=function(e){void 0===e&&(e={});var t={link:e.url};return e.url&&(t.target=e.target),t},gi=function(e){return null!==/^(wix:)?(image|video)(:\/\/)/.exec(e)},yi=function(e){return gi(e)?e.split("/")[3]:e},vi=function(e){try{return gi(e)?e.split("/")[4].split("#").slice(0,-1).join("#"):"_.jpg"}catch(e){return"_.jpg"}},wi=function(e,t){return"wix:image://v1/"+(e||ui(t.name))+"/"+ui(t.fileName||t.name)+"#originWidth="+t.width+"&originHeight="+t.height},Ii=function(e,t){return"wix:video://v1/"+(e||ui(t.name))+"/"+ui(t.fileName||t.name)+"#posterUri="+t.posters[0].url+"&posterWidth="+t.width+"&posterHeight="+t.height},_i=function(e){var t={},r=!1;try{var n=/\/\d*_\d*\//.exec(e);if(n&&n[0]&&n[0].length>0){var o=n[0].replace(/\//g,"").split("_").map((function(e){return Number(e)})),a=o[0],i=o[1];a>0&&i>0&&(r=!0,t={originWidth:a,originHeight:i})}}catch(e){r=!1}if(!r)try{var s=/wm_(.*)\//.exec(e);if(s&&s[0]&&s[0].length>0){var c=s[1];c.length>0&&(t.watermark=c)}}catch(e){r=!1}if(!r)try{e.split("#").pop().split("&").map((function(e){return e.split("=")})).forEach((function(e){t[e[0]]=isNaN(Number(e[1]))?String(e[1]):Number(e[1])}))}catch(e){r=!1}return t},Ei=function(e,t){return void 0===t&&(t=0),function(e){return!!(e.src||e.type&&e.html)}(e)?function(e,t){var r,n,o,a=_i(e.src);"video"===(null==(r=e.type)?void 0:r.toLowerCase())&&(null!=(n=e.src)&&n.includes("youtube")||null!=(o=e.src)&&o.includes("vimeo"))&&(a.originWidth=1920,a.originHeight=1080),a.width=e.width||a.originWidth||a.originalWidth||a.posterWidth||1,a.height=e.height||a.originHeight||a.originalHeight||a.posterHeight||1;var i=e.settings&&e.settings.focalPoint,s=a.watermark,c=e.imageToken||e.token||a.token,l=(e.type||"image").toLowerCase(),u=pi({itemId:ui(e.slug)||(ui(e.title||e.id)||li(e.src||e.html||t))+"_"+t,mediaUrl:yi(e.src),metaData:Object.assign(pi({type:l,alt:e.alt||"",title:e.title||"",description:e.description||"",name:vi(e.src),fileName:vi(e.src),link:hi(e.link,e.target),width:a.width,height:a.height,sourceName:"private"},"customButtonText"in e&&{customButtonText:e.customButtonText}),i?{focalPoint:i}:{},s?{watermarkStr:s}:{}),orderIndex:t},c&&{token:c});if("text"===l){var d=e.style;u.metaData.height=a.height||500,u.metaData.width=a.width||500*d.layoutRatio,u.metaData.textStyle={width:u.metaData.width,height:u.metaData.height,backgroundColor:d.fillColor},u.metaData.html=u.editorHtml=e.html}if("video"===l){var p={};e.thumbnail&&(p=_i(e.thumbnail));var f=function(e){return null!==/^.*\.(jpeg|jpg|webp|png|jpe)$/.exec(e)}(yi(e.thumbnail))?yi(e.thumbnail):a.posterUri;u.metaData.posters=[{url:f,width:p.width||a.width,height:p.height||a.height}],u.isExternal=0===e.src.indexOf("http"),u.isExternal||gi(e.src)?(u.metaData.source=e.src.indexOf("youtube.com")>0?"youtube":e.src.indexOf("vimeo.com")>0?"vimeo":"wix",u.metaData.videoUrl=e.src):u.metaData.qualities=[{width:a.width,height:a.height,quality:a.height+"p",formats:[gi(e.src)?"wix":e.src.split(/#|\?/)[0].split(".").pop().trim()]}]}return u}(e,t):function(e,t){return{itemId:li(t+"_"+(e.uri||e.alt||t)),mediaUrl:e.uri||"",metaData:{height:e.height||1,lastModified:Date.now(),link:hi(e.link,e.target),title:e.title||"",description:e.description||"",alt:e.alt||"",sourceName:"private",tags:[],width:e.width||1},orderIndex:t}}(e,t)},bi=function(e,t){return void 0===e&&(e={}),void 0===t&&(t=!0),t?function(e){void 0===e&&(e={});var t=e.metaData||e.metadata||{},r=mi(t.link)||{},n=pi({type:t.type||"image",slug:e.itemId},r),o=n.type.toLowerCase();if("text"===o){var a=t.testStyle||{};Object.assign(n,{html:t.html,style:{width:a.width,height:a.height,bgColor:a.backgroundColor}})}else Object.assign(n,{title:t.title,description:t.description,alt:t.alt}),"image"===o?Object.assign(n,pi(pi({src:wi(e.mediaUrl,t),settings:Object.assign({},t.focalPoint?{focalPoint:t.focalPoint}:{})},"imageToken"in e&&{imageToken:e.imageToken}),"token"in e&&{token:e.token})):"video"===o&&Object.assign(n,{src:Ii(e.mediaUrl,t),thumbnail:t.posters[0].url});return n}(e):(n=(r=e).metaData||r.metadata||{},o=mi(n.link)||{},pi({uri:r.mediaUrl,description:n.description,alt:n.alt,title:n.title,height:n.height,width:n.width},o));var r,n,o};const{mediaGallery:Si,documentArray:Ri}=m.FieldType;var Ti=e=>{let{value:t,currentValue:r=[],fieldType:n}=e;switch(n){case Si:return[...r,...t.map((e=>{let{fileUrl:t,url:r}=e;return(e=>{let{uploadedFileUrl:t}=e;const{platform:{utils:{media:r}}}=j,n=r.parseMediaItemUri(t),o=r.createMediaItemUri(n).item,a=Ei({...n,src:o});return bi(a)})({uploadedFileUrl:t||r})}))];case Ri:return[...r,...t.map((e=>{let{fileUrl:t,url:r}=e;return t||r}))];default:return t[0].fileUrl||t[0].url}};const{reference:Oi,dateTime:Ci,date:Pi}=m.FieldType;var Di=e=>{let{value:t,currentValue:r,fieldType:n,fieldName:o,role:a,utils:{referenceFetcher:i}={}}=e;const s=[{converter:e=>i(e,o),condition:n===Oi},{converter:e=>((e,t)=>{const r={},n={};if(Ja(e))r.time=e,r.date=new Date;else{const t=ei(e);r.date=t,r.time=Za(t)}return Ja(t)?n.time=t:n.date=ei(t),Qa({...r,...n})})(r,e),condition:n===Ci&&[de,we,pe].includes(a)},{converter:ri,condition:n===Pi&&a===de},{converter:e=>Ti({value:e,currentValue:r,fieldType:n}),condition:a===fe}],c=s.reduce(((e,t)=>{let{converter:r,condition:n}=t;return n&&e.push(r),e}),[]);return(0,Ke.flow)(c)(t)};const Ni=e=>{let{value:t,role:r,fieldType:n,propPath:o,componentIsInput:a,format:i,utils:{formatter:s}={}}=e;return(0,Ke.flow)([e=>ni({value:e,formatter:s,fieldType:n,format:i}),e=>ci(e,{fieldType:n,role:r,componentIsInput:a,propPath:o})])(t)},Ai=e=>{let{recordStore:t}=e;return t().fold((()=>null),(e=>e.isCursorPaging()))},xi=e=>{let{state:t}=e;const{size:r}=Jr(t);return r},Fi=e=>{let{state:t}=e;const{offset:r}=Jr(t);return r},Mi=e=>{let{state:t}=e;const{size:r,numPagesToShow:n}=Jr(t);return r*n},Li=e=>{let{state:t}=e;const r=dn(t);return null==r?null:r},Ui=e=>{let{state:t}=e;if(null==Li({state:t}))return null;const{features:r}=j;if(r.newCurrentPageIndex){const{size:e,offset:r}=Jr(t);return r/e+1}const{size:n,offset:o,numPagesToShow:a}=Jr(t);return o/n+a},ki=e=>{let{recordStore:t}=e;return t().fold((()=>null),(e=>e.getDatasetSize()))},ji=e=>{let{state:t,recordStore:r}=e;const n=ki({recordStore:r});return n?Math.ceil(n.total/xi({state:t})):null},Vi=e=>{let{recordStore:t}=e;return t().fold((()=>!1),(e=>{const t=e.getDatasetSize();return e.isCursorPaging()&&!(null==t||!t.cursor)}))},Gi=e=>{let{state:t}=e;const r=Li({state:t});return null!=r&&r>0},Wi=e=>{let{state:t,recordStore:r}=e;if(Vi({recordStore:r}))return!0;const n=ki({recordStore:r});if(!n)return!1;const o=Li({state:t});return null!=o&&o<n.total-1},Bi=e=>{let{state:t}=e;const{offset:r}=Jr(t);return r>0},qi=e=>{let{state:t,recordStore:r}=e;if(Vi({recordStore:r}))return!0;const n=ki({recordStore:r});if(!n)return!1;const{offset:o,size:a}=Jr(t);return o+a<n.total},zi=async e=>{let{index:t,recordStore:r}=e;await r().fold((()=>{}),(e=>e.getRecords(t,1)))},{Checkbox:$i,Dropdown:Hi}=tt,Yi=e=>e.type===$i?"checked":"value",Xi=e=>{let{component:t,connectionConfig:r,currentRecord:n,previousRecord:o,getFieldType:a,formatter:i,modeIsLivePreview:s,logger:c,PresetVerboseMessage:l,recordStore:u,actions:d}=e;const{role:p,isInput:f}=t,{properties:h={},totalCount:m,expression:g={expression:"",prop:""}}=r,y={};if(m&&!d.isCursorPaging()){var v;const e=null==(v=ki({recordStore:u}))?void 0:v.total;if("number"==typeof e){const r=Ni({value:e,role:p});t.setValue(r,{propPath:m.prop})}}if(n){if(g.expression)try{const e="$text"===g.prop?"text":g.prop,r=(({expression:e,functions:t,variables:r})=>Ua({expression:ja(e),functions:t,variables:r}))({expression:g.expression,variables:n,functions:Ba}),o=Ni({value:r,role:p,componentIsInput:f,propPath:e,utils:{formatter:i}});y[e]=o,t.setValue(o,{propPath:e})}catch(e){c.log(e)}Object.entries(h).forEach((e=>{let[r,l]=e;try{const{fieldName:e,format:c}=l,u=a(e).getOrElse(void 0),d=Ni({value:za(n,e),role:p,componentIsInput:f,fieldType:u,propPath:r,format:c,utils:{formatter:i}});if(y[r]=d,(e=>{let{previousRecord:t,currentRecord:r,fieldName:n}=e;return(e=>!e)(t)||$a({previousRecord:t,currentRecord:r,fieldName:n})})({currentRecord:n,previousRecord:o,fieldName:e})){if(s&&(e=>void 0===e||""===e||Array.isArray(e)&&0===e.length)(d))return;t.setValue(d,{propPath:r,fieldType:u,binding:l})}}catch(e){c.log(new D("Failed setting "+r,{cause:e}))}})),c.log(new l(ze.types.COMPONENT.FILLED,{component:t,description:y}))}};var Ji=e=>{let{getConnectedComponents:t,getFieldType:r}=e;return e=>{const n=t();if(!n)return Qe.Maybe.Nothing();const o=n.filter((e=>{let{role:t}=e;return t===ne}));return Na(e).map((e=>{let{field:t,condition:n,value:a,positive:i}=e;const s=((e,t)=>e.map((e=>e===Ma&&"string"==typeof t&&/^[+-]?(?:\d+\.?\d*|\d*\.?\d+)$/.test(t.trim())?Number(t):e===Fa&&0===(0,Ke.get)(t,"length",0)?null:t)).getOrElse(t))(r(t),((e,t)=>{const{filterId:r}=e,n=t.find((e=>e.connectionConfig.filters[r]));if(!n)return;const o=Yi(n);return n.getValue({propPath:o})})(a,o));if(!s&&0!==s)return{$and:[]};const c={[t]:{[n]:s}};return i?c:{$not:[c]}}))}},Ki=a(4479),Qi=a(8031),Zi=a(3878);const es=e=>(0,Ki.X)(e)||(0,Qi.X)(e)||rs(e),ts=e=>{let{valueResolvers:t,getConnectedComponents:r,getFieldType:n,getUserFilterInitialData:o,wasSetFilterCalled:a}=e;return e=>{const i=Ca(es,(e=>(0,Ki.X)(e)?t.currentUser():(0,Qi.X)(e)?t.dataBinding(e):rs(e)?t.userInput(e):void 0),e).map((e=>{if(a())return e;const t=r().filter((e=>{let{role:t}=e;return De.includes(t)})).map((e=>{const{userInputFilter:t}=e.connectionConfig,{prop:r,fieldName:a}=t,i=e.getValue({propPath:r}),s=Kn(a)?Gn(a):a;if([Ne,"",!1].includes(i)||(0,Ke.isEqual)(i,[])||e.role===Pe&&(0,Ke.isEqual)(i,e.getBounds()))return null;const c=(e=>{let{value:t,fieldType:r,fieldName:n,getUserFilterInitialData:o}=e;switch(r){case m.FieldType.reference:{var a;const e=null==(a=o())?void 0:a.find((e=>e.fieldName===n&&Ae.includes(e.role)));if(!e)return null;const{referencedItemIdsByOption:r}=e;return(0,Ke.isArray)(t)?t.flatMap((e=>r[e])):r[t]}case m.FieldType.number:return Array.isArray(t)?t.map(Number):Number(t);default:return t}})({value:i,fieldType:n(s).getOrElse(null),fieldName:a,getUserFilterInitialData:o});if(null===c)return null;return{[s]:e.role===Pe?{$gte:c[0],$lte:c[1]}:Array.isArray(c)?{$hasSome:c}:c}})).filter(Boolean);return 0===t.length?e:{$and:[e].filter(Boolean).concat(t)}}));return i}},rs=e=>Na(e).map((e=>{let{value:t}=e;return(0,Zi.X)(t)})).getOrElse(!1),ns=e=>Ta(Qi.X,e),os=e=>!(0,Ke.isEmpty)(Ta(Zi.X,e)),as=e=>os(e)||(e=>!(0,Ke.isEmpty)(Ta(Ki.X,e)))(e)||(e=>ns(e).length>0)(e),{WRITE:is}=e,ss=(e,t,r)=>{const{readWriteType:n,deferred:o,filter:a,collectionName:i}=e,s=n===is,c=r.some((e=>{let{role:t}=e;return t===re})),l=t===Rr,u=Boolean(o)&&!(c||l||s),d=a&&as(a),p=(e=>{let{collectionId:t,datasetHasDynamicFilter:r,datasetIsDeferred:n,datasetIsRouter:o,datasetIsWriteOnly:a}=e;return t?r||n||o||a?"REGULAR":ba:"UNCONFIGURED"})({collectionId:i,datasetHasDynamicFilter:d,datasetIsDeferred:u,datasetIsRouter:l,datasetIsWriteOnly:s});return{sequenceType:p,datasetIsWriteOnly:s,datasetIsMaster:c,datasetIsRouter:l,datasetIsDeferred:u,datasetHasDynamicFilter:d}};var cs=e=>{const t=(0,Ke.values)({DATASET:Sr,ROUTER_DATASET:Rr});return e.map((e=>{const{id:r,type:n,collectionId:o,filter:a,sort:i,pageSize:s,readWriteType:c,includes:l,nested:u,deferred:d,connections:p,dataIsInvalidated:f,updatedCompIds:h,dynamicPageData:m,cursor:g}=e;t.includes(n)||j.logger.log(new D("type of controller MUST be one of "+t+" but is "+n));const y=(0,Ke.defaults)({collectionName:o,filter:a,sort:i,includes:l,nested:u,pageSize:s,readWriteType:c,cursor:g,deferred:d,uniqueFieldValues:[]},Ft);return{id:r,compId:r,type:n,livePreviewOptions:{shouldFetchData:f,compsIdsToReset:h},connections:p,dynamicPageData:m,config:{dataset:y,datasetStaticConfig:ss(y,n,p)}}}))};const ls=/[^{}]+(?=\})/g,us=/\{[^{}]+\}/g,ds=/[^\dA-Za-z]/g,ps=e=>e.replace(/(\/{2,})/g,"/").replace(/^\//,""),fs=Symbol("isPristine"),hs=e=>e._id,ms=e=>({...e,[fs]:!1}),gs=(e,t)=>({...e,_id:t||O().v4(),[fs]:!0}),ys=(e,t)=>e&&t&&e._id===t._id,vs=e=>(0,Ke.omit)(e,[fs]),ws=e=>{let{record:t,draft:r,includes:n,nestedFieldKeys:o,fieldKey:a}=e;return(e=>{let{includes:t,nestedFieldKeys:r,fieldKey:n}=e;const o=null==t?void 0:t.includes(n),a=r.includes(n);return o||a})({includes:n,nestedFieldKeys:o,fieldKey:a})&&(e=>{let{record:t,draft:r,fieldKey:n}=e;return(0,Ke.isPlainObject)(t[n])&&(0,Ke.isPlainObject)(r[n])})({record:t,draft:r,fieldKey:a})};const Is={chain:e=>t=>e.matchWith({Empty:()=>e,Results:e=>{let{items:r,datasetSize:n,offset:o}=e;return t({items:r,datasetSize:n,offset:o})}}),map:e=>t=>e.matchWith({Empty:()=>e,Results:e=>{let{items:r,datasetSize:n,offset:o}=e;const{items:a=r,datasetSize:i=n,offset:s=o}=t({items:r,datasetSize:n,offset:o});return _s.Results(a,i,s)}}),filter:e=>t=>e.matchWith({Empty:()=>e,Results:r=>{let{items:n,datasetSize:o,offset:a}=r;return t({items:n,datasetSize:o,offset:a})?e:_s.Empty()}}),orElse:e=>t=>e.matchWith({Empty:()=>t(),Results:()=>e}),get:e=>()=>e.matchWith({Empty:()=>({items:[],datasetSize:{total:0,loaded:0},offset:0}),Results:e=>e}),of:()=>Es},_s=(0,Qe.union)("QueryResults",{Empty:()=>({}),Results:function(e,t,r){return void 0===r&&(r=0),{items:e,datasetSize:t,offset:r}}},Is);function Es(e){let{items:t,datasetSize:r,offset:n}=e;return r&&Math.max(r.total,r.loaded)>0&&Array.isArray(t)?_s.Results(t,r,n):_s.Empty()}var bs={Empty:_s.Empty,Results:_s.Results,fromWixDataQueryResults:function(e,t){return e?this.of({items:e.items,datasetSize:e.datasetSize,offset:t}):_s.Empty()},of:Es};const Ss=e=>t=>({...t,...e}),Rs=(e,t)=>r=>t(e(r))(r),Ts=(e,t,r)=>{const n=new Map;return function(){for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];const s=t(a),c=n.get(s);if(c&&r(a,c.args))return c.result;const l=e.apply(this,a);return n.set(s,{args:a,result:l}),l}},Os=e=>Ss({records:e}),Cs=e=>t=>{var r,n,o;return{...t,datasetSize:{cursor:null==(r=t.datasetSize)?void 0:r.cursor,total:((null==(n=t.datasetSize)?void 0:n.total)||0)+e,loaded:((null==(o=t.datasetSize)?void 0:o.loaded)||0)+e}}},Ps=e=>{let{cursor:t,loaded:r,total:n}=e;return e=>({...e,datasetSize:{cursor:t,loaded:r+xs(e),total:n+xs(e)}})},Ds=e=>({...e,numSeedRecords:e.records.length}),Ns=e=>e.matchWith({Empty:()=>Ps({total:0,loaded:0}),Results:e=>{let{items:t,datasetSize:r}=e;return(0,Ke.flow)(Os(t.map((e=>hs(e)))),Ps(r),Ds)}}),As=e=>t=>({...t,newRecordMarkers:e(t.newRecordMarkers)}),xs=(e,t)=>e.newRecordMarkers.filter((e=>null==t||e<=t)).length,Fs=function(e,t,r){let{overwrite:n=!0,fixIndex:o=!0}=void 0===r?{}:r;return Rs((r=>{const a=e+(o?xs(r,e):0),i=Math.max(0,a-r.records.length),s=a+(n?t.length:0);return r.records.slice(0,a).concat(new Array(i)).concat(t.map((e=>hs(e)))).concat(r.records.slice(s))}),Os)},Ms=(e,t,r)=>n=>Object.assign({},e(n),...r.map((e=>({[t(e)]:e})))),Ls=(e,t,r)=>n=>({...e(n),[t]:r(e(n)[t])}),Us=(e,t)=>r=>Object.assign({},...Object.keys(e(r)).filter((e=>e!==t)).map((t=>({[t]:e(r)[t]})))),ks=e=>Ss({records:e}),js=e=>Ss({drafts:e}),Vs=(0,Ke.curry)(((e,t,r)=>Ss({scopes:{...r.scopes,[e]:t}})(r))),Gs=e=>t=>t.scopes[e],Ws=e=>Rs(Ms((e=>{let{records:t}=e;return t}),hs,e),ks),Bs=e=>Rs(Ms((e=>{let{drafts:t}=e;return t}),hs,[e]),js),qs=e=>Rs(Us((e=>{let{drafts:t}=e;return t}),hs(e)),js),zs=()=>js({}),$s=e=>e.matchWith({Empty:()=>e=>e,Results:e=>{let{items:t}=e;return t.length>0?Ws(t):e=>e}}),Hs=(e,t)=>Rs(Ls((e=>{let{drafts:t}=e;return t}),e,(0,Ke.flow)(ms,(e=>t=>Object.entries(e).reduce(((e,t)=>{let[r,n]=t;return(0,Ke.set)(e,r,n)}),(0,Ke.cloneDeep)(t)))(t))),js),Ys=(e,t,r,n)=>{const o=t.records[e],a=t.drafts[e],i=(0,Ke.isPlainObject)(o),s=(0,Ke.isPlainObject)(a);return i&&s?(e=>{let{record:t,draft:{_id:r,...n},includes:o,nestedFieldKeys:a}=e;const i=Object.keys(n).filter((e=>ws({record:t,draft:n,includes:o,nestedFieldKeys:a,fieldKey:e}))),s={...t,...n};return i.reduce(((e,r)=>({...e,[r]:(0,Ke.merge)({},t[r],n[r])})),s)})({record:o,draft:a,includes:r,nestedFieldKeys:n}):i?{...o}:s?{...a}:null},Xs=(0,Ke.curry)(((e,t,r)=>Object.keys(r.scopes).filter((e=>t(r.scopes[e],e))).map((t=>e(r.scopes[t],t))))),Js=(0,Ke.curry)((function(e,t,r,n,o,a,i){void 0===i&&(i=!1);const{records:s,datasetSize:c}=Gs(e)(a),l=r-t,u=s.slice(t,r).reduce(((e,t)=>{const r=Ys(t,a,n,o);return null!=r?e.concat(vs(r)):e}),[]);return bs.of({items:u,datasetSize:c,offset:t}).filter((function(e){let{items:t}=e;return i||t.length>=l}))})),Ks=(0,Ke.curry)(((e,t)=>Rs((0,Ke.flow)(Gs(e),t),Vs(e)))),Qs=(0,Ke.curry)(((e,t)=>Ss({[e]:t}))),Zs=e=>t=>t[e],ec=(0,Ke.curry)(((e,t)=>Rs((0,Ke.flow)(Zs(e),t),Qs(e)))),tc=e=>e===Xe,rc=e=>{let[{datasetId:t}]=e;return t},nc=(e,t)=>{let[r]=e,[n]=t;return(0,Ke.every)(r,((e,t)=>{return"filter"===t?(r=e,o=n[t],JSON.stringify(r)===JSON.stringify(o)):e===n[t];var r,o}))};var oc=e=>{let{primaryDatasetId:t,recordStoreCache:r,refreshStoreCache:n,dataProvider:o,mainCollectionName:a,includes:i,nestedFieldKeys:s,uniqueFieldValues:c,readWriteType:l,cursorPagingRequired:u}=e;const{breadcrumbReporting:d}=j,p=()=>r[t],f=e=>{r[t]=e};((0,Ke.isEmpty)(p())||n||tc(l))&&f((e=>({[e]:{records:{},drafts:{},scopes:{}}}))(a));const h=[],g=Ts((e=>{let{pageSize:t,sort:r,filter:n,datasetId:g,referencedCollectionName:y,fixedRecordId:v}=e;const w=null!=y?y:a,I=JSON.stringify({filter:n,sort:r}),_=Zs(w),E=ec(w),b=(0,Ke.flow)(_,Gs(I)),S=Ks(I),R=()=>o.getSchema(w),T=e=>e-e%t,O=(0,Ke.memoize)((e=>{let{offset:t,length:a,datasetSize:s}=e;return o.getData({datasetId:g,length:a,collectionId:w,cursorPaging:L.isCursorPaging(),offset:t,filter:n,sort:r,includes:null!=y?void 0:i,uniqueFieldValues:c,datasetSize:s}).then((e=>({items:e.items,datasetSize:e.datasetSize,offset:t})))}),(e=>{let{offset:t,length:r,datasetSize:n}=e;return[t,r,null==n?void 0:n.cursor].join("-")})),C=e=>L.isCursorPaging()?(async e=>{const t=[];let{datasetSize:r}=b(p());for(const{offset:n,length:o}of e){const e=await O({offset:n,length:o,datasetSize:r});if(t.push(e),r=e.datasetSize,!r.cursor)break}return t})(e):Promise.all(e.map((e=>{let{offset:t,length:r}=e;return O({offset:t,length:r})}))),P=(e,r,n)=>{const o=L.isCursorPaging()?0:T(r),a=(i=r,s=n,Math.ceil((T(i)+(s-T(i)))/t)*t);var i,s;const c=Jn(R())||m.DefaultMaxPageSize[L.getPaging()],l=((e,t,r)=>{const n=e.records.slice(t,r),o=n.findIndex(d),a=((e,t)=>{if(t.length>0)for(let r=t.length-1;r>=0;r-=1)if(e(t[r]))return r;return-1})(d,n),i=p(o,t),s=p(a,r),c=xs(e,i),l=i-c,u=s-c-l;return 0===u?Qe.Maybe.Nothing():Qe.Maybe.Just({offset:l,length:u});function d(e){return"string"!=typeof e}function p(t,r){return-1===t?Math.max(e.records.length,r):o+r}})(e,o,a),u=l.map((e=>{let{offset:t,length:r}=e;return r<=c?[{offset:t,length:r}]:(0,Ke.flatten)((0,Ke.times)(Math.ceil(r/c),(e=>[{offset:t+e*c,length:Math.min(c,r-e*c)}])))})).getOrElse([]);return C(u)},D=(e,t,r)=>Ra()(Qe.Result,h.map((n=>Qe.Result.try((()=>n(null!=e?vs(e):null,null!=t?vs(t):null,r)))))),N=function(e,t,r){const n=b(p()).records[r],o=Ys(n,_(p()),i,s);if(null==o)return t();{const t=function(){f((0,Ke.flow)(...arguments)(p()))},u=e=>{const t=Ys(n,_(p()),i,s);return(0,Ke.isEqual)(o,t)?Qe.Result.Ok([]):D(o,t,e)};for(var a=arguments.length,c=new Array(a>3?a-3:0),l=3;l<a;l++)c[l-3]=arguments[l];return e({update:t,notifyIfChanged:u},o,r,...c)}},A=(e,t)=>function(r){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return N(e,t,r,...o)},x=(e,t)=>async function(r){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return N(e,t,r,...o)},F=(e,t)=>d(t,We.with({category:"recordStore",message:e,data:{datasetId:g,scope:I}})),M=e=>{return e&&(t=hs(e),!_(p()).records[t]);var t},L={getRecords:F("getRecords",(async(e,t)=>{const{datasetSize:r}=b(p()),n=(e=>{let{from:t,length:r,datasetSize:n,cursorPaging:o}=e;if(!n)return t+r;const{total:a,loaded:i,cursor:s}=n,c=o?s?1/0:i:a;return Math.min(t+r,c)})({from:e,length:t,datasetSize:r,cursorPaging:L.isCursorPaging()}),o=Js(I,e,n,i,s),a=tc(l)||!r||(e=>{let{loaded:t,total:r,cursor:n}=e;return!t&&!r&&!n})(r);return o(_(p()),a).orElse((async()=>{const t=await P(b(p()),e,n),r=E((0,Ke.flow)(...t.map((e=>{let{items:t,datasetSize:r,offset:n}=e;return bs.fromWixDataQueryResults({items:t,datasetSize:r},n)})).map((e=>(0,Ke.flow)($s(e),S(e.matchWith({Empty:()=>Ps({total:0,loaded:0}),Results:e=>{let{items:t,datasetSize:r,offset:n}=e;return(0,Ke.flow)(Ps(r),t.length>0?Fs(n,t):e=>e)}}))))))),a=p();var i,s;return f(r(p())),i=_(a),s=_(p()),Object.keys(i.records).filter((e=>(0,Ke.isPlainObject)(s.records[e])&&s.records[e]._updatedDate>i.records[e]._updatedDate)).forEach((e=>D(i.records[e],s.records[e]))),o(_(p()),!0)}))})),getRecordsLimitedByMaxPageSize:(e,t)=>{const r=Math.min(t,Jn(R())||t);return L.getRecords(e,r)},seed:F("seed",(()=>{if(0===b(p()).numSeedRecords){return(v?o.getData({datasetId:g,length:t,collectionId:w,cursorPaging:void 0,offset:0,filter:n,sort:r,includes:null!=y?void 0:i,uniqueFieldValues:c}):o.getInitialData({datasetId:g,collectionId:w,filter:n,sort:r,includes:i,length:t,uniqueFieldValues:c})).then((e=>{const t=bs.fromWixDataQueryResults(e,0),r=E((0,Ke.flow)($s(t),S(Ns(t))));f(r(p()))}))}return Promise.resolve()})),getTheStore:p,getPaging:()=>(({schema:e,cursorPagingPreferred:t})=>{var r,n,o;const a=null===(r=null==e?void 0:e.pagingMode)||void 0===r?void 0:r.includes(m.PagingMode.Offset),i=null===(n=null==e?void 0:e.pagingMode)||void 0===n?void 0:n.includes(m.PagingMode.Cursor);return 1===(null===(o=null==e?void 0:e.pagingMode)||void 0===o?void 0:o.length)&&i||a&&i&&t?m.PagingMode.Cursor:m.PagingMode.Offset})({schema:R(),cursorPagingPreferred:u}),isCursorPaging:()=>L.getPaging()===m.PagingMode.Cursor,getSeedRecords:F("getSeedRecords",(()=>Js(I,0,b(p()).numSeedRecords,i,s,_(p()),!0))),getDatasetSize:F("getDatasetSize",(()=>b(p()).datasetSize)),getRecordById:F("getRecordById",(e=>Qe.Maybe.fromNullable(_(p()).records[e]))),removeRecord:F("removeRecord",x((async(e,t)=>{let{update:r,notifyIfChanged:n}=e;const a=hs(t);!M(t)&&a&&await o.remove({collectionId:w,recordId:a}),O.cache.clear();const i=Xs(((e,t)=>{return Ks(t,(0,Ke.flow)((n=a,Rs((e=>e.records.filter((e=>e!==n))),Os)),Cs(-1),As((r=((e,t)=>t.records.indexOf(e))(a,e),e=>e.filter((e=>e!==r))))));var r,n}),(s=a,e=>e.records.includes(s)),_(p()));var s;return r(E((0,Ke.flow)((0,Ke.flow)(qs(t),(e=>Rs(Us((e=>{let{records:t}=e;return t}),e),ks))(a)),...i))),n()}),(()=>Promise.resolve(Qe.Result.Error("cannot remove record: index not found"))))),reset:F("reset",(()=>{O.cache.clear(),f(E((0,Ke.flow)(Vs(I,{records:[],numSeedRecords:0,newRecordMarkers:[]}),zs()))(p()))})),newRecord:F("newRecord",((e,t)=>{const r=gs(t),n=E((0,Ke.flow)(Bs(r),S((0,Ke.flow)(Cs(1),Ss({newRecordMarkers:[e]}),Fs(e,[r],{overwrite:!1,fixIndex:!1})))));return f(n(p())),D(null,r),vs(r)})),saveRecord:F("saveRecord",x((async(e,t,r)=>{let{update:n,notifyIfChanged:a}=e;const i=await o.save({collectionId:w,record:vs(t),includeReferences:!0});return n(E((0,Ke.flow)((e=>Ws([e]))(i),qs(t),S((0,Ke.flow)(((e,t)=>Fs(e,[t],{fixIndex:!1}))(r,i),As((e=>e.filter((e=>e!==r))))))))),a(),vs(i)}),(()=>Promise.reject(new Error("cannot save record: index not found"))))),setFieldsValues:F("setFieldsValues",A(((e,t,r,n,o)=>{let{update:a,notifyIfChanged:i}=e;return Object.keys(n).length&&a(E(Hs(hs(t),n))),i(o)}),(()=>Qe.Result.Error("cannot update field values: index not found")))),isPristine:F("isPristine",A(((e,t)=>(e=>"boolean"!=typeof e[fs]||e[fs])(t)),(()=>!0))),hasDraft:F("hasDraft",A(((e,t)=>(e=>"boolean"==typeof e[fs])(t)),(()=>!1))),isNewRecord:F("isNewRecord",A(((e,t)=>M(t)),(()=>!0))),clearDrafts:F("clearDrafts",(()=>{f(E(zs())(p()))})),resetDraft:F("resetDraft",A(((e,t,r,n)=>{let{update:o,notifyIfChanged:a}=e;return o(E(M(t)?((e,t)=>Rs(Ls((e=>{let{drafts:t}=e;return t}),hs(e),(e=>gs(t,e._id))),js))(t,n):qs(t))),a()}),(()=>Qe.Result.Error("cannot reset draft: index not found")))),hasSeedData:F("hasSeedData",(()=>b(p()).numSeedRecords>0)),getUniqueFieldValues:F("getUniqueFieldValues",(e=>o.getUniqueFieldValues({collectionId:w,fieldKey:e})))};if(_(p())||f(Qs(w,{records:{},drafts:{},scopes:{}})(p())),!_(p()).scopes[I]){const e=[];if(v){const t=o.getRecord({collectionId:w,recordId:v,includes:i})||Ys(v,_(p()),i,s),r=t?[t]:[],n=r.length>0?bs.of({items:r,offset:0,datasetSize:{loaded:r.length,total:r.length}}):bs.Empty(),a=n.matchWith({Empty:Qe.Maybe.Nothing,Results:(0,Ke.flow)(bs.of,Qe.Maybe.Just)});(0,Ke.some)(r,M)&&e.push($s(n)),a.fold((()=>{e.push(Vs(I,{records:[],numSeedRecords:0,newRecordMarkers:[]}))}),(t=>{e.push(Vs(I,Ns(t)({records:[],numSeedRecords:0,newRecordMarkers:[]})))}))}else e.push(Vs(I,{records:[],numSeedRecords:0,newRecordMarkers:[]}));f(E((0,Ke.flow)(...e))(p()))}return L.externalApi={getRecords:async(e,t)=>(await L.getRecords(e,t)).map((e=>{let{items:t,...r}=e;return{items:(0,Ke.cloneDeep)(t),...r}})),getSeedRecords:()=>L.getSeedRecords().map((e=>{let{items:t,...r}=e;return{items:(0,Ke.cloneDeep)(t),...r}})),getRecordsLimitedByMaxPageSize:async(e,t)=>(await L.getRecordsLimitedByMaxPageSize(e,t)).map((e=>{let{items:t,...r}=e;return{items:(0,Ke.cloneDeep)(t),...r}}))},L}),rc,nc);var y;return g.onChange=(y=h,e=>(y.push(e),()=>{const t=y.indexOf(e);t>=0&&y.splice(t,1)})),g};var ac=e=>{const t={};return{setController:(r,n)=>{let{repeaterId:o,itemId:a}=r;e.log(new We({category:"scopeStore",message:"adding scope",data:{componentId:o,itemId:a}})),t[o]=t[o]||{},t[o][a]=n},getController:e=>{let{repeaterId:r,itemId:n}=e;const o=t[r];return o&&o[n]},removeController:r=>{let{repeaterId:n,itemId:o}=r;e.log(new We({category:"scopeStore",message:"removing scope",data:{componentId:n,itemId:o}}));const a=t[n];(0,Ke.get)(a,o)&&(a[o].dispose(),(0,Ke.unset)(a,o))},getAll:()=>Object.values(t).reduce(((e,t)=>e.concat(Object.values(t))),[])}},ic=a(7538);const sc=(0,Qe.union)("GoToIndexResult",{Record:(e,t)=>({index:e,record:t}),InvalidIndex:()=>({}),NoRecord:()=>({})}),cc=function(e,t){return void 0===t&&(t=!1),{type:Gt,index:e,suppressRefreshView:t}},lc=(e,t)=>({type:Lt,fieldsToUpdate:e,updateSource:t}),uc=e=>({type:Zt,atIndex:e}),dc=()=>({type:tr}),pc=async(e,t,r,n)=>{const o=await e(n).fold((()=>bs.Empty()),(e=>e.externalApi.getRecords(t,r)));return o.get()},fc=(e,t)=>pc(e,Fi({state:t}),Mi({state:t})),hc=e=>({type:rr,userFilterInitialData:e});var mc={doFetch:pc,fetchCurrentPage:fc,flushDraft:()=>({type:Xt}),goToRecordByIndexResult:(e,t)=>({type:zt,error:e,payload:t}),incrementNumOfPagesToShow:()=>({type:jt}),initWriteOnly:e=>e?cc(0):uc(0),loadPage:e=>({type:qt,pageNumber:e}),newRecord:uc,newRecordResult:(e,t)=>({type:er,error:e,payload:t}),nextPage:()=>({type:Wt}),previousPage:()=>({type:Bt}),reInitWriteOnly:()=>uc(0),refresh:dc,refreshCurrentRecord:()=>({type:Ut}),refreshCurrentView:()=>({type:kt}),refreshResult:(e,t)=>({type:zt,error:e,payload:t}),remove:()=>({type:Kt}),removeCurrentRecordResult:(e,t)=>({type:Qt,error:e,payload:t}),revert:()=>({type:Ht}),revertResult:(e,t)=>({type:Yt,error:e,payload:t}),saveRecordResult:(e,t)=>({type:Jt,error:e,payload:t}),setCurrentIndex:cc,setCurrentRecord:(e,t,r)=>({type:Mt,record:e,recordIndex:t,updateSource:r}),setDefaultRecord:e=>({type:Vt,record:e}),updateCurrentViewResult:(e,t)=>({type:$t,error:e,payload:t}),updateFields:lc,GoToIndexResult:sc};var gc=e=>({type:jr,connections:e});var yc=e=>({type:sr,filter:e}),vc=e=>({type:cr,sort:e}),wc=e=>({type:lr,isDatasetReady:e});var Ic=a(6286),_c=a.n(Ic);var Ec=(e,t)=>{const{middleware:r,subscribe:n,onIdle:o}=_c().createMiddleware(),a=At($r,void 0,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error(Ot(15))},o={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},a=t.map((function(e){return e(o)}));return n=xt.apply(void 0,a)(r.dispatch),Tt(Tt({},r),{},{dispatch:n})}}}(r,((e,t)=>()=>r=>n=>(e.log(new We({category:"redux",message:n.type+" (dataset: "+t+")",data:(0,Ke.omit)(n,"type","record")})),r(n)))(e,t)));return{store:a,subscribe:n,onIdle:o}};const{READ:bc,WRITE:Sc,READ_WRITE:Rc}=e,Tc={[bc]:"read-only",[Sc]:"write-only",[Rc]:"read-write"},Oc=(e,t)=>{if(e)throw new A("Operation ("+t+") not allowed on a dataset with non-offset paging mode",{code:"OPERATION_NOT_ALLOWED"})},Cc=(e,t)=>{if(r=e(),br.isDuringSave(r.records))throw new A("Operation ("+t+") not allowed during save",{code:"OPERATION_NOT_ALLOWED"});var r},Pc=function(e,t,r,n,o){void 0===t&&(t=""),void 0===o&&(o=!0),((e,t,r)=>{if(!Qr(e()))throw new A(r===Rr?"Operation ("+t+") is not allowed because the field used to build this page's URL is empty":"Operation ("+t+") not allowed on an unconfigured dataset",{code:"OPERATION_NOT_ALLOWED"})})(e,t,n),function(e,t,r){void 0===r&&(r=[]);const n=Kr(e());if(!(0,Ke.includes)(r,n))throw new A("Operation ("+t+") not allowed on "+Tc[n]+" dataset",{code:"OPERATION_NOT_ALLOWED"})}(e,t,r),o||Cc(e,t)},Dc=(e,t)=>{if(!(0,Ke.isNumber)(t))throw new A("Parameter ("+e+") must be a number",{code:"DS_INVALID_ARGUMENT"})},Nc=(e,t)=>{if(!(0,Ke.isInteger)(t)||t<1)throw new A("Parameter ("+e+") must be a positive integer number",{code:"DS_INVALID_ARGUMENT"})},Ac=(e,t)=>{if(!(0,Ke.isFunction)(t))throw new A("The callback passed to ("+e+") must be a function",{code:"DS_INVALID_ARGUMENT"})},xc=(e,t)=>{if(!Zr(e()))throw new A("The dataset didn't load yet. You need to call "+t+" inside the onReady for the dataset.",{code:"DS_NOT_LOADED"})},Fc=e=>{if(null==Li({state:e()}))throw new A("There is no current item",{code:"DS_NO_CURRENT_ITEM"})},Mc=(e,t)=>{if(e)throw new A('The "'+t+'" function cannot be called on the dataset because the dataset was selected using a repeated item scope selector.\nRead more about repeated item scope selectors: http://wix.to/94BuAAs/$w.Repeater.html#repeated-item-scope',{code:"OPERATION_NOT_ALLOWED"})},Lc=(e,t)=>{if(e!==Rr)throw new A('"'+t+'" function on the dataset is not allowed. "'+t+'" can only be called on a Dynamic Page Dataset.',{code:"OPERATION_NOT_ALLOWED"})};var Uc=e=>{let{datasetType:t,siblingDynamicPageUrlGetter:r}=e;const n={async getNextDynamicPage(){return null!=r?r.getNextDynamicPageUrl():null},async getPreviousDynamicPage(){return r?r.getPreviousDynamicPageUrl():null}};return(0,Ke.mapValues)(n,((e,r)=>function(){return Lc(t,r),e(...arguments)}))};const{READ:kc,WRITE:jc,READ_WRITE:Vc}=e;var Gc=e=>{let{store:{dispatch:t,getState:r},recordStore:n,eventListeners:{fireEvent:o,register:a},controllerStore:i,datasetId:s,datasetType:c,isFixedItem:l,siblingDynamicPageUrlGetter:u,onIdle:d,dispatcher:p,onReadyAsync:f}=e;const{logger:h,errorReporting:m,breadcrumbReporting:g,verboseReporting:y}=j,v=async function(){try{await t(mc.flushDraft());const n=(e=r(),br.selectLastSavedRecord(e.records)||un(r()));return(0,Ke.cloneDeep)(n)}catch(e){throw p.dispatch("datasetSaveError"),e}var e},w=async function(e,o){void 0===e&&(e=(e=>{let{state:t}=e;const r=Li({state:t});return null==r?0:r+1})({state:r()})),xc(r,o),Pc(r,o,[jc,Vc],c,!1),Dc("atIndex",e),await v(),Ai({recordStore:n})&&await zi({index:e,recordStore:n}),(e=>{let{index:t,datasetSize:{total:r,loaded:n}}=e;if(t<0||t>Math.max(r,n))throw new A("Invalid index",{code:"DS_INDEX_OUT_OF_RANGE"})})({index:e,datasetSize:ki({recordStore:n})}),await t(mc.newRecord(e))};return e=>{const p=e?(e,t)=>m(e,N.withMessage("An error occurred in one of "+t+" callbacks")):Ke.identity,I={async isIdle(){await new Promise((e=>{const t=d((()=>{t(),e()}))}))},onBeforeSave:e=>(Ac("onBeforeSave",e),Pc(r,"onBeforeSave",[jc,Vc],c,!1),a("beforeSave",p(e,"beforeSave"))),onAfterSave:e=>(Ac("onAfterSave",e),Pc(r,"onAfterSave",[jc,Vc],c,!1),a("afterSave",p(e,"afterSave"))),async save(){Pc(r,"save",[jc,Vc],c,!1);const e=await v();return tn(r())&&await t(mc.reInitWriteOnly()),e},async getItems(e,t){Pc(r,"getItems",[kc,Vc],c,!1),Dc("fromIndex",e),Dc("numberOfItems",t);const{items:o,offset:a,datasetSize:i}=await mc.doFetch(n,e,t);return{items:o,totalCount:Ai({recordStore:n})?void 0:i.total,offset:a}},getTotalCount:()=>(Pc(r,"getTotalCount",[kc,Vc],c,!1),Zr(r())?(Oc(Ai({recordStore:n}),"getTotalCount"),ki({recordStore:n}).total):null),getCurrentItem:()=>{Pc(r,"getCurrentItem",[kc,jc,Vc],c);const e=un(r());return e?(0,Ke.cloneDeep)(e):null},getCurrentItemIndex:()=>(Pc(r,"getCurrentItemIndex",[kc,Vc],c),Li({state:r()})),async setCurrentItemIndex(e){Mc(l,"setCurrentItemIndex"),Pc(r,"setCurrentItemIndex",[kc,Vc],c,!1),(e=>{if(!(0,Ke.isInteger)(e))throw new A("Parameter ("+e+") must be a number",{code:"PARAMETER_NOT_ALLOWED"})})(e),await new Promise((e=>E.onReady(e))),en(r())||await v(),await t(mc.setCurrentIndex(e))},setFieldValue:(e,n)=>{xc(r,"setFieldValue"),Pc(r,"setFieldValue",[jc,Vc],c),Fc(r),t(mc.updateFields({[e]:(0,Ke.cloneDeep)(n)}))},setFieldValues:e=>{xc(r,"setFieldValues"),Pc(r,"setFieldValues",[jc,Vc],c),Fc(r),t(mc.updateFields((0,Ke.mapValues)(e,Ke.cloneDeep)))},async next(){if(Mc(l,"next"),xc(r,"next"),Pc(r,"next",[kc,Vc],c,!1),en(r())||await v(),!E.hasNext())throw new A("There are no more items in the dataset",{code:"NO_SUCH_ITEM"});const e=Li({state:r()});return await t(mc.setCurrentIndex(e+1)),E.getCurrentItem()},async previous(){if(Mc(l,"previous"),xc(r,"previous"),Pc(r,"previous",[kc,Vc],c,!1),en(r())||await v(),!E.hasPrevious())throw new A("This is the first item in the dataset",{code:"NO_SUCH_ITEM"});const e=Li({state:r()});return await t(mc.setCurrentIndex(e-1)),E.getCurrentItem()},hasNext:()=>(Pc(r,"hasNext",[kc,Vc],c),Wi({state:r(),recordStore:n})),hasPrevious:()=>(Pc(r,"hasPrevious",[kc,Vc],c),Gi({state:r()})),async new(e){return w(e,"new")},async add(e){return w(e,"add")},async remove(){xc(r,"remove"),Pc(r,"remove",[Vc],c,!1);if(null==Li({state:r()}))throw new A("Invalid index",{code:"DS_INDEX_OUT_OF_RANGE"});await t(mc.remove())},async revert(){return xc(r,"revert"),Pc(r,"revert",[jc,Vc],c,!1),Fc(r),t(mc.revert())},async refresh(){xc(r,"refresh"),Pc(r,"refresh",[kc,jc,Vc],c,!1),await t(mc.refresh())},onCurrentIndexChanged:e=>(Ac("onCurrentIndexChanged",e),Pc(r,"onCurrentIndexChanged",[Vc,kc],c,!1),a("currentIndexChanged",p(e,"currentIndexChanged"))),onItemValuesChanged:e=>(Ac("onItemValuesChanged",e),Pc(r,"onItemValuesChanged",[Vc,jc],c,!1),a("itemValuesChanged",p(e,"itemValuesChanged"))),onError:e=>(Ac("onError",e),Pc(r,"onError",[Vc,kc,jc],c,!1),a("datasetError",p(e,"datasetError"))),onReady:e=>(Ac("onReady",e),Pc(r,"onReady",[kc,jc,Vc],c,!1),Zr(r())?(Promise.resolve(p(e)()),Ke.noop):a("datasetReady",p(e,"datasetReady"))),onReadyAsync:f,async setSort(e){Mc(l,"setSort"),Pc(r,"setSort",[kc,Vc],c,!1),(e=>{if(!e||!(0,Ke.isFunction)(e._build))throw new A("The given sort object is invalid",{code:"DS_INVALID_ARGUMENT"})})(e),await new Promise((e=>E.onReady(e))),en(r())||await v();const n=m((()=>e._build()),N.withMessage("Sort building failed"));await t(vc((0,Ke.cloneDeep)(n())))},async setFilter(e){Mc(l,"setFilter"),Pc(r,"setFilter",[kc,Vc],c,!1),(e=>{if(!e||!(0,Ke.isFunction)(e._build))throw new A("The given filter object is invalid",{code:"DS_INVALID_ARGUMENT"})})(e),await new Promise((e=>E.onReady(e))),en(r())||await v();const n=m((()=>e._build()),N.withMessage("Filter building failed"));await t(yc((0,Ke.cloneDeep)(n())))},loadMore:async()=>{Mc(l,"loadMore"),xc(r,"loadMore"),Pc(r,"loadMore",[kc,Vc],c,!1),await t(mc.incrementNumOfPagesToShow())},async nextPage(){if(Mc(l,"nextPage"),xc(r,"nextPage"),Pc(r,"nextPage",[kc,Vc],c,!1),en(r())||await v(),!E.hasNextPage())throw new A("There are no more pages in the dataset",{code:"NO_SUCH_PAGE"});await t(mc.nextPage());const{items:e}=await mc.fetchCurrentPage(n,r());return e},async previousPage(){if(Mc(l,"previousPage"),xc(r,"previousPage"),Pc(r,"previousPage",[kc,Vc],c,!1),en(r())||await v(),!E.hasPreviousPage())throw new A("This is the first page in the dataset",{code:"NO_SUCH_PAGE"});await t(mc.previousPage());const{items:e}=await mc.fetchCurrentPage(n,r());return e},hasNextPage(){return Pc(r,"hasNextPage",[kc,Vc],c),qi({state:r(),recordStore:n})},hasPreviousPage(){return Pc(r,"hasPreviousPage",[kc,Vc],c),Bi({state:r()})},getTotalPageCount(){return Pc(r,"getTotalPageCount",[kc,Vc],c),Zr(r())?(Oc(Ai({recordStore:n}),"getTotalPageCount"),ji({state:r(),recordStore:n})):null},getCurrentPageIndex(){return Pc(r,"getCurrentPageIndex",[kc,Vc],c),Ui({state:r()})},async loadPage(e){Pc(r,"loadPage",[kc,Vc],c,!1),Mc(l,"loadPage"),xc(r,"loadPage"),Oc(Ai({recordStore:n}),"loadPage"),((e,t)=>{if(Nc("pageNumber",e),e>t)throw new A("Page "+e+" does not exist",{code:"NO_SUCH_PAGE"})})(e,E.getTotalPageCount()),en(r())||await v(),await t(mc.loadPage(e));const{items:o}=await mc.fetchCurrentPage(n,r());return o},inScope:(e,t)=>{Pc(r,"inScope",[kc,jc,Vc],c,!1);const n=i.getController({repeaterId:e,itemId:t});return n?n.staticExports:E},getPageSize:()=>(Pc(r,"getPageSize",[kc,Vc],c),xi({state:r()})),async setPageSize(e){Pc(r,"setPageSize",[kc,Vc],c,!1),Nc("size",e),await new Promise((e=>E.onReady(e))),en(r())||await v(),await t(ir({size:e}))}},_=Uc({datasetType:c,siblingDynamicPageUrlGetter:u}),E=Object.assign(I,_),b={};for(const e in E)b[e]=(0,Ke.flow)((t=>g(t,We.with({category:"datasetAPI",message:"method: "+e+" - datasetId:"+s}))),(t=>y(t,e)),(t=>{return $(t,(r=e,e=>{throw e instanceof N?h.log(new N("datasetApi '"+r+"' operation failed",{cause:e})):e instanceof F?h.log(e):h.log(new D("datasetApi '"+r+"' operation failed",{cause:e})),o("datasetError",r,e instanceof x?e.cause.message:e.cause||e),e.cause||e}));var r}))(E[e]);return b}};var Wc=function(e){void 0===e&&(e=Ke.noop);let t=!1,r={};const n=e=>r[e]?r[e]:r[e]=[],o=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return Promise.all(n(e).map((e=>e(...r))))};return{register:(e,r)=>{if(t)return Ke.noop;const o=(e=>$((function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return Promise.resolve(e(t,...n))}),(e=>Promise.reject(e))))(r);return n(e).push(o),()=>{(0,Ke.remove)(n(e),(e=>e===o))}},executeHooks:o,fireEvent:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return j.logger.log(new ze(ze.types.DS_API.TRIGGERED,{eventName:t,eventArgs:n})),e(t,...n),o(t,...n)},dispose:()=>{t=!0,r={}}}};const Bc=["siteButtonRole","imageButtonRole","stylableButtonRole"],qc=[ce,le,ne,_e,...De],zc=e=>e.filter((e=>{let{role:t,isInput:r}=e;return r&&!qc.includes(t)})),$c=(e,t)=>e.filter((e=>{let{role:t}=e;return(0,Ke.includes)(Bc,t)})).filter((e=>{let{connectionConfig:r}=e;return(0,Ke.includes)(t,(0,Ke.get)(r,"events.onClick.action"))})),Hc=(e,t,r,n)=>{e.enabled!==t&&(t?e.enable():e.disable(),r.log(new We({category:"components",message:e.id+" changed to "+(t?"enabled":"disabled")+" (dataset: "+n+")"})))},Yc=(e,t,r,n,o)=>{let{getState:a,subscribe:i}=e;const s={new:()=>!en(a()),save:()=>rn(a()),revert:()=>rn(a()),remove:()=>rn(a()),next:()=>Wi({state:a(),recordStore:o}),previous:()=>Gi({state:a()}),nextPage:()=>qi({state:a(),recordStore:o}),previousPage:()=>Bi({state:a()}),nextDynamicPage:()=>yn(a()).hasUrl(),previousDynamicPage:()=>vn(a()).hasUrl(),loadMore:()=>(e=>{let{state:t,recordStore:r}=e;if(Vi({recordStore:r}))return!0;const n=ki({recordStore:r});return!!n&&Fi({state:t})+Mi({state:t})<n.total})({state:a(),recordStore:o})},{inputComponents:c,linkedComponents:l}=((e,t)=>{const r=(0,Ke.uniqBy)(e.filter((e=>{let{enabled:t}=e;return t})),(e=>{let{id:t}=e;return t}));return{inputComponents:zc(r),linkedComponents:$c(r,t)}})(t,Object.keys(s)),u=c.length+l.length?i((e=>{let{getState:t,inputComponents:r,linkedComponents:n,datasetId:o,logger:a,shouldEnableLinkedComponent:i}=e;return()=>{const e=t();if(!Zr(e))return;const s=rn(e);r.forEach((e=>{Hc(e,s,a,o)})),n.forEach((e=>{const{action:t}=e.connectionConfig.events.onClick,r=i[t]();Hc(e,r,a,o)}))}})({getState:a,inputComponents:c,linkedComponents:l,datasetId:n,logger:r,shouldEnableLinkedComponent:s})):Ke.noop;return u};const Xc={SHORT_DATE:"SHORT_DATE",MEDIUM_DATE:"MEDIUM_DATE",LONG_DATE:"LONG_DATE",FULL_DATE:"FULL_DATE",SHORT_DATE_TIME:"SHORT_DATE_TIME",LONG_DATE_TIME:"LONG_DATE_TIME",FULL_DATE_TIME:"FULL_DATE_TIME",MEDIUM_TIME_12:"MEDIUM_TIME_12",MEDIUM_TIME_24:"MEDIUM_TIME_24",LONG_TIME_12:"LONG_TIME_12",LONG_TIME_24:"LONG_TIME_24",HOUR_ONLY:"HOUR_ONLY",MINUTE_ONLY:"MINUTE_ONLY",YEAR_ONLY:"YEAR_ONLY",MONTH_ONLY:"MONTH_ONLY",SHORT_MONTH_ONLY:"SHORT_MONTH_ONLY",DAY_ONLY:"DAY_ONLY"},Jc=(new Set([Xc.SHORT_DATE_TIME,Xc.LONG_DATE_TIME,Xc.FULL_DATE_TIME,Xc.MEDIUM_TIME_12,Xc.MEDIUM_TIME_24,Xc.LONG_TIME_12,Xc.LONG_TIME_24,Xc.HOUR_ONLY,Xc.MINUTE_ONLY]),{[Xc.SHORT_DATE]:{day:"numeric",month:"numeric",year:"2-digit"},[Xc.MEDIUM_DATE]:{day:"numeric",month:"short",year:"numeric"},[Xc.LONG_DATE]:{day:"numeric",month:"long",year:"numeric"},[Xc.FULL_DATE]:{day:"numeric",month:"long",year:"numeric",weekday:"long"},[Xc.SHORT_DATE_TIME]:{day:"numeric",month:"numeric",year:"2-digit",hour:"numeric",minute:"numeric"},[Xc.LONG_DATE_TIME]:{day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},[Xc.FULL_DATE_TIME]:{day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric",weekday:"long",timeZoneName:"short"},[Xc.MEDIUM_TIME_12]:{minute:"numeric",hour:"numeric",hour12:!0},[Xc.MEDIUM_TIME_24]:{minute:"numeric",hour:"numeric",hour12:!1},[Xc.LONG_TIME_12]:{minute:"numeric",hour:"numeric",second:"numeric",hour12:!0},[Xc.LONG_TIME_24]:{minute:"numeric",hour:"numeric",second:"numeric",hour12:!1},[Xc.HOUR_ONLY]:{hour:"numeric"},[Xc.MINUTE_ONLY]:{minute:"numeric"},[Xc.YEAR_ONLY]:{year:"numeric"},[Xc.MONTH_ONLY]:{month:"long"},[Xc.SHORT_MONTH_ONLY]:{month:"short"},[Xc.DAY_ONLY]:{weekday:"long"}});var Kc=({locale:e,timeZone:t}={})=>{if(!e)throw new Error('A "locale" parameter is required for wixFormatting');return{formatDateTime(r,n,{locale:o,timeZone:a}={}){const i=Object.assign(Object.assign({},Jc[n]),{timeZone:a||t});return new Intl.DateTimeFormat(o||e,i).format(r)},dateFormats:Xc}};const Qc=e=>(0,Ke.isEqual)(!1,e);function Zc(e,t){return(0,Ke.mapValues)(t,((t,r)=>e(r).map((e=>function(e,t){switch(e){case"number":return Number(t);case"boolean":if("string"==typeof t)return"true"===t.toLowerCase()||"1"===t.toLowerCase();break;case"text":if(null!=t&&"function"==typeof t.toString)return t.toString()}return t}(e,t))).getOrElse(t)))}var el=function(e,t,r,n,o,a,i,s){const{logger:c,errorReporting:l,breadcrumbReporting:u}=j,d=(e,t)=>u(t,We.with({category:"effects",message:e,data:{datasetId:o}}));function p(e,r){t.onCurrentRecordModified(r,e)}function f(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return l(i,D.withMessage("Dataset "+e+" event execution failed"))(e,...r)}function h(){return Promise.all(t.onRecordsLoaded())}const m=e=>{throw new A(e,{code:"DS_OPERATION_FAILED"})};return{goToRecordByIndex:(t,r,n)=>({run:d("goToRecordByIndex",(async function(){let o;Ai({recordStore:e})&&await zi({index:r,recordStore:e});try{o=(e=>{let{recordStore:t,index:r}=e;const{total:n,loaded:o}=t().fold((e=>{throw e}),(e=>e.getDatasetSize()));return Math.max(Math.min(r,Math.max(n,o)-1),0)})({recordStore:e,index:r})}catch(e){m(e)}if(t!==o||n){const t=await(a=o,e().fold(m,(e=>e.getRecords(a,1))));return t.matchWith({Empty:()=>mc.GoToIndexResult.NoRecord(),Results:e=>{let{items:t}=e;return mc.GoToIndexResult.Record(o,t[0])}})}return mc.GoToIndexResult.InvalidIndex();var a})),isQueued:!0,resultActionCreator:mc.goToRecordByIndexResult}),setFieldsInCurrentRecord:(t,n,o)=>({run:d("setFieldsInCurrentRecord",(function(){const a=Zc(r,t);return e().fold(m,(e=>e.setFieldsValues(n,a,o).fold((e=>{throw e}),(()=>{}))))})),isQueued:!1}),revertChanges:(t,r)=>({run:d("revertChanges",(function(){e().chain((e=>e.resetDraft(t,r))),p()})),isQueued:!1,resultActionCreator:mc.revertResult}),saveRecord:(t,r)=>({run:d("saveRecord",(async function(){return await(c.log(new ze(ze.types.DS_API.TRIGGERED,{eventName:"beforeSave"})),n("beforeSave").then((e=>e.some(Qc))).catch((e=>({error:e}))).then((e=>{if(e)throw new A("Operation cancelled by user code. "+((0,Ke.isBoolean)(e)?"":e.error),{code:"DS_OPERATION_CANCELLED"})}))),e().fold((()=>!1),(async e=>{if(e.hasDraft(t)){!function(e){const t=a.filter((t=>!t.isValid(e)));if(t.forEach((e=>e.updateValidityIndication())),t.length)throw new A("Some of the elements validation failed",{code:"DS_VALIDATION_ERROR"})}(r);const n=await e.saveRecord(t);return f("afterSave",r,n),s.dispatch("afterSave",r,n),n}}))})),isQueued:!0,resultActionCreator:mc.saveRecordResult}),removeCurrentRecord:t=>({run:d("removeCurrentRecord",(()=>function(t){return e().fold(m,(e=>e.removeRecord(t)))}(t))),isQueued:!0,resultActionCreator:mc.removeCurrentRecordResult}),newRecord:(t,r)=>({run:d("newRecord",(()=>function(t,r){return e().fold(m,(e=>e.newRecord(t,r)))}(t,r))),isQueued:!0,resultActionCreator:mc.newRecordResult}),fireEvent:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return{run:d("fireEvent",(()=>f(e,...r))),isQueued:!1}},notifyIndexChange:e=>({run:d("notifyIndexChange",(()=>{t.onCurrentIndexChanged(),f("currentIndexChanged",e)})),isQueued:!1}),notifyRecordSetLoaded:()=>({run:d("notifyRecordSetLoaded",h),isQueued:!0}),updateCurrentView:e=>({run:d("updateCurrentView",(()=>Promise.all(t.onCurrentViewChanged()))),isQueued:!0,resultActionCreator:mc.updateCurrentViewResult}),refresh:(t,r,n)=>({run:d("refresh",(async function(){return e().fold(m,(async e=>(e.reset(),n?mc.GoToIndexResult.Record(0,e.newRecord(0,r)):e.getRecords(0,1).then((e=>e.matchWith({Empty:()=>mc.GoToIndexResult.NoRecord(),Results:e=>{let{items:t}=e;return mc.GoToIndexResult.Record(0,t[0])}}))))))})),isQueued:!0,resultActionCreator:mc.refreshResult}),updateComponents:(e,t)=>({run:d("updateComponents",(()=>{p(e,t)})),isQueued:!1})}};const tl=e=>xi({state:e});const rl=e=>yn(e).shouldLoadUrl(),nl=e=>vn(e).shouldLoadUrl();var ol=e=>{let{getNextDynamicPageUrl:t,getPreviousDynamicPageUrl:r}=e;const n={run:t,isQueued:!0,resultActionCreator:(e,t)=>({type:Ur,error:e,payload:t})},o={run:r,isQueued:!0,resultActionCreator:(e,t)=>({type:kr,error:e,payload:t})},a=e=>{let{hasChangedToTrue:t}=e;const r=[];return t(rl)&&r.push(n),t(nl)&&r.push(o),r};return e=>(0,Ke.flatten)([a].map((t=>t(e))))};const al=async e=>{let{dataProvider:t,collectionName:r,directionTowardSibling:n,useLowerCaseDynamicPageUrl:o,dynamicPagesData:{dynamicUrl:a,userDefinedFilter:i,dynamicUrlPatternFieldsValues:s,sort:c,sortFields:l,patternFields:u}={}}=e;if(null==a||!u.length)return null;const d=await t.getSibling({collectionName:r,sort:c,sortFields:l,directionTowardSibling:n,fieldValues:s,filter:i});return d&&((e,t,r)=>"/"+ps(t).replace(us,(t=>{const n=t.substring(1,t.length-1),o=r?String(e[n]).toLowerCase():e[n];return encodeURIComponent((""+o).replace(/ /g,"-"))})))(d,a,o)};const il=(e,t)=>{try{return sl(e(t))}catch(e){return cl(e)}},sl=e=>({value:e,then:t=>il(t,e),catch:()=>sl(e)}),cl=e=>({error:e,then:()=>cl(e),catch:t=>il(t,e)});var ll={resolve:sl,reject:cl},ul=e=>{let{recordStore:t}=e;const{logger:r}=j;return t().fold((()=>Promise.resolve(Qe.Maybe.Nothing())),(e=>e.hasSeedData()?(e=>e.getSeedRecords().matchWith({Empty:()=>ll.resolve(Qe.Maybe.Nothing()),Results:e=>{let{items:t}=e;return ll.resolve(Qe.Maybe.Just(t[0]))}}))(e):r.log(new Ge("dataset/pageReady/getData",(()=>(e=>e.seed().then((()=>e.getRecords(0,1).then((e=>e.chain((e=>{let{items:t}=e;return Qe.Maybe.Just(t[0])})))))).catch((e=>(r.logError(e,"Fetch initial data failed"),Qe.Maybe.Nothing()))))(e))))))};var dl=e=>{let{shouldFetchInitialData:t,recordStore:r,store:n,filter:o,sort:a,datasetIsDeferred:i,modeIsSSR:s,queueMicrotask:c,datasetIsReal:l,collectionId:u,filterResolver:d,dependencyManager:p,getSchemas:f,schemasLoading:h,getUserFilterInitialData:m}=e;const g=()=>{const e=(i=n.getState(),Lr.getUserFilterConnectionProps(i.config));var i;const s=t?ul({recordStore:r}):Promise.resolve();if(!(l&&(null==e?void 0:e.length)>0))return s.then((e=>Promise.resolve([e])));const c=d(o).map((async t=>{const r=m();if(r)return n.dispatch(hc(r)),r;await h;const o=f(),i=o[u];if(i){const r=await j.dataFetcher.fetchUserFilterInitialData({filter:t,sort:a,userFilterConnectionProps:e,schema:i,schemas:o});return n.dispatch(hc(r)),r}})).getOrElse(null);return Promise.all([s,c])},y=p.getDependencyResolutionPromise(o),v=i&&((e,t)=>{const{promise:r,resolve:n}=new z;return e||t(n),r})(s,c),{waitingForUserInput:w,resolveUserInputDependency:I}=os(o)&&(()=>{const{promise:e,resolve:t}=new z;return{waitingForUserInput:e,resolveUserInputDependency:t}})(),_=[y,v,w].filter((e=>Boolean(e)));return{fetchingInitialData:_.length?Promise.all(_).then(g):g(),resolveUserInputDependency:()=>I&&I()}};var pl=e=>{const t=["value","checked"];return e.reduce(((e,r)=>{var n;const o=(null==(n=r.connectionConfig)?void 0:n.properties)||{};return t.forEach((t=>{(0,Ke.has)(o,t)&&((e,t,r)=>{const n=(0,Ke.get)(r,t),o=Ja(n)&&Ka(e)?Qa({time:n,date:e}):Ka(n)&&Ja(e)?Qa({time:e,date:n}):e;(0,Ke.set)(r,t,o)})(r.getValue({propPath:t}),o[t].fieldName,e)})),e}),{})};const fl=(e,t,r)=>{var n;return t===r||(null==(n=e[t])?void 0:n.some((t=>fl(e,t,r))))},hl=e=>{let{components:t,connectionsGraph:r,updatedCompIds:n,datasetIsReal:o}=e;const a=t.filter((e=>(e=>{let{component:t,updatedCompIds:r,datasetIsReal:n,connectionsGraph:o}=e;if(r.length&&n){const{id:e}=t;return r.some((t=>fl(o,e,t)||fl(o,t,e)))}return!0})({component:e,connectionsGraph:r,updatedCompIds:n,datasetIsReal:o})));return a.some((e=>{let{role:t}=e;return t===ne}))?t:a},ml=(e,t)=>{let{repeaterId:r,itemId:n}=t;return[e,"componentId",r,"itemId",n].join("_")},gl=e=>e.split("_componentId_")[0],yl=(e,t)=>{const{logger:r}=j;return(n,o,a)=>{const i=((e,t)=>(0,Ke.isNull)(e)&&(0,Ke.isNull)(t))(n,o);if(i)return void r.log(new D("onChangeHandler invoked with illegal arguments",{extra:{arguments:{before:n,after:o,componentIdToExclude:a}}}));if((e=>(0,Ke.isNull)(e))(n))return void t(mc.refreshCurrentView()).catch((()=>{}));const s=un(e());if(((e,t)=>(0,Ke.isNull)(t))(0,o))return ys(n,s)&&t(mc.refreshCurrentRecord()).catch((()=>{})),void t(mc.refreshCurrentView()).catch((()=>{}));if(((e,t)=>ys(e,t))(n,s)){const r=Li({state:e()});t(mc.setCurrentRecord(o,r,a)).catch((()=>{}))}}},vl=e=>{let{detailsDatasetApis:t,masterDatasetApi:r,controllerConfig:n,unsubscribeHandlers:o}=e;const{logger:a}=j;t.forEach((e=>{const t=()=>{o.push(wl({masterDatasetApi:r,masterDatasetConfig:n,detailsDatasetApi:e}))};try{o.push(r.onReady(t))}catch(e){a.log(new $e(new A("The dataset cannot filter by the dynamic dataset because the field used to build this page's URL is empty",{code:"DS_EMPTY_URL_FIELD",cause:e}),"error"))}}))},wl=e=>{let{masterDatasetConfig:t,masterDatasetApi:r,detailsDatasetApi:n}=e;const o=dr(t.dataset);let a,i;return o!==Xe&&(a=r.onCurrentIndexChanged((()=>n.onReady((()=>n.refresh()))))),o!==Ye&&(i=r.onItemValuesChanged((()=>n.refresh()))),()=>[a,i].forEach((e=>null==e?void 0:e()))},{richText:Il}=m.FieldType,_l={$text:e=>e===Il?"html":"text"},El=e=>{let{propName:t,getFieldType:r}=e;return t in _l?_l[t](r()):t},bl=e=>e.startsWith("$"),Sl=e=>({id:e.id,role:e.role,isValidConnection:()=>!0,bind:()=>{},clear:()=>e.clear(),hide:()=>e.hide(),show:t=>e.show(t),resetUserFilter:()=>{},onRecordsLoaded:async()=>{},onCurrentViewChanged:async()=>{},onCurrentIndexChanged:async()=>{},onCurrentRecordModified:async()=>{}}),Rl=e=>!!e&&Object.values(e).some((e=>!(0,Ke.isEmpty)(e))),Tl=(e,t,r)=>{const{logger:n,platform:{location:o,utils:a,executeTpaAction:i}}=j,{getState:s,getFieldType:c,wixFormatter:l,modeIsLivePreview:u,PresetVerboseMessage:d}=r,p=o=>{Xi({currentRecord:un(s()),previousRecord:o,component:e,connectionConfig:t,formatter:l,modeIsLivePreview:u,getFieldType:c,logger:n,PresetVerboseMessage:d,recordStore:r.recordStore,actions:r.actions})},f=e=>e.matchWith({Empty(){},Loading(){},Loaded(e){let{url:t}=e;o.navigateTo(t)}}),h=t=>{const{datasetApi:s,getState:c,actions:l}=r;(0,Ke.forEach)(t,((t,r)=>{let{action:u,postAction:d}=t;e.on(r,(async()=>{try{if(u.startsWith("tpa/")){const e=s.getCurrentItem();return void await i({currentItem:e,action:u})}if("nextDynamicPage"===u)return f(yn(c()));if("previousDynamicPage"===u)return f(vn(c()));if("applyUserInputFilters"===u)return l.refresh();if("resetUserFilter"===u)return l.resetUserInputFilters();const e=await Promise.resolve(s[u]());if(d&&d.navigate){const t=((e,t)=>e.fieldName?za(t,e.fieldName):e.linkObject?a.links.toUrl(e.linkObject):void 0)(d.navigate,e);o.navigateTo(t)}}catch(e){e instanceof P||n.log(new D(u+" operation failed:",{cause:e}))}}))}))};return{...Sl(e),isValidConnection(){return Rl(t)},bind(){const{events:o,behaviors:a}=t;o&&h(o),a&&(t=>{const{dispatcher:n,eventListeners:{register:o}}=r;t.forEach((t=>{let r=!1;switch(t.type){case"saveSuccessFeedback":o("beforeSave",(()=>e.hide())),o("afterSave",(()=>{e.show(),r=!0})),o("currentIndexChanged",(()=>{r?r=!1:e.hide()})),o("itemValuesChanged",(()=>e.hide()));break;case"saveFailureFeedback":o("beforeSave",(()=>e.hide())),o("currentIndexChanged",(()=>e.hide())),n.subscribe("datasetSaveError",(()=>e.show()))}}))})(a),n.log(new d(ze.types.COMPONENT.BOUND,{component:e,description:Ha(t)}))},clear(){const{getFieldType:n}=r,{properties:o}=t;(0,Ke.forEach)(o,((t,r)=>{const o=n(t.fieldName).getOrElse(void 0),a=(e=>e===Ya?[]:void 0)(o);e.setValue(a,{propPath:r,fieldType:o,binding:t})}))},async onRecordsLoaded(){const{behaviors:t}=e.connectionConfig;p(),t&&t.forEach((t=>{"saveSuccessFeedback"===t.type&&e.hide()}))},async onCurrentViewChanged(){p()},async onCurrentIndexChanged(){p()},async onCurrentRecordModified(e){p(e)}}};const Ol=(e,t)=>{return r=e,n=t,Object.defineProperties({},{...Object.getOwnPropertyDescriptors(r),...Object.getOwnPropertyDescriptors(n)});var r,n},Cl=e=>{const t={getValue(){return e.data},setValue(t){e.data=t},clear(){e.data=[]},onItemReady(t){e.onItemReady(t)},onItemRemoved(t){e.onItemRemoved(t)}};return Ol(Al(e),t)},Pl=e=>"onChange"in e&&("value"in e||"checked"in e),Dl=(e,t)=>{const r=t.split("."),n=r.slice(0,-1),[o]=r.slice(-1);return{obj:n.length>0?(0,Ke.get)(e,n):e,prop:o}},Nl=e=>{if(!e||!e.parent)return;const{parent:t}=e;return t.type===tt.Repeater?Cl(t):Nl(t)},Al=e=>{const{connectionConfig:t,uniqueId:r,type:n,role:o,id:a}=e,i=!!e.hidden,s={id:r,connectionConfig:t,nickname:a,type:n,role:o,isInput:Pl(e),parentRepeater:Nl(e),getValue(t){let{propPath:r}=void 0===t?{}:t;if(r){const{obj:t,prop:n}=Dl(e,r);return t[n]}},setValue(t,r){let{propPath:n,fieldType:o,binding:a}=void 0===r?{}:r;if(n){const{obj:r,prop:i}=Dl(e,n);r[i]="reference"===o&&(e=>(0,Ke.isObject)(e)&&(0,Ke.has)(e,"_id"))(t)?t._id:t;const s=null==a?void 0:a.linkTarget;(e=>e===m.FieldType.url||e===m.FieldType.pageLink)(o)&&s&&(r.target=s)}},setOptions(t){"options"in e&&(e.options=t)},hide(){e.hidden||null==e.hide||e.hide()},show(t){let{ignoreInitiallyHidden:r}=void 0===t?{ignoreInitiallyHidden:!1}:t;!e.hidden||r&&i||null==e.show||e.show()},clear(e){s.setValue(void 0,e)},get enabled(){return!("enabled"in e)||e.enabled},enable(){"enable"in e&&!s.enabled&&e.enable()},disable(){"disable"in e&&s.enabled&&e.disable()},isValid(){return!("validity"in e)||"object"!=typeof e.validity||e.validity.valid},updateValidityIndication(){"updateValidityIndication"in e&&e.updateValidityIndication()},resetValidityIndication(){"resetValidityIndication"in e&&e.resetValidityIndication()},onChange(e){s.on("onChange",e)},on(t,r){var n;null==(n=e[t])||n.call(e,r)}};return"placeholder"in e&&Object.defineProperty(s,"placeholder",{get(){return e.placeholder}}),s},xl=e=>{switch(e.role){case oe:return(e=>{const t={setValue(t,r){let{fieldType:n,propPath:o="text",binding:a}=void 0===r?{}:r;if(n===m.FieldType.url){const r=(null==a?void 0:a.linkTarget)||"_blank";e.text="<a href="+t+' target="'+r+'" style="text-decoration: underline">'+t+"</a>";const{html:n}=e;return e.text="",void(e.html=(0,Ke.unescape)(n))}n!==m.FieldType.richText?e[o]=t:e.html=t},clear(t){let{fieldType:r}=void 0===t?{}:t;const n=r===m.FieldType.richText||r===m.FieldType.url?"html":"text";e[n]=""}};return Ol(Al(e),t)})(e);case he:case te:return Cl(e);case ue:return(e=>{const t={get nextEnabled(){return e.nextEnabled},set nextEnabled(t){e.nextEnabled=t},get previousEnabled(){return e.previousEnabled},set previousEnabled(t){e.previousEnabled=t},setValue(t){e.rows=t},getValue(){return e.rows},set rows(e){t.setValue(e)},get rows(){return e.rows},get columns(){return e.columns},clear(){e.rows=[],e.dataFetcher=void 0},set dataFetcher(t){e.dataFetcher=t},refresh(){return e.refresh()},onCellSelect(t){return e.onCellSelect(t)},onRowSelect(t){return e.onRowSelect(t)}};return Ol(Al(e),t)})(e);case fe:return(e=>{const t={isValid(t){const{connectionConfig:r,validity:n}=e;if(n.valid)return!0;if((0,Ke.some)((0,Ke.values)((0,Ke.omit)(n,["valid","valueMissing"])),(e=>e)))return!1;const o=(0,Ke.get)(r,"properties.value.fieldName")||"";return!(0,Ke.isEmpty)(za(t,o))},set fileType(t){e.fileType=t},get fileType(){return e.fileType},getValue(){return e.value},clear(){e.reset()},async uploadFiles(){return e.uploadFiles()}};return Ol(Al(e),t)})(e);case Ee:return(e=>{const t=Al(e),r={setValue(r,n){r?t.setValue(r,n):e.clear()}};return Ol(t,r)})(e);case ae:return(e=>{e.clickAction&&(e.clickAction=e.clickAction);const t={setValue(t){e.items=t},getValue(){return e.items},clear(){e.items=[]},set currentIndex(t){try{e.galleryCapabilities.hasCurrentItem&&(e.currentIndex=t)}catch(e){}},get currentIndex(){return e.currentIndex},get clickAction(){return e.clickAction},onCurrentItemChanged(t){e.galleryCapabilities.hasCurrentItem&&e.onCurrentItemChanged((e=>{let{item:r,itemIndex:n}=e;return t(r,n)}))}};return Ol(Al(e),t)})(e);case ge:return(e=>{const t={get currentPage(){return e.currentPage},set currentPage(t){e.currentPage=t},get totalPages(){return e.totalPages},set totalPages(t){e.totalPages=t},get nextEnabled(){return e.nextEnabled},set nextEnabled(t){e.nextEnabled=t},get previousEnabled(){return e.previousEnabled},set previousEnabled(t){e.previousEnabled=t},get navigationType(){return e.navigationType},set navigationType(t){e.navigationType=t},onNextClicked(t){e.onNextClicked(t)},onPreviousClicked(t){e.onPreviousClicked(t)}};return Ol(Al(e),t)})(e);case ve:return(e=>{const t={setValue(t){e.location=t},getValue(){return e.location},clear(){e.markers=[]},set location(t){e.location=t},get location(){return e.location},set markers(t){e.markers=t},get markers(){return e.markers},setCenter(t){e.setCenter(t)}};return Ol(Al(e),t)})(e);case Pe:return(e=>{const t={setValue(t){e.value=t},getValue(){return e.value},clear(){e.value=[]},setBounds(t,r){e.min=t,e.max=r},getBounds(){return[e.min,e.max]}};return Ol(Al(e),t)})(e);default:return Al(e)}},Fl=e=>t=>{const r=[],n=[];(0,Ke.uniq)(t.map((e=>{let{role:t}=e;return t}))).forEach((t=>{if(t===re){return void(e("@"+t)||[]).forEach((e=>e&&n.push(e)))}if(t===me){const t=e("@"+me)||[],[n]=Array.isArray(t)?t:[t],o=e("Document");if(o&&n){const e=new Proxy(o,{get(e,t){return"connectionConfig"===t?n.connectionConfig:"role"===t?me:e[t]}});r.push(e)}return}(e("@"+t)||[]).forEach((e=>{e&&r.push(e)}))}));return{components:r.map((e=>xl(e))),detailsDatasetApis:n}},Ml=(e,t,r)=>{const{logger:n,errorReporting:o}=j,{getState:a,getFieldType:i,actions:s,modeIsLivePreview:c,PresetVerboseMessage:l}=r,u=o=>{Xi({currentRecord:un(a()),previousRecord:o,component:e,connectionConfig:t,modeIsLivePreview:c,getFieldType:i,logger:n,PresetVerboseMessage:l,recordStore:r.recordStore,actions:r.actions})},d=()=>{const t=s.isCurrentRecordPristine(a()),r=s.isCurrentRecordNew(a());t&&r&&e.resetValidityIndication()};return{...Sl(e),isValidConnection(){return Rl(t)},bind(){(()=>{const{id:r,role:n}=e,{properties:c}=t;e.onChange(o((e=>{const t=c.checked?"checked":"value",o=c[t].fieldName,l=un(a()),u=Di({value:e.target[t],currentValue:za(l,o),fieldType:i(o).getOrElse(void 0),fieldName:o,utils:{referenceFetcher:(e,t)=>s.fetchRecordById(e,t).getOrElse(e)},role:n});s.setFieldInCurrentRecordAndSynchronize(o,u,r)}),D.withMessage("Input adapter onChange - setting value to record failed")))})(),t.filters&&e.onChange(o(s.refresh,D.withMessage("Input adapter onChange - sync actions failed"))),n.log(new l(ze.types.COMPONENT.BOUND,{component:e,description:Ha(t)}))},async onRecordsLoaded(){u(),d()},async onCurrentViewChanged(){u(),d()},async onCurrentIndexChanged(){u(),d()},async onCurrentRecordModified(e){u(e),d()}}},Ll={start:0,end:0},Ul=(e,t)=>{let{valueField:r,labelField:n,dataTransformer:o}=t;const a=o(za(e,r));return{value:a,label:n?o(za(e,n)):a}},kl=e=>(0,Ke.get)(e,"properties.value.fieldName")||"",jl=(e,t,r)=>{const{errorReporting:n}=j,{actions:o,recordStore:a,getState:i}=r,s=t.userInputFilter.fieldName;e.onChange(n((async()=>{const t=In(i()),n=(c=i(),br.selectIsApplyUserInputFiltersActionBindingPresent(c.records));var c;if(t||n)return;await o.refresh();const l=a().fold((()=>{}),(e=>e.getDatasetSize().total)),u=Hr(i());(e=>{let{state:t,numberOfResults:r,filteredBy:n,componentType:o,fieldType:a,schema:i}=e;const{logger:s,platform:{settings:{env:{editor:c}}}}=j,l=Kr(t),u=Hr(t);if(!u)return;const d=i.getOrElse({displayName:u}).displayName;s.log(new Ln({id:c?366:371,collectionId:u,collectionName:d,datasetMode:l,numberOfResults:r,filteredBy:n,componentType:o,fieldType:a}))})({filteredBy:s,numberOfResults:l,state:r.getState(),componentType:e.type,fieldType:r.getFieldType(s).getOrElse(void 0),schema:r.getSchema(u)})}),D.withMessage("Filter input adapter onChange failed")))},Vl=(e,t,r)=>{const{i18n:n}=j,{getState:o}=r,a=t=>{const r=Array.isArray(e.getValue({propPath:t}))?[]:Ne;e.setValue(r,{propPath:t})};return{...Sl(e),isValidConnection(){return Tr(t)},bind(){jl(e,t,r);const{userInputFilter:{prop:i,fieldName:s}}=t,c=(e=>{var t;return null==(t=Tn(o()))?void 0:t.find((t=>t.fieldName===e&&Ae.includes(t.role)))})(s);c&&(e.setOptions((e=>{let{component:t,prop:r,userFilterInitialData:o}=e;return[!Array.isArray(t.getValue({propPath:r}))&&{value:Ne,label:n.t("USER_INPUT_FILTER_OPTION_RESET_ALL")},...o.options.map((e=>({value:String(e),label:String(e)})))].filter(Boolean)})({component:e,prop:i,userFilterInitialData:c})),(e=>"placeholder"in e)(e)||a(i))},resetUserFilter(){const{userInputFilter:{prop:r}}=t;e.getValue({propPath:r})&&a(r)}}},Gl=new Map([[he,(e,t,r)=>{const{logger:n,errorReporting:o}=j,{controllerFactory:a,controllerStore:i,PresetVerboseMessage:s}=r,c=[],l=(t,r)=>{const n={repeaterId:e.id,itemId:r._id},o=a.createScopedDataset({datasetScope:n,fixedItem:r});i.setController(n,o);const s=Fl(t.scoped),l=o.pageReady(s);c.push(l)},u=t=>{const r={repeaterId:e.id,itemId:t._id};i.removeController(r)},d=async()=>{const{actions:t,getState:o,modeIsLivePreview:a}=r,{items:i}=await t.fetchCurrentItems(o());a&&0===i.length||(n.log(new s(ze.types.COMPONENT.FILLED,{component:e,description:{data:i}})),e.setValue(i),await Promise.all(c),c.splice(0))};return{...Sl(e),bind(){e.onItemReady(o(l,D.withMessage("Repeater adapter onItemReady failed"))),e.onItemRemoved(o(u,D.withMessage("Repeater adapter onItemRemoved failed"))),n.log(new s(ze.types.COMPONENT.BOUND,{component:e}))},async onRecordsLoaded(){return d()},async onCurrentViewChanged(){d()},async onCurrentIndexChanged(){},async onCurrentRecordModified(){const{getState:t}=r,n=un(t()),o=e.getValue();if(o&&o.length>0){const t=o.map((e=>e._id===n._id?n:e));e.setValue(t)}}}}],[te,(e,t,r)=>{const{errorReporting:n}=j,{controllerFactory:o,controllerStore:a}=r,i=(t,r)=>{const n={repeaterId:e.id,itemId:r._id},i=o.createScopedDetailsDataset({datasetScope:n});a.setController(n,i);const s=Fl(t.scoped);i.pageReady(s)},s=t=>{const r={repeaterId:e.id,itemId:t._id};a.removeController(r)};return{...Sl(e),bind(){e.onItemReady(n(i,D.withMessage("Details repeater adapter onItemReady failed"))),e.onItemRemoved(n(s,D.withMessage("Details repeater adapter onItemRemoved failed")))}}}],[ne,(e,t,r)=>{const{errorReporting:n}=j,{actions:o}=r;return{...Sl(e),isValidConnection(){return Rl(t)},bind(){e.onChange(n(o.refresh,D.withMessage("Filter input adapter onChange failed")))},resetUserFilter(){const t=Yi(e);e.setValue((e=>{switch(e.type){case $i:return!1;case Hi:return"";default:return null}})(e),{propPath:t})}}}],[Se,Vl],[Oe,Vl],[Te,Vl],[Ce,Vl],[Re,(e,t,r)=>{const n=()=>{const{userInputFilter:{prop:r}}=t;e.setValue(null,{propPath:r})};return{...Sl(e),isValidConnection(){return Tr(t)},bind(){jl(e,t,r),n()},resetUserFilter(){n()}}}],[Pe,(e,t,r)=>{const{getState:n}=r,o=r=>{let{firstRender:o}=r;const{userInputFilter:{fieldName:a,prop:i}}=t,{min:s,max:c}=(t=>{var r;return null==(r=Tn(n()))?void 0:r.find((r=>r.fieldName===t&&r.role===e.role))})(a);o&&e.setBounds(s,c),e.setValue([s,c],{propPath:i})};return{...Sl(e),isValidConnection(){return Tr(t)},bind(){jl(e,t,r),o({firstRender:!0})},resetUserFilter(){o({firstRender:!1})}}}],[ue,(e,t,r)=>{const{logger:n,errorReporting:o}=j,{datasetApi:a,PresetVerboseMessage:i,getState:s,modeIsLivePreview:c,actions:l}=r;let u=Ll;const d=e=>u=e,p=()=>d(Ll),f=e=>{let{fetchRows:t,logGridValue:r,disableNavigation:n=!1}=e;return async(e,o)=>{const{items:a,datasetSize:i}=await t(e,o-e);return r(a),{pageRows:a,totalRowsCount:n?a.length:i.total}}},h=t=>{let{fetchRows:r,logGridValue:n}=t;return async t=>{let{direction:o,limit:a}=t,{start:i,end:s}=u;"previous"===o?(s=i,i-=a):(i=s,s+=a);const{items:c,datasetSize:l}=await r(i,s-i);return d({start:i,end:s}),e.nextEnabled=!!l.cursor||s<l.loaded,e.previousEnabled=i>0,n(c),{pageRows:c,totalRowsCount:l.total||void 0}}},m=t=>{const r=[],o=e.columns;(0,Ke.forEach)(t,(e=>{const t={};(0,Ke.forEach)(o,(r=>{t[r.label]=(0,Ke.get)(e,r.dataPath)})),r.push(t)})),n.log(new i(ze.types.COMPONENT.FILLED,{component:e,description:r}))};return{...Sl(e),bind(){l.getInitialData().chain((t=>{let{items:r}=t;e.rows=r}));const t=un(s());if(c&&!t)return;const r=l.isCursorPaging();e.dataFetcher=r?{type:"directional",value:h({fetchRows:l.fetch,logGridValue:m,component:e})}:{type:"pages",value:f({fetchRows:l.fetch,logGridValue:m})},e.onCellSelect(o((e=>{let{cellRowIndex:t}=e;a.setCurrentItemIndex(t)}),D.withMessage("Grid adapter onCellSelect failed"))),e.onRowSelect(o((e=>{let{rowIndex:t}=e;a.setCurrentItemIndex(t)}),D.withMessage("Grid adapter onRowSelect failed"))),(()=>{const t={};e.columns.forEach((e=>{let{label:r,dataPath:n,linkPath:o}=e;(n||o)&&(t[r]=Object.assign(n?{dataPath:n}:{},o?{linkPath:o}:{}))})),n.log(new i(ze.types.COMPONENT.BOUND,{component:e,description:t}))})()},async onCurrentRecordModified(){e.refresh()},async onRecordsLoaded(){p(),e.refresh()},async onCurrentViewChanged(){p(),e.refresh()}}}],[ce,(e,t,r)=>{const{logger:n}=j,{actions:o,getFieldType:a,getSchema:i,PresetVerboseMessage:s}=r,c=async(e,t)=>(e=>{const t=e[0];return 1===e.length&&""===t.label&&""===t.value?[]:e})(await(async(e,t)=>{if(a(e).map((e=>"reference"===e)).getOrElse(!1))return i().chain((r=>{const n=Yn(e,r);return i(n).map(Xn).map((async r=>{const{items:n}=await o.fetchAll(e),a=n.map((e=>Ul(e,{valueField:"_id",labelField:r,dataTransformer:t})));return(0,Ke.orderBy)(a,[e=>e.label.toLowerCase()])}))})).getOrElse(Promise.resolve([]));{const{items:r}=await o.fetchAll(),n=r.map((r=>Ul(r,{valueField:e,dataTransformer:t})));return(0,Ke.uniqBy)(n,"value")}})(e,t)),l=async()=>{const{role:r}=e,{properties:o}=t,a=await c(o.value.fieldName,(e=>Ni({value:e,role:r})));n.log(new s(ze.types.COMPONENT.FILLED,{component:e,description:{options:a}})),e.setOptions(a)};return{...Sl(e),isValidConnection(){return Rl(t)},clear(){e.setOptions([])},bind(){(()=>{const{properties:r}=t,o={options:r.value.fieldName};n.log(new s(ze.types.COMPONENT.BOUND,{component:e,description:o}))})()},async onRecordsLoaded(){l()},async onCurrentRecordModified(){l()}}}],[le,(e,t,r)=>{const{logger:n}=j,{actions:o,PresetVerboseMessage:a}=r,i=async(e,t)=>{const{items:r}=await o.fetchAll(),n=r.map((r=>((e,t)=>{let{valueField:r,labelField:n,dataTransformer:o}=t;const a=o(za(e,r));return{value:a,label:n?o(za(e,n)):a}})(r,{valueField:e,dataTransformer:t})));return(0,Ke.uniqBy)(n,"value")},s=async()=>{const{role:r}=e,{properties:o}=t,s=await(async(e,t)=>(e=>{const t=e[0];return 1===e.length&&""===t.label&&""===t.value?[]:e})(await i(e,t)))(o.options.fieldName,(e=>Ni({value:e,role:r})));n.log(new a(ze.types.COMPONENT.FILLED,{component:e,description:{options:s}})),e.setOptions(s)};return{...Sl(e),isValidConnection(){return Rl(t)},clear(){e.setOptions([])},bind(){(()=>{const{properties:r}=t,o={options:r.options.fieldName};n.log(new a(ze.types.COMPONENT.BOUND,{component:e,description:o}))})()},async onRecordsLoaded(){s()},async onCurrentRecordModified(){s()}}}],[_e,(e,t,r)=>{const{logger:n}=j,{actions:o,PresetVerboseMessage:a,modeIsLivePreview:i}=r,s=async()=>{const{role:r}=e,{properties:{options:{fieldName:s}}}=t,{items:c}=await o.fetchAll(),l=c.reduce(((e,t)=>{const n=Ni({value:za(t,s),role:r});return n&&e.push({value:n,label:n}),e}),[]);i&&0===l.length||(e.setOptions(l),n.log(new a(ze.types.COMPONENT.FILLED,{component:e,description:{options:l}})))};return{...Sl(e),isValidConnection(){return Rl(t)},bind(){const{properties:{options:{fieldName:r}}}=t;n.log(new a(ze.types.COMPONENT.BOUND,{component:e,description:{options:r}}))},clear(){e.setOptions([])},async onRecordsLoaded(){s()},async onCurrentRecordModified(){s()}}}],[fe,(e,t,r)=>{const{logger:n,errorReporting:o}=j,{actions:a,datasetApi:i,getState:s,getFieldType:c,PresetVerboseMessage:l}=r,u={},d=function(r){void 0===r&&(r=!1);const n=un(s()),o=kl(t),i=a.isCurrentRecordNew(s()),c=(0,Ke.isEmpty)(za(n,o));(a.isCurrentRecordPristine(s())||r)&&e.clear(),!c||i&&!r||e.updateValidityIndication()};return{...Sl(e),isValidConnection(){return Rl(t)},bind(){if(en(s()))return;const{id:r,role:d}=e,p=kl(t),f=c(p).getOrElse(void 0);e.onChange(o((()=>{u[r]=!0}),D.withMessage("Upload button adapter onChange failed"))),i.onBeforeSave((()=>{if(u[r]&&e.getValue().length)return e.uploadFiles().then((e=>{u[r]=!1;const t=un(s()),n=Di({value:e,currentValue:za(t,p),fieldType:f,fieldName:p,role:d});a.setFieldInCurrentRecordAndSynchronize(p,n,r)})).catch((t=>{const r=e.getValue(),o=Array.isArray(r)&&1===r.length?r[0].name:"unknown";throw n.log(new N("The "+o+" file failed to upload. Please try again later.",{cause:t})),t}))})),c(p).map((t=>{switch(t){case"image":e.fileType="Image";break;case"document":e.fileType="Document"}}));const{properties:h}=t;(0,Ke.forEach)(h,((t,r)=>{let{fieldName:o}=t;n.log(new l(ze.types.COMPONENT.BOUND,{component:e,description:{[r]:o}}))}))},async onCurrentRecordModified(r){const{id:n}=e,o=kl(t),a=un(s()),i=$a({previousRecord:r,currentRecord:a,fieldName:o});i&&(u[n]=!1),d(i)},async onRecordsLoaded(){d()},async onCurrentViewChanged(){d()},async onCurrentIndexChanged(){d()}}}],[ae,(e,t,r)=>{const{logger:n,errorReporting:o}=j,{actions:a,getState:i,getFieldType:s,modeIsLivePreview:c,wixFormatter:l,PresetVerboseMessage:u}=r,d=(e,t,r,n)=>{(0,Ke.forEach)(r,((r,o)=>{let{fieldName:a,format:i}=r;const c=Ni({value:za(t,a),role:n,fieldType:s(a).getOrElse(void 0),propPath:o,format:i,utils:{formatter:l}});e[o]=c}))},p=()=>{e.currentIndex=Li({state:i()})},f=async()=>{const{role:r}=e,{properties:o}=t,{items:s}=await a.fetchCurrentItems(i());try{const t=s.map((e=>{const t={};return d(t,e,o,r),t})),a=t.every((e=>{let{src:t}=e;return!t}));if(c&&a)return;n.log(new u(ze.types.COMPONENT.FILLED,{component:e,description:t})),e.setValue(t)}catch(e){if("URIError"!==e.name)throw e}p()};return{...Sl(e),isValidConnection(){return Rl(t)},bind(){e.onCurrentItemChanged(o((()=>{a.setCurrentIndex(e.currentIndex)}),D.withMessage("Gallery adapter onItemReady failed"))),(()=>{const{properties:r}=t,o={};(0,Ke.forEach)(r,((e,t)=>{let{fieldName:r}=e;o[t]=r})),n.log(new u(ze.types.COMPONENT.BOUND,{component:e,description:o}))})()},async onCurrentRecordModified(){const{role:r}=e,{properties:n}=t,o=un(i()),a=Li({state:i()}),s=e.getValue()||[],c=s[a];c&&d(c,o,n,r),e.setValue(s),p()},async onRecordsLoaded(){f()},async onCurrentViewChanged(){f()},async onCurrentIndexChanged(){p()}}}],[ge,(e,t,r)=>{const{logger:n,errorReporting:o}=j,{actions:a,getState:i,PresetVerboseMessage:s}=r,c=()=>{a.isCursorPaging()?(()=>{const t=Ui({state:i()});e.nextEnabled=a.hasNextPage(i()),e.previousEnabled=t>1})():(()=>{const t=Ui({state:i()}),r=a.getTotalPageCount(i());e.currentPage=t,r<1?e.disable():(e.enable(),e.totalPages=r)})()};return{...Sl(e),bind(){const t=a.isCursorPaging(),r=e=>{let{delta:r,index:n}=e;const o=Ui({state:i()}),s=r?o+r:n,c=xi({state:i()}),l=t?s:(0,Ke.clamp)(s,1,a.getTotalPageCount(i()));a.setCurrentIndex(((e,t)=>t*(e-1))(l,c))};t?(e.navigationType="arrowsOnly",e.onNextClicked(o((()=>r({delta:1})),D.withMessage("Pagination adapter onNextClicked failed"))),e.onPreviousClicked(o((()=>r({delta:-1})),D.withMessage("Pagination adapter onPreviousClicked failed")))):e.onChange(o((e=>r({index:e.target.currentPage})),D.withMessage("Pagination adapter onChange failed"))),n.log(new s(ze.types.COMPONENT.BOUND,{component:e}))},async onRecordsLoaded(){c()},async onCurrentViewChanged(){c()}}}],[ve,(e,t,r)=>{const{logger:n}=j,{actions:o,getState:a,getFieldType:i,wixFormatter:s,PresetVerboseMessage:c}=r,l=function(e,t,r){return void 0===t&&(t={}),(0,Ke.reduce)(t,((t,n,o)=>{let{fieldName:a,format:c}=n;const l=za(e,a);if("address"===o)return Object.assign(t,{address:(0,Ke.get)(l,"formatted"),location:(0,Ke.get)(l,"location")});if("link"===o&&(0,Ke.isEmpty)(l))return t;const u=Ni({value:za(e,a),role:r,fieldType:i(a).getOrElse(void 0),propPath:o,format:c,utils:{formatter:s}});return Object.assign(t,{[o]:u})}),{})},u=async()=>{const{role:r}=e,{properties:i}=t;try{const{items:t}=await o.fetchCurrentItems(a());e.markers=t.map((e=>l(e,i,r)))}catch(e){n.log(new D("Failed setting markers",{cause:e}))}};return{...Sl(e),isValidConnection(){return Rl(t)},bind(){(()=>{const{properties:r}=t,o={};(0,Ke.forEach)(r,((e,t)=>{let{fieldName:r}=e;o[t]=r})),n.log(new c(ze.types.COMPONENT.BOUND,{component:e,description:o}))})()},async onRecordsLoaded(){u()},async onCurrentViewChanged(){u()},async onCurrentIndexChanged(){const t=Li({state:a()});e.setCenter((0,Ke.get)(e,["markers",t,"location"]))},async onCurrentRecordModified(){const{properties:r}=t,{role:n}=e,o=un(a()),i=Li({state:a()});e.markers[i]=l(o,r,n),e.setCenter((0,Ke.get)(e,["markers",i,"location"]))}}}]]),Wl=e=>{let{components:t,context:r}=e;const n=(e=>{let{recordStore:t,dispatch:n}=e;const a={fetchRecordById:(e,r)=>t(r).fold((()=>Qe.Maybe.Nothing()),(t=>t.getRecordById(e))),fetchAll:e=>(async(e,t,r,n)=>{const o=await e(n).fold((()=>bs.Empty()),(e=>e.externalApi.getRecordsLimitedByMaxPageSize(t,r)));return o.get()})(t,0,1e3,e),fetchCurrentItems:e=>fc(t,e).catch((()=>bs.Empty().get())),fetchOne:()=>pc(t,0,1),fetch:(e,r,n)=>pc(t,e,r,n),getTotalPageCount:e=>ji({state:e,recordStore:t}),getInitialData:()=>t().fold((()=>bs.Empty()),(e=>e.externalApi.getSeedRecords())),setCurrentIndex:(e,t)=>n(cc(e,t)),setFieldInCurrentRecordAndSynchronize:(e,t,r)=>{n(lc({[e]:(0,Ke.cloneDeep)(t)},r))},refresh:()=>n(dc()),resetUserInputFilters:()=>{const e=o.filter((e=>{let{role:t}=e;return t===ne||De.includes(t)})),t=In(r.getState());e.length&&(e.forEach((e=>e.resetUserFilter())),t||a.refresh())},isCurrentRecordNew:e=>t().fold((()=>!1),(t=>t.isNewRecord(Li({state:e})))),isCurrentRecordPristine:e=>t().fold((()=>!1),(t=>t.isPristine(Li({state:e})))),isCursorPaging:()=>Ai({recordStore:t}),hasNextPage:e=>qi({state:e,recordStore:t}),getUniqueFieldValues:e=>t().fold((()=>!1),(t=>t.getUniqueFieldValues(e)))};return a})(r),o=t.map((e=>((e,t,r)=>(Gl.get(e.role)||(e.isInput?Ml:Tl))(e,t,r))(e,((e,t)=>{if(!e)return e;const{properties:r,totalCount:n}=e;return{...e,...r?{properties:(0,Ke.mapKeys)(r,((e,r)=>bl(r)?El({propName:r,getFieldType:()=>t(e.fieldName).getOrElse(null)}):r))}:{},...n?{totalCount:{prop:bl(n.prop)?El({propName:n.prop,getFieldType:()=>null}):n.prop}}:{}}})(e.connectionConfig,r.getFieldType),{...r,actions:n}))).filter((e=>e.isValidConnection()));return{bindAll:async()=>Promise.all(o.map((e=>(e.bind(),e.onRecordsLoaded())))),hideAll:()=>o.map((e=>e.hide())),showAll:()=>o.map((e=>e.show({ignoreInitiallyHidden:!0}))),clearAll:()=>o.map((e=>e.clear())),onRecordsLoaded:()=>o.map((e=>e.onRecordsLoaded())),onCurrentViewChanged:()=>o.map((e=>e.onCurrentViewChanged())),onCurrentIndexChanged:()=>o.map((e=>e.onCurrentIndexChanged())),onCurrentRecordModified:(e,t)=>o.filter((e=>{let{id:r}=e;return!t||t!==r})).map((t=>t.onCurrentRecordModified(e)))}},Bl=e=>{let{datasetId:t,masterIds:r,connectionsGraph:n}=e;const o=e=>n[t].includes(e.id)?"PRIMARY":r.some((t=>n[t].includes(e.id)))?"DETAILS":"OTHER";return{isInsidePrimaryOrDetailsRepeater:e=>{let{parentRepeater:t}=e;return!!(r=t)&&["PRIMARY","DETAILS"].includes(o(r));var r},getDetailsRepeaters:e=>{const t=[];return e.forEach((e=>{let{parentRepeater:r}=e;r&&"DETAILS"===o(r)&&t.push(new Proxy(r,{get(e,t){return"role"===t?te:e[t]}}))})),(0,Ke.uniqBy)(t,"uniqueId")}}},ql="mediaGalleryRole",zl=[m.FieldType.text,m.FieldType.number,m.FieldType.image,m.FieldType.video,m.FieldType.mediaGallery,m.FieldType.richContent],$l={[m.FieldType.text]:"text",[m.FieldType.number]:"number",[m.FieldType.image]:"image",[m.FieldType.video]:"video",[m.FieldType.mediaGallery]:"gallery",[m.FieldType.richContent]:"rich-content"},Hl=e=>{var t;let{recordStore:r,state:n,schema:o,connections:a,isDpItemDataset:i}=e;if(!i&&!a.length)return{collectionData:void 0};const s=un(n);if(!s)return{collectionData:void 0};const{id:c,displayName:l,displayField:u,fields:d}=o,p=i&&u?s[u]:void 0,f=i?1:null!=(t=(e=>{let{recordStore:t}=e;const r=ki({recordStore:t});return r?r.total:null})({recordStore:r}))?t:void 0;return{title:p,collectionData:{id:c,name:l||c,totalCount:f,fields:Yl({connections:a,fields:d,currentRecord:s}),primary:i}}},Yl=e=>{let{connections:t,fields:r,currentRecord:n}=e;const o=t.reduce(Jl,{});return Object.entries(r).filter((e=>{let[t,r]=e;return!r.pii&&!r.isDeleted&&zl.includes(r.type)})).map((e=>{var t;let[r,a]=e;return{key:r,type:$l[a.type],label:a.displayName,connected:!(null==(t=o[r])||!t.length),value:Xl({key:r,field:a,currentRecord:n,connections:o[r]||[]})}}))},Xl=e=>{let{key:t,field:r,currentRecord:n,connections:o}=e;const{type:a}=r,i=n[t];switch(a){case m.FieldType.image:return i&&Kl({src:i},o);case m.FieldType.video:return i&&Ql({src:i},o);case m.FieldType.mediaGallery:return Zl(i,o);case m.FieldType.text:case m.FieldType.number:case m.FieldType.richContent:return i;default:throw new Error("Unsupported field type: "+a)}},Jl=(e,t)=>{var r;const n=(null==t||null==(r=t.config)?void 0:r.properties)||{};return Object.values(n).map((e=>{let{fieldName:t}=e;return t})).forEach((r=>{e[r]||(e[r]=[]),e[r].push(t)})),e},Kl=(e,t)=>{let{src:r}=e;const n=t.some((e=>{var t,r,n;let{role:o,config:a}=e;return o===ql&&Boolean(null==a||null==(t=a.properties)?void 0:t.items)||"galleryRole"===o&&Boolean(null==a||null==(r=a.properties)?void 0:r.src)||"imageRole"===o&&Boolean(null==a||null==(n=a.properties)?void 0:n.src)}));return{url:r,...eu(r),connectedToSrc:n}},Ql=(e,t)=>{let{src:r,title:n,description:o}=e;const a=t.some((e=>{var t,r,n;let{role:o,config:a}=e;return o===ql&&Boolean(null==a||null==(t=a.properties)?void 0:t.items)||"videoPlayerRole"===o&&Boolean(null==a||null==(r=a.properties)?void 0:r.src)||"videoRole"===o&&Boolean(null==a||null==(n=a.properties)?void 0:n.src)}));if(!nu(r))return{thumbnailUrl:void 0,title:n,description:o,uploadDate:void 0,connectedToSrc:a};const[i,s]=r.match(/posterUri=(\w+)/)||[],[c,l]=r.match(/posterWidth=(\d+)/)||[],[u,d]=r.match(/posterHeight=(\d+)/)||[];return{thumbnailUrl:tu({uri:s,width:Number(l),height:Number(d)}),title:n,description:o,uploadDate:void 0,connectedToSrc:a}},Zl=function(e,t){return void 0===e&&(e=[]),e.map((e=>"image"===e.type?Kl(e,t):Ql(e,t)),t)},eu=e=>{if(!ru(e))return{height:void 0,width:void 0};const[t,r]=e.match(/originHeight=(\d+)/)||[],[n,o]=e.match(/originWidth=(\d+)/)||[];return{height:r?Number(r):void 0,width:o?Number(o):void 0}},tu=e=>{let{uri:t,width:r,height:n,filename:o="image.ext"}=e;return"wix:image://v1/"+t+"/"+o+"#originWidth="+r+"&originHeight="+n},ru=e=>e.startsWith("wix:image://"),nu=e=>e.startsWith("wix:video://");var ou=(e,t)=>r=>{let{shouldCollectSeoData:n,controllerConfig:o,datasetType:a,connections:i,connectionsGraph:s,isScoped:c,datasetScope:l,dataProvider:u,dependencyManager:d,seoManager:p,firePlatformEvent:f,dynamicPagesData:h,datasetId:m,fixedRecordId:g,recordStoreService:y,updatedCompIds:v,markControllerAsRendered:w,markDatasetDataFetched:I,renderingRegularControllers:_,modeIsLivePreview:E,modeIsSSR:b,useLowerCaseDynamicPageUrl:S,schemasLoading:R,listenersByEvent:T}=r;const O=i.filter((e=>!(e=>{let{role:t}=e;return De.includes(t)})(e)||e.config)),C=!!g,{logger:P,loadFormulaJs:N,platform:{user:A,settings:{locale:x},timers:{queueMicrotask:F}}}=j,{setConnectedComponents:M,getConnectedComponents:L}=(()=>{let e;return{setConnectedComponents:t=>e=t,getConnectedComponents:()=>e}})(),U=[],{store:k,subscribe:V,onIdle:G}=Ec(P,m),W=Wc(f),{fireEvent:B,register:z}=W;U.push(W.dispose);const H=new q({datasetId:gl(m),scopedDatasetId:c?m:void 0,getState:k.getState,getSchema:function(e){return void 0===e&&(e=ee),u.getSchema(e)}}),Y=H.subscribe(T);U.push(...Y),k.dispatch(ar({controllerConfig:o,connections:O,isScoped:c,datasetType:a}));const{datasetIsVirtual:X,datasetIsReal:J,datasetIsDeferred:K,datasetIsWriteOnly:Q,datasetIsRouter:Z,datasetCollectionName:ee,dynamicPageNavComponentsShouldBeLinked:te}=(re=k.getState(),{datasetIsRouter:nn(re),datasetIsMaster:on(re),datasetIsVirtual:an(re),datasetIsReal:sn(re),datasetIsDeferred:cn(re),datasetIsWriteOnly:tn(re),datasetCollectionName:Hr(re),dynamicPageNavComponentsShouldBeLinked:ln(re)});var re;const ne=Yr(k.getState()),oe=Xr(k.getState()),ae=function(e){return void 0===e&&(e=ee),Qe.Maybe.fromNullable(u.getSchema(e))},ie=e=>{const t=ae(ee),r=u.getReferencedSchemas(ee);return t.chain((t=>Qe.Maybe.fromNullable(Hn(t,r)(e))))},se=((e,t,r)=>({dataBinding:Da(e),currentUser:Pa(),userInput:Ji({getConnectedComponents:t,getFieldType:r})}))((e=>d.getDependencyById(e,l)),L,ie),ce=ts({valueResolvers:se,getConnectedComponents:()=>Zr(k.getState())?L():[],getFieldType:ie,getUserFilterInitialData:()=>Tn(k.getState()),wasSetFilterCalled:(0,Ke.flow)((()=>k.getState()),In)}),le=(e=>{let{recordStoreService:t,getFilter:r,getSort:n,getPageSize:o,datasetId:a,filterResolver:i,getSchema:s,fixedRecordId:c}=e;return e=>{const l=o();return t.chain((t=>{if(e)return Qe.Result.fromMaybe(s().map((t=>Yn(e,t))),"cannot resolve referenced collection name for field "+e).map((e=>t({pageSize:l,sort:null,filter:null,datasetId:a,referencedCollectionName:e,fixedRecordId:c})));{const e=r();return Qe.Result.fromMaybe(i(e).map((e=>t({pageSize:l,sort:n(),filter:e,datasetId:a,referencedCollectionName:null,fixedRecordId:c}))),"could not resolve dynamic filter")}}))}})({recordStoreService:y,getFilter:(0,Ke.flow)((()=>k.getState()),Yr),getSort:(0,Ke.flow)((()=>k.getState()),Xr),getPageSize:()=>xi({state:k.getState()}),datasetId:m,filterResolver:ce,getSchema:ae,fixedRecordId:g}),ue=te?(e=>{let{dataProvider:t,dynamicPagesData:r,collectionName:n,useLowerCaseDynamicPageUrl:o}=e;return{getNextDynamicPageUrl:()=>al({dataProvider:t,dynamicPagesData:r,collectionName:n,directionTowardSibling:"asc",useLowerCaseDynamicPageUrl:o}),getPreviousDynamicPageUrl:()=>al({dataProvider:t,dynamicPagesData:r,collectionName:n,directionTowardSibling:"desc",useLowerCaseDynamicPageUrl:o})}})({dataProvider:u,dynamicPagesData:h,collectionName:ee,useLowerCaseDynamicPageUrl:S}):null;let de,pe;te&&(V(ol(ue)),k.dispatch(gc(O)));const he=new Promise(((e,t)=>{de=e,pe=t})),me=c?void 0:()=>he;c||z("datasetReady",de);const ge=Gc({store:k,recordStore:le,eventListeners:W,controllerStore:t,datasetId:m,datasetType:a,isFixedItem:C,siblingDynamicPageUrlGetter:ue,onIdle:G,dispatcher:H,onReadyAsync:me}),ye=ge(!1);U.push(y.map((e=>e.onChange(yl(k.getState,k.dispatch)))).getOrElse((()=>{})));const{fetchingInitialData:ve,resolveUserInputDependency:we}=dl({dependencyManager:d,shouldFetchInitialData:o&&!Q,recordStore:le,store:k,filter:ne,sort:oe,datasetIsDeferred:K,modeIsSSR:b,queueMicrotask:F,datasetIsReal:J,collectionId:ee,filterResolver:ce,getSchemas:()=>u.getSchemas(),schemasLoading:R,getUserFilterInitialData:()=>u.getUserFilterInitialData(m)});ve.then((()=>{I();const e=le().fold((()=>{}),(e=>e.getSeedRecords().matchWith({Empty:()=>{},Results:e=>{let{items:t}=e;return t[0]}})));e&&k.dispatch(mc.setCurrentRecord(e,0))}));c&&!C&&d.getDependenciesByFilter(ne,l).forEach((e=>{let{masterDataset:{api:t}}=e;vl({detailsDatasetApis:[ye],store:k,masterDatasetApi:t,controllerConfig:o,unsubscribeHandlers:U})}));n&&J&&!K&&Promise.all([ve,R]).then((()=>{let e={};try{e=Hl({isDpItemDataset:Z,recordStore:le,state:k.getState(),schema:u.getSchema(ee),connections:O})}catch(e){P.log(new D("Failed to extract seo data for dataset "+m,{cause:e}))}p.submitSeoData(e)}));const Ie=async function(r){A.onLogin((()=>{(()=>{const e=Li({state:k.getState()}),t=le().fold((()=>!1),(t=>t.isPristine(e)));return t&&!Q})()&&ye.refresh()}));const{components:n,detailsDatasetApis:i}=r(O),c=hl({updatedCompIds:v,datasetIsReal:J,connectionsGraph:s,components:n});M(c);const l=((e,t)=>{let{datasetId:r,connectionsGraph:n,datasetIsReal:o,getDependencies:a}=t;if(!o)return e;const{isInsidePrimaryOrDetailsRepeater:i,getDetailsRepeaters:s}=Bl({datasetId:r,connectionsGraph:n,masterIds:a().map((e=>e.masterDatasetId))}),c=e.filter((e=>!i(e)));return c.push(...s(e)),c})(c,{datasetId:m,datasetIsReal:J,connectionsGraph:s,getDependencies:()=>d.getDependenciesByFilter(ne)});if(vl({detailsDatasetApis:i,masterDatasetApi:ye,dependencyManager:d,controllerConfig:o,unsubscribeHandlers:U}),J&&await R,we(),!Qr(k.getState())||!u.hasSchema(o.dataset.collectionName))return ve.then((()=>{w(),d.resolveDependants(m),k.dispatch(wc(!0)),B("datasetReady")})),Promise.resolve();const p=Wl({components:l,context:{connections:O,recordStore:le,dispatch:k.dispatch,getState:k.getState,datasetApi:ye,eventListeners:W,dispatcher:H,getFieldType:ie,getSchema:ae,controllerFactory:e,controllerStore:t,PresetVerboseMessage:ze.with({collectionId:ee}),modeIsLivePreview:E,wixFormatter:x?Kc({locale:x}):null}});V(((e,t,r,n,o,a,i,s)=>{const c=el(e,t,r,n,o,a,i,s),l=e=>{let{from:t,to:r,hasChanged:n,hasChangedToFalse:o,hasChangedToTrue:a,hasChangedToMatch:i}=e;const s=dn(r),l=dn(t),u=fn(r),d=_n(r),p=[];return(i(fn,(e=>e>=0&&e!==s))||a(_n))&&p.push(c.goToRecordByIndex(l,u,d)),(n(dn)&&l>=0||o(wn)&&0===s)&&p.push(c.notifyIndexChange(s)),p},u=e=>{let{from:t,to:r,hasChanged:n,hasChangedToMatch:o,hasChangedToTrue:a}=e;const i=dn(r),s=un(r),l=un(t),u=[];ys(l,s)?(0,Ke.isEqual)(l,s)||(u.push(c.updateComponents(mn(r),l)),u.push(c.fireEvent("itemValuesChanged",(0,Ke.cloneDeep)(l),(0,Ke.cloneDeep)(s)))):null==l||null==s||n(dn)||u.push(c.updateComponents());const d=hn(r);return o(hn,(e=>null!=e))&&u.push(c.setFieldsInCurrentRecord(d,i,mn(r))),a(Sn)&&u.push(c.revertChanges(i,pn(r))),a(bn)&&u.push(c.removeCurrentRecord(i)),u},d=e=>{let{to:t,hasChanged:r,hasChangedToFalse:n,hasChangedToTrue:o}=e;const a=[];return r(tl)&&a.push(c.refresh(dn(t),pn(t),tn(t))),r(Jr)&&a.push(c.notifyRecordSetLoaded()),o(wn)&&a.push(c.refresh(dn(t),pn(t),tn(t))),n(wn)&&a.push(c.notifyRecordSetLoaded()),o(En)&&a.push(c.updateCurrentView()),a},p=e=>{let{to:t,hasChangedToTrue:r}=e;const n=dn(t),o=un(t);if(r(Rn))return c.saveRecord(n,o)},f=e=>{let{to:t,hasChangedToNotNull:r}=e;const n=[];return r(gn)&&n.push(c.newRecord(gn(t),pn(t))),n};return e=>(0,Ke.flatten)([l,u,d,p,f].map((t=>t(e))))})(le,p,ie,W.executeHooks,m,l,B,H)),U.push(((e,t,r,n,o)=>Yc(e,t,r,n,o))(k,l,P,m,le));const f=pl(l.filter((e=>{let{role:t}=e;return![fe,Ee].includes(t)})));k.dispatch(mc.setDefaultRecord(f)),Q&&await k.dispatch(mc.initWriteOnly(X)),K&&(p.hideAll(),b&&p.clearAll());const h=O.some((e=>{var t;return null==e||null==(t=e.config)?void 0:t.expression}))?N():Promise.resolve(),g=Promise.all([ve,h]).then((async()=>{if(K&&await _,!b)try{((e,t,r,n,o,a)=>{if(n)return;const i=Hr(e);if(!i)return;const s=a.fold((()=>i),(e=>e.displayName)),c=Kr(e),l=!!un(e),{logger:u,platform:{settings:{env:{editor:d}}}}=j;l&&[On,Cn].includes(c)&&t.find((e=>{let{role:t,config:r}=e;return Je(t,r)}))&&u.log(new Ln({id:d?153:152,collectionId:i,collectionName:s,datasetId:o,datasetType:r,datasetMode:c})),_t(Kr(e),t)&&u.log(new Ln({id:d?157:156,collectionId:i,collectionName:s,datasetId:o,datasetType:r,datasetMode:c}))})(k.getState(),O,a,X,m,ae(ee))}catch(e){P.log(new D("Failed to report dataset active BI",{cause:e}))}await p.bindAll(),J&&await(e=>Promise.all(e.getAll().map((e=>new Promise((t=>{e.staticExports.onReady(t)}))))))(t),K&&p.showAll(),d.resolveDependants(m),k.dispatch(wc(!0)),B("datasetReady")}));return K?(w(),Promise.resolve()):(g.then(w),g)},_e=ge(!0),be=X?Ie:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return P.log(new Ge("dataset/pageReady",(()=>Ie(...t))))};return{pageReady:$(be,(e=>(pe(),P.logError(e,"Dataset pageReady callback failed",{datasetId:m})))),exports:e=>e.type===ic.l.COMPONENT?_e.inScope(e.compId,e.additionalData.itemId):_e,staticExports:_e,dispose:()=>{U.forEach((e=>e()))},api:ye,userFilterInitialDataPromise:ve.then((e=>{let[t,r]=e;return r}))}};var au=(e,t)=>{const r=ac(e),n={createRealDataset:()=>o({...t,isScoped:!1}),createScopedDetailsDataset:e=>{let{datasetScope:r}=e;return o({...t,isScoped:!0,firePlatformEvent:Ke.noop,datasetId:ml(t.datasetId,r),datasetScope:r})},createScopedDataset:e=>{let{datasetScope:r,fixedItem:n}=e;const{dataProvider:a,controllerConfig:i,dynamicPagesData:s}=t,c=(0,Ke.cloneDeep)(i),l={items:[n]};c.dataset.filter=a.createSimpleFilter("_id",n._id);const{collectionName:u}=i.dataset;return a.setCollectionData({collectionId:u,data:l}),o({...t,isScoped:!0,controllerConfig:c,firePlatformEvent:Ke.noop,dynamicPagesData:s,datasetId:ml(t.datasetId,r),fixedRecordId:r.itemId})}},o=ou(n,r);return n};const iu=e=>ns(e).map((e=>{let{filterExpression:{filterId:t}}=e;return t}));var su=a(9025);function cu(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var lu=new WeakMap;class uu{constructor(){cu(this,lu,{writable:!0,value:void 0}),u()(this,lu,new Map)}get datasetConfigs(){return c()(this,lu)}}function du(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var pu=new WeakMap,fu=new WeakMap,hu=new WeakMap,mu=new WeakMap,gu=new WeakMap,yu=new WeakMap,vu=new WeakMap;class wu{constructor(e){let{platform:t,dataFetcher:r,warmupCache:n,staticCache:o,features:a,listenersByEvent:i,logger:s,i18n:c,global:l,loadFormulaJs:d}=e;du(this,pu,{writable:!0,value:void 0}),du(this,fu,{writable:!0,value:void 0}),du(this,hu,{writable:!0,value:void 0}),du(this,mu,{writable:!0,value:void 0}),du(this,gu,{writable:!0,value:void 0}),du(this,yu,{writable:!0,value:void 0}),du(this,vu,{writable:!0,value:void 0});const p=new An(s,l);V({loadFormulaJs:d,platform:t,features:a,dataFetcher:r,i18n:c,appState:new uu,logger:p,errorReporting:xn(p),breadcrumbReporting:Fn(p),verboseReporting:Mn(p)}),u()(this,pu,new Ia),u()(this,fu,n),u()(this,hu,o),u()(this,mu,a),u()(this,yu,p),u()(this,vu,{}),u()(this,gu,i)}initializeDatasets(e){let{datasetConfigs:t,firePlatformEvent:r}=e;try{return c()(this,yu).log(new Ge("databinding/createControllers",(()=>this._initializeDatasets({datasetConfigs:t,firePlatformEvent:r}))))}catch(e){return c()(this,yu).logError(e,"Datasets initialisation failed"),[]}}_initializeDatasets(e){let{datasetConfigs:t,firePlatformEvent:r}=e;const{platform:{settings:{mode:{name:n,csr:o,ssr:a},env:{livePreview:i,live:s}},seo:l,location:u}}=j,d=cs(t),p=this._updateDatasetConfigsState(d),f=c()(this,mu).warmupData,h=[],m=[],{resolve:g,promise:y}=new z;c()(this,pu).setSchemas({...f&&o&&c()(this,fu).getSchemas()||{},...c()(this,hu).getSchemas()||{}});const v=c()(this,yu).log(new Ge("databinding/loadSchemas",(()=>c()(this,pu).loadSchemas(Iu(d)).then((()=>f&&a&&c()(this,fu).setSchemas(c()(this,pu).getSchemas()))))));c()(this,pu).setDatasetConfigs(d.map((e=>{let{config:{dataset:{collectionName:t}},compId:r,type:n}=e;return{collectionId:t,datasetId:r,type:n}})));const w=o&&f&&c()(this,fu).getDataStore();w&&c()(this,pu).setStore(Pu(w));const I=c()(this,hu).getDataStore();I&&c()(this,pu).setStaticStore(Pu(I)),c()(this,pu).createInitialDataRequest(this._getInitialDataRequestConfigs(d,p));const _=d.reduce(((e,t)=>{let{compId:r,connections:n}=t;return e[r]=n.map((e=>{let{compId:t}=e;return t})),e}),{}),E=(e=>{let{datasetConfigs:t}=e;const r={},n={},o=(e,t)=>{const o=n[e];if(!o)return;const a=r[o.masterDatasetId];return a?{...o,masterDataset:t?{...a,api:a.api.inScope(t.repeaterId,t.itemId)}:a}:o};return t.forEach((e=>{let{id:t,connections:r}=e;r.forEach((e=>{let{role:r,config:o}=e;r===re&&Object.entries(o.filters).forEach((e=>{let r,[o,{fieldName:a}]=e;n[o]={id:o,fieldName:a,masterDatasetId:t,isResolved:!1,promise:new Promise((e=>r=e)),resolve:()=>{n[o].isResolved=!0,r()}}}))}))})),{resolveDependants:e=>Object.values(n).forEach((t=>{let{id:r,masterDatasetId:o}=t;e===o&&n[r].resolve()})),getDependencyResolutionPromise:e=>{const t=iu(e).flatMap((e=>n[e]&&!n[e].isResolved?[n[e].promise]:[]));return t.length>0?Promise.all(t):void 0},getDependencyById:o,getDependenciesByFilter:(e,t)=>iu(e).flatMap((e=>o(e,t)||[])),registerDataset:e=>{let{id:t,api:n,config:o}=e;r[t]={id:t,api:n,config:o}}}})({datasetConfigs:d}),b=d.some((e=>{let{type:t,dynamicPageData:r}=e;return t===Rr&&!(null==(n=null==r?void 0:r.dynamicUrl)||!n.match(/\{.+\}/));var n})),S=b&&d.some((e=>{let{type:t,dynamicPageData:r}=e;return t===Rr&&(null==r?void 0:r.seoV2)})),R=s&&b&&S,T=R?(e=>{let{seo:t,pageUrl:r}=e;const{logger:n}=j;let o;const a={title:void 0,pageUrl:r,collections:[]};return{submitSeoData:e=>{let{title:t,collectionData:r}=e;o||(t&&(a.title=t),r&&a.collections.push(r))},renderSeoTagsOnce:()=>(o||(o=t.renderSEOTags({itemType:su.ITEM_TYPES.WIX_DATA_PAGE_ITEM,itemData:a}).catch((e=>{n.log(new D("Failed to render seo tags",{cause:e}))}))),o)}})({seo:l,pageUrl:u.pageUrl}):null,O=d.map((e=>{let{type:t,config:s,connections:l,compId:u,livePreviewOptions:{shouldFetchData:d,compsIdsToReset:p=[]}={},dynamicPageData:g}=e;const{datasetIsRouter:I,datasetIsDeferred:b}=s.datasetStaticConfig;c()(this,yu).log(new We({category:"createControllers",message:"warmup data contents",data:{datasetId:u,datasetType:t,mode:n,warmupData:Boolean(w)}}));const S=(e=>{let{primaryDatasetId:t,recordStoreCache:r,refreshStoreCache:n,dataProvider:o,controllerConfig:a}=e;return Qe.Result.fromNullable(a,"missing controller configuration").chain((e=>{let{dataset:t}=e;return Qe.Result.fromNullable(t,"controller configuration is missing dataset object")})).chain((e=>{let{collectionName:t}=e;return Qe.Result.fromNullable(t,"dataset is not connected to a collection")})).map((e=>{const i=(0,Ke.get)(a,["dataset","includes"]),s=(0,Ke.get)(a,["dataset","nested"]),c=(0,Ke.get)(a,["dataset","cursor"]),l=(0,Ke.get)(a,["dataset","readWriteType"]),u=(0,Ke.get)(a,["dataset","uniqueFieldValues"]);return oc({primaryDatasetId:t,recordStoreCache:r,refreshStoreCache:n,dataProvider:o,mainCollectionName:e,includes:i,nestedFieldKeys:s,uniqueFieldValues:u,readWriteType:l,cursorPagingRequired:c})}))})({primaryDatasetId:u,recordStoreCache:c()(this,vu),refreshStoreCache:d,dataProvider:c()(this,pu),controllerConfig:s}),{promise:O,resolve:C}=new z;I||b||h.push(O);const{promise:P,resolve:D}=new z;m.push(P);const N=o&&f&&c()(this,fu).getUserFilterInitialData(u);N&&c()(this,pu).setUserFilterInitialData(u,N);const A=au(c()(this,yu),{shouldCollectSeoData:R,seoManager:T,dependencyManager:E,controllerConfig:s,datasetType:t,connections:l,connectionsGraph:_,recordStoreService:S,dataProvider:c()(this,pu),firePlatformEvent:r(u),dynamicPagesData:I&&g?_u({dynamicPageData:g,items:c()(this,hu).getItems(),config:s,convertFromCustomFormat:Un.PL}):void 0,datasetId:u,schemasLoading:v,listenersByEvent:c()(this,gu),updatedCompIds:p,markControllerAsRendered:D,markDatasetDataFetched:C,renderingRegularControllers:y,modeIsLivePreview:i,modeIsSSR:a,useLowerCaseDynamicPageUrl:null==g?void 0:g.lowercase}).createRealDataset();return E.registerDataset({id:u,api:A.api,config:s}),a&&f&&A.userFilterInitialDataPromise.then((e=>{c()(this,fu).setUserFilterInitialData(u,e)})),Tu(A)}));a&&f&&h.length&&Promise.all(h).then((()=>{c()(this,fu).setDataStore(Cu(c()(this,pu).getStore()))})),Promise.all(m).then(g);const C=()=>Promise.all(h).then(T.renderSeoTagsOnce);return R?O.map((e=>({...e,pageReady:function(){return e.pageReady(...arguments).then(C)}}))):O}_updateDatasetConfigsState(e){const{appState:t}=j;return e.reduce(((e,r)=>{let{compId:n,config:{dataset:o}}=r;const a=t.datasetConfigs.get(n);return a&&!(0,Ke.isEqual)(a,o)&&e.push(n),t.datasetConfigs.set(n,o),e}),[])}_getInitialDataRequestConfigs(e,t){return e.reduce(((e,r)=>{let{compId:n,config:{datasetStaticConfig:{sequenceType:o}},livePreviewOptions:{shouldFetchData:a}={}}=r;return o===ba?[...e,{id:n,refresh:a||t.includes(n)}]:e}),[])}}const Iu=e=>[...e.reduce(((e,t)=>{let{config:{dataset:{collectionName:r}}}=t;return r?e.add(r):e}),new Set)],_u=e=>{let{dynamicPageData:t,config:r,items:n,convertFromCustomFormat:o}=e;const{dynamicUrl:a,userDefinedFilter:i}=t,s=o(n)[0],c=(0,Ke.get)(r,"dataset.sort",[])||[],l=a&&s?(u=a,{fields:(u=ps(u)).match(ls)||[],nonFields:u.replace(ls,"").split(ds).filter((e=>!!e))}).fields:[];var u;const d=Eu(c),p=(0,Ke.difference)(l,d),f=bu([...c,...Su(p)]),h=[...d,...p];return{dynamicUrl:a,userDefinedFilter:i,dynamicUrlPatternFieldsValues:Ru(s,h,l),sort:f,sortFields:h,patternFields:l}},Eu=e=>(0,Ke.flatten)(e.map((e=>Object.keys(e).map((e=>e))))),bu=e=>e.reduce(((e,t)=>Object.assign(e,t)),{}),Su=e=>e.map((e=>({[e]:"asc"}))),Ru=(e,t,r)=>{const n=r.concat(t);return r.length?(0,Ke.pick)(e,n):null},Tu=e=>{let{pageReady:t,exports:r,dispose:n}=e;return{pageReady:t,exports:r,dispose:n}},Ou=e=>t=>{if(t)return{...t,recordsByCollectionId:Object.entries(t.recordsByCollectionId).reduce(((t,r)=>{let[n,o]=r;return t[n]=e(o),t}),{})}},Cu=Ou(Un.ah),Pu=Ou(Un.PL),Du=e=>{let{datasetId:t,record:r,schema:n,getSchema:o}=e;const a={"form-id":{value:t,keyName:""}},i=(0,Ke.pickBy)(n.fields,((e,t)=>((e,t)=>{const r=e.type,n=R.includes(r),o=!!e.systemField,a=["_createdDate","_updatedDate"].includes(t||e.name);return(!o||a)&&n})(e,t)&&!function(e){return!!e.isDeleted}(e)));return(0,Ke.forEach)(i,((e,n)=>{const i=function(e){let{record:t,fieldData:r,fieldName:n,getSchema:o}=e;if("reference"===r.type){const e=o(r.referencedCollection);if(!e)return;const a=za(t[n],e.displayField);return{value:oi(a),type:e.fields[e.displayField].type}}return{value:oi(za(t,n)),type:r.type}}({record:r,fieldData:e,fieldName:n,getSchema:o});if(!i)return;const{value:s,type:c}=i,{displayName:l,index:u}=e,d=((e,t)=>`${e}.${t}`)(t,n);a["field:"+d]={value:s,keyName:l,index:u,valueType:c}})),a};const Nu=e=>{let{automationsClientCreator:t}=e;const r=t().reportFormEventToAutomationCreator();return{afterSave:async(e,t,n)=>{let{datasetId:o,getSchema:a,getState:i}=e;const s=i(),c=a();Boolean(s.records.isForm)&&c&&await r((e=>{let{datasetId:t,getSchema:r,record:n,schema:o}=e;return{eventUTCTime:za(n,"_updatedDate"),detailedEventPayload:Du({datasetId:t,record:n,schema:o,getSchema:r})}})({datasetId:o,record:n,schema:c,getSchema:a}))}}};var Au=a(5675),xu=a.n(Au);function Fu(e){return"object"===xu()(e)}function Mu(e){return"array"===xu()(e)}function Lu(e){return"string"===xu()(e)}function Uu(e){return function(e){if(!Lu(e))return e;var t=e.slice(0,1).toUpperCase(),r=e.slice(1,e.length);return t+r}(xu()(e))}function ku(e){if(null==e||"object"!=typeof e)return e;var t=null;if(function(e){return"date"===xu()(e)}(e))t=new Date(e.getTime());else for(var r in t=e.constructor(),e)t[r]=ku(e[r]);return t}var ju=a(3065);a(5174);var Vu=function(){return"WDE0001: Collection name must be a string."},Gu=function(){return"WDE0002: ItemId must be a string."},Wu=function(){return"WDE0068: Item ids must be an array of strings"},Bu=function(e){return"WDE0069: Failed to remove items from [".concat(e,"].\nCannot remove more than 1000 items in one request")},qu=function(){return"WDE0003: FieldName must be a string."},zu=function(e,t){return"WDE0004: Failed to save [".concat(e,"] into [").concat(t,"].\nItems must be JavaScript objects.")},$u=function(e){return"WDE0005: Failed to bulk save items into [".concat(e,"].\nItems must be an array of JavaScript objects and itemIds must be strings if present.")},Hu=function(e){return"WDE0006: Failed to bulk save items into [".concat(e,"].\nCannot insert more than 1000 items in one request")},Yu=function(){return"WDE0007: Invalid update. Updated object must have a string _id property."},Xu=function(e,t,r,n){return"WDE0008: wixData.".concat(e," expects between ").concat(t," and ").concat(r," arguments, but was called with ").concat(n,".")},Ju=function(e){return"WDE0018: Options must be an object with one or all of the following boolean properties: ".concat(e.join(", "),".")},Ku=function(){return"WDE0019: Reference operation takes a string ID or an object with an ID to be connected."},Qu=function(){return"WDE0021: Invalid reference"},Zu=function(e){return"WDE0025: The ".concat(e," collection does not exist. You cannot work with a collection using the Data API before it is created in the Editor.")},ed=function(e){return"WDE0026: The ".concat(e," collection was removed, so you cannot work with it. To restore its data, create a new collection with the same name.")},td={queryInvalid:function(e,t){return"Failed to perform query on [".concat(e,"].\n").concat(t.join("\n"))},isNumber:function(e,t,r){return"WDE0032: Invalid ".concat(e," parameter [").concat(Uu(r),"]. ").concat(e," parameter must be a ").concat(t," number.")},isPositiveNumber:function(e,t){return"WDE0033: Invalid ".concat(e," parameter [").concat(t,"]. ").concat(e," parameter must be a positive number.")},isNonNegativeNumber:function(e,t){return"WDE0034: Invalid ".concat(e," parameter [").concat(t,"]. ").concat(e," parameter must be a non-negative number.")},isInteger:function(e,t){return"WDE0035: Invalid ".concat(e," parameter [").concat(t,"]. ").concat(e," parameter must be an integer.")},isNonEmptyString:function(e){return"WDE0094: Invalid ".concat(e," parameter. ").concat(e," parameter must be non-empty string.")},notGreaterThan:function(e,t,r){return"WDE0036: Invalid ".concat(e," parameter [").concat(t,"]. ").concat(e," parameter cannot exceed ").concat(r,".")},invalidSkipParameter:function(e,t){return"WDE0037: Invalid query on [".concat(e,"].\nInvalid prev positioned query skip on a negative number ").concat(t,".")},noPrevPage:function(e){return"WDE0159: Invalid query on [".concat(e,"].\nThere is no prev page.")}},rd={arityIsZero:function(e){return"WDE0038: Invalid ".concat(e," usage. ").concat(e," does not take parameters.")},arityIsOne:function(e){return"WDE0039: Invalid ".concat(e," usage. ").concat(e," requires one parameter.")},arityIsTwo:function(e){return"WDE0040: Invalid ".concat(e," usage. ").concat(e," requires two parameters.")},arityIsThree:function(e){return"WDE0041: Invalid ".concat(e," usage. ").concat(e," requires three parameters.")},arityIsAtLeastTwo:function(e){return"WDE0042: Invalid ".concat(e," usage. ").concat(e," requires at least two parameters.")},arityIsAtLeastOne:function(e){return"WDE0043: Invalid ".concat(e," usage. ").concat(e," requires at least one parameter.")}},nd="WD_UNKNOWN_ERROR",od="WD_VALIDATION_ERROR",ad="WD_COLLECTION_DELETED",id="WD_SCHEMA_DOES_NOT_EXIST";function sd(e,t){return cd(e,t)}function cd(e,t){var r=new(t&&t!==nd?ud:Error)(e);return r.code=t,r}function ld(e){return sd(Zu(e),id)}function ud(e){var t=new ju.UserCodeError(e);return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(t,ud),t.name=Error.name,t}Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),ud.prototype=Object.create(ju.UserCodeError.prototype,{constructor:{value:ud,enumerable:!1,writable:!0,configurable:!0}});var dd=function(){function e(){this._validations=[]}return e.prototype.arityIsZero=function(e){var t=this;return this.addValidation((function(){return 0===e.length}),(function(){return rd.arityIsZero(t.operatorName)}))},e.prototype.arityIsOne=function(e){var t=this;return this.addValidation((function(){return 1===e.length}),(function(){return rd.arityIsOne(t.operatorName)}))},e.prototype.arityIsTwo=function(e){var t=this;return this.addValidation((function(){return 2===e.length}),(function(){return rd.arityIsTwo(t.operatorName)}))},e.prototype.arityIsThree=function(e){var t=this;return this.addValidation((function(){return 3===e.length}),(function(){return rd.arityIsThree(t.operatorName)}))},e.prototype.arityIsAtLeastTwo=function(e){var t=this;return this.addValidation((function(){return e.length>=2}),(function(){return rd.arityIsAtLeastTwo(t.operatorName)}))},e.prototype.arityIsAtLeastOne=function(e){var t=this;return this.addValidation((function(){return e.length>=1}),(function(){return rd.arityIsAtLeastOne(t.operatorName)}))},e.prototype.addValidation=function(e,t){return this._validations.push({predicateFn:e,messageFn:t}),this},e}(),pd=(function(e){function t(t){var r=e.call(this)||this;return r._invalidArguments=ku(t),r}Ga(t,e),t.prototype.validateAndAggregate=function(){var e=this,t=this._validations.every((function(t){var r=t.predicateFn,n=t.messageFn;return e._appendIfInvalid(r(),n())}));return[this._invalidArguments,t]},t.prototype._appendIfInvalid=function(e,t){return!!e||(this._invalidArguments.push(t),!1)}}(dd),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ga(t,e),t.prototype.validateAndReject=function(){var e=this;return Promise.resolve().then((function(){e._validations.forEach((function(e){var t=e.predicateFn,r=e.messageFn;if(!t())throw cd(r(),od)}))}))},t}(dd));!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Ga(t,e),t.prototype.arity=function(e,t,r,n){return this.addValidation((function(){return t.length<=n&&t.length>=r}),(function(){return Xu(e,r,n,t.length)}))},t.prototype._isObject=function(e,t){return this.addValidation((function(){return Fu(e)}),(function(){return zu(e,t)}))},t.prototype.item=function(e,t,r){return this._isObject(e,t).addValidation((function(){return void 0!==e._id?Lu(e._id):!r}),(function(){return Yu()}))},t.prototype.items=function(e,t){return this.addValidation((function(){return Mu(e)&&e.every((function(e){return Fu(e)&&(void 0===e._id||null===e._id||Lu(e._id))}))}),(function(){return $u(t)})).addValidation((function(){return e.length<=1e3}),(function(){return Hu(t)}))},t.prototype.fieldName=function(e){return this.addValidation((function(){return Lu(e)}),(function(){return qu()}))},t.prototype.itemId=function(e){return this.addValidation((function(){return Lu(e)}),(function(){return Gu()}))},t.prototype.itemIds=function(e,t){return this.addValidation((function(){return Mu(e)&&e.every((function(e){return Lu(e)}))}),(function(){return Wu()})).addValidation((function(){return e.length<=1e3}),(function(){return Bu(t)}))},t.prototype._options=function(e,t){return this.addValidation((function(){var r=Fu(e)&&t.every((function(t){return"language"===t?null==(r=e[t])||Lu(r)&&r.length>0:function(e){return null==e||(t=e,"boolean"===xu()(t));var t}(e[t]);var r}));return null==e||r}),(function(){return Ju(t)}))},t.prototype.referenceRemoveParameters=function(e){return this.addValidation((function(){return Mu(e)&&e.every(hd)}),Ku)},t.prototype.referenceParameters=function(e){return this.addValidation((function(){return Mu(e)&&e.every(fd)}),Ku)},t.prototype.referenceParameter=function(e){return this.addValidation((function(){return fd(e)}),Ku)},t.prototype.isNonEmptyString=function(e,t){return this.addValidation((function(){return"string"==typeof e&&e.length>0}),(function(){return td.isNonEmptyString(t)}))},t.prototype.references=function(e){return this.addValidation((function(){return Mu(e)&&e.every((function(e){return Lu(e.relationshipName)&&fd(e.left)&&fd(e.right)}))}),Qu)},t.prototype.options=function(e){return this._options(e,["suppressAuth","suppressHooks","showDrafts","consistentRead","language"])},t.prototype.bulkInsertOptions=function(e){return this._options(e,["suppressAuth","suppressHooks","overrideExisting"])},t.prototype.bulkUpdateOptions=function(e){return this._options(e,["suppressAuth","suppressHooks","showDrafts"])},t.prototype.bulkRemoveOptions=function(e){return this._options(e,["suppressAuth","suppressHooks","showDrafts"])},t.prototype.truncateOptions=function(e){return this._options(e,["suppressAuth"])},t.prototype.collectionName=function(e){return this.addValidation((function(){return Lu(e)}),(function(){return Vu()}))}}(pd);function fd(e){return Lu(e)&&""!==e||Fu(e)&&e.hasOwnProperty("_id")}function hd(e){return Lu(e)||Fu(e)&&e.hasOwnProperty("_id")}function md(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gd(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function yd(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function vd(e){return function(e,t){return Promise.reject(sd(e,t))}(ed(e),ad)}var wd=function(e){function t(e,r){md(this,t);var n=gd(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object.setPrototypeOf(n,r.prototype),n.name=r.name,Error.captureStackTrace?Error.captureStackTrace(n,r):n.stack=new Error(e).stack,n}return yd(t,Error),t}(),Id=function(e){function t(e){md(this,t);var r=gd(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,t));return r.reason=e,r.message=e,r}return yd(t,e),t}(wd),_d=function(e){function t(e,r,n,o){md(this,t);var a=gd(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,t));return a.status=e,a.responseText=r,a.requestId=o,a}return yd(t,e),t}(wd),Ed=a(4126),bd=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},Sd=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Rd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var Td=function(e){return"object"===(void 0===e?"undefined":Rd(e))&&e.message?e.message:"string"==typeof e?e:JSON.stringify(e)},Od=function(e){return e.reduce((function(e,t){return Object.assign({},e,(r={},n=t.id,o=t,n in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,r));var r,n,o}),{})},Cd=function(e,t){return e.endsWith(t)?e.substring(0,e.length-t.length):e},Pd=function(){function e(t,r,n,o){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(e){return e=Cd(e,"/"),Cd(e,"/v1/schemas")}(o&&o.baseUrl||"https://cloud-data.wix-code.com");this.signedInstance=r,this.gridAppId=n,this.mutate=function(e,r,n){return t[e](i+r,n,a._setHeaders()).then((function(e){return e.data})).catch(a._handleError)},this.retrieve=function(e){return t.get(i+e,a._setHeaders()).then((function(e){return e.data})).catch(a._handleError)}}return Sd(e,[{key:"wrapWithDefaultOptions",value:function(e){return Object.assign({},e,{appId:this.gridAppId})}},{key:"formRequestUrl",value:function(e){return"/v1/schemas?"+Ed.stringify(e)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{includeDeletedCollections:!1},r=this.wrapWithDefaultOptions({includeDeleted:!0,schemaIds:e});return this.retrieve(this.formRequestUrl(r)).then((function(r){var n=bd(r.schemas,1)[0];return n&&n.isDeleted&&!t.includeDeletedCollections?vd(e):n||Promise.reject(ld(e))}))}},{key:"bulkGet",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{includeDeletedCollections:!1,referencedCollectionsDepth:0},r=this.wrapWithDefaultOptions({depth:t.referencedCollectionsDepth||0,includeDeleted:t.includeDeletedCollections||!1,schemaIds:e});return this.retrieve(this.formRequestUrl(r)).then((function(e){var t=e.schemas;return Od(t)}))}},{key:"list",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{includeDeletedCollections:!1},t=this.wrapWithDefaultOptions({schemaIds:[],depth:0,includeDeleted:e.includeDeletedCollections||!1});return this.retrieve(this.formRequestUrl(t)).then((function(e){var t=e.schemas;return Od(t)}))}},{key:"save",value:function(e,t){var r=this.wrapWithDefaultOptions({schemaId:e,schema:t});return this.mutate("post","/v1/schemas",r).then((function(e){return e.schemas}))}},{key:"setIsDeletedFlag",value:function(e,t){var r=this.wrapWithDefaultOptions({schemaId:e,partialSchema:{isDeleted:t}});return this.mutate("patch","/v1/schemas",r).then((function(e){return e.schemas}))}},{key:"remove",value:function(e){return this.setIsDeletedFlag(e,!0)}},{key:"restore",value:function(e){return this.setIsDeletedFlag(e,!1)}},{key:"_setHeaders",value:function(){return{headers:{authorization:this.signedInstance}}}},{key:"_handleError",value:function(e){if(!e.response)return Promise.reject(new Id(Td(e)));var t=e.response,r=t.headers&&t.headers["x-wix-request-id"];return Promise.reject(new _d(t.status,t.data,Td(t.data),r))}}]),e}(),Dd=Pd,Nd=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function Ad(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var o=0;o<r.length;o++){if(!e)return;e=e[r[o]]}return e}function xd(e){return Object.keys(e).reduce((function(t,r){return void 0!==e[r]&&(t[r]=e[r]),t}),{})}function Fd(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=Nd(e,2),r=t[0];return[t[1],r]})))}function Md(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ld(e){var t=e;return xd({id:t.id,isDeleted:!1,namespace:tp(t.id),storage:Ud[t.collectionType],ownerAppId:t.ownerAppId||null,displayNamespace:t.displayNamespace||null,displayField:t.displayField,allowedOperations:zd(t),collectionOperations:$d(t),fields:Xd(t),displayName:t.displayName,permissions:qd(t),maxPageSize:t.maxPageSize,defaultSort:Hd(t.defaultDisplayOrder),version:Bd(t.revision),plugins:Yd(t.plugins),pagingMode:t.pagingModes,translatable:!1,ttl:null,capabilities:np(t)})}var Ud={NATIVE:"docstore",WIX_APP:"driver",BLOCKS_APP:"staticAppSchema",EXTERNAL:"external"},kd={IS_REFERENCED:"isReferenced",INSERT:"insert",SAVE:"save",BULK_INSERT:"bulkInsert",BULK_UPDATE:"bulkUpdate",UPDATE:"update",TRUNCATE:"truncate",REMOVE:"remove",REMOVE_REFERENCE:"removeReference",COUNT:"count",FIND:"find",REPLACE_REFERENCES:"replaceReferences",BULK_REMOVE:"bulkRemove",INSERT_REFERENCE:"insertReference",GET:"get",BULK_SAVE:"bulkSave",QUERY_REFERENCED:"queryReferenced",DISTINCT:"distinct",AGGREGATE:"aggregate"},jd={UPDATE:"update",REMOVE:"remove"},Vd={EQ:"eq",LT:"lt",GT:"gt",NE:"ne",LTE:"lte",GTE:"gte",STARTS_WITH:"startsWith",ENDS_WITH:"endsWith",CONTAINS:"contains",HAS_SOME:"hasSome",HAS_ALL:"hasAll",EXISTS:"exists",URLIZED:"urlized"},Gd={ADMIN:"admin",SITE_MEMBER_AUTHOR:"siteMemberAuthor",SITE_MEMBER:"siteMember",ANYONE:"anyone"},Wd={TEXT:"text",NUMBER:"number",DATE:"date",DATETIME:"datetime",IMAGE:"image",BOOLEAN:"boolean",DOCUMENT:"document",URL:"url",RICH_TEXT:"richtext",VIDEO:"video",ANY:"any",ARRAY_STRING:"array<string>",ARRAY_DOCUMENT:"array<document>",AUDIO:"audio",TIME:"time",LANGUAGE:"language",RICH_CONTENT:"rich-content",MEDIA_GALLERY:"media-gallery",ADDRESS:"address",PAGE_LINK:"pagelink",REFERENCE:"reference",MULTI_REFERENCE:"multi-reference",OBJECT:"object",ARRAY:"array",LEGACY_TIME:"timeType",LEGACY_BOOK:"bookType",LEGACY_EXTERNAL_URL:"externalUrl",LEGACY_BROKEN_REFERENCE:"broken-reference",LEGACY_IMAGE:"Image",LEGACY_COLOR:"color",LEGACY_EXTERNAL_VIDEO:"externalVideo"};function Bd(e){var t=parseInt(e);return isNaN(t)?0:t}function qd(e){if(e.permissions){var t=e.permissions;return{read:Gd[t.read],insert:Gd[t.insert],remove:Gd[t.remove],update:Gd[t.update]}}}function zd(e){var t=Ad(e,"capabilities","dataOperations");if(t&&0!=t.length)return t.map((function(e){return kd[e]}))}function $d(e){var t=Ad(e,"capabilities","collectionOperations");if(t)return t.map((function(e){return jd[e]}))}function Hd(e){return e?{direction:e.direction.toLowerCase(),fieldName:e.fieldKey}:null}function Yd(e){if(e)return e.reduce((function(e,t){return Object.assign({},e,function(e){switch(e.type){case"MULTILINGUAL":return{multilingual:{translatable:e.multilingualOptions.translatableFieldKeys}};case"PUBLISH":return{publishing:{defaultStatus:e.publishOptions.defaultStatus}};case"SINGLE_ITEM":return{singleItem:{singleItemId:e.singleItemOptions.singleItemId}};case"URLIZED":return{urlized:{format:e.urlizedOptions.format.toLowerCase()}};case"GRIDAPPLESS":return{gridAppless:{isMigrated:e.gridapplessOptions.migrated}};case"SHARED":return{shared:{}}}return{}}(t))}),{})}function Xd(e){if(e.fields)return e.fields.reduce((function(e,t,r){return Object.assign({},e,Md({},t.key,function(e,t){var r=e;return xd(Object.assign({},{displayName:r.displayName,systemField:r.systemField,sortable:Ad(r,"capabilities","sortable"),isDeleted:!1,index:t,queryOperators:Zd(r),plugin:Ad(r,"plugin"),calculator:ep(r),pii:!!r.encrypted||void 0,linkedRouterPage:r.linkedRouterPage,description:r.description,readOnly:r.readOnly,immutable:r.immutable,required:r.required,minValue:Ad(r,"numberRange","min"),maxValue:Ad(r,"numberRange","max"),minStrLength:Ad(r,"stringLengthRange","minLength"),maxStrLength:Ad(r,"stringLengthRange","maxLength"),minArraySize:Ad(r,"arraySizeRange","minSize"),maxArraySize:Ad(r,"arraySizeRange","maxSize")},Jd(e.type,e.typeMetadata)))}(t,r)))}),{})}function Jd(e,t){return{type:Wd[e],referencedCollection:rp(t),referencingFieldKey:Ad(t,"multiReference","referencingFieldKey"),referencingDisplayName:Ad(t,"multiReference","referencingDisplayName"),fields:Kd(t),elementType:Qd(t)}}function Kd(e){var t=Ad(e,"object");if(t)return t.fields.reduce((function(e,t){return Object.assign(e,Md({},t.key,function(e){return xd(Object.assign({displayName:e.displayName,sortable:Ad(e,"capabilities","sortable"),queryOperators:Zd(e)},Jd(e.type,e.typeMetadata)))}(t)))}),{})}function Qd(e){var t=Ad(e,"array");if(t)return xd(Jd(t.elementType,t.typeMetadata))}function Zd(e){var t=Ad(e,"capabilities","queryOperators");return t?t.length>=Object.keys(Vd).length?void 0:t.map((function(e){return Vd[e]})):[]}function ep(e){var t=Ad(e,"typeMetadata","pageLink","calculator");return t?{id:t.id,config:{lowercase:t.fieldsPattern.lowercase||!1,pattern:t.fieldsPattern.pattern}}:void 0}function tp(e){if(!e)return null;var t=e.lastIndexOf("/");return-1==t?null:e.substring(0,t)}function rp(e){return Ad(e,"multiReference","referencedCollectionId")||Ad(e,"reference","referencedCollectionId")}function np(e){var t=Ad(e,"capabilities","indexLimits");if(t)return{indexing:{regular:t.regular,unique:t.unique,total:t.total}}}var op=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function ap(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ip=Fd(Gd),sp=Fd(Wd);function cp(e){if(e.permissions)return{insert:ip[e.permissions.insert],update:ip[e.permissions.update],remove:ip[e.permissions.remove],read:ip[e.permissions.read]}}function lp(e){var t=Object.entries(e.fields||{});return t.sort((function(e,t){var r=e[1].index,n=t[1].index;return r>n?1:r<n||null!=r&&null==n?-1:null==r&&null!=n?1:0})),t.map((function(e){return function(e,t){var r;return xd((r={key:e,displayName:t.displayName,type:sp[t.type],typeMetadata:up(t),encrypted:t.pii,linkedRouterPage:t.linkedRouterPage,description:t.description,plugin:t.plugin,numberRange:t.numberRange,stringLengthRange:t.stringLengthRange,arraySizeRange:t.arraySizeRange,readOnly:t.readOnly},ap(r,"numberRange",t.numberRange),ap(r,"immutable",t.immutable),ap(r,"required",t.required),ap(r,"numberRange",function(e){if(null!=e.minValue||null!=e.maxValue)return{min:e.minValue,max:e.maxValue}}(t)),ap(r,"stringLengthRange",function(e){if(null!=e.minStrLength||null!=e.maxStrLength)return{minLength:e.minStrLength,maxLength:e.maxStrLength}}(t)),ap(r,"arraySizeRange",function(e){if(null!=e.minArraySize||null!=e.maxArraySize)return{minSize:e.minArraySize,maxSize:e.maxArraySize}}(t)),r))}(e[0],e[1])}))}function up(e){switch(e.type){case"pagelink":return function(e){return null==e.calculator||null==e.calculator.config?void 0:{pageLink:{calculator:xd({id:e.calculator.id,fieldsPattern:xd({pattern:e.calculator.config.pattern,lowercase:e.calculator.config.lowercase}),urlizedOnlyPattern:xd({pattern:e.calculator.config.pattern})})}}}(e);case"reference":return function(e){return{reference:{referencedCollectionId:e.referencedCollection}}}(e);case"multi-reference":return function(e){return{multiReference:{referencedCollectionId:e.referencedCollection,referencingFieldKey:e.referencingFieldKey,referencingDisplayName:e.referencingDisplayName}}}(e);case"object":return function(e){return{object:{fields:Object.entries(e.fields).map((function(e){var t=op(e,2);return function(e,t){return xd({key:e,displayName:t.displayName,type:sp[t.type],typeMetadata:up(t)})}(t[0],t[1])}))}}}(e);case"array":return function(e){return null==e.elementType?void 0:{array:xd({elementType:sp[e.elementType.type],typeMetadata:up(e.elementType)})}}(e)}}function dp(e){return Object.entries(e.plugins||{}).map((function(e){var t=op(e,2);return function(e,t){switch(e){case"multilingual":return{type:"MULTILINGUAL",multilingualOptions:{translatableFieldKeys:t.translatable}};case"publishing":return{type:"PUBLISH",publishOptions:{defaultStatus:t.defaultStatus}};case"singleItem":return{type:"SINGLE_ITEM",singleItemOptions:{singleItemId:"SINGLE_ITEM_ID"}};case"urlized":return{type:"URLIZED",urlizedOptions:{format:t.format}}}return}(t[0],t[1])})).filter((function(e){return null!=e}))}var pp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fp=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var hp=a(483),mp=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.httpClient=t,this.signedInstance=r,this.baseUrl=wp(n)}return fp(e,[{key:"get",value:async function(e){return Ld((await this._call(hp.getDataCollection({dataCollectionId:e})).catch((function(t){return"WDE0025"==Ad(t,"responseText","details","applicationError","code")?Promise.reject(ld(e)):Promise.reject(t)}))).collection)}},{key:"bulkGet",value:async function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{referencedCollectionsDepth:0},r=await this._call(hp.bulkGetDataCollections({dataCollectionIds:e,includeReferencedCollections:t.referencedCollectionsDepth>0}));return Ip(r.activeCollections.map(Ld))}},{key:"list",value:async function(){return Ip((await this._call(hp.listDataCollections({}))).collections.map(Ld))}},{key:"save",value:async function(e,t){var r=function(e){return xd({id:e.id,displayName:e.displayName,displayField:e.displayField,fields:lp(e),permissions:cp(e),revision:e.version?e.version.toString():void 0,plugins:dp(e)})}(t);return r.id=e||r.id,[Ld((t.version>0?await this._call(hp.updateDataCollection({collection:r})):await this._call(hp.createDataCollection({collection:r}))).collection)]}},{key:"remove",value:async function(e){return await this._call(hp.deleteDataCollection({dataCollectionId:e})),{id:e}}},{key:"restore",value:function(){return Promise.reject(new Error("Collection restoring is not supported."))}},{key:"_call",value:function(e){var t=this;return this.httpClient.request((function(r){var n=e(r);return Object.assign({},n,{url:vp(n.url,"/_api/cloud-data"),baseURL:t.baseUrl,headers:Object.assign({},n.headers,{authorization:t.signedInstance})})})).then((function(e){return e.data})).catch((function(e){if(!e.response)return Promise.reject(new Id(_p(e)));var t=e.response,r=t.headers&&t.headers["x-wix-request-id"];return Promise.reject(new _d(t.status,t.data,_p(t.data),r))}))}}]),e}(),gp=mp,yp=function(e,t){return e.endsWith(t)?e.substring(0,e.length-t.length):e},vp=function(e,t){return e.startsWith(t)?e.substring(t.length):e},wp=function(e){var t=e&&e.baseUrl||"https://cloud-data.wix-code.com";return t=yp(t,"/"),t=yp(t,"/v1/schemas")};function Ip(e){return e.reduce((function(e,t){return Object.assign({},e,(r={},n=t.id,o=t,n in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,r));var r,n,o}),{})}function _p(e){return"object"===(void 0===e?"undefined":pp(e))&&e.message?e.message:"string"==typeof e?e:JSON.stringify(e)}var Ep=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var bp=function(){function e(t,r,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.httpRequest=t,this.signedInstance=r,this.gridAppId=n,this.options=o}return Ep(e,null,[{key:"FailedRequestException",get:function(){return Id}},{key:"UnsuccessfulResponseException",get:function(){return _d}}]),Ep(e,[{key:"get",value:function(e,t){return this._client.get(e,t)}},{key:"bulkGet",value:function(e,t){return this._client.bulkGet(e,t)}},{key:"list",value:function(e){return this._client.list(e)}},{key:"save",value:function(e,t){return this._client.save(e,t)}},{key:"remove",value:function(e){return this._client.remove(e)}},{key:"restore",value:function(e){return this._clientV1.restore(e)}},{key:"_clientV1",get:function(){return new Dd(this.httpRequest,this.signedInstance,this.gridAppId,this.options)}},{key:"_clientV2",get:function(){return new gp(this.httpRequest,this.signedInstance,this.options)}},{key:"_client",get:function(){return this.options&&this.options.useApiV2?this._clientV2:this._clientV1}}]),e}();const Sp={SCALE_TO_FILL:"fill",SCALE_TO_FIT:"fit",STRETCH:"stretch",ORIGINAL_SIZE:"original_size",TILE:"tile",TILE_HORIZONTAL:"tile_horizontal",TILE_VERTICAL:"tile_vertical",FIT_AND_TILE:"fit_and_tile",LEGACY_STRIP_TILE:"legacy_strip_tile",LEGACY_STRIP_TILE_HORIZONTAL:"legacy_strip_tile_horizontal",LEGACY_STRIP_TILE_VERTICAL:"legacy_strip_tile_vertical",LEGACY_STRIP_SCALE_TO_FILL:"legacy_strip_fill",LEGACY_STRIP_SCALE_TO_FIT:"legacy_strip_fit",LEGACY_STRIP_FIT_AND_TILE:"legacy_strip_fit_and_tile",LEGACY_STRIP_ORIGINAL_SIZE:"legacy_strip_original_size",LEGACY_ORIGINAL_SIZE:"actual_size",LEGACY_FIT_WIDTH:"fitWidth",LEGACY_FIT_HEIGHT:"fitHeight",LEGACY_FULL:"full",LEGACY_BG_FIT_AND_TILE:"legacy_tile",LEGACY_BG_FIT_AND_TILE_HORIZONTAL:"legacy_tile_horizontal",LEGACY_BG_FIT_AND_TILE_VERTICAL:"legacy_tile_vertical",LEGACY_BG_NORMAL:"legacy_normal"},Rp="fit",Tp="fill",Op="fill_focal",Cp="crop",Pp="legacy_crop",Dp="legacy_fill",Np="center",Ap="top",xp="top_left",Fp="top_right",Mp="bottom",Lp="bottom_left",Up="bottom_right",kp="left",jp="right",Vp={[Np]:{x:.5,y:.5},[xp]:{x:0,y:0},[Fp]:{x:1,y:0},[Ap]:{x:.5,y:0},[Lp]:{x:0,y:1},[Up]:{x:1,y:1},[Mp]:{x:.5,y:1},[jp]:{x:1,y:.5},[kp]:{x:0,y:.5}},Gp={center:"c",top:"t",top_left:"tl",top_right:"tr",bottom:"b",bottom_left:"bl",bottom_right:"br",left:"l",right:"r"},Wp="img",Bp={AUTO:"auto",CLASSIC:"classic",SUPER:"super"},qp=1,zp=2,$p={radius:"0.66",amount:"1.00",threshold:"0.01"},Hp=25e6,Yp=[1.5,2,4],Xp={HIGH:{size:196e4,quality:90,maxUpscale:1},MEDIUM:{size:36e4,quality:85,maxUpscale:1},LOW:{size:16e4,quality:80,maxUpscale:1.2},TINY:{size:0,quality:80,maxUpscale:1.4}},Jp="HIGH",Kp="MEDIUM",Qp="LOW",Zp="TINY",ef="contrast",tf="brightness",rf="saturation",nf="hue",of="blur",af="jpg",sf="jpeg",cf="jpe",lf="png",uf="webp",df="gif",pf="unrecognized",ff={isMobile:!1};function hf(){if("undefined"!=typeof window&&"undefined"!=typeof navigator){const t=window.matchMedia&&window.matchMedia("(max-width: 767px)").matches,r=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);e=t&&r,ff["isMobile"]=e}var e}function mf(e,...t){return function(...r){const n=r[r.length-1]||{},o=[e[0]];return t.forEach((function(t,a){const i=Number.isInteger(t)?r[t]:n[t];o.push(i,e[a+1])})),o.join("")}}function gf(e){return e[e.length-1]}const yf=[lf,sf,af,cf,"wix_ico_mp","wix_mp"],vf=[sf,af,cf];function wf(e){return function(e){return yf.includes(bf(e))}(e)&&!function(e){return/(^https?)|(^data)|(^\/\/)/.test(e)}(e)}const If=["/","\\","?","<",">","|","\u201c",":",'"'].map(encodeURIComponent),_f=["\\.","\\*"];function Ef(e){return function(e){return vf.includes(bf(e))}(e)?af:function(e){return bf(e)===lf}(e)?lf:function(e){return bf(e)===uf}(e)?uf:pf}function bf(e){return(/[.]([^.]+)$/.exec(e)&&/[.]([^.]+)$/.exec(e)[1]||"").toLowerCase()}function Sf(e,t,r,n,o){let a;return a=o===Tp?function(e,t,r,n){return Math.max(r/e,n/t)}(e,t,r,n):o===Rp?function(e,t,r,n){return Math.min(r/e,n/t)}(e,t,r,n):1,a}function Rf(e,t,r,n,o,a){e=e||n.width,t=t||n.height;const{scaleFactor:i,width:s,height:c}=function(e,t,r,n,o){let a,i=r,s=n;if(a=Sf(e,t,r,n,o),o===Rp&&(i=e*a,s=t*a),i&&s&&i*s>Hp){const r=Math.sqrt(Hp/(i*s));i*=r,s*=r,a=Sf(e,t,i,s,o)}return{scaleFactor:a,width:i,height:s}}(e,t,n.width*o,n.height*o,r);return function(e,t,r,n,o,a,i){const{optimizedScaleFactor:s,upscaleMethodValue:c,forceUSM:l}=function(e,t,r,n){if("auto"===n)return function(e,t){const r=Pf(e,t);return{optimizedScaleFactor:Xp[r].maxUpscale,upscaleMethodValue:qp,forceUSM:!1}}(e,t);if("super"===n)return function(e){return{optimizedScaleFactor:gf(Yp),upscaleMethodValue:zp,forceUSM:!(Yp.includes(e)||e>gf(Yp))}}(r);return function(e,t){const r=Pf(e,t);return{optimizedScaleFactor:Xp[r].maxUpscale,upscaleMethodValue:qp,forceUSM:!1}}(e,t)}(e,t,a,o);let u=r,d=n;if(a<=s)return{width:u,height:d,scaleFactor:a,upscaleMethodValue:c,forceUSM:l,cssUpscaleNeeded:!1};switch(i){case Tp:u=r*(s/a),d=n*(s/a);break;case Rp:u=e*s,d=t*s}return{width:u,height:d,scaleFactor:s,upscaleMethodValue:c,forceUSM:l,cssUpscaleNeeded:!0}}(e,t,s,c,a,i,r)}function Tf(e,t,r,n){const o=Cf(r)||function(e=Np){return Vp[e]}(n);return{x:Math.max(0,Math.min(e.width-t.width,o.x*e.width-t.width/2)),y:Math.max(0,Math.min(e.height-t.height,o.y*e.height-t.height/2)),width:Math.min(e.width,t.width),height:Math.min(e.height,t.height)}}function Of(e){return e.alignment&&Gp[e.alignment]||Gp[Np]}function Cf(e){let t;return!e||"number"!=typeof e.x||isNaN(e.x)||"number"!=typeof e.y||isNaN(e.y)||(t={x:Df(Math.max(0,Math.min(100,e.x))/100,2),y:Df(Math.max(0,Math.min(100,e.y))/100,2)}),t}function Pf(e,t){const r=e*t;return r>Xp[Jp].size?Jp:r>Xp[Kp].size?Kp:r>Xp[Qp].size?Qp:Zp}function Df(e,t){const r=Math.pow(10,t||0);return(e*r/r).toFixed(t)}function Nf(e){return e&&e.upscaleMethod&&Bp[e.upscaleMethod.toUpperCase()]||Bp.AUTO}function Af(){return ff["isMobile"]}function xf(e,t,r){let n;switch(t.crop&&(n=function(e,t){const r=Math.max(0,Math.min(e.width,t.x+t.width)-Math.max(0,t.x)),n=Math.max(0,Math.min(e.height,t.y+t.height)-Math.max(0,t.y));return r&&n&&(e.width!==r||e.height!==n)?{x:Math.max(0,t.x),y:Math.max(0,t.y),width:r,height:n}:null}(t,t.crop),n&&(e.src.width=n.width,e.src.height=n.height,e.src.isCropped=!0,e.parts.push(Mf(n)))),e.fittingType){case Sp.SCALE_TO_FIT:case Sp.LEGACY_FIT_WIDTH:case Sp.LEGACY_FIT_HEIGHT:case Sp.LEGACY_FULL:case Sp.FIT_AND_TILE:case Sp.LEGACY_BG_FIT_AND_TILE:case Sp.LEGACY_BG_FIT_AND_TILE_HORIZONTAL:case Sp.LEGACY_BG_FIT_AND_TILE_VERTICAL:case Sp.LEGACY_BG_NORMAL:e.parts.push(Ff(e,r));break;case Sp.SCALE_TO_FILL:e.parts.push(function(e,t){const r=Rf(e.src.width,e.src.height,Tp,t,e.devicePixelRatio,e.upscaleMethod),n=Cf(e.focalPoint);return{transformType:n?Op:Tp,width:Math.round(r.width),height:Math.round(r.height),alignment:Of(t),focalPointX:n&&n.x,focalPointY:n&&n.y,upscale:r.scaleFactor>1,forceUSM:r.forceUSM,scaleFactor:r.scaleFactor,cssUpscaleNeeded:r.cssUpscaleNeeded,upscaleMethodValue:r.upscaleMethodValue}}(e,r));break;case Sp.STRETCH:e.parts.push(function(e,t){const r=Sf(e.src.width,e.src.height,t.width,t.height,Tp),n=Object.assign({},t);return n.width=e.src.width*r,n.height=e.src.height*r,Ff(e,n)}(e,r));break;case Sp.TILE_HORIZONTAL:case Sp.TILE_VERTICAL:case Sp.TILE:case Sp.LEGACY_ORIGINAL_SIZE:case Sp.ORIGINAL_SIZE:n=Tf(e.src,r,e.focalPoint,r.alignment),e.src.isCropped?(Object.assign(e.parts[0],n),e.src.width=n.width,e.src.height=n.height):e.parts.push(Mf(n));break;case Sp.LEGACY_STRIP_TILE_HORIZONTAL:case Sp.LEGACY_STRIP_TILE_VERTICAL:case Sp.LEGACY_STRIP_TILE:case Sp.LEGACY_STRIP_ORIGINAL_SIZE:e.parts.push(function(e){return{transformType:Pp,width:Math.round(e.width),height:Math.round(e.height),alignment:Of(e),upscale:!1,forceUSM:!1,scaleFactor:1,cssUpscaleNeeded:!1}}(r));break;case Sp.LEGACY_STRIP_SCALE_TO_FIT:case Sp.LEGACY_STRIP_FIT_AND_TILE:e.parts.push(function(e){return{transformType:Rp,width:Math.round(e.width),height:Math.round(e.height),upscale:!1,forceUSM:!0,scaleFactor:1,cssUpscaleNeeded:!1}}(r));break;case Sp.LEGACY_STRIP_SCALE_TO_FILL:e.parts.push(function(e){return{transformType:Dp,width:Math.round(e.width),height:Math.round(e.height),alignment:Of(e),upscale:!1,forceUSM:!0,scaleFactor:1,cssUpscaleNeeded:!1}}(r))}}function Ff(e,t){const r=Rf(e.src.width,e.src.height,Rp,t,e.devicePixelRatio,e.upscaleMethod);return{transformType:Tp,width:Math.round(r.width),height:Math.round(r.height),alignment:Gp.center,upscale:r.scaleFactor>1,forceUSM:r.forceUSM,scaleFactor:r.scaleFactor,cssUpscaleNeeded:r.cssUpscaleNeeded,upscaleMethodValue:r.upscaleMethodValue}}function Mf(e){return{transformType:Cp,x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height),upscale:!1,forceUSM:!1,scaleFactor:1,cssUpscaleNeeded:!1}}function Lf(e,t){var r;t=t||{},e.quality=function(e,t){const r=e.fileType===lf,n=e.fileType===af,o=n||r;if(o){const n=gf(e.parts),o=(a=n.width,i=n.height,Xp[Pf(a,i)].quality);let s=t.quality&&t.quality>=5&&t.quality<=90?t.quality:o;return s=r?s+5:s,s}var a,i;return 0}(e,t),e.progressive=function(e){return!1!==e.progressive}(t),e.watermark=function(e){return e.watermark}(t),e.autoEncode=null===(r=t.autoEncode)||void 0===r||r,e.unsharpMask=function(e,t){var r,n,o;if(function(e){const t="number"==typeof(e=e||{}).radius&&!isNaN(e.radius)&&e.radius>=.1&&e.radius<=500,r="number"==typeof e.amount&&!isNaN(e.amount)&&e.amount>=0&&e.amount<=10,n="number"==typeof e.threshold&&!isNaN(e.threshold)&&e.threshold>=0&&e.threshold<=255;return t&&r&&n}(t.unsharpMask))return{radius:Df(null===(r=t.unsharpMask)||void 0===r?void 0:r.radius,2),amount:Df(null===(n=t.unsharpMask)||void 0===n?void 0:n.amount,2),threshold:Df(null===(o=t.unsharpMask)||void 0===o?void 0:o.threshold,2)};if(("number"!=typeof(a=(a=t.unsharpMask)||{}).radius||isNaN(a.radius)||0!==a.radius||"number"!=typeof a.amount||isNaN(a.amount)||0!==a.amount||"number"!=typeof a.threshold||isNaN(a.threshold)||0!==a.threshold)&&function(e){const t=gf(e.parts);return!(t.scaleFactor>=1)||t.forceUSM}(e))return $p;var a;return}(e,t),e.filters=function(e){const t=e.filters||{},r={};Uf(t[ef],-100,100)&&(r[ef]=t[ef]);Uf(t[tf],-100,100)&&(r[tf]=t[tf]);Uf(t[rf],-100,100)&&(r[rf]=t[rf]);Uf(t[nf],-180,180)&&(r[nf]=t[nf]);Uf(t[of],0,100)&&(r[of]=t[of]);return r}(t)}function Uf(e,t,r){return"number"==typeof e&&!isNaN(e)&&0!==e&&e>=t&&e<=r}function kf(e,t,r,n){const o=function(e){var t;return null!==(t=null==e?void 0:e.isSEOBot)&&void 0!==t&&t}(n),a=Ef(t.id),i=function(e,t){const r=/\.([^.]*)$/,n=new RegExp(`(${If.concat(_f).join("|")})`,"g");if(t&&t.length){let e=t;const o=t.match(r);return o&&yf.includes(o[1])&&(e=t.replace(r,"")),encodeURIComponent(e).replace(n,"_")}const o=e.match(/\/(.*?)$/);return(o?o[1]:e).replace(r,"")}(t.id,t.name),s=o?1:function(e){return Math.min(e.pixelAspectRatio||1,2)}(r),c=bf(t.id),l=c,u=wf(t.id),d={fileName:i,fileExtension:c,fileType:a,fittingType:e,preferredExtension:l,src:{id:t.id,width:t.width,height:t.height,isCropped:!1},focalPoint:{x:t.focalPoint&&t.focalPoint.x,y:t.focalPoint&&t.focalPoint.y},parts:[],devicePixelRatio:s,quality:0,upscaleMethod:Nf(n),progressive:!0,watermark:"",unsharpMask:{},filters:{},transformed:u};return u&&(xf(d,t,r),Lf(d,n)),d}const jf=mf`fit/w_${"width"},h_${"height"}`,Vf=mf`fill/w_${"width"},h_${"height"},al_${"alignment"}`,Gf=mf`fill/w_${"width"},h_${"height"},fp_${"focalPointX"}_${"focalPointY"}`,Wf=mf`crop/x_${"x"},y_${"y"},w_${"width"},h_${"height"}`,Bf=mf`crop/w_${"width"},h_${"height"},al_${"alignment"}`,qf=mf`fill/w_${"width"},h_${"height"},al_${"alignment"}`,zf=mf`,lg_${"upscaleMethodValue"}`,$f=mf`,q_${"quality"}`,Hf=mf`,usm_${"radius"}_${"amount"}_${"threshold"}`,Yf=mf`,bl`,Xf=mf`,wm_${"watermark"}`,Jf={[ef]:mf`,con_${"contrast"}`,[tf]:mf`,br_${"brightness"}`,[rf]:mf`,sat_${"saturation"}`,[nf]:mf`,hue_${"hue"}`,[of]:mf`,blur_${"blur"}`},Kf=mf`,enc_auto`;function Qf(e,t,r,n={},o){return wf(t.id)?function(e){const t=[];e.parts.forEach((e=>{switch(e.transformType){case Cp:t.push(Wf(e));break;case Pp:t.push(Bf(e));break;case Dp:let r=qf(e);e.upscale&&(r+=zf(e)),t.push(r);break;case Rp:let n=jf(e);e.upscale&&(n+=zf(e)),t.push(n);break;case Tp:let o=Vf(e);e.upscale&&(o+=zf(e)),t.push(o);break;case Op:let a=Gf(e);e.upscale&&(a+=zf(e)),t.push(a)}}));let r=t.join("/");return e.quality&&(r+=$f(e)),e.unsharpMask&&(r+=Hf(e.unsharpMask)),e.progressive||(r+=Yf(e)),e.watermark&&(r+=Xf(e)),e.filters&&(r+=Object.keys(e.filters).map((t=>Jf[t](e.filters))).join("")),e.autoEncode&&e.fileType!==df&&(r+=Kf(e)),`${e.src.id}/v1/${r}/${e.fileName}.${e.preferredExtension}`}(o=o||kf(e,t,r,n)):t.id}const Zf={[Np]:"50% 50%",[xp]:"0% 0%",[Fp]:"100% 0%",[Ap]:"50% 0%",[Lp]:"0% 100%",[Up]:"100% 100%",[Mp]:"50% 100%",[jp]:"100% 50%",[kp]:"0% 50%"};Object.entries(Zf).reduce(((e,[t,r])=>(e[r]=t,e)),{});function eh(e,t,r,n){if(function(e,t,r){return r&&t&&!function(e){return!e||!e.trim()||"none"===e.toLowerCase()}(t.id)&&Object.values(Sp).includes(e)}(e,t,r)){const o=function(e,t,r){const n=Object.assign({},r),o=Af();switch(e){case Sp.LEGACY_BG_FIT_AND_TILE:case Sp.LEGACY_BG_FIT_AND_TILE_HORIZONTAL:case Sp.LEGACY_BG_FIT_AND_TILE_VERTICAL:case Sp.LEGACY_BG_NORMAL:const e=o?1e3:1920,r=o?1e3:1920;n.width=Math.min(e,t.width),n.height=Math.min(r,Math.round(n.width/(t.width/t.height))),n.pixelAspectRatio=1}return n}(e,t,r);return{uri:Qf(e,t,o,n||{},kf(e,t,o,n))}}return{uri:""}}const th=/^media\//i,rh="undefined"!=typeof window?window.devicePixelRatio:1,nh=(e,t)=>{const r=t&&t.baseHostURL;return r?`${r}${e}`:(e=>th.test(e)?`https://static.wixstatic.com/${e}`:`https://static.wixstatic.com/media/${e}`)(e)};hf(),hf();const oh={getScaleToFitImageURL:function(e,t,r,n,o,a){const i=eh(Sp.SCALE_TO_FIT,{id:e,width:t,height:r,name:a&&a.name},{width:n,height:o,htmlTag:Wp,alignment:Np,pixelAspectRatio:rh},a);return nh(i.uri,a)},getScaleToFillImageURL:function(e,t,r,n,o,a){const i=eh(Sp.SCALE_TO_FILL,{id:e,width:t,height:r,name:a&&a.name,focalPoint:{x:a&&a.focalPoint&&a.focalPoint.x,y:a&&a.focalPoint&&a.focalPoint.y}},{width:n,height:o,htmlTag:Wp,alignment:Np,pixelAspectRatio:rh},a);return nh(i.uri,a)},getCropImageURL:function(e,t,r,n,o,a,i,s,c,l){const u=eh(Sp.SCALE_TO_FILL,{id:e,width:t,height:r,name:l&&l.name,crop:{x:n,y:o,width:a,height:i}},{width:s,height:c,htmlTag:Wp,alignment:Np,pixelAspectRatio:rh},l);return nh(u.uri,l)}};function ah(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var ih=new WeakMap,sh=new WeakMap,ch=new WeakMap,lh=new WeakMap,uh=new WeakMap,dh=new WeakMap,ph=new WeakMap;class fh{constructor(e){let{platformUtils:t,wixSdk:r,bi:n,tpaActionImplementations:o,devMode:a,verbose:i}=e;ah(this,ih,{writable:!0,value:void 0}),ah(this,sh,{writable:!0,value:void 0}),ah(this,ch,{writable:!0,value:void 0}),ah(this,lh,{writable:!0,value:void 0}),ah(this,uh,{writable:!0,value:void 0}),ah(this,dh,{writable:!0,value:void 0}),ah(this,ph,{writable:!0,value:void 0}),u()(this,ih,this._getSettings({wixSdk:r,bi:n,devMode:a,verbose:i})),u()(this,sh,this._getUser(r.user)),u()(this,ch,this._getLocation(r.location,n)),u()(this,lh,this._getUtils(t)),u()(this,uh,this._getTimers(r)),u()(this,dh,(async e=>{let{currentItem:t,action:n}=e;const a=o[n];await a({wixSdk:r,currentItem:t})})),u()(this,ph,this._getSeo(r))}get settings(){return c()(this,ih)}get user(){return c()(this,sh)}get location(){return c()(this,ch)}get utils(){return c()(this,lh)}get timers(){return c()(this,uh)}get executeTpaAction(){return c()(this,dh)}get seo(){return c()(this,ph)}_getSettings(e){let{wixSdk:{window:{viewMode:t,rendering:{env:r},browserLocale:n},site:{regionalSettings:o=n}},bi:{metaSiteId:a,viewerName:i},devMode:s,verbose:c}=e;return{metaSiteId:a,locale:o,mode:{name:r,dev:s,verbose:c,ssr:"backend"===r,csr:"backend"!==r},env:{name:t,live:"Site"===t,preview:"Preview"===t,livePreview:"Editor"===t,editor:"Preview"===t||"Editor"===t,renderer:i}}}_getUser(e){return{get id(){return e.currentUser.id},get loggedIn(){return e.currentUser.loggedIn},onLogin:e.onLogin}}_getLocation(e,t){let{baseUrl:r,url:n,to:o}=e,{pageId:a}=t;return{pageId:a,pageUrl:n,baseUrl:r,navigateTo:o}}_getUtils(e){let{links:t,mediaItemUtils:r}=e;return{links:t,media:{...r,getScaleToFillImageURL:oh.getScaleToFillImageURL}}}_getTimers(e){var t;return{queueMicrotask:(null==(t=e.environment)||null==(t=t.timers)?void 0:t.queueMicrotask)||queueMicrotask}}_getSeo(e){return{renderSEOTags:e.seo.renderSEOTags}}}var hh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u0627\u0644\u0643\u0644"}'),mh=a.t(hh,2),gh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u0412\u0441\u0438\u0447\u043a\u0438"}'),yh=a.t(gh,2),vh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Tot"}'),wh=a.t(vh,2),Ih=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"V\u0161e"}'),_h=a.t(Ih,2),Eh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Alle"}'),bh=a.t(Eh,2),Sh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Alle"}'),Rh=a.t(Sh,2),Th=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u038c\u03bb\u03b1"}'),Oh=a.t(Th,2),Ch=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"All"}'),Ph=a.t(Ch,2),Dh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Todo"}'),Nh=a.t(Dh,2),Ah=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Tout"}'),xh=a.t(Ah,2),Fh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u05d4\u05db\u05dc"}'),Mh=a.t(Fh,2),Lh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u0938\u092d\u0940"}'),Uh=a.t(Lh,2),kh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\xd6sszes"}'),jh=a.t(kh,2),Vh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Semua"}'),Gh=a.t(Vh,2),Wh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Tutti"}'),Bh=a.t(Wh,2),qh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u3059\u3079\u3066"}'),zh=a.t(qh,2),$h=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\uc804\uccb4"}'),Hh=a.t($h,2),Yh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Viskas"}'),Xh=a.t(Yh,2),Jh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Semua"}'),Kh=a.t(Jh,2),Qh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Alle"}'),Zh=a.t(Qh,2),em=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Alle"}'),tm=a.t(em,2),rm=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Wszystkie"}'),nm=a.t(rm,2),om=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Todos"}'),am=a.t(om,2),im=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Toate"}'),sm=a.t(im,2),cm=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u0412\u0441\u0435"}'),lm=a.t(cm,2),um=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"V\u0161etky"}'),dm=a.t(um,2),pm=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Vse"}'),fm=a.t(pm,2),hm=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Alla"}'),mm=a.t(hm,2),gm=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u0e17\u0e31\u0e49\u0e07\u0e2b\u0e21\u0e14"}'),ym=a.t(gm,2),vm=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Lahat"}'),wm=a.t(vm,2),Im=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Hepsi"}'),_m=a.t(Im,2),Em=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u0423\u0441\u0456"}'),bm=a.t(Em,2),Sm=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"T\u1ea5t c\u1ea3"}'),Rm=a.t(Sm,2),Tm=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u6240\u6709"}');const Om={ar:mh,bg:yh,ca:wh,cs:_h,da:bh,de:Rh,el:Oh,en:Ph,es:Nh,fr:xh,he:Mh,hi:Uh,hu:jh,id:Gh,it:Bh,ja:zh,ko:Hh,lt:Xh,ms:Kh,nl:Zh,no:tm,pl:nm,pt:am,ro:sm,ru:lm,sk:dm,sl:fm,sv:mm,th:ym,tl:wm,tr:_m,uk:bm,vi:Rm,zh:a.t(Tm,2)},Cm=Om.en;function Pm(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var Dm=new WeakMap,Nm=new WeakMap,Am=new WeakMap,xm=new WeakMap,Fm=new WeakMap,Mm=new WeakMap,Lm=new WeakMap;const{initAppForPage:Um,createControllers:km}=new class{constructor(e){var t=this;let{verbose:r=!1,wixDataSchemasForItTests:n,automationsClientCreator:i=C,tpaActionImplementations:s=p}=void 0===e?{}:e;return o()(this,"initAppForPage",(function(e,r,n,o){let{bi:i={},monitoring:{createMonitor:s},fedOpsLoggerFactory:l,biLoggerFactory:d,essentials:{httpClient:p,experiments:f}}=void 0===o?{}:o;try{const o=new fh({platformUtils:r,wixSdk:n,bi:i,tpaActionImplementations:c()(t,Lm),devMode:!1,verbose:c()(t,xm)}),{settings:m}=o,{instance:g,appData:{gridAppId:y},url:v}=e;(e=>{try{a.p=e.substr(0,e.lastIndexOf("/")+1)}catch(e){}})(v);const{data:w,window:{warmupData:I,getRouterData:_},location:{baseUrl:E,protocol:b},site:{language:S}}=n;u()(t,Am,_()),u()(t,Nm,new ta({fedops:{factory:l,hooks:{start:e=>{let{name:r}=e;return c()(t,Nm).log(new We({category:"interaction start",message:"interaction "+r+" started"}))},end:e=>{let{name:r,duration:n}=e;return c()(t,Nm).log(new We({category:"interaction end",message:"interaction "+r+" ended after "+n+" ms"}))}}},bi:{factory:d},monitor:{factory:s},verbose:{factory:()=>({log:function(){var e;return((null==(e=n.telemetry)?void 0:e.console)||console).verbose(...arguments)}})},console:{factory:()=>{var e;return(null==(e=n.telemetry)?void 0:e.console)||console}},settings:m,global:self})),c()(t,Nm).log(new Ge("databinding/initAppForPage",Ge.types.START));const R=(e=>{var t;const r=null!=(t=Om[e])?t:Cm;return{t:e=>{var t;return null!=(t=null==r?void 0:r[e])?t:e}}})(S),T=(e=>{let{experiments:t,settings:{env:r}}=e;return{get fes(){return t.enabled("specs.wixDataViewer.EnableFES")},get warmupData(){return r.live},get newCurrentPageIndex(){return t.enabled("specs.wixDataViewer.NewCurrentPageIndex")},get schemasClientV2(){return t.enabled("specs.wixDataClient.SchemasClientV2")}}})({experiments:f,settings:m}),O=T.fes?new jn({httpClient:p,getRequestParams:()=>({instance:g,gridAppId:y})}):new mo({wixData:w,wixDataSchemas:c()(t,Fm)||new bp(p,g,y,{baseUrl:m.env.editor?void 0:b+"://"+h()(E).hostname+"/_api/cloud-data/v1/schemas",useApiV2:T.schemasClientV2})}),C=new bo(I),P=new Po(c()(t,Am)),D=Nu({automationsClientCreator:()=>c()(t,Mm).call(t,{httpClient:p})});return u()(t,Dm,new wu({platform:o,dataFetcher:O,warmupCache:C,staticCache:P,features:T,listenersByEvent:D,logger:c()(t,Nm),i18n:R,global:self,loadFormulaJs:qa})),c()(t,Nm).log(new Ge("databinding/initAppForPage",Ge.types.END)),Promise.resolve()}catch(e){return c()(t,Nm)&&c()(t,Nm).log(new D("App initialisation failed",{cause:e})),Promise.reject(e)}})),o()(this,"createControllers",(e=>{if(!e.length)return[];const t=(r=e,n=c()(this,Am),r.map((e=>{let{compId:t,config:{dataset:{collectionName:r,filter:o,sort:a,includes:i,nested:s,pageSize:c,readWriteType:l,deferred:u,cursor:d}={}}={},type:p,connections:f,livePreviewOptions:{shouldFetchData:h,compsIdsToReset:m=[]}={}}=e;const g={id:t,type:p,collectionId:r,filter:o,sort:a,pageSize:c,readWriteType:l,includes:i,nested:s,deferred:u,connections:f,dataIsInvalidated:h,updatedCompIds:m,cursor:d};return p===Rr&&n?((e,t)=>{const{readWriteType:r}=e,{config:{dataset:{collectionName:n,filter:o,sort:a,includes:i,pageSize:s,lowercase:c,seoV2:l}},dynamicUrl:u,userDefinedFilter:d}=t;return{...e,collectionId:n,filter:o,sort:a,includes:i,pageSize:s,readWriteType:r,dynamicPageData:{lowercase:c,dynamicUrl:u,userDefinedFilter:d,seoV2:l}}})(g,n):g})));var r,n;const o=e.reduce(((e,t)=>{let{$w:r,compId:n}=t;return e[n]=r.fireEvent,e}),{});return c()(this,Dm).initializeDatasets({datasetConfigs:t,firePlatformEvent:e=>o[e]}).map((e=>({...e,pageReady:t=>e.pageReady(Fl(t))})))})),Pm(this,Dm,{writable:!0,value:void 0}),Pm(this,Nm,{writable:!0,value:void 0}),Pm(this,Am,{writable:!0,value:void 0}),Pm(this,xm,{writable:!0,value:void 0}),Pm(this,Fm,{writable:!0,value:void 0}),Pm(this,Mm,{writable:!0,value:void 0}),Pm(this,Lm,{writable:!0,value:void 0}),u()(this,Fm,n),u()(this,Mm,i),u()(this,xm,r),u()(this,Lm,s),{initAppForPage:this.initAppForPage,createControllers:this.createControllers}}}}(),i}()}));
//# sourceMappingURL=app.js.map