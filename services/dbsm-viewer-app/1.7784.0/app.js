!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("_")):"function"==typeof define&&define.amd?define("dbsm-viewer-app",["_"],t):"object"==typeof exports?exports["dbsm-viewer-app"]=t(require("_")):e["dbsm-viewer-app"]=t(e._)}("undefined"!=typeof self?self:this,(e=>(()=>{var t,r,n={9025:(e,t,r)=>{e.exports={ITEM_TYPES:r(8834).iB}},8834:(e,t)=>{"use strict";t.iB=t._5=void 0,t._5="STATIC_PAGE_V2",t.iB={DEFAULT:"DEFAULT",STATIC_PAGE:"STATIC_PAGE",STATIC_PAGE_V2:t._5,STORES_PRODUCT:"STORES_PRODUCT",FORUM_POST:"FORUM_POST",FORUM_CATEGORY:"FORUM_CATEGORY",PRO_GALLERY_ITEM:"PRO_GALLERY_ITEM",BLOG_POST:"BLOG_POST",BLOG_CATEGORY:"BLOG_CATEGORY",BLOG_TAGS:"BLOG_TAGS",BLOG_ARCHIVE:"BLOG_ARCHIVE",GROUPS_PAGE:"GROUPS_PAGE",GROUPS_POST:"GROUPS_POST",EVENTS_PAGE:"EVENTS_PAGE",CHALLENGES_PAGE:"CHALLENGES_PAGE",SEARCH_PAGE:"SEARCH_PAGE",BOOKINGS_SERVICE:"BOOKINGS_SERVICE",BOOKINGS_CALENDAR:"BOOKINGS_CALENDAR",BOOKINGS_FORM:"BOOKINGS_FORM",BREADCRUMBS_COMPONENT:"BREADCRUMBS_COMPONENT",BLOG_HASHTAGS:"BLOG_HASHTAGS",RESTAURANTS_ORDER_PAGE:"RESTAURANTS_ORDER_PAGE",MEMBERS_AREA_PROFILE:"MEMBERS_AREA_PROFILE",VIDEO_COMPONENT:"VIDEO_COMPONENT",PORTFOLIO_COLLECTIONS:"PORTFOLIO_COLLECTIONS",PORTFOLIO_PROJECTS:"PORTFOLIO_PROJECTS",GIFT_CARD:"GIFT_CARD",SCHEDULE_PAGE:"SCHEDULE_PAGE",WIX_DATA_PAGE_ITEM:"WIX_DATA_PAGE_ITEM",REVIEWS_COMPONENT:"REVIEWS_COMPONENT",STORES_CATEGORY:"STORES_CATEGORY",STORES_GALLERY_COMPONENT:"STORES_GALLERY_COMPONENT",RESTAURANTS_MENU_PAGE:"RESTAURANTS_MENU_PAGE",RESTAURANTS_MENU_COMPONENT:"RESTAURANTS_MENU_COMPONENT",MEMBERS_AREA_PROFILE_TABS:"MEMBERS_AREA_PROFILE_TABS",PROGRAMS_COMPONENT:"PROGRAMS_COMPONENT",SERVICES_COMPONENT:"SERVICES_COMPONENT",PAYMENT_PAGE:"PAYMENT_PAGE",THANK_YOU_PAGE:"THANK_YOU_PAGE"}},1231:(e,t,r)=>{"use strict";r.r(t),r.d(t,{bulkGetDataCollections:()=>F,createDataCollection:()=>D,createDataCollectionField:()=>U,deleteDataCollection:()=>M,deleteDataCollectionField:()=>G,getDataCollection:()=>A,listDataCollections:()=>x,updateDataCollection:()=>L,updateDataCollectionField:()=>k});var n=r(2681),o=r(3368),a={typeMetadata:"_typeMetadata"},i={},s={activeCollections:"_dataCollection",deletedCollections:"_dataCollection"},c={field:"_field"},l={dataCollection:"_dataCollection"},d={collection:"_dataCollection"},u={collection:"_dataCollection"},p={createdDate:"google.protobuf.Timestamp",updatedDate:"google.protobuf.Timestamp",fields:"_field"},f={},h={dataCollection:"_dataCollection"},m={},g={},y={numberRange:"_numberRange",typeMetadata:"_typeMetadata"},v={},_={collection:"_dataCollection",referencedCollections:"_dataCollection"},E={},I={collections:"_dataCollection"},w={min:"google.protobuf.DoubleValue",max:"google.protobuf.DoubleValue"},S={fields:"_objectField"},R={typeMetadata:"_typeMetadata"},T={object:"_object",array:"_array"},b={field:"_field"},O={dataCollection:"_dataCollection"},P={collection:"_dataCollection"},C={collection:"_dataCollection"};function N(e){return(0,n.Kk)(Object.assign(e,{domainToMappings:{"api._api_base_domain_":[{srcPath:"/cloud-data",destPath:""}],"code._base_domain_":[{srcPath:"/_api/cloud-data/v1/data-settings",destPath:"/v1/data-settings"},{srcPath:"/_api/cloud-data/v1/schemas",destPath:"/v1/schemas"},{srcPath:"/_api/cloud-data/v1/connector",destPath:"/v1/connector"},{srcPath:"/_api/data/v1/data-settings",destPath:"/v1/data-settings"},{srcPath:"/_api/data/v1/schemas",destPath:"/v1/schemas"},{srcPath:"/_api/data/v1/connector",destPath:"/v1/connector"},{srcPath:"/_api/cloud-data/v1/wix-data",destPath:"/v1/wix-data"}],"cloud-data.wix-code.com":[{srcPath:"",destPath:""}],_:[{srcPath:"/_api/cloud-data",destPath:""}],"www._base_domain_":[{srcPath:"/_api/cloud-data",destPath:""},{srcPath:"/_api/data",destPath:""},{srcPath:"/[a-z0-9-_/]+/_api/cloud-data",destPath:""}],"dev._base_domain_":[{srcPath:"/_api/cloud-data",destPath:""}],"bo._base_domain_":[{srcPath:"/_api/cloud-data/v1",destPath:"/v1"},{srcPath:"/[a-z0-9-_/]+/_api/cloud-data",destPath:""}],"manage._base_domain_":[{srcPath:"/_api/cloud-data",destPath:""},{srcPath:"/_api/data",destPath:""},{srcPath:"/[a-z0-9-_/]+/_api/cloud-data",destPath:""}],"editor._base_domain_":[{srcPath:"/_api/cloud-data/v1/schemas",destPath:"/v1/schemas"},{srcPath:"/_api/cloud-data/dbs/tasks",destPath:"/dbs/tasks"},{srcPath:"/_api/data/v1/schemas",destPath:"/v1/schemas"},{srcPath:"/_api/data/dbs/tasks",destPath:"/dbs/tasks"},{srcPath:"/_api/cloud-data/v1/wix-data",destPath:"/v1/wix-data"},{srcPath:"/_api/cloud-data/v1/data-settings",destPath:"/v1/data-settings"},{srcPath:"/_api/data/v2/indexes",destPath:"/v2/indexes"},{srcPath:"/_api/cloud-data/v1/external-database-connections",destPath:"/v1/external-database-connections"},{srcPath:"/_api/data/v1/data-collection-sharing",destPath:"/v1/data-collection-sharing"},{srcPath:"/_api/cloud-data/v2/collections",destPath:"/v2/collections"},{srcPath:"/_api/cloud-data/v2/bulk",destPath:"/v2/bulk"}],"blocks._base_domain_":[{srcPath:"/_api/cloud-data/v1/schemas",destPath:"/v1/schemas"},{srcPath:"/_api/cloud-data/dbs/tasks",destPath:"/dbs/tasks"},{srcPath:"/_api/data/v1/schemas",destPath:"/v1/schemas"},{srcPath:"/_api/data/dbs/tasks",destPath:"/dbs/tasks"},{srcPath:"/_api/cloud-data/v1/wix-data",destPath:"/v1/wix-data"},{srcPath:"/_api/cloud-data/v1/data-settings",destPath:"/v1/data-settings"},{srcPath:"/_api/data/v2/indexes",destPath:"/v2/indexes"},{srcPath:"/_api/cloud-data/v1/external-database-connections",destPath:"/v1/external-database-connections"},{srcPath:"/_api/data/v1/data-collection-sharing",destPath:"/v1/data-collection-sharing"},{srcPath:"/_api/cloud-data/v2/collections",destPath:"/v2/collections"},{srcPath:"/_api/cloud-data/v2/bulk",destPath:"/v2/bulk"}],"create.editorx":[{srcPath:"/_api/cloud-data/v1/schemas",destPath:"/v1/schemas"},{srcPath:"/_api/cloud-data/dbs/tasks",destPath:"/dbs/tasks"},{srcPath:"/_api/data/v1/schemas",destPath:"/v1/schemas"},{srcPath:"/_api/data/dbs/tasks",destPath:"/dbs/tasks"},{srcPath:"/_api/cloud-data/v1/wix-data",destPath:"/v1/wix-data"},{srcPath:"/_api/cloud-data/v1/data-settings",destPath:"/v1/data-settings"},{srcPath:"/_api/data/v2/indexes",destPath:"/v2/indexes"},{srcPath:"/_api/cloud-data/v1/external-database-connections",destPath:"/v1/external-database-connections"},{srcPath:"/_api/data/v1/data-collection-sharing",destPath:"/v1/data-collection-sharing"},{srcPath:"/_api/cloud-data/v2/collections",destPath:"/v2/collections"},{srcPath:"/_api/cloud-data/v2/bulk",destPath:"/v2/bulk"}],"www.wixapis.com":[{srcPath:"/wix-data/v1/collections",destPath:"/v1/wix-data/collections"},{srcPath:"/wix-data/v1/external-database-connections",destPath:"/v1/external-database-connections"},{srcPath:"/wix-data/v2/indexes",destPath:"/v2/indexes"},{srcPath:"/wix-data/v1/items",destPath:"/v1/items"},{srcPath:"/wix-data/v1/bulk",destPath:"/v1/bulk"},{srcPath:"/wix-data/v1/external-databases",destPath:"/v1/external-databases"},{srcPath:"/wix-data/v2",destPath:"/v2"}],"www.wixgateway.com":[{srcPath:"/wix-data/v1/items",destPath:"/v1/items"},{srcPath:"/wix-data/v1/bulk",destPath:"/v1/bulk"}]}}))}function D(e){var t=(0,o.G)(d,{_array:a,_dataCollection:p,_field:y,_numberRange:w,_object:S,_objectField:R,_typeMetadata:T}),r=t.toJSON,n=t.fromJSON,i=(0,o.G)(u,{_array:a,_dataCollection:p,_field:y,_numberRange:w,_object:S,_objectField:R,_typeMetadata:T}).fromJSON;function s(t){var n=t.host,o=r(e);return{entityFqdn:"wix.data.v2.data_collection",method:"POST",methodFqn:"com.wixpress.cloud.data.api.collectionservice.DataCollectionService.CreateDataCollection",url:N({protoPath:"/v2/collections",data:o,host:n}),data:o,transformResponse:i}}return s.fromReq=n,s}function A(e){var t=(0,o.G)(v,{}),r=t.toJSON,i=t.fromJSON,s=(0,o.G)(_,{_array:a,_dataCollection:p,_field:y,_numberRange:w,_object:S,_objectField:R,_typeMetadata:T}).fromJSON;function c(t){var o=t.host,a=r(e);return{entityFqdn:"wix.data.v2.data_collection",method:"GET",methodFqn:"com.wixpress.cloud.data.api.collectionservice.DataCollectionService.GetDataCollection",url:N({protoPath:"/v2/collections/{dataCollectionId}",data:a,host:o}),params:(0,n.kI)(a),transformResponse:s}}return c.fromReq=i,c}function x(e){var t=(0,o.G)(E,{}),r=t.toJSON,i=t.fromJSON,s=(0,o.G)(I,{_array:a,_dataCollection:p,_field:y,_numberRange:w,_object:S,_objectField:R,_typeMetadata:T}).fromJSON;function c(t){var o=t.host,a=r(e);return{entityFqdn:"wix.data.v2.data_collection",method:"GET",methodFqn:"com.wixpress.cloud.data.api.collectionservice.DataCollectionService.ListDataCollections",url:N({protoPath:"/v2/collections",data:a,host:o}),params:(0,n.kI)(a),transformResponse:s}}return c.fromReq=i,c}function F(e){var t=(0,o.G)(i,{}),r=t.toJSON,n=t.fromJSON,c=(0,o.G)(s,{_array:a,_dataCollection:p,_field:y,_numberRange:w,_object:S,_objectField:R,_typeMetadata:T}).fromJSON;function l(t){var n=t.host,o=r(e);return{entityFqdn:"wix.data.v2.data_collection",method:"POST",methodFqn:"com.wixpress.cloud.data.api.collectionservice.DataCollectionService.BulkGetDataCollections",url:N({protoPath:"/v2/bulk/collections/get",data:o,host:n}),data:o,transformResponse:c}}return l.fromReq=n,l}function L(e){var t=(0,o.G)(P,{_array:a,_dataCollection:p,_field:y,_numberRange:w,_object:S,_objectField:R,_typeMetadata:T}),r=t.toJSON,n=t.fromJSON,i=(0,o.G)(C,{_array:a,_dataCollection:p,_field:y,_numberRange:w,_object:S,_objectField:R,_typeMetadata:T}).fromJSON;function s(t){var n=t.host,o=r(e);return{entityFqdn:"wix.data.v2.data_collection",method:"PUT",methodFqn:"com.wixpress.cloud.data.api.collectionservice.DataCollectionService.UpdateDataCollection",url:N({protoPath:"/v2/collections",data:o,host:n}),data:o,transformResponse:i}}return s.fromReq=n,s}function M(e){var t=(0,o.G)(m,{}),r=t.toJSON,a=t.fromJSON,i=(0,o.G)(g,{}).fromJSON;function s(t){var o=t.host,a=r(e);return{entityFqdn:"wix.data.v2.data_collection",method:"DELETE",methodFqn:"com.wixpress.cloud.data.api.collectionservice.DataCollectionService.DeleteDataCollection",url:N({protoPath:"/v2/collections/{dataCollectionId}",data:a,host:o}),params:(0,n.kI)(a),transformResponse:i}}return s.fromReq=a,s}function U(e){var t=(0,o.G)(c,{_array:a,_field:y,_numberRange:w,_object:S,_objectField:R,_typeMetadata:T}),r=t.toJSON,n=t.fromJSON,i=(0,o.G)(l,{_array:a,_dataCollection:p,_field:y,_numberRange:w,_object:S,_objectField:R,_typeMetadata:T}).fromJSON;function s(t){var n=t.host,o=r(e);return{entityFqdn:"wix.data.v2.data_collection",method:"POST",methodFqn:"com.wixpress.cloud.data.api.collectionservice.DataCollectionService.CreateDataCollectionField",url:N({protoPath:"/v2/collections/create-field",data:o,host:n}),data:o,transformResponse:i}}return s.fromReq=n,s}function k(e){var t=(0,o.G)(b,{_array:a,_field:y,_numberRange:w,_object:S,_objectField:R,_typeMetadata:T}),r=t.toJSON,n=t.fromJSON,i=(0,o.G)(O,{_array:a,_dataCollection:p,_field:y,_numberRange:w,_object:S,_objectField:R,_typeMetadata:T}).fromJSON;function s(t){var n=t.host,o=r(e);return{entityFqdn:"wix.data.v2.data_collection",method:"POST",methodFqn:"com.wixpress.cloud.data.api.collectionservice.DataCollectionService.UpdateDataCollectionField",url:N({protoPath:"/v2/collections/update-field",data:o,host:n}),data:o,transformResponse:i}}return s.fromReq=n,s}function G(e){var t=(0,o.G)(f,{}),r=t.toJSON,n=t.fromJSON,i=(0,o.G)(h,{_array:a,_dataCollection:p,_field:y,_numberRange:w,_object:S,_objectField:R,_typeMetadata:T}).fromJSON;function s(t){var n=t.host,o=r(e);return{entityFqdn:"wix.data.v2.data_collection",method:"POST",methodFqn:"com.wixpress.cloud.data.api.collectionservice.DataCollectionService.DeleteDataCollectionField",url:N({protoPath:"/v2/collections/delete-field",data:o,host:n}),data:o,transformResponse:i}}return s.fromReq=n,s}D.__isAmbassador=!0,A.__isAmbassador=!0,x.__isAmbassador=!0,F.__isAmbassador=!0,L.__isAmbassador=!0,M.__isAmbassador=!0,U.__isAmbassador=!0,k.__isAmbassador=!0,G.__isAmbassador=!0},5965:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WIX_FAQ=t.WIX_SITE_SEARCH=t.WIX_MUSIC=t.BANDSINTOWN=t.WIX_PORTFOLIO=t.WIX_PRO_GALLERY=t.WIX_PHOTO_ALBUMS=t.WIX_HOTELS_RUNNER=t.WIX_VIDEO=t.WIX_GET_SUBSCRIBERS=t.INSTAGRAM_FEED=t.DEVIANTART_FEED=t.WIX_CHAT=t.WIX_RESTAURANTS_TABLE_RESERVATIONS=t.WIX_RESTAURANTS_MENUS_NEW=t.WIX_RESTAURANTS_MENUS=t.WIX_RESTAURANTS_ORDERS_NEW=t.WIX_RESTAURANTS_ORDERS=t.WIX_RESERVATIONS=t.NOTIFICATIONS=t.META_SITE=t.MEMBERS=t.MEMBERS_AREA_V2=t.MEMBERS_AREA=t.WIX_NEW_STORES=t.WIX_STORES=t.WIX_ECOM=t.PRICING_PLANS=t.WIX_FORUM=t.WIX_BOOKINGS=t.WIX_EVENTS=t.WIX_BLOG=t.WIX_HOTELS=t.ADMIN_PAGES=t.DASHBOARD_SALES=t.DASHBOARD_SUGGESTIONS=t.DASHBOARD_SETUP=t.BUSINESS_DASHBOARD=t.WIX_CODE_PLATFORM_VISIBILITY=t.WIX_ACCESSIBILITY_WIZARD=t.WIX_CODE_SITE_MONITORING=t.WIX_CODE_SECRETS_MANAGER=t.WIX_CODE_RELEASE_MANAGER=t.CLOUD_DATA_SCHEMA_NOTIFIER=t.OLD_BLOG=t.SITE_MEMBERS=t.DATA_BINDING=t.WIX_CODE_DUPLEXER=t.WIX_CODE_SITE_EXTENSION=t.WIX_CODE=void 0,t.getAppDependencies=t.FERA_REVIEWS=t.CMS=t.MULTILINGUAL=t.MEMBERS_ACCOUNT_INFO=t.MEMBERS_ABOUT=t.MY_SUBSCRIPTIONS=t.MAP_PLUGIN=t.WIX_REVIEWS=t.WISHLIST_BLOCKS=t.RESTAURANTS=t.WIX_FILE_SHARE=t.RICH_CONTENT=t.WIX_GROUPS=t.WIX_CHALLENGES=t.WIX_FORMS=void 0,t.WIX_CODE="wix-code",t.WIX_CODE_SITE_EXTENSION="CloudSiteExtension",t.WIX_CODE_DUPLEXER="af6d536e-0fc6-428b-a7f9-1d8cd6aa3703",t.DATA_BINDING="dataBinding",t.SITE_MEMBERS="SiteMembers",t.OLD_BLOG="79f391eb-7dfc-4adf-be6e-64434c4838d9",t.CLOUD_DATA_SCHEMA_NOTIFIER="f1fbeff1-05c3-4121-bdb5-75e74b6e9e51",t.WIX_CODE_RELEASE_MANAGER="8c41f3a6-47f7-40be-ad77-02a72cb2ddb3",t.WIX_CODE_SECRETS_MANAGER="4b10fcce-732d-4be3-9d46-801d271acda9",t.WIX_CODE_SITE_MONITORING="675bbcef-18d8-41f5-800e-131ec9e08762",t.WIX_ACCESSIBILITY_WIZARD="9699c03d-5c19-4a7c-a454-e8109a6e43fc",t.WIX_CODE_PLATFORM_VISIBILITY="8048f115-449b-4dab-b0e6-e09d5ffc8199",t.BUSINESS_DASHBOARD="a7597ab5-1ed4-458f-a5c1-5884d5e14281",t.DASHBOARD_SETUP="0750d046-d599-4cfc-9f6b-e9f4af169aa9",t.DASHBOARD_SUGGESTIONS="cead4297-02ee-4c0f-ae07-461f4ba71b3b",t.DASHBOARD_SALES="f95c72b1-84de-48ec-a61b-d96d61315ffe",t.ADMIN_PAGES="1514b01b-cb08-41b4-8582-0a88551ac769",t.WIX_HOTELS="135aad86-9125-6074-7346-29dc6a3c9bcf",t.WIX_BLOG="14bcded7-0066-7c35-14d7-466cb3f09103",t.WIX_EVENTS="140603ad-af8d-84a5-2c80-a0f60cb47351",t.WIX_BOOKINGS="13d21c63-b5ec-5912-8397-c3a5ddb27a97",t.WIX_FORUM="14724f35-6794-cd1a-0244-25fd138f9242",t.PRICING_PLANS="1522827f-c56c-a5c9-2ac9-00f9e6ae12d3",t.WIX_ECOM="1380b703-ce81-ff05-f115-39571d94dfcd",t.WIX_STORES="1380b703-ce81-ff05-f115-39571d94dfcd",t.WIX_NEW_STORES="215238eb-22a5-4c36-9e7b-e7c08025e04e",t.MEMBERS_AREA="14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9",t.MEMBERS_AREA_V2="b976560c-3122-4351-878f-453f337b7245",t.MEMBERS="14dbefd2-01b4-fb61-32a7-3abd44da4908",t.META_SITE="22bef345-3c5b-4c18-b782-74d4085112ff",t.NOTIFICATIONS="14f25924-5664-31b2-9568-f9c5ed98c9b1",t.WIX_RESERVATIONS="1475ab65-206b-d79a-856d-fa10bdb479ea",t.WIX_RESTAURANTS_ORDERS="13e8d036-5516-6104-b456-c8466db39542",t.WIX_RESTAURANTS_ORDERS_NEW="9a5d83fd-8570-482e-81ab-cfa88942ee60",t.WIX_RESTAURANTS_MENUS="13c1402c-27f2-d4ab-7463-ee7c89e07578",t.WIX_RESTAURANTS_MENUS_NEW="b278a256-2757-4f19-9313-c05c783bec92",t.WIX_RESTAURANTS_TABLE_RESERVATIONS="f9c07de2-5341-40c6-b096-8eb39de391fb",t.WIX_CHAT="14517e1a-3ff0-af98-408e-2bd6953c36a2",t.DEVIANTART_FEED="7d297b79-baed-46d7-ac58-4bd68dcb70d0",t.INSTAGRAM_FEED="14635256-b183-1c71-a4d2-f55179b80e8a",t.WIX_GET_SUBSCRIBERS="1375baa8-8eca-5659-ce9d-455b2009250d",t.WIX_VIDEO="14409595-f076-4753-8303-9a86f9f71469",t.WIX_HOTELS_RUNNER="826670ba-3a6b-4157-ac72-7c4fca9ce220",t.WIX_PHOTO_ALBUMS="13ff8629-c1fc-e289-e81f-bc8c8968e9d6",t.WIX_PRO_GALLERY="14271d6f-ba62-d045-549b-ab972ae1f70e",t.WIX_PORTFOLIO="d90652a2-f5a1-4c7c-84c4-d4cdcc41f130",t.BANDSINTOWN="1405ef82-0ee0-65fb-88a1-2f172aa3573c",t.WIX_MUSIC="13bb5d67-1add-e770-a71f-001277e17c57",t.WIX_SITE_SEARCH="1484cb44-49cd-5b39-9681-75188ab429de",t.WIX_FAQ="14c92d28-031e-7910-c9a8-a670011e062d",t.WIX_FORMS="14ce1214-b278-a7e4-1373-00cebd1bef7c",t.WIX_CHALLENGES="2936472a-a1ed-4ae5-9f71-614313a9f4e7",t.WIX_GROUPS="148c2287-c669-d849-d153-463c7486a694",t.RICH_CONTENT="949cfcc9-2a3f-4a96-bd6c-11d9d82763a4",t.WIX_FILE_SHARE="1537b24e-29d1-6d8f-b8e1-d6860f2f70b9",t.RESTAURANTS="9142e27e-2e30-4948-ad8f-7e128939efc4",t.WISHLIST_BLOCKS="a97c0203-062a-4dd5-97cf-a90f9800a13a",t.WIX_REVIEWS="a95a5fce-e370-4402-9ce4-96956acc747d",t.MAP_PLUGIN="c5fedde3-63c7-4041-a5fb-c77bbe6308dc",t.MY_SUBSCRIPTIONS="2bef2abe-7abe-43da-889c-53c1500a328c",t.MEMBERS_ABOUT="14dbef06-cc42-5583-32a7-3abd44da4908",t.MEMBERS_ACCOUNT_INFO="14cffd81-5215-0a7f-22f8-074b0e2401fb",t.MULTILINGUAL="14d84998-ae09-1abf-c6fc-3f3cace5bf19",t.CMS="1973457f-c021-4da5-941f-58444ff761d4",t.FERA_REVIEWS="c9064755-5cc8-4faf-a5a6-41a0150a6640";var r={};t.getAppDependencies=function(e){return r[e]||[]}},9540:e=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}var r="User",n="Error",o="EDM",a=function(e,r){e&&"object"===t(e)&&(e.errorGroup=r)};e.exports={markUserError:function(e){return a(e,r)},isUserError:function(e){return e&&e.errorGroup===r},markAppError:function(e){return a(e,n)},isAppError:function(e){return e&&e.errorGroup===n},markEdmError:function(e){return a(e,o)},isEdmError:function(e){return e&&e.errorGroup===o},markError:a,isMarked:function(e){return!!e&&void 0!==e.errorGroup},USER_ERROR_GROUP:r,APP_ERROR_GROUP:n,EDM_ERROR_GROUP:o,UNKNOWN_ERROR_GROUP:"Unknown"}},3164:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var u=r(9540),p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(d,e);var t,r,n,c=s(d);function d(){var e;a(this,d);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=c.call.apply(c,[this].concat(r)),Error.captureStackTrace&&Error.captureStackTrace(l(e),e.constructor),e.name=d.name,u.markUserError(l(e)),e}return t=d,r&&o(t.prototype,r),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error));e.exports={UserCodeError:p}},3065:(e,t,r)=>{"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(9540),s=r(3164);e.exports=o(o({},s),i)},5882:(e,t,r)=>{"use strict";t.PL=t.ah=void 0;var n=r(4725);Object.defineProperty(t,"ah",{enumerable:!0,get:function(){return n.convertToCustomFormat}}),Object.defineProperty(t,"PL",{enumerable:!0,get:function(){return n.convertFromCustomFormat}});var o=r(6658)},4455:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConvertersComposer=void 0;var n=r(1561),o=function(e){return null!==e&&"object"==typeof e},a=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._converters=e}return e.prototype.convertToCustomFormat=function(e,t,r){var n;if(void 0===t&&(t=new Set),void 0===r&&(r=!1),o(e)){if(t.has(e))throw new TypeError("Converting circular structure to JSON");t.add(e)}if(Array.isArray(e))return this._convertArray(e,t);var a=null===(n=this._findConverterToCustomFormat(e))||void 0===n?void 0:n.convertToCustomFormat(e,r);return o(e)?this._convertObject(a,e,t):a},e.prototype.convertFromCustomFormat=function(e){var t,r=this,a=e;return Array.isArray(e)?a=e.map((function(e){return r.convertFromCustomFormat(e)})):o(e)&&(a=(0,n.mapValues)(e,this.convertFromCustomFormat.bind(this))),null===(t=this._findConverterFromCustomFormat(a))||void 0===t?void 0:t.convertFromCustomFormat(a)},e.prototype._convertObject=function(e,t,r){var o,a=this;return o="function"==typeof e.toJSON?(0,n.mapValues)(e.toJSON(),(function(e){return a.convertToCustomFormat(e,r)})):(0,n.mapValues)(e,(function(e){return a.convertToCustomFormat(e,r)})),r.delete(t),o},e.prototype._convertArray=function(e,t){var r=this,n=e.map((function(e){return r.convertToCustomFormat(e,t,!0)}));return t.delete(e),n},e.prototype._findConverterFromCustomFormat=function(e){return this._converters.find((function(t){return t.canConvertFromCustomFormat(e)}))},e.prototype._findConverterToCustomFormat=function(e){return this._converters.find((function(t){return t.canConvertToCustomFormat(e)}))},e}();t.ConvertersComposer=a},5362:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DateConverter=void 0;var r=function(){function e(){}return e.prototype.canConvertToCustomFormat=function(e){return e instanceof Date},e.prototype.convertToCustomFormat=function(e){return{$date:e.toISOString()}},e.prototype.canConvertFromCustomFormat=function(e){return this._isObjectWith$Date(e)&&"string"==typeof e.$date&&(t=e.$date,!Number.isNaN(Date.parse(t)));var t},e.prototype.convertFromCustomFormat=function(e){return new Date(e.$date)},e.prototype._isObjectWith$Date=function(e){return!!e&&"object"==typeof e&&"$date"in e},e}();t.DateConverter=r},5574:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultConverter=void 0;var r=function(){function e(){}return e.prototype.canConvertToCustomFormat=function(){return!0},e.prototype.convertToCustomFormat=function(e,t){return t&&void 0===e?null:e},e.prototype.canConvertFromCustomFormat=function(){return!0},e.prototype.convertFromCustomFormat=function(e){return e},e}();t.DefaultConverter=r},4725:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertFromCustomFormat=t.convertToCustomFormat=void 0;var n=r(4455),o=r(5362),a=r(5574),i=new n.ConvertersComposer(new o.DateConverter,new a.DefaultConverter);t.convertToCustomFormat=function(e){return i.convertToCustomFormat(e)};t.convertFromCustomFormat=function(e){return i.convertFromCustomFormat(e)}},1561:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapValues=void 0,t.mapValues=function(e,t){var r={};return Object.keys(e).forEach((function(n){var o=t(e[n]);void 0!==o&&(r[n]=o)})),r}},6658:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBackendPackageNameFromImportName=t.generateBackendPackageWebMethodUrl=t.generatePackageWebMethodUrl=t.exceptionToWebMethodPayload=t.resultToWebMethodPayload=void 0;var n=r(4725);t.resultToWebMethodPayload=function(e,t){var r=t?JSON.parse(JSON.stringify(e,t)):(0,n.convertToCustomFormat)(e);return void 0===r?{}:{result:r}};t.exceptionToWebMethodPayload=function(e,t,r){return void 0===t&&(t=function(e){return e}),void 0===r&&(r=function(e){return""}),{result:e instanceof Error?{message:t(e.message),name:e.name,stack:r(e.stack),code:e.code,_elementoryError:!0}:e,exception:!0}};var o=function(e,t){return"/_webMethods/packages/".concat(encodeURIComponent(e),"/").concat(t,".ajax")};t.generatePackageWebMethodUrl=o;t.generateBackendPackageWebMethodUrl=function(e,t){return o("".concat(e,"-backend"),t)};t.getBackendPackageNameFromImportName=function(e){return"".concat(e,"-backend")}},4479:(e,t,r)=>{"use strict";const n=r(7030),o=r(1290),a="currentUser";e.exports.X=e=>n(e)&&e[o]===a},8031:(e,t,r)=>{"use strict";const n=r(7030),{DATA_BINDING:o}=r(5965),a=r(1290),i=o;e.exports.X=e=>n(e)&&e[a]===i},1290:e=>{"use strict";e.exports="@resolver"},3878:(e,t,r)=>{"use strict";const n=r(7030),o=r(1290),a="userInput";e.exports.X=e=>n(e)&&e[o]===a},8582:e=>{"use strict";e.exports=(e,t)=>t.reduce(((e,t)=>e.chain((e=>t.map((t=>Array.isArray(t)?e.concat([t]):e.concat(t)))))),e.of([]))},7538:e=>{e.exports.l={COMPONENT:"COMPONENT_SCOPE",GLOBAL:"GLOBAL_SCOPE"}},3368:(e,t,r)=>{"use strict";var n;r.d(t,{G:()=>_}),function(e){e[e.TO_JSON=0]="TO_JSON",e[e.FROM_JSON=1]="FROM_JSON"}(n||(n={}));var o,a=r(2681);function i(e,t,r){return void 0===t&&(t={}),function(n,o){return void 0===n&&(n={}),"string"==typeof n?n:i(e,n);function i(e,t){var r={};return[null,void 0].includes(t)?t:(Object.entries(t).forEach((function(t){var n,o,i,l,d=t[0],u=t[1],p=e[d],f=(0,a.L$)(p),h=f.schemaName,m="Map"===f.schemaType;l=(null!==(i=null===(o=null===(n=c(h))||void 0===n?void 0:n.checkRepetable)||void 0===o?void 0:o.call(n,u))&&void 0!==i?i:Array.isArray(u))?u.map((function(e){return s(e,h)})):m?function(e,t){return Object.entries(e).reduce((function(e,r){var n=r[0],o=r[1];return e[n]=s(o,t),e}),{})}(u,h):s(u,h),r[d]=l})),r)}function s(e,r){if(!r)return e;var n=t[r];if(c(r))return c(r).transform(e);if(n)return i(n,e);throw new Error("".concat(r," is neither schema nor serializable type"))}function c(e){var t;return null===(t=r[e])||void 0===t?void 0:t[o]}}}var s,c,l,d,u=((o={types:["google.protobuf.Timestamp"]})[n.TO_JSON]={transform:function(e){return null==e?void 0:e.toISOString()}},o[n.FROM_JSON]={transform:function(e){return e?new Date(e):void 0}},o),p=((s={types:["google.protobuf.FieldMask"]})[n.TO_JSON]={transform:function(e){return e.join(",")},checkRepetable:function(e){return e.some((function(e){return Array.isArray(e)}))}},s[n.FROM_JSON]={transform:function(e){return"object"==typeof e?e.paths:e.split(",")}},s),f=((c={types:["google.protobuf.BytesValue","BYTES"]})[n.TO_JSON]={transform:function(e){var t=e.reduce((function(e,t){return e+String.fromCharCode(t)}),"");return btoa(t)}},c[n.FROM_JSON]={transform:function(e){return Uint8Array.from(atob(e),(function(e){return e.charCodeAt(0)}))}},c),h=((l={types:["google.protobuf.Duration"]})[n.TO_JSON]={transform:function(e){var t=e.seconds,r=void 0===t?"0":t,n=e.nanos,o=void 0===n?0:n,a="";return 0!==o&&(a=".".concat(o.toString().padStart(9,"0"))),"".concat(r).concat(a,"s")}},l[n.FROM_JSON]={transform:function(e){var t=e.substring(0,e.length-1).split(".");return{seconds:t[0],nanos:m(t[1])}}},l);function m(e){var t=0;if(void 0!==e){var r=3-e.length/3;t=parseInt(e,10)*Math.pow(1e3,r)}return t}var g=((d={types:["FLOAT","DOUBLE","google.protobuf.FloatValue","google.protobuf.DoubleValue"]})[n.TO_JSON]={transform:function(e){return isFinite(e)?e:e.toString()}},d[n.FROM_JSON]={transform:function(e){return"NaN"===e?NaN:"Infinity"===e?1/0:"-Infinity"===e?-1/0:e}},d),y=function(){return y=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},y.apply(this,arguments)};var v=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}([],[u,p,f,h,g],!0).reduce((function(e,t){var r=t.types.reduce((function(e,r){var n;return y(y({},e),((n={})[r]=t,n))}),{});return y(y({},e),r)}),{});function _(e,t){void 0===t&&(t={});var r=i(e,t,v);return{fromJSON:function(e){var t=function(e){try{return JSON.parse(e)}catch(e){}}(e)||e;return r(t,n.FROM_JSON)},toJSON:function(e){return r(e,n.TO_JSON)}}}},2681:(e,t,r)=>{"use strict";function n(e){void 0===e&&(e="");var t=o(e),r=t[0],n=t[1];return n?{schemaName:n,schemaType:r}:{schemaName:r}}r.d(t,{L$:()=>n,Kk:()=>l,kI:()=>p});var o=function(e){return e.split("#")};var a=/{(.*)}/,i=new RegExp("\\.(".concat(["wix.com","editorx.com"].join("|"),")$")),s=new RegExp("\\.(".concat(["42.wixprod.net","uw2-edt-1.wixprod.net"].join("|"),")$")),c=new RegExp(".*\\.".concat("dev.wix-code.com","$"));function l(e){var t,r,n=function(e,t){var r=t[e]||t._;if(!r&&function(e){return!!e.match(/\._base_domain_$/)}(e))return t[d];return r}(function(e){return e.replace("create.editorx.com","editor.editorx.com")}(e.host).replace(i,"._base_domain_").replace(s,"._api_base_domain_").replace(c,"*.dev.wix-code.com"),e.domainToMappings);return function(e,t){var r=null==t?void 0:t.find((function(t){return e.startsWith(t.destPath)}));if(!r)return e;return r.srcPath+e.slice(r.destPath.length)}((t=e.protoPath,r=e.data||{},t.split("/").map((function(e){return function(e,t){var r=e.match(a)||[],n=r[1];if(n){var o=e.replace(r[0],"");return function(e,t,r,n){for(var o=e,a=0,i=t.split(".");a<i.length;a++){var s=i[a];if(!o)return r;o=o[s]}return"".concat(o).concat(n)}(t,n,e,o)}return e}(e,r)})).join("/")),n)}var d="www._base_domain_";function u(e,t){void 0===t&&(t="");var r={};return Object.entries(e).forEach((function(e){var n=e[0],o=e[1],a=null!==o&&"object"==typeof o&&!Array.isArray(o),i=function(e,t){return"".concat(e).concat(e?".":"").concat(t)}(t,n);if(a){var s=u(o,i);Object.assign(r,s)}else r[i]=o})),r}function p(e){var t=u(e);return Object.entries(t).reduce((function(e,t){var r=t[0],n=t[1];return(Array.isArray(n)?n:[n]).forEach((function(t){null!=t&&e.append(r,t)})),e}),new URLSearchParams)}},477:(e,t,r)=>{const n=r(4169),o=r(3297),a=r(6939);e.exports={union:n,Result:o,Maybe:a}},6939:e=>{"use strict";const t=e=>({map:r=>t(r(e)),chain:t=>t(e),fold:(t,r)=>r(e),getOrElse:()=>e,orElse:()=>t(e),filter:n=>n(e)?t(e):r()}),r=()=>({map:()=>r(),chain:()=>r(),fold:e=>e(),getOrElse:e=>e,orElse:e=>e(),filter:()=>r()}),n={Just:t,Nothing:r,fromNullable:e=>null!=e?t(e):r(),of:e=>t(e)};e.exports=n},3297:e=>{"use strict";const t=e=>({map:r=>t(r(e)),chain:t=>t(e),fold:(t,r)=>r(e),getOrElse:()=>e,merge:()=>e}),r=e=>({map:()=>r(e),chain:()=>r(e),fold:t=>t(e),getOrElse:e=>e,merge:()=>e}),n={Ok:t,Error:r,try:e=>{try{return t(e())}catch(e){return r(e)}},fromNullable:(e,n)=>null!=e?t(e):r(n),fromMaybe:(e,n)=>e.fold((()=>r(n)),(e=>t(e))),of:e=>t(e)};e.exports=n},4169:e=>{const t=Symbol.for("union-type-any-symbol"),r=e=>r=>{const n=Object.keys(r);for(const t of n)if(t===e.name)return r[t](e.payload);if(r[t])return r[t]();throw new Error(`Variant "${e.name}" not covered in pattern with keys [${n}].\nThis could mean you did not include all variants in your Union's matchWith function.`)},n=(e,t,n={})=>Object.keys(t).reduce(((o,a)=>(o[a]=((e,t,n,o)=>{const a=Symbol(`[${e}:${t}]`),i=(...e)=>{const i=n(...e),s={matchWith:r({name:t,payload:i}),toString:()=>t,[a]:!0};return Object.keys(o).forEach((e=>{s[e]=o[e](s)})),s};return i.hasInstance=e=>e&&!0===e[a],i})(e,a,t[a],n),o)),{});n.any=t,e.exports=n},5635:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3121:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultMaxPageSize=void 0;const n=r(3810);t.DefaultMaxPageSize={[n.PagingMode.Offset]:1e3,[n.PagingMode.Cursor]:100}},2295:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AllowedFilterOperator=t.FieldType=void 0,function(e){e.number="number",e.text="text",e.image="image",e.boolean="boolean",e.document="document",e.url="url",e.richText="richtext",e.date="date",e.dateTime="datetime",e.video="video",e.reference="reference",e.multiReference="multi-reference",e.pageLink="pagelink",e.object="object",e.mediaGallery="media-gallery",e.address="address",e.stringArray="array<string>",e.color="color",e.audio="audio",e.time="time",e.array="array",e.richContent="rich-content",e.language="language",e.documentArray="array<document>",e.any="any",e.legacyBook="bookType",e.legacyExternalUrl="externalUrl",e.legacyBrokenRef="broken-reference",e.legacyExternalVideo="externalVideo"}(t.FieldType||(t.FieldType={})),function(e){e.eq="eq",e.ne="ne",e.lt="lt",e.lte="lte",e.gt="gt",e.gte="gte",e.hasSome="hasSome",e.hasAll="hasAll",e.contains="contains",e.startsWith="startsWith",e.endsWith="endsWith",e.urlized="urlized",e.exists="exists"}(t.AllowedFilterOperator||(t.AllowedFilterOperator={}))},2722:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Operator=void 0,function(e){e.and="$and",e.or="$or",e.not="$not",e.eq="$eq",e.ne="$ne",e.lt="$lt",e.lte="$lte",e.gt="$gt",e.gte="$gte",e.hasSome="$hasSome",e.hasAll="$hasAll",e.contains="$contains",e.startsWith="$startsWith",e.endsWith="$endsWith",e.urlized="$urlized"}(t.Operator||(t.Operator={}))},4361:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(9166),t),o(r(2722),t),o(r(2295),t),o(r(3530),t),o(r(3810),t),o(r(47),t),o(r(3121),t),o(r(5808),t),o(r(5635),t)},5808:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SortDirection=void 0,function(e){e.ASCENDING="ascending",e.DESCENDING="descending"}(t.SortDirection||(t.SortDirection={}))},9166:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Direction=void 0,function(e){e.asc="asc",e.desc="desc"}(t.Direction||(t.Direction={}))},3810:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PagingMode=void 0,function(e){e.Offset="OFFSET",e.Cursor="CURSOR"}(t.PagingMode||(t.PagingMode={}))},47:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PAGE_LINK_PLUGIN_ID=t.SHARED_PLUGIN_ID=t.MULTILINGUAL_PLUGIN_ID=t.UrlizedFormat=t.URLIZED_PLUGIN_ID=t.SINGLES_PLUGIN_ID=t.GRID_APPLESS_PLUGIN_ID=t.PublishingStatus=t.DRAFT_DATE_FIELD_KEY=t.PUBLISH_DATE_FIELD_KEY=t.PUBLISH_STATUS_FIELD_KEY=t.PUBLISHING_PLUGIN_ID=void 0,t.PUBLISHING_PLUGIN_ID="publishing",t.PUBLISH_STATUS_FIELD_KEY="_publishStatus",t.PUBLISH_DATE_FIELD_KEY="_publishDate",t.DRAFT_DATE_FIELD_KEY="_draftDate",function(e){e.DRAFT="DRAFT",e.PUBLISHED="PUBLISHED"}(t.PublishingStatus||(t.PublishingStatus={})),t.GRID_APPLESS_PLUGIN_ID="gridAppless",t.SINGLES_PLUGIN_ID="singleItem",t.URLIZED_PLUGIN_ID="urlized",function(e){e.PLAIN="plain",e.ORIGINAL="original"}(t.UrlizedFormat||(t.UrlizedFormat={})),t.MULTILINGUAL_PLUGIN_ID="multilingual",t.SHARED_PLUGIN_ID="shared",t.PAGE_LINK_PLUGIN_ID="persistentPageLink"},3530:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=t.PermissionRole=t.CollectionOperation=t.DataOperation=void 0,function(e){e.aggregate="aggregate",e.bulkInsert="bulkInsert",e.bulkRemove="bulkRemove",e.bulkSave="bulkSave",e.bulkUpdate="bulkUpdate",e.count="count",e.distinct="distinct",e.find="find",e.get="get",e.insert="insert",e.insertReference="insertReference",e.isReferenced="isReferenced",e.queryReferenced="queryReferenced",e.remove="remove",e.removeReference="removeReference",e.replaceReferences="replaceReferences",e.save="save",e.truncate="truncate",e.update="update"}(t.DataOperation||(t.DataOperation={})),function(e){e.UPDATE="update",e.REMOVE="remove"}(t.CollectionOperation||(t.CollectionOperation={})),function(e){e.anyone="anyone",e.siteMember="siteMember",e.siteMemberAuthor="siteMemberAuthor",e.admin="admin"}(t.PermissionRole||(t.PermissionRole={})),function(e){e.driver="driver",e.docstore="docstore",e.app="app",e.external="external",e.dynamicApplication="dynamicApplication",e.staticAppSchema="staticAppSchema"}(t.Storage||(t.Storage={}))},5675:e=>{var t=Object.prototype.toString;e.exports=function(e){var r=typeof e;return"undefined"===r?"undefined":null===e?"null":!0===e||!1===e||e instanceof Boolean?"boolean":"string"===r||e instanceof String?"string":"number"===r||e instanceof Number?"number":"function"===r||e instanceof Function?void 0!==e.constructor.name&&"Generator"===e.constructor.name.slice(0,9)?"generatorfunction":"function":void 0!==Array.isArray&&Array.isArray(e)?"array":e instanceof RegExp?"regexp":e instanceof Date?"date":"[object RegExp]"===(r=t.call(e))?"regexp":"[object Date]"===r?"date":"[object Arguments]"===r?"arguments":"[object Error]"===r?"error":"[object Promise]"===r?"promise":function(e){return e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}(e)?"buffer":"[object Set]"===r?"set":"[object WeakSet]"===r?"weakset":"[object Map]"===r?"map":"[object WeakMap]"===r?"weakmap":"[object Symbol]"===r?"symbol":"[object Map Iterator]"===r?"mapiterator":"[object Set Iterator]"===r?"setiterator":"[object String Iterator]"===r?"stringiterator":"[object Array Iterator]"===r?"arrayiterator":"[object Int8Array]"===r?"int8array":"[object Uint8Array]"===r?"uint8array":"[object Uint8ClampedArray]"===r?"uint8clampedarray":"[object Int16Array]"===r?"int16array":"[object Uint16Array]"===r?"uint16array":"[object Int32Array]"===r?"int32array":"[object Uint32Array]"===r?"uint32array":"[object Float32Array]"===r?"float32array":"[object Float64Array]"===r?"float64array":"object"}},3741:()=>{if("function"!=typeof self.queueMicrotask&&(self.queueMicrotask=function(e){Promise.resolve().then(e).catch((e=>setTimeout((()=>{throw e}))))}),"function"!=typeof Array.prototype.at){const e=Reflect.getPrototypeOf(Int8Array);for(const t of[Array,String,e])Object.defineProperty(t.prototype,"at",{value:function(e){if((e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this[e]},writable:!0,enumerable:!1,configurable:!0})}},5554:e=>{"use strict";var t="%[a-f0-9]{2}",r=new RegExp("("+t+")|([^%]+?)","gi"),n=new RegExp("("+t+")+","gi");function o(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],o(r),o(n))}function a(e){try{return decodeURIComponent(e)}catch(a){for(var t=e.match(r)||[],n=1;n<t.length;n++)t=(e=o(t,n).join("")).match(r)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},r=n.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(e){var o=a(r[0]);o!==r[0]&&(t[r[0]]=o)}r=n.exec(e)}t["%C2"]="\ufffd";for(var i=Object.keys(t),s=0;s<i.length;s++){var c=i[s];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},857:(e,t,r)=>{var n=r(7772).Symbol;e.exports=n},3366:(e,t,r)=>{var n=r(857),o=r(2107),a=r(7157),i=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?o(e):a(e)}},1242:(e,t,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},7353:(e,t,r)=>{var n=r(241)(Object.getPrototypeOf,Object);e.exports=n},2107:(e,t,r)=>{var n=r(857),o=Object.prototype,a=o.hasOwnProperty,i=o.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=a.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(e){}var o=i.call(e);return n&&(t?e[s]=r:delete e[s]),o}},7157:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},241:e=>{e.exports=function(e,t){return function(r){return e(t(r))}}},7772:(e,t,r)=>{var n=r(1242),o="object"==typeof self&&self&&self.Object===Object&&self,a=n||o||Function("return this")();e.exports=a},5125:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},7030:(e,t,r)=>{var n=r(3366),o=r(7353),a=r(5125),i=Function.prototype,s=Object.prototype,c=i.toString,l=s.hasOwnProperty,d=c.call(Object);e.exports=function(e){if(!a(e)||"[object Object]"!=n(e))return!1;var t=o(e);if(null===t)return!0;var r=l.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&c.call(r)==d}},7320:e=>{"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,a){for(var i,s,c=o(e),l=1;l<arguments.length;l++){for(var d in i=Object(arguments[l]))r.call(i,d)&&(c[d]=i[d]);if(t){s=t(i);for(var u=0;u<s.length;u++)n.call(i,s[u])&&(c[s[u]]=i[s[u]])}}return c}},4126:(e,t,r)=>{"use strict";var n=r(2938),o=r(7320),a=r(5554);function i(e,t){return t.encode?t.strict?n(e):encodeURIComponent(e):e}function s(e){return Array.isArray(e)?e.sort():"object"==typeof e?s(Object.keys(e)).sort((function(e,t){return Number(e)-Number(t)})).map((function(t){return e[t]})):e}function c(e){var t=e.indexOf("?");return-1===t?"":e.slice(t+1)}function l(e,t){var r=function(e){var t;switch(e.arrayFormat){case"index":return function(e,r,n){/\[(\d*)\]$/.exec(e),e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=r):n[e]=r};case"bracket":return function(e,r,n){/(\[\])$/.exec(e),e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],r):n[e]=[r]:n[e]=r};default:return function(e,t,r){void 0!==r[e]?r[e]=[].concat(r[e],t):r[e]=t}}}(o({arrayFormat:"none"},t)),n=Object.create(null);return"string"!=typeof e?n:e.trim().replace(/^[?#&]/,"")?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),o=t.shift(),i=t.length>0?t.join("="):void 0;void 0===i?null:a(i),r(a(o),i,n)})),Object.keys(n).sort().reduce((function(e,t){var r=n[t];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?e[t]=s(r):e[t]=r,e}),Object.create(null))):n}t.Pz=function(e,t){!1===(t=o({encode:!0,strict:!0,arrayFormat:"none"},t)).sort&&(t.sort=function(){});var r=function(e){switch(e.arrayFormat){case"index":return function(t,r,n){return null===r?[i(t,e),"[",n,"]"].join(""):[i(t,e),"[",i(n,e),"]=",i(r,e)].join("")};case"bracket":return function(t,r){return null===r?i(t,e):[i(t,e),"[]=",i(r,e)].join("")};default:return function(t,r){return null===r?i(t,e):[i(t,e),"=",i(r,e)].join("")}}}(t);return e?Object.keys(e).sort(t.sort).map((function(n){var o=e[n];if(void 0===o)return"";if(null===o)return i(n,t);if(Array.isArray(o)){var a=[];return o.slice().forEach((function(e){void 0!==e&&a.push(r(n,e,a.length))})),a.join("&")}return i(n,t)+"="+i(o,t)})).filter((function(e){return e.length>0})).join("&"):""}},2938:e=>{"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}},7375:(e,t)=>{"use strict";var r=Object.prototype.hasOwnProperty;function n(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function o(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var n,a,i=[];for(a in"string"!=typeof t&&(t="?"),e)if(r.call(e,a)){if((n=e[a])||null!=n&&!isNaN(n)||(n=""),a=o(a),n=o(n),null===a||null===n)continue;i.push(a+"="+n)}return i.length?t+i.join("&"):""},t.parse=function(e){for(var t,r=/([^=?#&]+)=?([^&]*)/g,o={};t=r.exec(e);){var a=n(t[1]),i=n(t[2]);null===a||null===i||a in o||(o[a]=i)}return o}},4438:e=>{"use strict";var t=function(e){return null!=e&&"function"==typeof e.run&&"boolean"==typeof e.isQueued&&(!e.resultActionCreator||"function"==typeof e.resultActionCreator)};e.exports={isEffect:t,isImmediateEffect:function(e){return t(e)&&!e.isQueued},isQueuedEffect:function(e){return t(e)&&e.isQueued}}},6286:(e,t,r)=>{"use strict";var n=r(6356);e.exports={createMiddleware:n}},6356:(e,t,r)=>{"use strict";var n=r(4520).isPromise,o=r(8620),a=o.sequence,i=o.try_,s=r(5676),c=r(4438),l=c.isEffect,d=c.isImmediateEffect,u=c.isQueuedEffect,p=function(e){return function(t){return e.push(t),function(){var r=e.indexOf(t);r>=0&&e.splice(r,1)}}};e.exports=function(){var e=[],t=[],r=Promise.resolve();return{middleware:function(o){return function(c){return function(p){var f=function(e){var t=i((function(){return e.run()}));return t.fold((function(r){var n=e.resultActionCreator?o.dispatch(e.resultActionCreator(!0,r)):Promise.resolve();return[t,n]}),(function(r){if(n(r)){var a=r.then((function(t){return e.resultActionCreator?o.dispatch(e.resultActionCreator(!1,t)):Promise.resolve()}),(function(t){throw e.resultActionCreator&&o.dispatch(e.resultActionCreator(!0,t)).catch((function(){})),t}));return[t,a]}var i=e.resultActionCreator?o.dispatch(e.resultActionCreator(!1,r)):Promise.resolve();return[t,i]}))},h=function(){var e=void 0,n=new Promise((function(t){return e=t})),o=new Promise((function(e,o){var a=r=r.then((function(){return n})).then(function(e,t){return function(r){if(r.length>0){var n=r.filter(u).map(f);return Promise.all(n.map((function(e){return e[1]}))).then((function(){return e()}),t),Promise.all(n.map((function(e){return e[0]})).map((function(e){return e.fold((function(e){return Promise.reject(e)}),(function(e){return e}))}))).catch(t)}return e(),Promise.resolve()}}(e,o),o).catch(o).then((function(){a===r&&t.slice().forEach((function(e){return e()}))}))}));return{promise:o,trigger:e}},m=function(e){var t=h(),r=t.promise,n=t.trigger;return i((function(){return function(e){var t=e.filter(d).map(f);return t.map((function(e){return e[0]})).map((function(e){return e.fold((function(e){throw e}),(function(e){return e}))})),t.map((function(e){return e[1]})).map((function(e){return e.catch((function(){}))})),e.filter(u)}(e)})).fold((function(e){throw n([]),e}),(function(e){return n(e),r}))},g=o.getState(),y=c(p),v=o.getState();if(g!==v){var _=s(g,v);return a(e.slice().map((function(e){return i((function(){return e(_)||[]}))}))).fold((function(e){throw e}),(function(e){return m(e.filter(l))}))}return Promise.resolve(y)}}},subscribe:p(e),onIdle:p(t)}}},8620:e=>{"use strict";var t=function(){},r=function(e,r){return e.fold(r.Error||t,r.Ok||t)},n=function(e){return{map:function(e){return this},fold:function(t,r){return t(e)},chain:function(e){return this},match:function(e){return r(this,e)},value:e}},o=function e(t){return{map:function(r){return e(r(t))},fold:function(e,r){return r(t)},chain:function(e){return e(t)},match:function(e){return r(this,e)},value:t}},a={Left:n,Right:o};e.exports={Either:a,sequence:function(e){return e.reduce((function(e,t){return e.chain((function(e){return t.map((function(t){return e.concat(t)}))}))}),o([]))},try_:function(e){try{return o(e())}catch(e){return n(e)}}}},4520:e=>{"use strict";e.exports.isPromise=function(e){return null!=e&&"function"==typeof e.then}},5676:e=>{"use strict";e.exports=function(e,t){var r={from:e,to:t,hasChanged:function(r){return r(e)!==r(t)},hasChangedToMatch:function(e,n){return r.hasChanged(e)&&n(e(t))},hasChangedToTrue:function(e){return r.hasChangedToMatch(e,(function(e){return!0===e}))},hasChangedToFalse:function(e){return r.hasChangedToMatch(e,(function(e){return!1===e}))},hasChangedToNull:function(e){return r.hasChangedToMatch(e,(function(e){return null===e}))},hasChangedToNotNull:function(e){return r.hasChangedToMatch(e,(function(e){return null!==e}))}};return r}},7245:e=>{"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},5174:e=>{var t=Object.prototype.hasOwnProperty;function r(e){return"[Throws: "+(e?e.message:"?")+"]"}function n(e){var n=[];return function e(o){if(null===o||"object"!=typeof o)return o;if(-1!==n.indexOf(o))return"[Circular]";if(n.push(o),"function"==typeof o.toJSON)try{var a=e(o.toJSON());return n.pop(),a}catch(e){return r(e)}if(Array.isArray(o)){var i=o.map(e);return n.pop(),i}var s=Object.keys(o).reduce((function(n,a){return n[a]=e(function(e,n){if(t.call(e,n))try{return e[n]}catch(e){return r(e)}return e[n]}(o,a)),n}),{});return n.pop(),s}(e)}e.exports=function(e,t,r){return JSON.stringify(n(e),t,r)},e.exports.ensureProperties=n},4846:(e,t,r)=>{"use strict";var n=r(7245),o=r(7375),a=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,i=/[\n\r\t]/g,s=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,d=/^[a-zA-Z]:/;function u(e){return(e||"").toString().replace(a,"")}var p=[["#","hash"],["?","query"],function(e,t){return m(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],f={hash:1,query:1};function h(e){var t,n=("undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{}).location||{},o={},a=typeof(e=e||n);if("blob:"===e.protocol)o=new y(unescape(e.pathname),{});else if("string"===a)for(t in o=new y(e,{}),f)delete o[t];else if("object"===a){for(t in e)t in f||(o[t]=e[t]);void 0===o.slashes&&(o.slashes=s.test(e.href))}return o}function m(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function g(e,t){e=(e=u(e)).replace(i,""),t=t||{};var r,n=l.exec(e),o=n[1]?n[1].toLowerCase():"",a=!!n[2],s=!!n[3],c=0;return a?s?(r=n[2]+n[3]+n[4],c=n[2].length+n[3].length):(r=n[2]+n[4],c=n[2].length):s?(r=n[3]+n[4],c=n[3].length):r=n[4],"file:"===o?c>=2&&(r=r.slice(2)):m(o)?r=n[4]:o?a&&(r=r.slice(2)):c>=2&&m(t.protocol)&&(r=n[4]),{protocol:o,slashes:a||m(o),slashesCount:c,rest:r}}function y(e,t,r){if(e=(e=u(e)).replace(i,""),!(this instanceof y))return new y(e,t,r);var a,s,c,l,f,v,_=p.slice(),E=typeof t,I=this,w=0;for("object"!==E&&"string"!==E&&(r=t,t=null),r&&"function"!=typeof r&&(r=o.parse),a=!(s=g(e||"",t=h(t))).protocol&&!s.slashes,I.slashes=s.slashes||a&&t.slashes,I.protocol=s.protocol||t.protocol||"",e=s.rest,("file:"===s.protocol&&(2!==s.slashesCount||d.test(e))||!s.slashes&&(s.protocol||s.slashesCount<2||!m(I.protocol)))&&(_[3]=[/(.*)/,"pathname"]);w<_.length;w++)"function"!=typeof(l=_[w])?(c=l[0],v=l[1],c!=c?I[v]=e:"string"==typeof c?~(f="@"===c?e.lastIndexOf(c):e.indexOf(c))&&("number"==typeof l[2]?(I[v]=e.slice(0,f),e=e.slice(f+l[2])):(I[v]=e.slice(f),e=e.slice(0,f))):(f=c.exec(e))&&(I[v]=f[1],e=e.slice(0,f.index)),I[v]=I[v]||a&&l[3]&&t[v]||"",l[4]&&(I[v]=I[v].toLowerCase())):e=l(e,I);r&&(I.query=r(I.query)),a&&t.slashes&&"/"!==I.pathname.charAt(0)&&(""!==I.pathname||""!==t.pathname)&&(I.pathname=function(e,t){if(""===e)return t;for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=r.length,o=r[n-1],a=!1,i=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),i++):i&&(0===n&&(a=!0),r.splice(n,1),i--);return a&&r.unshift(""),"."!==o&&".."!==o||r.push(""),r.join("/")}(I.pathname,t.pathname)),"/"!==I.pathname.charAt(0)&&m(I.protocol)&&(I.pathname="/"+I.pathname),n(I.port,I.protocol)||(I.host=I.hostname,I.port=""),I.username=I.password="",I.auth&&(~(f=I.auth.indexOf(":"))?(I.username=I.auth.slice(0,f),I.username=encodeURIComponent(decodeURIComponent(I.username)),I.password=I.auth.slice(f+1),I.password=encodeURIComponent(decodeURIComponent(I.password))):I.username=encodeURIComponent(decodeURIComponent(I.auth)),I.auth=I.password?I.username+":"+I.password:I.username),I.origin="file:"!==I.protocol&&m(I.protocol)&&I.host?I.protocol+"//"+I.host:"null",I.href=I.toString()}y.prototype={set:function(e,t,r){var a=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(r||o.parse)(t)),a[e]=t;break;case"port":a[e]=t,n(t,a.protocol)?t&&(a.host=a.hostname+":"+t):(a.host=a.hostname,a[e]="");break;case"hostname":a[e]=t,a.port&&(t+=":"+a.port),a.host=t;break;case"host":a[e]=t,c.test(t)?(t=t.split(":"),a.port=t.pop(),a.hostname=t.join(":")):(a.hostname=t,a.port="");break;case"protocol":a.protocol=t.toLowerCase(),a.slashes=!r;break;case"pathname":case"hash":if(t){var i="pathname"===e?"/":"#";a[e]=t.charAt(0)!==i?i+t:t}else a[e]=t;break;case"username":case"password":a[e]=encodeURIComponent(t);break;case"auth":var s=t.indexOf(":");~s?(a.username=t.slice(0,s),a.username=encodeURIComponent(decodeURIComponent(a.username)),a.password=t.slice(s+1),a.password=encodeURIComponent(decodeURIComponent(a.password))):a.username=encodeURIComponent(decodeURIComponent(t))}for(var l=0;l<p.length;l++){var d=p[l];d[4]&&(a[d[1]]=a[d[1]].toLowerCase())}return a.auth=a.password?a.username+":"+a.password:a.username,a.origin="file:"!==a.protocol&&m(a.protocol)&&a.host?a.protocol+"//"+a.host:"null",a.href=a.toString(),a},toString:function(e){e&&"function"==typeof e||(e=o.stringify);var t,r=this,n=r.host,a=r.protocol;a&&":"!==a.charAt(a.length-1)&&(a+=":");var i=a+(r.protocol&&r.slashes||m(r.protocol)?"//":"");return r.username?(i+=r.username,r.password&&(i+=":"+r.password),i+="@"):r.password?(i+=":"+r.password,i+="@"):"file:"!==r.protocol&&m(r.protocol)&&!n&&"/"!==r.pathname&&(i+="@"),(":"===n[n.length-1]||c.test(r.hostname)&&!r.port)&&(n+=":"),i+=n+r.pathname,(t="object"==typeof r.query?e(r.query):r.query)&&(i+="?"!==t.charAt(0)?"?"+t:t),r.hash&&(i+=r.hash),i}},y.extractProtocol=g,y.location=h,y.trimLeft=u,y.qs=o,e.exports=y},8022:(e,t,r)=>{var n=r(4481),o=r(6426),a=o;a.v1=n,a.v4=o,e.exports=a},8725:e=>{for(var t=[],r=0;r<256;++r)t[r]=(r+256).toString(16).substr(1);e.exports=function(e,r){var n=r||0,o=t;return[o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]]].join("")}},9157:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}},4481:(e,t,r)=>{var n,o,a=r(9157),i=r(8725),s=0,c=0;e.exports=function(e,t,r){var l=t&&r||0,d=t||[],u=(e=e||{}).node||n,p=void 0!==e.clockseq?e.clockseq:o;if(null==u||null==p){var f=a();null==u&&(u=n=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==p&&(p=o=16383&(f[6]<<8|f[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:c+1,g=h-s+(m-c)/1e4;if(g<0&&void 0===e.clockseq&&(p=p+1&16383),(g<0||h>s)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=h,c=m,o=p;var y=(1e4*(268435455&(h+=122192928e5))+m)%4294967296;d[l++]=y>>>24&255,d[l++]=y>>>16&255,d[l++]=y>>>8&255,d[l++]=255&y;var v=h/4294967296*1e4&268435455;d[l++]=v>>>8&255,d[l++]=255&v,d[l++]=v>>>24&15|16,d[l++]=v>>>16&255,d[l++]=p>>>8|128,d[l++]=255&p;for(var _=0;_<6;++_)d[l+_]=u[_];return t||i(d)}},6426:(e,t,r)=>{var n=r(9157),o=r(8725);e.exports=function(e,t,r){var a=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||n)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var s=0;s<16;++s)t[a+s]=i[s];return t||o(i)}},9479:t=>{"use strict";t.exports=e},7544:e=>{e.exports=function(e,t){return t.get?t.get.call(e):t.value},e.exports.__esModule=!0,e.exports.default=e.exports},2440:e=>{e.exports=function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}},e.exports.__esModule=!0,e.exports.default=e.exports},2132:e=>{e.exports=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7481:(e,t,r)=>{var n=r(7544),o=r(2132);e.exports=function(e,t){var r=o(e,t,"get");return n(e,r)},e.exports.__esModule=!0,e.exports.default=e.exports},4070:(e,t,r)=>{var n=r(2440),o=r(2132);e.exports=function(e,t,r){var a=o(e,t,"set");return n(e,a,r),r},e.exports.__esModule=!0,e.exports.default=e.exports},6290:(e,t,r)=>{var n=r(7739);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},8064:(e,t,r)=>{var n=r(7425).default;e.exports=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7739:(e,t,r)=>{var n=r(7425).default,o=r(8064);e.exports=function(e){var t=o(e,"string");return"symbol"===n(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},7425:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={exports:{}};return n[e].call(r.exports,r,r.exports,a),r.exports}a.m=n,a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var o=Object.create(null);a.r(o);var i={};t=t||[null,r({}),r([]),r(r)];for(var s=2&n&&e;"object"==typeof s&&!~t.indexOf(s);s=r(s))Object.getOwnPropertyNames(s).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,a.d(o,i),o},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,r)=>(a.f[r](e,t),t)),[])),a.u=e=>"formulajs.chunk.min.js",a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="https://static.parastorage.com/services/dbsm-viewer-app/ca6f6088756b64bd095b56509da7b967ae15d4c06e002c34ee409384/webworker/",(()=>{var e={143:1};a.f.i=(t,r)=>{e[t]||importScripts(a.p+a.u(t))};var t=("undefined"!=typeof self?self:this).webpackJsonp__wix_dbsm_viewer_app=("undefined"!=typeof self?self:this).webpackJsonp__wix_dbsm_viewer_app||[],r=t.push.bind(t);t.push=t=>{var[n,o,i]=t;for(var s in o)a.o(o,s)&&(a.m[s]=o[s]);for(i&&i(a);n.length;)e[n.pop()]=1;r(t)}})();var i={};return(()=>{"use strict";a.r(i),a.d(i,{createControllers:()=>cg,initAppForPage:()=>sg});var e={};a.r(e),a.d(e,{READ:()=>Xe,READ_WRITE:()=>Ye,WRITE:()=>Je});var t={};a.r(t),a.d(t,{t:()=>Tr,ROUTER_DATASET:()=>br});var r={};a.r(r),a.d(r,{DBSMViewer:()=>Do,UserErrors:()=>Ao,WixData:()=>xo});var n=a(6290),o=a.n(n),s=a(7481),c=a.n(s),l=a(4070),d=a.n(l),u=a(5965);const p={"tpa/addVariantToCart":async({wixSdk:e,currentItem:t})=>{var r;const{window:n,location:o,site:a}=e,i=await a.getPublicAPI(u.WIX_STORES),s="Mobile"===n.formFactor;if(t.managedVariant)await i.cart.addProducts([{productId:t.productId,quantity:1,options:{choices:t.choices}}]),s?await i.navigate.toCart():i.cart.showMinicart();else if(s){const e=await i.product.getRelativeProductUrl({id:t.productId});null===(r=o.to)||void 0===r||r.call(o,e)}else await i.product.openQuickView(t.productId)},"tpa/addProductToCart":async({wixSdk:e,currentItem:t})=>{var r;const{window:n,location:o,site:a}=e,i=await a.getPublicAPI(u.WIX_STORES),s="Mobile"===n.formFactor;var c;(c=t).customFields&&c.customFields.length>0||Object.keys(c.productOptions||{}).length>0?s?null===(r=o.to)||void 0===r||r.call(o,t.productPageUrl):await i.product.openQuickView(t._id):(await i.cart.addProducts([{productId:t._id,quantity:1}]),s?await i.navigate.toCart():i.cart.showMinicart())},"tpa/quicklyViewProduct":async({wixSdk:e,currentItem:t})=>{const r=await e.site.getPublicAPI(u.WIX_STORES);await r.product.openQuickView(t._id)},"tpa/purchasePricingPlan":async({wixSdk:e,currentItem:t})=>{await e["pricing-plans"].checkout.startOnlinePurchase(t._id)},"tpa/pricingPlansNavigateToCheckout":async({wixSdk:e,currentItem:t})=>{await e["pricing-plans"].customPurchaseFlow.navigateToCheckout({planId:t._id})}};a(3741);var f=a(4846),h=a.n(f);var m=a(4361);const{text:g,boolean:y,number:v,dateTime:_,date:E,richText:I,url:w,reference:S,stringArray:R}=m.FieldType,T=[g,I,y,_,E,S,v,w,R];var b=a(8022),O=a.n(b);const P=({httpClient:e})=>({reportFormEventToAutomationCreator:()=>async({detailedEventPayload:t,eventUTCTime:r})=>{const n={eventIdentifier:{eventUniqueId:O().v4(),eventType:"form/form/code",sourceUniqueId:"675bbcef-18d8-41f5-800e-131ec9e08762"},eventUTCTime:r,detailedEventPayload:t};await e.post("/_api/action-triggers-server/v1/report-event",n)}});class C extends Error{static withMessage(e){return class extends(this){constructor(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];super(e,...r)}}}static with(e){let{message:t,options:r}=e;return class extends(this){constructor(e){super(t||e instanceof String&&e,{...r,...e instanceof Object?e:{}})}}}constructor(e,t,r){void 0===r&&(r="DataBindingError"),super(e,t);const{cause:n,...o}=t||{};this.name=r,this.options=o,this.cause||(this.cause=n)}toString(){return this.cause?super.toString()+"\nCaused by "+this.cause.toString():super.toString()}}o()(C,"scopes",{USER_SCOPE:"userCodeZone",APPLICATION_SCOPE:"applicationCodeZone",SERVER_SCOPE:"wixDataCodeZone"});class N extends C{constructor(e,t){super(e,t,"AppError"),this.scope=C.scopes.APPLICATION_SCOPE}}class D extends C{constructor(e,t,r){void 0===r&&(r="UserError"),super(e,t,r),this.scope=C.scopes.USER_SCOPE}}class A extends D{constructor(e,t){const{code:r,...n}=t;super(e,n,"DatasetError"),this.code=r}}class x extends D{constructor(e,t){super(e,t,"ServerValidationError")}}o()(x,"codes",["WD_SITE_IN_TEMPLATE_MODE","WD_PERMISSION_DENIED","WD_COLLECTION_DELETED","WD_VALIDATION_FAILED"]);class F extends C{constructor(e,t){const{code:r,...n}=t;super(e,n,"ServerError"),this.scope=C.scopes.SERVER_SCOPE,this.code=r}}class L extends C{constructor(e){super("Async operation error wasn't handled",e,"UnhandledPromiseRejection")}}var M=a(9479);function U(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var k=new WeakMap;const G=new class{constructor(){U(this,k,{writable:!0,value:new Proxy({},{get(e,t){if(e[t])return e[t];throw new ReferenceError("There is no "+t+" in context. Check if the context has been already set")}})})}set(e){Object.entries(e).forEach((e=>{let[t,r]=e;c()(this,k)[t]=r}))}get(){return c()(this,k)}},j=G.get(),V=G.set.bind(G);function W(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var B=new WeakMap,q=new WeakMap;class z{constructor(e){W(this,B,{writable:!0,value:void 0}),W(this,q,{writable:!0,value:new X}),d()(this,B,e)}dispatch(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return c()(this,q).has(e)?c()(this,q).get(e).reduce(((t,n)=>[...t,j.errorReporting(n,N.with({message:e+" listener failed",options:{extra:c()(this,B)}}))(c()(this,B),...r)]),[]):void 0}subscribe(e,t){return e.constructor===Object?Object.entries(e).reduce(((e,t)=>{let[r,n]=t;return[...e,this.subscribe(r,n)]}),[]):(c()(this,q).getOrDefault(e,new J).add(t),()=>this.unsubscribe(e,t))}unsubscribe(e,t){return c()(this,q).has(e)&&c()(this,q).get(e).delete(t)}}class H{constructor(){const e={};return e.promise=new Promise(((t,r)=>{e.resolve=function(){return t(...arguments),e.promise},e.reject=function(){return r(...arguments),e.promise}})),e}}const $=(e,t)=>function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];try{const r=e(...n);return(null==r?void 0:r.catch)instanceof Function?r.catch((e=>t(e,...n))):r}catch(e){return t(e,...n)}};class Y{constructor(e){return null!=e&&e.then?e:{then:t=>t(e)}}}class X extends Map{getOrDefault(e,t){return this.has(e)?this.get(e):this.set(e,t).get(e)}find(e){const[,t]=Array.from(this).find((t=>{let[r,n]=t;return e(n,r,this)}))||[];return t}}class J extends Set{reduce(e,t){return Array.from(this).reduce(((t,r,n)=>e(t,r,n,this)),t)}}const K="unknown",Q=e=>{const t=e.split("/"),r=t[t.length-3],n=t[t.length-2];if(!/^\d+\.\d+\.\d+$/.test(n))throw new Error(`Invalid version string ${n}`);return{appName:r,version:n}},Z=e=>{try{const{appName:t,version:r}=Q(e);return`${t}@${r}`}catch(e){return K}},ee=()=>{const e=new Error;return e.stack?e.stack.toString():""},te=e=>{const t=ee().match(new RegExp(`https?://.*?${e}.*?.js`));return t?t[0]:""},re="detailsRepeaterRole",ne="detailsDatasetRole",oe="filterInputRole",ae="textRole",ie="galleryRole",se="mediaGalleryRole",ce="ratingsDisplayRole",le="dropdownOptionsRole",de="MobuiPickerOptionsRole",ue="gridRole",pe="datepickerRole",fe="radioGroupRole",he="uploadButtonRole",me="repeaterRole",ge="pageRole",ye="paginationRole",ve="addressInputRole",_e="googleMapRole",Ee="timePickerRole",Ie="progressBarRole",we="selectionTagsOptionsRole",Se="signatureInputRole",Re="richContentRole",Te="userInputFilterDropdownRole",be="userInputFilterCheckboxRole",Oe="userInputFilterRadioGroupRole",Pe="userInputFilterCheckboxGroupRole",Ce="userInputFilterSelectionTagsRole",Ne="userInputFilterRangeSliderRole",De=[Te,be,Oe,Pe,Ce,Ne],Ae="RESET_ALL",xe=[Te,Oe,Pe,Ce],Fe=new Map([["new","add"]]),Le="dbsm-viewer-app";function Me(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}class Ue{constructor(e){let{collectionId:t,collectionName:r,componentType:n,datasetId:a,datasetMode:i,datasetType:s,fieldType:c,filteredBy:l,id:d,numberOfResults:p,pageId:f,pageUrl:h,viewMode:m}=e;o()(this,"type",Ue.types.EVENT),o()(this,"event",void 0),this.event={pageId:f,src:79,ver:Z(te(Le)),app_name:Le,app_id:u.DATA_BINDING,evid:d,ds_id:a,ds_type:s,mode:i,collection_name:r,collection_id:t,component_type:n,filtered_by:l,field_type:c,number_of_results:p,viewmode:m,page_url:h}}}o()(Ue,"types",{EVENT:"event",ERROR:"error"});class ke extends Ue{constructor(e){let{message:t,code:r}=e;super({}),o()(this,"type",Ue.types.ERROR);const n=(e=>{if((0,M.isString)(e)){const t=e.replace(/\D/g,""),r=parseInt(t);if(Number.isNaN(r))return 1}return(0,M.isNumber)(e)?Number.isNaN(e)?1:e:1})(r);this.event={evid:10,src:79,dsc:t,errn:t,errc:n}}}var Ge=new WeakMap,je=new WeakMap,Ve=new WeakMap;class We{constructor(e,t,r){o()(this,"onStart",(e=>d()(this,Ge,e))),o()(this,"onEnd",(e=>d()(this,je,e))),Me(this,Ge,{writable:!0,value:()=>{}}),Me(this,je,{writable:!0,value:()=>{}}),Me(this,Ve,{writable:!0,value:{[We.types.TRACE]:e=>(c()(this,Ge).call(this),new Y(e()).then((e=>(c()(this,je).call(this),e)))),[We.types.START]:()=>c()(this,Ge).call(this),[We.types.END]:()=>c()(this,je).call(this)}});const{type:n,fn:a}=t instanceof Function?{type:We.types.TRACE,fn:t}:{type:t};this.name=e,this.params=r,this.run=()=>c()(this,Ve)[n](a)}}o()(We,"types",{START:"START",END:"END",TRACE:"TRACE"});class Be{static with(e){let{category:t,message:r,level:n,data:o}=e;return class extends(this){constructor(e){let{category:a=t,message:i=r,level:s=n,data:c}=e;super({category:a,message:i,level:s,data:c||o?{...c,...o}:void 0})}}}constructor(e){let{category:t,message:r,level:n="info",data:o}=e;this.event={category:t,message:r,level:n,data:o}}}var qe=new WeakMap,ze=new WeakMap;class He{static with(e){return class extends(this){constructor(t,r){void 0===r&&(r={}),super(t,{...e,...r})}}}constructor(e,t){o()(this,"messages",[]),Me(this,qe,{writable:!0,value:{[He.types.COMPONENT.BOUND]:e=>{let{collectionId:t,description:r}=e;return r?["[Dataset - Connected] '"+t+"' collection to element '"+this._getComponentPresentation()+"':",r]:["[Dataset - Connected] '"+t+"' collection to element '"+this._getComponentPresentation()+"'"]},[He.types.COMPONENT.FILLED]:e=>{let{collectionId:t,description:r}=e;return["[Dataset - Populated] '"+t+"' collection into element '"+this._getComponentPresentation()+"':",r]},[He.types.DS_API.CALLED]:e=>{let{methodName:t,args:r}=e;return 0===r.length?["[wix-dataset."+t+"] called"]:["[wix-dataset."+t+"] called with (",JSON.stringify(r),")"]},[He.types.DS_API.SUCCED]:e=>{let{methodName:t,result:r}=e;return void 0===r?["[wix-dataset."+t+"] returned"]:["[wix-dataset."+t+"] returned with (",JSON.stringify(r),")"]},[He.types.DS_API.DEPRECATED]:e=>{let{methodName:t,replacementMethodName:r}=e;return["[wix-dataset."+t+"] is deprecated"+(r?"; use [wix-dataset."+r+"] instead":"")]},[He.types.DS_API.REGISTERED]:e=>{let{methodName:t}=e;return["["+t+" callback registered] on wix-dataset"]},[He.types.DS_API.TRIGGERED]:e=>{let{eventName:t,eventArgs:r=[]}=e;if(r.length){const e=r.map((e=>e instanceof Error?e.toString():e));return["["+t+" event] triggered on wix-dataset with (",JSON.stringify(e),")"]}return["["+t+" event] triggered on wix-dataset"]}}}),Me(this,ze,{writable:!0,value:{}}),d()(this,ze,t),this.messages=c()(this,qe)[e](t)}_getComponentPresentation(){const{component:{nickname:e,parentRepeater:t}}=c()(this,ze);return t?"#"+t.nickname+".#"+e:"#"+e}}o()(He,"types",{COMPONENT:{BOUND:"COMPONENT_BOUND",FILLED:"COMPONENT_FILLED"},DS_API:{CALLED:"DS_API_CALLED",SUCCED:"DS_API_SUCCED",DEPRECATED:"DS_API_DEPRECATED",REGISTERED:"DS_API_REGISTERED",TRIGGERED:"DS_API_TRIGGERED"}});class $e{constructor(e,t){void 0===t&&(t="log"),o()(this,"message",void 0),o()(this,"level",void 0),this.message=e,this.level=t}}const Ye="READ_WRITE",Xe="READ",Je="WRITE",Ke=(e,t)=>[ue,ye].includes(e)||t&&t.properties&&Object.keys(t.properties).length>0;var Qe=a(477);const Ze=Object.keys,et=(Object.values,Object.entries),tt={AddressInput:{viewerType:["wixui.AddressInput"],sdkType:"$w.AddressInput"},Text:{viewerType:["wysiwyg.viewer.components.WRichText"],sdkType:"$w.Text"},Image:{viewerType:["wysiwyg.viewer.components.WPhoto","wixui.ImageX"],sdkType:"$w.Image"},TextInput:{viewerType:["wysiwyg.viewer.components.inputs.TextInput"],sdkType:"$w.TextInput"},TimePicker:{viewerType:["wixui.TimePicker"],sdkType:"$w.TimePicker"},Button:{viewerType:["wysiwyg.viewer.components.SiteButton"],sdkType:"$w.Button"},IconButton:{viewerType:["wysiwyg.common.components.imagebutton.viewer.ImageButton"],sdkType:"$w.IconButton"},RatingsDisplay:{viewerType:["wixui.RatingsDisplay"],sdkType:"$w.RatingsDisplay"},RatingsInput:{viewerType:["wixui.RatingsInput"],sdkType:"$w.RatingsInput"},VerticalMenu:{viewerType:["wysiwyg.common.components.verticalmenu.viewer.VerticalMenu"],sdkType:"$w.VerticalMenu"},Checkbox:{viewerType:["wysiwyg.viewer.components.inputs.Checkbox"],sdkType:"$w.Checkbox"},Gallery:{viewerType:["wysiwyg.viewer.components.MatrixGallery","wysiwyg.viewer.components.SliderGallery","wysiwyg.viewer.components.SlideShowGallery","wysiwyg.viewer.components.PaginatedGridGallery","wysiwyg.viewer.components.tpapps.TPAWidget"],sdkType:"$w.Gallery"},Dropdown:{viewerType:["wysiwyg.viewer.components.inputs.ComboBoxInput","wixui.Dropdown"],sdkType:"$w.Dropdown"},TextBox:{viewerType:["wysiwyg.viewer.components.inputs.TextAreaInput"],sdkType:"$w.TextBox"},RichTextBox:{viewerType:["wixui.RichTextBox"],sdkType:"$w.RichTextBox"},Table:{viewerType:["wysiwyg.viewer.components.Grid"],sdkType:"$w.Table"},DatePicker:{viewerType:["wysiwyg.viewer.components.inputs.DatePicker"],sdkType:"$w.DatePicker"},RadioButtonGroup:{viewerType:["wysiwyg.viewer.components.inputs.RadioGroup"],sdkType:"$w.RadioButtonGroup"},UploadButton:{viewerType:["wysiwyg.viewer.components.inputs.UploadButton","wixui.FileUploaderNew","wysiwyg.viewer.components.inputs.FileUploader"],sdkType:"$w.UploadButton"},ClassicSection:{viewerType:["wysiwyg.viewer.components.ClassicSection"],sdkType:"$w.Section"},Column:{viewerType:["wysiwyg.viewer.components.Column"],sdkType:"$w.Column"},Video:{viewerType:["wysiwyg.viewer.components.Video"],sdkType:"$w.Video"},VideoPlayer:{viewerType:["wixui.VideoPlayer"],sdkType:"$w.VideoPlayer"},VideoBox:{viewerType:["wysiwyg.viewer.components.MediaPlayer"],sdkType:"$w.VideoBox"},MusicPlayer:{viewerType:["wixui.MusicPlayer"],sdkType:"$w.AudioPlayer"},Repeater:{viewerType:["wysiwyg.viewer.components.Repeater"],sdkType:"$w.Repeater"},Pagination:{viewerType:["wixui.Pagination"],sdkType:"$w.Pagination"},Page:{viewerType:["mobile.core.components.Page"],sdkType:"$w.Page"},Document:{viewerType:["fake-document-type"],sdkType:"$w.Document"},MediaContainer:{viewerType:["wysiwyg.viewer.components.MediaContainer"],sdkType:"$w.Container"},StripColumnsContainer:{viewerType:["wysiwyg.viewer.components.StripColumnsContainer"],sdkType:"$w.ColumnStrip"},ToggleSwitch:{viewerType:["wixui.ToggleSwitch"],sdkType:"$w.Switch"},Slider:{viewerType:["wixui.Slider"],sdkType:"$w.Slider"},RangeSlider:{viewerType:["wixui.RangeSlider"],sdkType:"$w.RangeSlider"},StylableButton:{viewerType:["wixui.StylableButton"],sdkType:"$w.StylableButton"},GoogleMap:{viewerType:["wysiwyg.viewer.components.GoogleMap"],sdkType:"$w.GoogleMap"},CheckboxGroup:{viewerType:["wysiwyg.viewer.components.inputs.CheckboxGroup"],sdkType:"$w.CheckboxGroup"},ProgressBar:{viewerType:["wixui.ProgressBar"],sdkType:"$w.ProgressBar"},VectorImage:{viewerType:["wysiwyg.viewer.components.VectorImage","wysiwyg.viewer.components.svgshape.SvgShape"],sdkType:"$w.VectorImage"},SelectionTags:{viewerType:["wixui.SelectionTagsList"],sdkType:"$w.SelectionTags"},Section:{viewerType:["responsive.components.Section"],sdkType:"$w.Section"},SignatureInput:{viewerType:["wixui.SignatureInput"],sdkType:"$w.SignatureInput"},RefComponent:{viewerType:["wysiwyg.viewer.components.RefComponent"],sdkType:"$w.RefComponent"},RichContent:{viewerType:["wysiwyg.viewer.components.tpapps.TPAWidget"],sdkType:"$w.RichContent"},AppController:{viewerType:["platform.components.AppController"],sdkType:"$w.AppController"},SlideshowRepeater:{viewerType:["wixui.Slideshow"],sdkType:"$w.Slideshow"}},rt=(0,M.mapValues)(tt,(({sdkType:e})=>e)),{AddressInput:nt,RatingsInput:ot,TextInput:at,TextBox:it,RichTextBox:st,Checkbox:ct,DatePicker:lt,RadioButtonGroup:dt,Dropdown:ut,UploadButton:pt,ToggleSwitch:ft,Slider:ht,TimePicker:mt,CheckboxGroup:gt,SelectionTags:yt,SignatureInput:vt}=(Ze(tt).reduce(((e,t)=>(e.concat(tt[t].viewerType),e)),[]),Ze(tt).map((e=>tt[e].viewerType)).reduce(((e,t)=>e.concat(t)),[]).reduce(((e,t)=>(e[t.split(".").reverse()[0]]=t,e)),{}),Ze(tt).map((e=>tt[e].sdkType)),rt),_t=[{type:nt,role:ve},{type:ot,role:"ratingsInputRole"},{type:at,role:"textInputRole"},{type:it,role:"textAreaRole"},{type:st,role:"richTextBoxRole"},{type:ct,role:"checkboxRole"},{type:lt,role:pe},{type:dt,role:fe},{type:ut,role:"dropdownRole"},{type:pt,role:he},{type:ft,role:"toggleSwitchRole"},{type:ht,role:"sliderRole"},{type:mt,role:Ee},{type:gt,role:"checkboxGroupRole"},{type:yt,role:"selectionTagsRole"},{type:vt,role:Se}],Et=(_t.map((e=>e.type)),_t.map((e=>e.role))),It=e=>e.some((e=>{return t=(0,M.get)(e,"role"),Et.includes(t);var t})),wt=(e,t)=>(e=>[Je,Ye].includes(e))(e)&&(e=>e.some((e=>"save"===(0,M.get)(e,"config.events.onClick.action"))))(t)&&It(t);function St(e){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},St(e)}function Rt(e){var t=function(e,t){if("object"!==St(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==St(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===St(t)?t:String(t)}function Tt(e,t,r){return(t=Rt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ot(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(r),!0).forEach((function(t){Tt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pt(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Ct="function"==typeof Symbol&&Symbol.observable||"@@observable",Nt=function(){return Math.random().toString(36).substring(7).split("").join(".")},Dt={INIT:"@@redux/INIT"+Nt(),REPLACE:"@@redux/REPLACE"+Nt(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Nt()}};function At(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function xt(e,t,r){var n;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(Pt(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(Pt(1));return r(xt)(e,t)}if("function"!=typeof e)throw new Error(Pt(2));var o=e,a=t,i=[],s=i,c=!1;function l(){s===i&&(s=i.slice())}function d(){if(c)throw new Error(Pt(3));return a}function u(e){if("function"!=typeof e)throw new Error(Pt(4));if(c)throw new Error(Pt(5));var t=!0;return l(),s.push(e),function(){if(t){if(c)throw new Error(Pt(6));t=!1,l();var r=s.indexOf(e);s.splice(r,1),i=null}}}function p(e){if(!At(e))throw new Error(Pt(7));if(void 0===e.type)throw new Error(Pt(8));if(c)throw new Error(Pt(9));try{c=!0,a=o(a,e)}finally{c=!1}for(var t=i=s,r=0;r<t.length;r++){(0,t[r])()}return e}function f(e){if("function"!=typeof e)throw new Error(Pt(10));o=e,p({type:Dt.REPLACE})}function h(){var e,t=u;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(Pt(11));function r(){e.next&&e.next(d())}return r(),{unsubscribe:t(r)}}})[Ct]=function(){return this},e}return p({type:Dt.INIT}),(n={dispatch:p,subscribe:u,getState:d,replaceReducer:f})[Ct]=h,n}function Ft(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}const Lt={collectionName:null,readWriteType:Xe,filter:null,sort:null,includes:null,nested:[],pageSize:12,deferred:!1},Mt="SET_CURRENT_RECORD",Ut="UPDATE_FIELDS",kt="REFRESH_CURRENT_RECORD",Gt="REFRESH_CURRENT_VIEW",jt="INCREMENT_NUM_PAGES_TO_SHOW",Vt="SET_DEFAULT_RECORD",Wt="GO_TO_INDEX",Bt="GO_TO_NEXT_PAGE",qt="GO_TO_PREVIOUS_PAGE",zt="LOAD_PAGE",Ht="GET_RECORD_BY_INDEX_RESULT",$t="CURRENT_VIEW_UPDATED",Yt="REVERT_CHANGES",Xt="RECORD_REVERTED",Jt="SAVE_RECORD",Kt="SAVE_RECORD_RESULT",Qt="REMOVE_CURRENT_RECORD",Zt="REMOVE_CURRENT_RECORD_RESULT",er="NEW_RECORD",tr="NEW_RECORD_RESULT",rr="REFRESH",nr="SET_USER_INPUT_OPTION_VALUES",or={INIT:"INIT",SET_PAGINATION_DATA:"SET_PAGINATION_DATA"},ar=or,ir=e=>{let{controllerConfig:t={},connections:r=[],isScoped:n=!1,datasetType:o}=e;return{type:or.INIT,datasetConfig:t.dataset||{},connections:r,isScoped:n,datasetType:o}},sr=e=>({type:or.SET_PAGINATION_DATA,paginationData:e}),cr="SET_FILTER",lr="SET_SORT",dr="SET_IS_DATASET_READY",ur="SET_FIXED_FILTER_ITEM",pr=e=>null==e?void 0:e.readWriteType,fr=e=>null==e?void 0:e.pageSize,hr=pr,mr=e=>{let{error:t,payload:r}=e;return t?Qe.Result.Error(r):Qe.Result.Ok(r)},gr={currentRecord:{index:void 0,data:void 0,fieldsToUpdate:void 0,updateSource:void 0},lastSavedRecord:{index:void 0,data:void 0},desiredIndex:void 0,refreshCurrentRecord:!1,removeCurrentRecord:!1,newRecordIndex:null,refreshCurrentView:!1,refreshController:!1,setFilterCalled:!1,revertChanges:!1,saveRecord:!1,defaultRecord:void 0,isForm:void 0,page:{numPagesToShow:1,offset:0,size:Lt.pageSize},schema:void 0,userFilterInitialData:null,isApplyUserInputFiltersActionBindingPresent:!1},yr=e=>((e,t)=>(0,M.inRange)(e,wr(t).offset,wr(t).offset+wr(t).size))(Sr(e),e),vr=e=>e.some((e=>"applyUserInputFilters"===(0,M.get)(e,"config.events.onClick.action"))),_r=(e,t,r,n)=>{const o={...e,currentRecord:{index:t,data:r,updateSource:n},desiredIndex:t,refreshCurrentRecord:!1,refreshController:!1};return yr(o)?o:{...o,page:{...o.page,offset:Math.floor(o.currentRecord.index/o.page.size)*o.page.size,numPagesToShow:1}}},Er=e=>e.page.size,Ir=e=>e.currentRecord.data,wr=e=>e.page,Sr=e=>e.currentRecord.index,Rr={reducer:function(e,t){switch(void 0===e&&(e=gr),t.type){case Mt:{const{recordIndex:r,record:n,updateSource:o}=t;return _r(e,r,n,o)}case er:return{...e,newRecordIndex:t.atIndex};case tr:return mr(t).fold((()=>({...e,newRecordIndex:null})),(t=>({..._r(e,e.newRecordIndex,t),newRecordIndex:null})));case Ut:{const{fieldsToUpdate:r,updateSource:n}=t;return{...e,currentRecord:{...e.currentRecord,fieldsToUpdate:r,updateSource:n}}}case Wt:return{...e,desiredIndex:t.index};case Ht:return mr(t).fold((()=>({...e,desiredIndex:e.currentRecord.index,refreshCurrentRecord:!1,refreshController:!1})),(t=>t.matchWith({Record:t=>{let{index:r,record:n}=t;return _r(e,r,n)},InvalidIndex:()=>({...e,desiredIndex:e.currentRecord.index,refreshCurrentRecord:!1}),NoRecord:()=>_r(e,null,null)})));case kt:return{...e,refreshCurrentRecord:!0};case Qt:return{...e,removeCurrentRecord:!0};case Zt:return mr(t).fold((()=>({...e,removeCurrentRecord:!1})),(()=>({...e,removeCurrentRecord:!1,refreshCurrentRecord:!0})));case Gt:return{...e,refreshCurrentView:!0};case $t:return{...e,refreshCurrentView:!1};case Yt:return{...e,revertChanges:!0};case Xt:return{...e,revertChanges:!1};case Vt:{const{record:r}=t;return{...e,defaultRecord:r}}case ar.INIT:{const{datasetConfig:r,connections:n}=t,o=fr(r),a=hr(r);return{...e,isForm:wt(a,n),page:{...e.page,size:o||e.page.size},isApplyUserInputFiltersActionBindingPresent:vr(n)}}case ar.SET_PAGINATION_DATA:{const r={...e,page:{...e.page,...t.paginationData}};return yr(r)?r:{...r,desiredIndex:r.page.offset}}case Bt:{const t=wr(e),r=Er(e),n=t.offset+r,o={...e,page:{...e.page,numPagesToShow:1,offset:n}};return yr(o)?o:{...o,desiredIndex:o.page.offset}}case qt:{const t=wr(e),r=Math.max(0,t.offset-t.size),n={...e,page:{...e.page,numPagesToShow:1,offset:r}};return yr(n)?n:{...n,desiredIndex:n.page.offset}}case zt:{const{size:r}=wr(e),n={...e,page:{...e.page,numPagesToShow:1,offset:r*(t.pageNumber-1)}};return yr(n)?n:{...n,desiredIndex:n.page.offset}}case jt:return{...e,page:{...e.page,numPagesToShow:e.page.numPagesToShow+1}};case Jt:return{...e,saveRecord:!0,lastSavedRecord:{index:void 0,data:void 0}};case Kt:return mr(t).fold((()=>({...e,saveRecord:!1})),(t=>({...e,saveRecord:!1,lastSavedRecord:{index:e.currentRecord.index,data:t}})));case cr:return{...e,setFilterCalled:!0,refreshController:!0};case lr:case rr:return{...e,refreshController:!0};case nr:return{...e,userFilterInitialData:t.userFilterInitialData};default:return e}},getPaginationData:wr,hasCurrentRecord:e=>!!Ir(e),selectDefaultDraft:e=>({...e.defaultRecord}),selectCurrentRecord:Ir,selectCurrentRecordIndex:Sr,selectDesiredRecordIndex:e=>e.desiredIndex,selectFieldsToUpdate:e=>e.currentRecord.fieldsToUpdate,selectLastSavedRecord:e=>e.lastSavedRecord.data,selectLastSavedRecordIndex:e=>e.lastSavedRecord.index,selectRefreshCurrentRecord:e=>e.refreshCurrentRecord,selectRemoveCurrentRecord:e=>e.removeCurrentRecord,selectRefreshController:e=>e.refreshController,selectSetFilterCalled:e=>e.setFilterCalled,selectRefreshCurrentView:e=>e.refreshCurrentView,selectRevertChanges:e=>e.revertChanges,selectSaveRecord:e=>e.saveRecord,selectUpdateSource:e=>e.currentRecord.updateSource,selectNewRecordIndex:e=>e.newRecordIndex,isDuringSave:e=>e.saveRecord,isForm:e=>e.isForm,getUserFilterInitialData:e=>e.userFilterInitialData,selectIsApplyUserInputFiltersActionBindingPresent:e=>e.isApplyUserInputFiltersActionBindingPresent},Tr="dataset",br="router_dataset",Or=e=>{var t;const{prop:r,fieldName:n}=null!=(t=null==e?void 0:e.userInputFilter)?t:{};return!(!r||!n)},{WRITE:Pr}=e,{ROUTER_DATASET:Cr}=t,Nr=["collectionName","readWriteType","includes","cursor"],Dr=["filter","sort"],Ar=e=>(0,M.pick)(e,Nr),xr=e=>(0,M.pick)(e,Dr),Fr=e=>{let{datasetConfig:t,connections:r,isScoped:n,datasetType:o}=e;const a=o===Cr,i=r.some((e=>{let{role:t}=e;return t===ne})),s=n,c=!n,l=t.readWriteType===Pr;return{datasetIsRouter:a,datasetIsMaster:i,datasetIsVirtual:s,datasetIsReal:c,datasetIsDeferred:Boolean(t.deferred)&&!(s||i||a||l),dynamicPageNavComponentsShouldBeLinked:a&&c,userFilterConnectionProps:r.filter((e=>{let{role:t,config:r}=e;return De.includes(t)&&Or(r)})).map((e=>{let{config:{userInputFilter:t},role:r}=e;return{...t,role:r}}))}},Lr=(e,t)=>({...e,transientData:{...e.transientData,...t}}),Mr={canonicalData:Ar(Lt),canonicalCalculatedData:{},transientData:{isDatasetReady:!1,...xr(Lt)}},Ur={reducer:function(e,t){switch(void 0===e&&(e=Mr),t.type){case ar.INIT:{const{datasetConfig:r,connections:n,isScoped:o,datasetType:a}=t;return{...e,canonicalData:{...e.canonicalData,...Ar(t.datasetConfig)},canonicalCalculatedData:Fr({datasetConfig:r,connections:n,isScoped:o,datasetType:a}),transientData:{...e.transientData,...xr(t.datasetConfig)}}}case cr:{const{filter:r}=t;return Lr(e,{filter:r})}case lr:{const{sort:r}=t;return Lr(e,{sort:r})}case dr:{const{isDatasetReady:r}=t;return Lr(e,{isDatasetReady:r})}case ur:{const{fixedFilterItem:r}=t;return Lr(e,{fixedFilterItem:r})}default:return e}},isWriteOnly:e=>(0,M.get)(e,["canonicalData","readWriteType"])===Je,isReadOnly:e=>(0,M.get)(e,["canonicalData","readWriteType"])===Xe,getReadWriteMode:e=>(0,M.get)(e,["canonicalData","readWriteType"]),isDatasetReady:e=>(0,M.get)(e,["transientData","isDatasetReady"]),isDatasetConfigured:e=>!!(0,M.get)(e,["canonicalData","collectionName"]),isCursorPagingRequired:e=>!!(0,M.get)(e,["canonicalData","cursor"]),isDatasetRouter:e=>{let{canonicalCalculatedData:{datasetIsRouter:t}}=e;return t},isDatasetMaster:e=>{let{canonicalCalculatedData:{datasetIsMaster:t}}=e;return t},isDatasetVirtual:e=>{let{canonicalCalculatedData:{datasetIsVirtual:t}}=e;return t},isDatasetReal:e=>{let{canonicalCalculatedData:{datasetIsReal:t}}=e;return t},isDatasetDeferred:e=>{let{canonicalCalculatedData:{datasetIsDeferred:t}}=e;return t},shouldLinkDynamicPageNavComponents:e=>{let{canonicalCalculatedData:{dynamicPageNavComponentsShouldBeLinked:t}}=e;return t},getUserFilterConnectionProps:e=>{let{canonicalCalculatedData:{userFilterConnectionProps:t}}=e;return t},getFixedFilterItem:e=>(0,M.get)(e,["transientData","fixedFilterItem"]),getFilter:e=>(0,M.get)(e,["transientData","filter"]),getSort:e=>(0,M.get)(e,["transientData","sort"]),getIncludes:e=>(0,M.get)(e,["canonicalData","includes"])||[],getCollectionName:e=>(0,M.get)(e,["canonicalData","collectionName"])},kr="NEXT_DYNAMIC_PAGE_URL_RESULT",Gr="PREVIOUS_DYNAMIC_PAGE_URL_RESULT",jr="INITIALIZE",Vr=(0,Qe.union)("DynamicPageUrlLoadState",{Empty(){},Loading(){},Loaded:e=>{if(!e)throw new Error("url must exist");return{url:e}}},{hasUrl:e=>()=>e.matchWith({Empty:()=>!1,Loading:()=>!1,Loaded:()=>!0}),shouldLoadUrl:e=>()=>e.matchWith({Empty:()=>!1,Loading:()=>!0,Loaded:()=>!1})});Vr.fromUrl=e=>e?Vr.Loaded(e):Vr.Empty();const Wr=Vr,{fromUrl:Br}=Vr,qr={nextDynamicPageUrl:Wr.Empty(),previousDynamicPageUrl:Wr.Empty()},zr=e=>{const t=(e=>{const t=e.filter((e=>!!(0,M.get)(e,"config.events.onClick.action")));return new Set(t.map((e=>(0,M.get)(e,"config.events.onClick.action"))))})(e),r=e=>e?Wr.Loading():Wr.Empty();return{nextDynamicPageUrl:r(t.has("nextDynamicPage")),previousDynamicPageUrl:r(t.has("previousDynamicPage"))}},Hr={reducer:function(e,t){switch(void 0===e&&(e=qr),t.type){case jr:return{...e,...zr(t.connections)};case kr:return{...e,nextDynamicPageUrl:Wr.fromUrl(t.payload)};case Gr:return{...e,previousDynamicPageUrl:Wr.fromUrl(t.payload)};default:return e}},selectNextDynamicPageUrl:e=>e.nextDynamicPageUrl,selectPreviousDynamicPageUrl:e=>e.previousDynamicPageUrl},$r=function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var o=t[n];0,"function"==typeof e[o]&&(r[o]=e[o])}var a,i=Object.keys(r);try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if(void 0===r(void 0,{type:Dt.INIT}))throw new Error(Pt(12));if(void 0===r(void 0,{type:Dt.PROBE_UNKNOWN_ACTION()}))throw new Error(Pt(13))}))}(r)}catch(e){a=e}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var n=!1,o={},s=0;s<i.length;s++){var c=i[s],l=r[c],d=e[c],u=l(d,t);if(void 0===u){t&&t.type;throw new Error(Pt(14))}o[c]=u,n=n||u!==d}return(n=n||i.length!==Object.keys(e).length)?o:e}}({records:Rr.reducer,config:Ur.reducer,dynamicPages:Hr.reducer}),Yr=e=>Ur.getCollectionName(e.config),Xr=e=>Ur.getFilter(e.config),Jr=e=>Ur.getSort(e.config),Kr=e=>Rr.getPaginationData(e.records),Qr=e=>Ur.getReadWriteMode(e.config),Zr=e=>Ur.isDatasetConfigured(e.config),en=e=>Ur.isDatasetReady(e.config),tn=e=>Ur.isReadOnly(e.config),rn=e=>Ur.isWriteOnly(e.config),nn=e=>(e=>Rr.hasCurrentRecord(e.records))(e)&&!tn(e),on=e=>Ur.isDatasetRouter(e.config),an=e=>Ur.isDatasetMaster(e.config),sn=e=>Ur.isDatasetVirtual(e.config),cn=e=>Ur.isDatasetReal(e.config),ln=e=>Ur.isDatasetDeferred(e.config),dn=e=>Ur.shouldLinkDynamicPageNavComponents(e.config),un=e=>Rr.selectCurrentRecord(e.records),pn=e=>Rr.selectCurrentRecordIndex(e.records),fn=e=>Rr.selectDefaultDraft(e.records),hn=e=>Rr.selectDesiredRecordIndex(e.records),mn=e=>Rr.selectFieldsToUpdate(e.records),gn=e=>Rr.selectUpdateSource(e.records),yn=e=>Rr.selectNewRecordIndex(e.records),vn=e=>Hr.selectNextDynamicPageUrl(e.dynamicPages),_n=e=>Hr.selectPreviousDynamicPageUrl(e.dynamicPages),En=e=>Rr.selectRefreshController(e.records),In=e=>Rr.selectSetFilterCalled(e.records),wn=e=>Rr.selectRefreshCurrentRecord(e.records),Sn=e=>Rr.selectRefreshCurrentView(e.records),Rn=e=>Rr.selectRemoveCurrentRecord(e.records),Tn=e=>Rr.selectRevertChanges(e.records),bn=e=>Rr.selectSaveRecord(e.records),On=e=>Rr.getUserFilterInitialData(e.records),{READ_WRITE:Pn,READ:Cn}=e;function Nn(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var Dn=new WeakMap,An=new WeakMap;class xn{constructor(e,t){Nn(this,Dn,{writable:!0,value:void 0}),Nn(this,An,{writable:!0,value:new X([[Ue,e=>{let{mode:t,env:r}=e;return t.csr&&!r.dev}],[He,e=>{let{mode:t,env:r}=e;return t.verbose&&r.preview}]])}),d()(this,Dn,e),this._listenToUnhandledErrors(t)}log(e){if(this._shouldLogErrorBi(e)&&c()(this,Dn).log(e,new ke(e.cause||e)),this._shouldLog(e))return c()(this,Dn).log(e)}logError(e,t,r){this.log(e instanceof C?e:new N(t,{cause:e,...r}))}_shouldLog(e){const t=c()(this,An).find(((t,r)=>e instanceof r))||(()=>!0);return t(j.platform.settings)}_shouldLogErrorBi(e){return e instanceof C&&!(e instanceof D)&&c()(this,An).get(Ue)(j.platform.settings)}_listenToUnhandledErrors(e){e.addEventListener("unhandledrejection",(e=>{e.reason instanceof C&&(e.preventDefault(),c()(this,Dn).log(new L({cause:e.reason})))}))}}const Fn=e=>(t,r)=>$(t,(t=>e.log(new r({cause:t})))),Ln=e=>(t,r)=>$((function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];const i=t(...o);return e.log(new r({data:{args:o,result:i}})),i}),(t=>{throw e.log(new r({data:{exception:t},level:"error"})),t})),Mn=e=>(t,r)=>function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];if(r.startsWith("on"))return e.log(new He(He.types.DS_API.REGISTERED,{methodName:r})),t(...o);if(e.log(new He(He.types.DS_API.CALLED,{methodName:r,args:o})),Fe.has(r)){const t=Fe.get(r);e.log(new He(He.types.DS_API.DEPRECATED,{methodName:r,replacementMethodName:t}))}return new Y(t(...o)).then((t=>(e.log(new He(He.types.DS_API.SUCCED,{methodName:r,result:t})),t)))};class Un{constructor(e){let{id:t,collectionId:r,collectionName:n,datasetId:o,datasetType:a,datasetMode:i,numberOfResults:s,filteredBy:c,componentType:l,fieldType:d}=e;const{platform:{location:{pageId:u,pageUrl:p},settings:{env:f}}}=j;return new Ue({id:t,collectionId:r,collectionName:n,datasetId:o,datasetType:a,datasetMode:i,viewMode:f.name,pageId:u,pageUrl:p,numberOfResults:s,filteredBy:c,componentType:l,fieldType:d})}}var kn=a(5882);class Gn{constructor(e){let{message:t,code:r}=e;const n=new Error(t);return n.code=r,n}}class jn{constructor(e){let{getRequestParams:t,httpClient:r}=e;this.getRequestParams=t,this.httpClient=r}async _makeRequestTo(e,t){const{instance:r,gridAppId:n}=this.getRequestParams();return(await this.httpClient.post("/_serverless/data-binding-server/"+e,t,{params:{gridAppId:n},headers:{Authorization:r,"Content-Type":"application/json"}})).data}async fetchBulkData(e){const{recordsByCollectionId:t,recordsInfoByDataset:r}=await this._makeRequestTo("fetch-initial-data",e);return{recordsInfoByDataset:r.reduce(((e,t)=>{let{itemIds:r=[],totalCount:n=0,error:o}=t;return[...e,{itemIds:r,totalCount:n,error:o?new Gn(o):void 0}]}),[]),recordsByCollectionId:Object.entries(t).reduce(((e,t)=>{let[r,n]=t;return{...e,[r]:Object.entries(n).reduce(((e,t)=>{let[r,n]=t;return{...e,[r]:(0,kn.PL)(n)}}),{})}}),{})}}async fetchData(e){const{items:t,...r}=await this._makeRequestTo("fetch-data",e);return{...r,items:t.map((e=>(0,kn.PL)(e)))}}async remove(e){return this._makeRequestTo("remove",e)}async save(e){const{item:t}=await this._makeRequestTo("save",e);return(0,kn.PL)(t)}}const Vn=".",Wn=e=>(0,M.head)(e.split(Vn)),Bn=e=>e.split(Vn),qn=e=>(0,M.isPlainObject)(e)&&(0,M.has)(e,"_id"),zn=(e,t)=>e!==t&&qn(e)&&!qn(t)?e:t,Hn=function(e,t){void 0===t&&(t={});for(const r of e){const e=t[r._id];t[r._id]=(0,M.mergeWith)(e,r,zn)}return t},$n=(e,t)=>{const r=t.flatMap((e=>["fields",e])).concat("type");return(0,M.get)(e,r)},Yn=(e,t)=>r=>{const n=Bn(r);if(((e,t)=>t.length>=2&&$n(e,[t[0]])===m.FieldType.reference)(e,n)){const[r,...o]=n,a=e&&e.fields[r]?e.fields[r].referencedCollection:null,i=t&&a?t[a]:null;return $n(i,o)}return $n(e,n)},Xn=(e,t)=>null!=t&&null!=t.fields[e]?t.fields[e].referencedCollection:null,Jn=e=>null!=e?e.displayField:null,Kn=e=>null!=e?e.maxPageSize:void 0,Qn=e=>(0,M.includes)(e,Vn),Zn=e=>{var t;let{schema:r,defaultToDbDriverLimit:n}=e;const o=n?100:1e3;return null!=(t=Kn(r))?t:o},eo=(e,t)=>async r=>{const{baseQuery:n,fieldName:o,schema:a}=r,i=((e,t,r)=>{var n;const o=null===(n=e.fields[t])||void 0===n?void 0:n.queryOperators;return!o||o.includes(r)})(a,o,m.AllowedFilterOperator.ne);if(i)return t({...r,baseQuery:n.ne(o,e)});const s=await t(r);return(0,M.filter)(s,(t=>((e=>(0,M.isObject)(e))(t)?t[o]:t)!==e))},to=e=>eo("",e),ro=e=>eo(void 0,e),no=async e=>{let{baseQuery:t,schema:r,fieldName:n}=e;const o=Zn({schema:r,defaultToDbDriverLimit:!0}),{items:a}=await t.limit(o).find(),i=a.flatMap((e=>e[n]));return(0,M.uniq)(i)},oo=async e=>{let{baseQuery:t,fieldName:r,schema:n}=e;const o=Zn({schema:n,defaultToDbDriverLimit:!1}),{items:a}=await t.limit(o).distinct(r,null);return a},ao=e=>{let{wixData:t,schema:r,sortModel:n,fieldName:o,filterModel:a}=e;const i=(e=>{let{wixData:t,schema:r,sortModel:n,fieldName:o}=e;const a=Wn(o);if(a){var i,s,c;const e=null==(i=null==(s=r.fields[a])?void 0:s.sortable)||i,o=r.defaultSort?[{[r.defaultSort.fieldName]:r.defaultSort.direction}]:null,l=(null==n?void 0:n.length)>0,d=!((null==n?void 0:n.find((e=>e[a])))||(null==r||null==(c=r.defaultSort)?void 0:c.fieldName)===a)&&e,u=t.sort().ascending(a).getSortModel();if(l)return d?[...n,...u]:n;if(o)return d?[...o,...u]:o;if(e)return u}return null})({wixData:t,schema:r,sortModel:n,fieldName:o});return t.query(r.id).setFilterModel(a).setSortModel(i)},io=async e=>{let{baseQuery:t,schema:r,references:n}=e;const o=Zn({schema:r,defaultToDbDriverLimit:!0}),{items:a}=await t.hasSome("_id",n).limit(o).find();return a},so=async e=>{let{baseQuery:t,schema:r,wixData:n,customSortExists:o,referencingFieldName:a,referencedFieldName:i,referencedSchema:s}=e;const c=Zn({schema:r,defaultToDbDriverLimit:!1}),{items:l}=await t.limit(c).distinct(a,null),d=to(ro(io)),u=await d({baseQuery:n.query(s.id),schema:s,fieldName:i,references:l});return o?l.flatMap((e=>u.filter((t=>t._id===e)))):u},co=async e=>{let{baseQuery:t,schema:r,fieldName:n}=e;const o=Zn({schema:r,defaultToDbDriverLimit:!0}),{items:a}=await t.limit(o).include(n).find();return a},lo=async e=>{let{baseQuery:t,schema:r,referencingFieldName:n,referencedFieldName:o}=e;const a=ro(co),i=await a({baseQuery:t,schema:r,fieldName:n});return(0,M.uniqBy)(i.map((e=>e[n])).filter((e=>!["",void 0].includes(e[o]))),"_id")},uo=async e=>{var t;let{schema:r,schemas:n,wixData:o,fieldName:a,role:i,sortModel:s,filterModel:c}=e;const l=ao({wixData:o,schema:r,fieldName:a,sortModel:s,filterModel:c}),[d,u]=Bn(a),p=n[r.fields[d].referencedCollection],f=(null==s?void 0:s.length)>0,h=(null==(t=r.allowedOperations)?void 0:t.includes(m.DataOperation.distinct))?so:lo,g=await h({baseQuery:l,schema:r,schemas:n,wixData:o,fieldName:a,customSortExists:f,referencingFieldName:d,referencedFieldName:u,referencedSchema:p}),y=(e=>{let{referencedItems:t,referencedSchema:r,referencedFieldName:n,customSortExists:o}=e;const a=(0,M.uniq)(t.flatMap((e=>e[n]))),i=r.fields[n].type;return o?a:i===m.FieldType.number?a.sort(((e,t)=>e-t)):a.sort()})({referencedItems:g,referencedSchema:p,referencedFieldName:u,customSortExists:f}),v=(e=>{let{referencedItems:t,referencedFieldName:r,options:n}=e;return Object.fromEntries(n.map((e=>[e,t.filter((t=>(0,M.isArray)(t[r])?t[r].includes(e):t[r]===e)).map((e=>e._id))])))})({referencedItems:g,options:y,referencedFieldName:u});return{fieldName:a,role:i,options:y,referencedItemIdsByOption:v}},po=async e=>{var t;let{schema:r,wixData:n,fieldName:o,role:a,filterModel:i}=e;const s={wixData:n,schema:r,filterModel:i,fieldName:o,role:a};return(null==(t=r.allowedOperations)?void 0:t.includes(m.DataOperation.aggregate))?(async e=>{var t;let{wixData:r,schema:n,filterModel:o,fieldName:a,role:i}=e;const s=r.filter().setFilterModel(o),{items:c}=await r.aggregate(n.id).filter(s).max(a,"max").min(a,"min").run(),{min:l,max:d}=null!=(t=c[0])?t:{};return{fieldName:a,role:i,min:l,max:d}})(s):(async e=>{let{wixData:t,schema:r,filterModel:n,fieldName:o,role:a}=e;const i=t.query(r.id).setFilterModel(n).limit(1),[{items:s},{items:c}]=await Promise.all([i.ascending(o).find(),i.descending(o).find()]),l=s.map((e=>e[o]))[0],d=c.map((e=>e[o]))[0];return{fieldName:o,role:a,min:l,max:d}})(s)};function fo(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var ho=new WeakMap,mo=new WeakMap;class go{constructor(e){let{wixData:t,wixDataSchemas:r}=e;fo(this,ho,{writable:!0,value:void 0}),fo(this,mo,{writable:!0,value:void 0}),d()(this,ho,yo.reduce(((e,r)=>(e[r]=function(){const e=t[r](...arguments);return e.catch instanceof Function?e.catch((e=>{throw new So(e)})):e},e)),{...t})),d()(this,mo,r)}async fetchBulkData(e){const t=await Promise.all(e.map((e=>{let{collectionId:t,filter:r,sort:n,offset:o,cursor:a,length:i,includes:s,uniqueFieldValues:c}=e;return this.fetchData({collectionId:t,filter:r,sort:n,offset:o,cursor:a,length:i,includes:s,uniqueFieldValues:c}).catch((e=>({error:e})))})));return((e,t)=>t.reduce(((t,r,n)=>{let{items:o,nextCursor:a,totalCount:i,uniqueFieldValues:s,error:c}=r;if(c)return t.recordInfosInDatasetOrder.push({error:c}),t;t.recordInfosInDatasetOrder.push({itemIds:o.map((e=>{let{_id:t}=e;return t})),totalCount:i,nextCursor:a});const l=e[n].collectionId,d=t.recordsByCollectionId[l];return t.recordsByCollectionId[l]=Hn(o,d),t.uniqueFieldValuesByCollection[l]={...t.uniqueFieldValuesByCollection[l],...s},t}),{recordInfosInDatasetOrder:[],recordsByCollectionId:{},uniqueFieldValuesByCollection:{}}))(e,t)}async fetchData(e){let{collectionId:t,filter:r,sort:n,offset:o=0,includes:a,cursor:i,length:s,uniqueFieldValues:l}=e;const d=i?c()(this,ho).fetch(t,i,s):(()=>{let e=c()(this,ho).query(t).setFilterModel(r).setSortModel(n).skip(o).limit(s);return null==a||a.forEach((t=>{e=e.include(t)})),e.find()})(),u=l.length>0?this._fetchUniqueValues({collectionId:t,fieldKeys:l}):Promise.resolve({}),[p,f]=await Promise.all([d,u]),{items:h,totalCount:m,nextCursor:g}=p;return{items:h,nextCursor:g,totalCount:m||0,uniqueFieldValues:f}}async fetchUserFilterInitialData(e){let{filter:t,sort:r,userFilterConnectionProps:n,schema:o,schemas:a}=e;const i=[Ne],s=(0,M.uniqBy)(n.filter((e=>{let{role:t}=e;return i.includes(t)})),"fieldName"),l=(0,M.uniqWith)(n.filter((e=>{let{role:t}=e;return xe.includes(t)})),((e,t)=>e.fieldName===t.fieldName));return Promise.all([...s.map((async e=>{let{fieldName:r,role:n}=e;const a={schema:o,wixData:c()(this,ho),fieldName:r,role:n,filterModel:t};return po(a)})),...l.map((async e=>{let{fieldName:n,role:i}=e;const s=Qn(n),l={wixData:c()(this,ho),schema:o,schemas:a,fieldName:n,role:i,sortModel:r,filterModel:t};return s?uo(l):(async e=>{var t;let{wixData:r,schema:n,fieldName:o,role:a,sortModel:i,filterModel:s}=e;const c=ao({wixData:r,schema:n,fieldName:o,sortModel:i,filterModel:s}),l=null==(t=n.allowedOperations)?void 0:t.includes(m.DataOperation.distinct),d=to(l?oo:ro(no));return{fieldName:o,role:a,options:await d({baseQuery:c,fieldName:o,schema:n})}})(l)}))])}async remove(e){let{collectionId:t,recordId:r}=e;return c()(this,ho).remove(t,r)}async save(e){let{collectionId:t,record:r,includeReferences:n}=e;return c()(this,ho).save(t,r,{includeReferences:n})}async getSibling(e){let{collectionName:t,filter:r,sort:n,fieldValues:o,sortFields:a,directionTowardSibling:i}=e;const s=c()(this,ho).query(t).setFilterModel(r),{items:[l]}=await vo({sort:n,sortFields:a,fieldValues:o,baseQuery:s,directionTowardSibling:i}).find();return l}fetchSchemas(e){return c()(this,mo).bulkGet(e,{referencedCollectionsDepth:1,includeMetadata:!0})}createSimpleFilter(e,t){return c()(this,ho).filter().eq(e,t).getFilterModel()}async _fetchUniqueValues(e){let{collectionId:t,fieldKeys:r}=e;return(await Promise.all(r.map((e=>c()(this,ho).query(t).distinct(e))))).reduce(((e,t,n)=>{let{_items:o}=t;return e[r[n]]=o,e}),{})}}const yo=["save","remove","find","sort","filter","query","fetch","aggregate"],vo=e=>{let{sort:t,sortFields:r,directionTowardSibling:n,fieldValues:o,baseQuery:a}=e;return _o({sort:t,sortFields:r,directionTowardSibling:n,fieldValues:o,baseQuery:a})(r.length-1).reduce(((e,t)=>e.or(t)))},_o=e=>{let{baseQuery:t,sortFields:r,sort:n,directionTowardSibling:o,fieldValues:a}=e;return function e(i){if(-1===i)return[];const s=r[i];if(!a[s])return e(i-1);return[(0,M.flow)(Eo(n,o),Io(n[s],o,s,a[s]),wo(i,r,a))(t),...e(i-1)]}},Eo=(e,t)=>r=>Object.entries(e).reduce(((e,r)=>{let[n,o]=r;return o===t?e.ascending(n):e.descending(n)}),r),Io=(e,t,r,n)=>o=>e===t?o.gt(r,n):o.lt(r,n),wo=(e,t,r)=>n=>(0,M.range)(e).reduce(((e,n)=>e.eq(t[n],r[t[n]])),n).limit(1);class So{constructor(e){if(!e.stack){const{message:t,code:r}="string"==typeof e?{message:e,code:"WD_VALIDATION_FAILED"}:e,n=new Error(t);return n.code=r,n}return e}}class Ro{constructor(e){o()(this,"warmupData",void 0),this.warmupData=e}getSchemas(){return this.warmupData.get("schemas")}setSchemas(e){this.warmupData.set("schemas",e)}getDataStore(){return this.warmupData.get("dataStore")}setDataStore(e){this.warmupData.set("dataStore",e)}getUserFilterInitialData(e){return this.warmupData.get("userFilterInitialData-"+e)}setUserFilterInitialData(e,t){this.warmupData.set("userFilterInitialData-"+e,t)}}function To(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var bo=new WeakMap,Oo=new WeakMap,Po=new WeakMap,Co=new WeakMap;class No{constructor(e){if(To(this,bo,{writable:!0,value:void 0}),To(this,Oo,{writable:!0,value:void 0}),To(this,Po,{writable:!0,value:void 0}),To(this,Co,{writable:!0,value:void 0}),e&&e.config){d()(this,bo,e.config.dataset.collectionName),d()(this,Oo,e.items),d()(this,Po,e.schemas);const t=e.nextCursor||void 0,r=e.totalCount||0,n=(e.items||[]).length;d()(this,Co,{cursor:t,total:r,loaded:n})}}getSchemas(){return c()(this,Po)}getDataStore(){if(c()(this,Oo))return(e=>{let{items:t,datasetSize:r,collectionId:n}=e;return{recordInfosInDatasetOrder:[{itemIds:t.map((e=>{let{_id:t}=e;return t})),datasetSize:r,collectionId:n}],recordsByCollectionId:{[n]:Hn(t,{})}}})({items:c()(this,Oo),datasetSize:c()(this,Co),collectionId:c()(this,bo)})}getItems(){return c()(this,Oo)}}const Do={dsn:"https://27180ecd50484e4eafe543b40d29866d@sentry.wixpress.com/89"},Ao={dsn:"https://73a0410004ae41b7b60ca1c4b4684996@sentry.wixpress.com/183"},xo={dsn:"https://9653fbb3e48143d890dba8a09a5a98c6@sentry.wixpress.com/184"},Fo=["ReactSource","EditorSource","experiments","petri_ovr","WixCodeRuntimeSource","js-wixcode-sdk-override","debug"],Lo=e=>{try{const t=(e=>Array.from(new URL(e).searchParams.entries()).reduce(((e,[t,r])=>Object.assign(Object.assign({},e),{[t]:r})),{}))(e||"");return(e=>"true"===e.forceReportSentry)(t)||(e=>Object.keys(e).every((e=>!Fo.includes(e))))(t)}catch(e){return!0}},Mo=[e=>(e=>{var t,r,n;return[null===(r=null===(t=null==e?void 0:e.request)||void 0===t?void 0:t.headers)||void 0===r?void 0:r.Referer,null===(n=null==e?void 0:e.request)||void 0===n?void 0:n.url]})(e).every(Lo)],Uo=(e,t)=>Mo.concat(t||(e=>e)).every((t=>t(e))),ko=e=>{try{return e()}catch(e){return"unknown"}},Go=e=>{try{return e()}catch(e){return"object"==typeof e&&null!==e&&"message"in e?e.message:void 0}},jo=({Raven:e,globalScope:t,dsn:r,params:n={},appName:o})=>{/https?:\/\/localhost/.test(ee())||((({Raven:e,appName:t,browserUrlGetter:r,dsn:n,params:o})=>{const a=te(t),i=Z(a);e.config(n,{maxUrlLength:1e3,captureUnhandledRejections:!1,autoBreadcrumbs:{dom:!1}}),e.setRelease(o.release||i),e.setShouldSendCallback(o.shouldSendCallback||Uo),e.setDataCallback(((e,t)=>(e.request=Object.assign(e.request||{},{url:r()}),(t||(e=>e))(e))))})({Raven:e,appName:o,browserUrlGetter:()=>ko((()=>{var e;return null===(e=null==t?void 0:t["wix-location"])||void 0===e?void 0:e.url})),dsn:r,params:n}),e.setDataCallback(((e,r=(e=>e))=>(e.extra=Object.assign(e.extra||{},(e=>({referrer:Go((()=>{var t;return null===(t=null==e?void 0:e["wix-window"])||void 0===t?void 0:t.referrer})),workerUrl:Go((()=>{var t;return null===(t=null==e?void 0:e.location)||void 0===t?void 0:t.href}))}))(t)),e.tags=Object.assign(e.tags||{},n.tags||{},(e=>({renderMode:ko((()=>{var t,r;return null===(r=null===(t=null==e?void 0:e["wix-window"])||void 0===t?void 0:t.rendering)||void 0===r?void 0:r.env})),viewMode:ko((()=>{var t;return null===(t=null==e?void 0:e["wix-window"])||void 0===t?void 0:t.viewMode})),santaVersion:ko((()=>{var t;return(e=>{const t=e.match(/santa\/([^/]*)/);return t?t[1]:"unknown"})((null===(t=null==e?void 0:e.location)||void 0===t?void 0:t.href)||"")}))}))(t)),r(e)))))};function Vo(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}const{USER_SCOPE:Wo,APPLICATION_SCOPE:Bo,SERVER_SCOPE:qo}=C.scopes,{DBSMViewer:{dsn:zo},UserErrors:{dsn:Ho},WixData:{dsn:$o}}=r,Yo={[Bo]:zo,[Wo]:Ho,[qo]:$o};let Xo=function(e,t){return r=>this.mode.dev?(e===Error&&(this.console.error(r),r.cause&&this.console.error("Caused by:",r.cause)),null==r.run?void 0:r.run()):t(r)};var Jo=new WeakMap,Ko=new WeakMap,Qo=new WeakMap,Zo=new WeakMap,ea=new WeakMap,ta=new WeakMap;class ra{constructor(e){let{fedops:t,bi:r,monitor:n,verbose:o,console:a,global:i,settings:s}=e;Vo(this,Jo,{writable:!0,value:void 0}),Vo(this,Ko,{writable:!0,value:void 0}),Vo(this,Qo,{writable:!0,value:void 0}),Vo(this,Zo,{writable:!0,value:void 0}),Vo(this,ea,{writable:!0,value:void 0}),Vo(this,ta,{writable:!0,value:void 0});const c=a.factory();Xo=Xo.bind({mode:s.mode,console:c}),d()(this,Jo,this._createEventToHandler()),d()(this,Ko,this._createFedopsLogger(t)),d()(this,Qo,this._createBiLoggers({bi:r,settings:s})),d()(this,Zo,this._setupMonitor({monitor:n,global:i,settings:s})),d()(this,ea,o.factory()),d()(this,ta,c)}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1)return t.map((e=>this.log(e)));const[n]=t,[,o]=Array.from(c()(this,Jo)).find((e=>{let[t]=e;return t.prototype.isPrototypeOf(n)}))||[];return o?o(n):c()(this,ta).error("Oj-vej! This event is not supported by logger",n)}_createEventToHandler(){return new Map([[Error,Xo(Error,(e=>{if(e instanceof L)c()(this,ta).warn("You have unhandled error in async operation. Consider catching it and handling accordingly.\n",e.cause);else{const{scope:t,cause:r,options:{extra:n,...o}={}}=e;e instanceof D&&(c()(this,ta).error(e),r&&c()(this,ta).error("Caused by:",r)),c()(this,Zo)[t].captureException(e,{zone:t,extra:{cause:r,...n},...o})}}))],[Ue,Xo(Ue,(e=>{let{event:t,type:r}=e;return r===Ue.types.ERROR?c()(this,Qo).errorLogger.log(t):c()(this,Qo).logger.log(t)}))],[We,Xo(We,(e=>{let{name:t,params:r,run:n,onStart:o,onEnd:a}=e;return o((()=>c()(this,Ko).interactionStarted(t,r))),a((()=>c()(this,Ko).interactionEnded(t,r))),n()}))],[Be,Xo(Be,(e=>{let{event:t}=e;return c()(this,Zo)[Bo].captureBreadcrumb(t)}))],[He,e=>{let{messages:t}=e;return c()(this,ea).log(...t)}],[$e,e=>{let{message:t,level:r}=e;return c()(this,ta)[r](t)}]])}_createFedopsLogger(e){let{factory:t,hooks:{start:r,end:n}}=e;return t.getLoggerForWidget({appId:"databinding",appName:"databinding",startHook:r,endHook:n})}_createBiLoggers(e){let{bi:{factory:t},settings:{env:r}}=e;return{logger:t().logger({endpoint:r.editor?"platform":"platform-viewer"}),errorLogger:t().logger({endpoint:"trg"})}}_setupMonitor(e){let{monitor:{factory:t},global:r,settings:{metaSiteId:n,userId:o}}=e;return Object.entries(Yo).reduce(((e,a)=>{let[i,s]=a;const c=t(s);return e[i]=c,jo({dsn:s,Raven:c,globalScope:r,appName:Le,user:{id:o},params:{tags:{msid:n}}}),e}),{})}}function na(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var oa=new WeakMap,aa=new WeakMap,ia=new WeakMap,sa=new WeakMap,ca=new WeakMap;class la{constructor(){na(this,oa,{writable:!0,value:{}}),na(this,aa,{writable:!0,value:{}}),na(this,ia,{writable:!0,value:{}}),na(this,sa,{writable:!0,value:{}}),na(this,ca,{writable:!0,value:{}})}getData(e){let{datasetId:t,collectionId:r,includes:n}=e;const o=c()(this,oa)[t];return o?{datasetSize:o.datasetSize,items:o.itemIds.map((e=>da(c()(this,aa)[r][e],this.getSchema(r),n)))}:null}getRecord(e){var t;let{collectionId:r,recordId:n,includes:o}=e;const a=null==(t=c()(this,aa)[r])?void 0:t[n];return a&&da(a,this.getSchema(r),o)}updateCollectionData(e){let{collectionId:t,data:r}=e;const{[t]:n}=c()(this,aa),{[t]:o}=c()(this,ia),{items:a,uniqueFieldValues:i}=r;c()(this,aa)[t]=ua(a,n),c()(this,ia)[t]=pa(i,o)}getSchema(e){return c()(this,sa)[e]}updateStore(e){let{recordsByCollectionId:t={},recordInfosByDatasetId:r={},uniqueFieldValuesByCollection:n={}}=e;d()(this,oa,{...c()(this,oa),...r});for(const[e,r]of Object.entries(t))c()(this,aa)[e]={...c()(this,aa)[e],...r};for(const[e,t]of Object.entries(n))c()(this,ia)[e]={...c()(this,ia)[e],...t}}getStore(){return{recordInfosByDatasetId:c()(this,oa),recordsByCollectionId:c()(this,aa),uniqueFieldValuesByCollection:c()(this,ia)}}hasDataset(e){return Boolean(c()(this,oa)[e])}setUniqueFieldValues(e){let{collectionId:t,fieldKey:r,data:n}=e;c()(this,ia)[t]={...c()(this,ia)[t],[r]:n}}getUniqueFieldValues(e){var t;let{collectionId:r,fieldKey:n}=e;return null==(t=c()(this,ia)[r])?void 0:t[n]}updateSchemas(e){for(const[t,r]of Object.entries(e))c()(this,sa)[t]={...c()(this,sa)[t],...r}}getSchemas(){return c()(this,sa)}getUserFilterInitialData(e){return c()(this,ca)[e]}setUserFilterInitialData(e,t){c()(this,ca)[e]=t}}const da=(e,t,r)=>Object.entries(e).reduce(((e,n)=>{let[o,a]=n;return((e,t)=>{var r;return(null==t||null==(r=t.fields)||null==(r=r[e])?void 0:r.type)===m.FieldType.reference})(o,t)&&((e,t)=>!e||!e.includes(t))(r,o)&&Boolean(null==a?void 0:a._id)?e[o]=a._id:e[o]=a,e}),{}),ua=function(e,t){return void 0===t&&(t={}),e.reduce(((e,t)=>{const r=e[t._id];return e[t._id]=r?(0,M.mergeWith)(r,t,zn):t,e}),t)},pa=function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),{...t,...e}},fa=async({datasetConfigSort:e,getSchema:t})=>{const r=e&&e.length>0?e:(e=>{var t,r,n,o;return((null===(o=null===(n=null===(r=null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.namedViews)||void 0===r?void 0:r.find((t=>{var r;return t.id===(null===(r=null==e?void 0:e.metadata)||void 0===r?void 0:r.namedViewIdForSiteSort)})))||void 0===n?void 0:n.query)||void 0===o?void 0:o.sort)||[]).map((({direction:e,field:t})=>({[t]:e===m.SortDirection.DESCENDING?m.Direction.desc:m.Direction.asc})))})(await t());return r.length>0?r:null};function ha(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var ma=new WeakMap,ga=new WeakMap,ya=new WeakMap,va=new WeakMap,_a=new WeakMap,Ea=new WeakMap,Ia=new WeakMap;class wa{constructor(){ha(this,ma,{writable:!0,value:void 0}),ha(this,ga,{writable:!0,value:void 0}),ha(this,ya,{writable:!0,value:void 0}),ha(this,va,{writable:!0,value:void 0}),ha(this,_a,{writable:!0,value:void 0}),ha(this,Ea,{writable:!0,value:void 0}),ha(this,Ia,{writable:!0,value:void 0});const{logger:e,dataFetcher:t}=j;d()(this,ga,t),d()(this,ma,e),d()(this,ya,new la),d()(this,va,{}),d()(this,_a,Promise.resolve())}createInitialDataRequest(e){d()(this,va,e.reduce(((e,t)=>{let{id:r,refresh:n}=t;return n||!c()(this,ya).hasDataset(r)?{...e,[r]:new H}:e}),{}));const t=Object.entries(c()(this,va)).map((e=>{let[,{promise:t}]=e;return t}));d()(this,_a,this._waitForDataFetched(t).then((()=>d()(this,va,{}))))}async getInitialData(e){let{datasetId:t,collectionId:r,cursorPaging:n,filter:o,sort:a,length:i,includes:s,uniqueFieldValues:l}=e;return c()(this,va)[t]&&(c()(this,va)[t].resolve({datasetId:t,collectionId:r,cursorPaging:n,filter:o,sort:a,length:i,includes:s,uniqueFieldValues:l}),await c()(this,_a)),c()(this,ya).getData({datasetId:t,collectionId:r,includes:s})||this.getData({datasetId:t,collectionId:r,cursorPaging:n,filter:o,sort:a,offset:0,length:i,includes:s,uniqueFieldValues:l})}async getSort(e){let{sort:t,collectionId:r}=e;return await fa({datasetConfigSort:t,getSchema:async()=>(await this.waitForSchemasLoaded(),this.getSchema(r))})}async getData(e){const{collectionId:t,cursorPaging:r,offset:n,filter:o,includes:a,length:i,datasetSize:s,uniqueFieldValues:l}=e,d=e=>!this.getUniqueFieldValues({collectionId:t,fieldKey:e}),u=await this.getSort(e),{items:p,totalCount:f,nextCursor:h,uniqueFieldValues:m}=await c()(this,ga).fetchData({collectionId:t,offset:n,filter:o,sort:u,includes:a,cursor:r?null==s?void 0:s.cursor:void 0,length:i,uniqueFieldValues:l.filter((e=>d(e)))}).catch(Ra("Data fetching failed",{datasetConfig:e}));return await this.waitForSchemasLoaded(),c()(this,ya).updateCollectionData({collectionId:t,data:{items:p,uniqueFieldValues:m}}),{items:p,datasetSize:{total:f,loaded:((null==s?void 0:s.loaded)||0)+p.length,cursor:h},uniqueFieldValues:m}}async remove(e){let{collectionId:t,recordId:r}=e;return c()(this,ga).remove({collectionId:t,recordId:r}).catch(Ra("Record removing failed",{collectionId:t,recordId:r}))}async save(e){let{collectionId:t,record:r,includeReferences:n}=e;return c()(this,ga).save({collectionId:t,record:r,includeReferences:n}).catch(Ra("Record saving failed",{collectionId:t,record:r,includeReferences:n}))}async getSibling(e){return await c()(this,ga).getSibling(e)}async loadSchemas(e){const t=c()(this,ya).getSchemas(),r=e.filter((e=>!t[e]));d()(this,Ea,r.length?c()(this,ga).fetchSchemas(r).catch(Ra("Schema fetching failed",{collectionIds:r})):Promise.resolve({}));const n=await c()(this,Ea);return c()(this,ya).updateSchemas({...t,...n}),c()(this,ya).getSchemas()}async setSchemas(e){c()(this,ya).updateSchemas(e)}getSchemas(){return c()(this,ya).getSchemas()}getRecord(e){let{collectionId:t,recordId:r,includes:n}=e;return c()(this,ya).getRecord({collectionId:t,recordId:r,includes:n})}getSchema(e){return c()(this,ya).getSchema(e)}hasSchema(e){return Boolean(this.getSchema(e))}getReferencedSchemas(e){const t=this.getSchema(e),r=c()(this,ya).getSchemas();return(e=>e?(0,M.flow)((e=>(0,M.pickBy)(e,(e=>{let{referencedCollection:t}=e;return Boolean(t)}))),(e=>(0,M.map)(e,(e=>{let{referencedCollection:t}=e;return t}))),M.uniq,(e=>e.filter(Boolean)))(e.fields):[])(t).reduce(((e,t)=>({...e,[t]:r[t]})),{})}setCollectionData(e){let{collectionId:t,data:r}=e;r&&c()(this,ya).updateCollectionData({collectionId:t,data:r})}setStore(e){e&&c()(this,ya).updateStore(e)}setStaticStore(e){const{recordsByCollectionId:t,recordInfosInDatasetOrder:r,uniqueFieldValuesByCollectionId:n}=e,o=c()(this,Ia).find((e=>{let{type:t}=e;return t===br}));if(o){const{datasetId:e}=o,a={[e]:r[0]};c()(this,ya).updateStore({recordsByCollectionId:t,recordInfosByDatasetId:a,uniqueFieldValuesByCollectionId:n})}}getStore(){return c()(this,ya).getStore()}setUniqueFieldValues(e){let{collectionId:t,fieldKey:r,data:n}=e;return c()(this,ya).setUniqueFieldValues({collectionId:t,fieldKey:r,data:n})}getUniqueFieldValues(e){let{collectionId:t,fieldKey:r}=e;return c()(this,ya).getUniqueFieldValues({collectionId:t,fieldKey:r})}createSimpleFilter(e,t){return c()(this,ga).createSimpleFilter(e,t)}setDatasetConfigs(e){d()(this,Ia,e)}getUserFilterInitialData(e){return c()(this,ya).getUserFilterInitialData(e)}setUserFilterInitialData(e,t){c()(this,ya).setUserFilterInitialData(e,t)}async _fetchInitialData(e){try{const{recordsByCollectionId:t,recordInfosInDatasetOrder:r,uniqueFieldValuesByCollection:n}=await c()(this,ma).log(new We("dataset/fetchPrimaryInitialData",(async()=>c()(this,ga).fetchBulkData(await Promise.all(e.map((async e=>({...e,sort:await this.getSort(e)}))))))));return{recordsByCollectionId:t,recordInfosByDatasetId:r.reduce(((t,r,n)=>{let{itemIds:o=[],error:a,nextCursor:i,totalCount:s}=r;const l=e[n];return a&&c()(this,ma).log(new Sa("Initial data fetching failed for one of the datasets",{cause:a,extra:{datasetConfig:l}})),t[l.datasetId]={itemIds:o,datasetSize:{total:s,loaded:o.length,cursor:i}},t}),{}),uniqueFieldValuesByCollection:n}}catch(t){throw new N("Initial data fetching failed",{cause:t,extra:{datasetConfigs:e}})}}async waitForSchemasLoaded(){await c()(this,Ea)}async _waitForDataFetched(e){if(e.length){const t=await Promise.all(e),r=await this._fetchInitialData(t);await this.waitForSchemasLoaded(),c()(this,ya).updateStore(r)}}}class Sa{constructor(e,t){let{cause:r,...n}=t;return new(x.codes.includes(r.code)?x:F)(e,{...n,cause:r,code:r.code})}}const Ra=(e,t)=>r=>{throw new Sa(e,{cause:r,extra:t})},Ta="PRIMARY";var ba=a(8582),Oa=a.n(ba);const Pa=function(e,t,r){return void 0===r&&(r=[]),e(t)?[{path:(0,M.clone)(r),filterExpression:t}]:(n=t,Array.isArray(n)||(0,M.isPlainObject)(n)?(0,M.flatMap)(t,((t,n)=>Pa(e,t,r.concat(n)))):[]);var n},Ca=e=>t=>t.reduce(((e,t)=>{let{path:r,filterExpression:n}=t;return((e,t,r)=>(0,M.set)(e,t,r))(e,r,n)}),(0,M.cloneDeep)(e)),Na=(e,t,r)=>{const n=((e,t)=>Oa()(Qe.Maybe,t.map((t=>{let{path:r,filterExpression:n}=t;return e(n).map((e=>({path:r,filterExpression:e})))}))))(t,Pa(e,r));return n.map(Ca(r))},Da=()=>()=>Qe.Maybe.fromNullable(j.platform.user).map((e=>{let{id:t,loggedIn:r}=e;return r?t:null})),Aa=e=>t=>{let{filterId:r}=t;return Qe.Maybe.fromNullable(e(r)).chain((e=>{let t,{masterDataset:r,fieldName:n}=e;try{t=r.api.getCurrentItem()}catch(e){}return Qe.Maybe.fromNullable(t).map((e=>{const t=e[n];return void 0===t?null:t}))}))},xa=e=>La(e).chain((e=>{let[t,r]=e;return"$not"===t&&(0,M.isArray)(r)?Fa({positive:!1,filterExpression:r[0]}):Qe.Maybe.Nothing()})).orElse((()=>Fa({positive:!0,filterExpression:e}))),Fa=e=>{let{positive:t,filterExpression:r}=e;return La(r).chain((e=>{let[r,n]=e;return La(n).map((e=>{let[n,o]=e;return{field:r,condition:n,value:o,positive:t}}))}))},La=e=>{if(!(0,M.isPlainObject)(e))return Qe.Maybe.Nothing();const t=(0,M.entries)(e)[0];return Qe.Maybe.fromNullable(t)},{stringArray:Ma,number:Ua}=m.FieldType,ka=(e,t)=>(0,M.get)(e,t),Ga=e=>{let{previousRecord:t,currentRecord:r,fieldName:n}=e;return!(0,M.isEqual)(ka(t,n),ka(r,n))},ja=e=>{const{properties:t,events:r,behaviors:n}=e,o={};return(0,M.forEach)(t,((e,t)=>{let{fieldName:r}=e;o[t]=r})),(0,M.forEach)(r,((e,t)=>{let{action:r}=e;o[t]=r})),(0,M.forEach)(n,(e=>{let{type:t}=e;o.text=t})),o},{mediaGallery:Va}=m.FieldType,Wa="datetime",Ba=e=>/^\d{2}:\d{2}:\d{2}\.\d{3}$/.test(e),qa=e=>e instanceof Date&&!isNaN(e),za=e=>{let{time:t,date:r}=e;const[n,o]=t.split(":");return r.setHours(n),r.setMinutes(o),r.setSeconds(0),r.setMilliseconds(0),r},Ha=e=>e.toTimeString().split(" ")[0]+".000",$a=e=>{const t=new Date(e);return qa(t)?t:(()=>{const e=new Date;return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e})()},Ya=e=>String(e).padStart(2,"0"),Xa=e=>[e.getFullYear(),Ya(e.getMonth()+1),Ya(e.getDate())].join("-"),Ja=e=>{let{value:t,formatter:r,fieldType:n,format:o}=e;return o?(e=>{let{value:t,formatter:r,fieldType:n,format:o}=e;if(o.type===Wa){const e=n===m.FieldType.date,a=e?new Date(t):t;return qa(a)?r?r.formatDateTime(a,o.params.dateFormat,{timeZone:e?"UTC":void 0}):e&&"string"==typeof t?t:"":t}return t})({value:t,formatter:r,fieldType:n,format:o}):t},Ka=e=>null==e||"function"!=typeof e.toString?"":Array.isArray(e)?e.join(", "):e.toString(),{mediaGallery:Qa,address:Za,date:ei}=m.FieldType,ti=(e,t)=>{let{fieldType:r,role:n,componentIsInput:o,propPath:a}=t;const i=[{converter:e=>{let{formatted:t}=e;return t},condition:e&&r===Za&&n!==ve},{converter:Ka,condition:n===ae||!o&&![ce,se,Ie,Re].includes(n)&&r!==m.FieldType.boolean},{converter:e=>(e=>{let{value:t}=e;const{platform:{utils:{media:r}}}=j,n=r.parseMediaItemUri(t);if(n.error)return t;switch(n.type){case r.types.IMAGE:return r.getScaleToFillImageURL(n.mediaId,n.width,n.height,n.width,n.height,{name:n.title});case r.types.VIDEO:return"https://video.wixstatic.com/video/"+n.mediaId+"/file";case r.types.AUDIO:return"https://static.wixstatic.com/mp3/"+n.mediaId;default:return t}})({value:e}),condition:"link"===a&&n!==_e},{converter:()=>[],condition:!e&&r===Qa},{converter:Ha,condition:n===Ee&&qa(e)},{converter:e=>{const t=new Date(e);return null!==e&&qa(t)?t:""===e||null===e?void 0:e},condition:n===pe&&r===ei}],s=i.reduce(((e,t)=>{let{converter:r,condition:n}=t;return n&&e.push(r),e}),[]);return(0,M.flow)(s)(e)};var ri=function(e){var t=function(e){var t=0;if(void 0===e||0===e.length)return t;for(var r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t|=0}return t*=Math.sign(t),t=Math.sqrt(t),t=Math.floor(1e6*(t-Math.floor(t)))}(e);return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e,r){var n=Math.ceil(t/(r+1))%16;return("x"===e?n:3&n|8).toString(16)}))},ni=function(e){return void 0===e&&(e=""),e?e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-\.]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,""):""};function oi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ai(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oi(Object(r),!0).forEach((function(t){ii(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ii(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var si=function(e,t){return e&&"object"==typeof e?"direct"===e.type?ai(ai({},e),{},{type:"web"}):{type:"wix",data:e}:"string"==typeof e?{type:"web",url:e,target:t,text:e}:{target:"_blank",type:"none"}},ci=function(e){void 0===e&&(e={});var t={link:e.url};return e.url&&(t.target=e.target),t},li=function(e){return null!==/^(wix:)?(image|video)(:\/\/)/.exec(e)},di=function(e){return li(e)?e.split("/")[3]:e},ui=function(e){try{return li(e)?e.split("/")[4].split("#").slice(0,-1).join("#"):"_.jpg"}catch(e){return"_.jpg"}},pi=function(e,t){return"wix:image://v1/"+(e||ni(t.name))+"/"+ni(t.fileName||t.name)+"#originWidth="+t.width+"&originHeight="+t.height},fi=function(e,t){return"wix:video://v1/"+(e||ni(t.name))+"/"+ni(t.fileName||t.name)+"#posterUri="+t.posters[0].url+"&posterWidth="+t.width+"&posterHeight="+t.height},hi=function(e){var t={},r=!1;try{var n=/\/\d*_\d*\//.exec(e);if(n&&n[0]&&n[0].length>0){var o=n[0].replace(/\//g,"").split("_").map((function(e){return Number(e)})),a=o[0],i=o[1];a>0&&i>0&&(r=!0,t={originWidth:a,originHeight:i})}}catch(e){r=!1}if(!r)try{var s=/wm_(.*)\//.exec(e);if(s&&s[0]&&s[0].length>0){var c=s[1];c.length>0&&(t.watermark=c)}}catch(e){r=!1}if(!r)try{e.split("#").pop().split("&").map((function(e){return e.split("=")})).forEach((function(e){t[e[0]]=isNaN(Number(e[1]))?String(e[1]):Number(e[1])}))}catch(e){r=!1}return t},mi=function(e,t){return void 0===t&&(t=0),function(e){return!!(e.src||e.type&&e.html)}(e)?function(e,t){var r,n,o,a=hi(e.src);"video"===(null==(r=e.type)?void 0:r.toLowerCase())&&(null!=(n=e.src)&&n.includes("youtube")||null!=(o=e.src)&&o.includes("vimeo"))&&(a.originWidth=1920,a.originHeight=1080),a.width=e.width||a.originWidth||a.originalWidth||a.posterWidth||1,a.height=e.height||a.originHeight||a.originalHeight||a.posterHeight||1;var i=e.settings&&e.settings.focalPoint,s=a.watermark,c=e.imageToken||e.token||a.token,l=(e.type||"image").toLowerCase(),d=ai({itemId:ni(e.slug)||(ni(e.title||e.id)||ri(e.src||e.html||t))+"_"+t,mediaUrl:di(e.src),metaData:Object.assign(ai({type:l,alt:e.alt||"",title:e.title||"",description:e.description||"",name:ui(e.src),fileName:ui(e.src),link:si(e.link,e.target),width:a.width,height:a.height,sourceName:"private"},"customButtonText"in e&&{customButtonText:e.customButtonText}),i?{focalPoint:i}:{},s?{watermarkStr:s}:{}),orderIndex:t},c&&{token:c});if("text"===l){var u=e.style;d.metaData.height=a.height||500,d.metaData.width=a.width||500*u.layoutRatio,d.metaData.textStyle={width:d.metaData.width,height:d.metaData.height,backgroundColor:u.fillColor},d.metaData.html=d.editorHtml=e.html}if("video"===l){var p={};e.thumbnail&&(p=hi(e.thumbnail));var f=function(e){return null!==/^.*\.(jpeg|jpg|webp|png|jpe)$/.exec(e)}(di(e.thumbnail))?di(e.thumbnail):a.posterUri;d.metaData.posters=[{url:f,width:p.width||a.width,height:p.height||a.height}],d.isExternal=0===e.src.indexOf("http"),d.isExternal||li(e.src)?(d.metaData.source=e.src.indexOf("youtube.com")>0?"youtube":e.src.indexOf("vimeo.com")>0?"vimeo":"wix",d.metaData.videoUrl=e.src):d.metaData.qualities=[{width:a.width,height:a.height,quality:a.height+"p",formats:[li(e.src)?"wix":e.src.split(/#|\?/)[0].split(".").pop().trim()]}]}return d}(e,t):function(e,t){return{itemId:ri(t+"_"+(e.uri||e.alt||t)),mediaUrl:e.uri||"",metaData:{height:e.height||1,lastModified:Date.now(),link:si(e.link,e.target),title:e.title||"",description:e.description||"",alt:e.alt||"",sourceName:"private",tags:[],width:e.width||1},orderIndex:t}}(e,t)},gi=function(e,t){return void 0===e&&(e={}),void 0===t&&(t=!0),t?function(e){void 0===e&&(e={});var t=e.metaData||e.metadata||{},r=ci(t.link)||{},n=ai({type:t.type||"image",slug:e.itemId},r),o=n.type.toLowerCase();if("text"===o){var a=t.testStyle||{};Object.assign(n,{html:t.html,style:{width:a.width,height:a.height,bgColor:a.backgroundColor}})}else Object.assign(n,{title:t.title,description:t.description,alt:t.alt}),"image"===o?Object.assign(n,ai(ai({src:pi(e.mediaUrl,t),settings:Object.assign({},t.focalPoint?{focalPoint:t.focalPoint}:{})},"imageToken"in e&&{imageToken:e.imageToken}),"token"in e&&{token:e.token})):"video"===o&&Object.assign(n,{src:fi(e.mediaUrl,t),thumbnail:t.posters[0].url});return n}(e):(n=(r=e).metaData||r.metadata||{},o=ci(n.link)||{},ai({uri:r.mediaUrl,description:n.description,alt:n.alt,title:n.title,height:n.height,width:n.width},o));var r,n,o};const{mediaGallery:yi,documentArray:vi}=m.FieldType,_i=e=>{let{value:t,currentValue:r=[],fieldType:n}=e;switch(n){case yi:return[...r,...t.map((e=>{let{fileUrl:t,url:r}=e;return(e=>{let{uploadedFileUrl:t}=e;const{platform:{utils:{media:r}}}=j,n=r.parseMediaItemUri(t),o=r.createMediaItemUri(n).item,a=mi({...n,src:o});return gi(a)})({uploadedFileUrl:t||r})}))];case vi:return[...r,...t.map((e=>{let{fileUrl:t,url:r}=e;return t||r}))];default:return t[0].fileUrl||t[0].url}},{reference:Ei,dateTime:Ii,date:wi}=m.FieldType,Si=e=>{let{value:t,currentValue:r,fieldType:n,fieldName:o,role:a,utils:{referenceFetcher:i}={}}=e;const s=[{converter:e=>i(e,o),condition:n===Ei},{converter:e=>((e,t)=>{const r={},n={};if(Ba(e))r.time=e,r.date=new Date;else{const t=$a(e);r.date=t,r.time=Ha(t)}return Ba(t)?n.time=t:n.date=$a(t),za({...r,...n})})(r,e),condition:n===Ii&&[pe,Ee,fe].includes(a)},{converter:Xa,condition:n===wi&&a===pe},{converter:e=>_i({value:e,currentValue:r,fieldType:n}),condition:a===he}],c=s.reduce(((e,t)=>{let{converter:r,condition:n}=t;return n&&e.push(r),e}),[]);return(0,M.flow)(c)(t)},Ri=e=>{let{value:t,role:r,fieldType:n,propPath:o,componentIsInput:a,format:i,utils:{formatter:s}={}}=e;return(0,M.flow)([e=>Ja({value:e,formatter:s,fieldType:n,format:i}),e=>ti(e,{fieldType:n,role:r,componentIsInput:a,propPath:o})])(t)},Ti=(...e)=>[...e],bi=({expression:e,functions:t,variables:r})=>{if("integer"===e.type)return parseInt(e.value);if("float"===e.type)return parseFloat(e.value);if("string"===e.type)return e.value;if("function"===e.type){const n="function"==typeof e.name?e.name:t[e.name];if(n)return n(...e.arguments.map((e=>bi({expression:e,functions:t,variables:r}))));throw new Error("Unknown function "+e.name)}if("variable"===e.type){if("false"===e.name)return!1;if("true"===e.name)return!0;if("undefined"===e.name)return;if("null"===e.name)return null;if(!(e.name in r))throw new Error("Unknown variable "+e.name);return r[e.name]}throw new Error("Unknown AST node "+JSON.stringify(e))},Oi=e=>new Error("Syntax error. "+e),Pi=e=>{if(0===e.trim().length)return{type:"string",parentFunction:void 0,closed:!0,value:"",doubleQuoted:!1,startedAt:0};let t={type:"initial",parentFunction:void 0},r=0,n=e[r];const o=()=>{n=e[++r]},a=e=>{t={type:"initial",parentFunction:e},o()},i=()=>void 0===n||")"===n&&(t.parentFunction&&!t.parentFunction.closed||"function"===t.type&&!t.closed)||"]"===n&&(t.parentFunction&&t.parentFunction.name===Ti&&!t.parentFunction.closed||"function"===t.type&&t.name===Ti&&!t.closed),s=()=>{if(void 0===n){const r=t.parentFunction||t;if("function"===r.type&&!r.closed)throw Oi("Function was not closed. Started at index "+r.startedAt+" with: "+e.slice(r.startedAt))}if(t.parentFunction)return"function"!==t.type||t.closed?(t.parentFunction.closed=!0,t=t.parentFunction,t.parentFunction&&(t=t.parentFunction)):(t.closed=!0,t=t.parentFunction),void o();for(o();/^\s$/.test(n||"");)o();if(void 0!==n)throw Oi("Unexpected characters after a finished expression at index "+r+": "+e.slice(r));return t};for(;;){if("initial"===t.type){if("["===n){t={type:"function",parentFunction:t.parentFunction,closed:!1,name:Ti,startedAt:r,arguments:[]},t.parentFunction&&t.parentFunction.arguments.push(t),o();continue}if("-"===n){t={type:"integer",parentFunction:t.parentFunction,closed:!1,value:"-"},t.parentFunction&&t.parentFunction.arguments.push(t),o();continue}if(n>="0"&&n<="9"){t={type:"integer",parentFunction:t.parentFunction,closed:!1,value:n},t.parentFunction&&t.parentFunction.arguments.push(t),o();continue}if("_"===n||n>="a"&&n<="z"||n>="A"&&n<="Z"){t={type:"variable",parentFunction:t.parentFunction,closed:!1,name:n,startedAt:r},t.parentFunction&&t.parentFunction.arguments.push(t),o();continue}if('"'===n||"'"===n){t={type:"string",parentFunction:t.parentFunction,closed:!1,doubleQuoted:'"'===n,startedAt:r,value:""},t.parentFunction&&t.parentFunction.arguments.push(t),o();continue}if(/^\s$/.test(n)){o();continue}throw Oi(`Unexpected character "${n}" near: ${e.slice(r)}`)}if("function"!==t.type){if("integer"===t.type){if("."===n){t.parentFunction&&t.parentFunction.arguments.pop(),t={type:"float",parentFunction:t.parentFunction,closed:!1,value:t.value+n},t.parentFunction&&t.parentFunction.arguments.push(t),o();continue}if(n>="0"&&n<="9"){if(t.closed)throw Oi(`Integer has unexpected whitespace near: ${e.slice(r-1)}`);t.value+=n,o();continue}if(","===n&&t.parentFunction){a(t.parentFunction);continue}if(i()){const e=s();if(e)return e;continue}if(/^\s$/.test(n)){t.closed=!0,o();continue}throw Oi(`Unexpected character "${n}" after integer near: ${e.slice(r)}`)}if("float"===t.type){if(n>="0"&&n<="9"){if(t.closed)throw Oi(`Floating number has unexpected whitespace near: ${e.slice(r-1)}`);t.value+=n,o();continue}if(","===n&&t.parentFunction){a(t.parentFunction);continue}if(i()){const e=s();if(e)return e;continue}if(/^\s$/.test(n)){t.closed=!0,o();continue}throw Oi(`Floating number has an unexpected character "${n}" near: ${e.slice(r)}`)}if("string"!==t.type){if("variable"===t.type){if(n>="0"&&n<="9"||"_"===n||n>="a"&&n<="z"||n>="A"&&n<="Z"){if(t.closed)throw Oi(`Unexpected whitespace near: ${e.slice(r-1)}`);t.name+=n,o();continue}if("("===n){t.parentFunction&&t.parentFunction.arguments.pop(),t={type:"function",parentFunction:t.parentFunction,closed:!1,name:t.name,startedAt:t.startedAt,arguments:[]},t.parentFunction&&t.parentFunction.arguments.push(t),o();continue}if(","===n&&t.parentFunction){a(t.parentFunction);continue}if(i()){const e=s();if(e)return e;continue}if(/^\s$/.test(n)){t.closed=!0,o();continue}throw Oi(`Unexpected character "${n}" in an identifier near: ${e.slice(r-1)}`)}}else{if(t.closed){if(","===n&&t.parentFunction){a(t.parentFunction);continue}if(i()){const e=s();if(e)return e;continue}if(/^\s$/.test(n)){o();continue}throw Oi("Unexpected characters after a closed string at index "+r+": "+e.slice(r))}if(void 0===n)throw Oi(`${t.doubleQuoted?"Double":"Single"}-quoted string was not closed. Started with: ${e.slice(t.startedAt)}`);if("\\"===n){if("\\"!==e[r+1]&&'"'!==e[r+1]&&"'"!==e[r+1])throw Oi(`Backslash cannot escape character ${e[r+1]} near: ${e.slice(r)}`);t.value+=e[r+1],o()}else t.doubleQuoted&&'"'===n||!t.doubleQuoted&&"'"===n?t.closed=!0:t.value+=n;o()}}else{if(","===n){if(t.closed)throw Oi("Unexpected comma after a closed top-level function near: "+e.slice(r));if(0===t.arguments.length)throw Oi("Function was not closed or first argument missing. Started at index "+t.startedAt+" with: "+e.slice(t.startedAt));a(t);continue}if(i()){const e=s();if(e)return e;continue}if(/^\s$/.test(n)){o();continue}if(t.closed)throw Oi(`Unexpected character "${n}" near: ${e.slice(r)}`);t={type:"initial",parentFunction:t}}}},Ci=({expression:e,functions:t,variables:r})=>bi({expression:Pi(e),functions:t,variables:r});var Ni=function(e,t){return Ni=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},Ni(e,t)};function Di(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Ni(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function Ai(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError;let xi;const Fi=async()=>{if(xi)return;const e=await a.e(901).then(a.bind(a,1333)),{utils:t}=e,r=Ai(e,["utils"]);xi=Object.assign(Object.assign({},r),t.symbols)},Li=()=>xi,Mi=e=>{let{expression:t,record:r,propPath:n,role:o,componentIsInput:a,formatter:i,logger:s}=e;try{const e=Ci({expression:t,variables:r,functions:Li()});return Ri({value:e,role:o,componentIsInput:a,propPath:n,utils:{formatter:i}})}catch(e){return s.log("Failed to evaluate expression: "+e),""}},Ui=e=>{let{recordStore:t}=e;return t().fold((()=>null),(e=>e.isCursorPaging()))},ki=e=>{let{state:t}=e;const{size:r}=Kr(t);return r},Gi=e=>{let{state:t}=e;const{offset:r}=Kr(t);return r},ji=e=>{let{state:t}=e;const{size:r,numPagesToShow:n}=Kr(t);return r*n},Vi=e=>{let{state:t}=e;const r=pn(t);return null==r?null:r},Wi=e=>{let{state:t}=e;if(null==Vi({state:t}))return null;const{features:r}=j;if(r.newCurrentPageIndex){const{size:e,offset:r}=Kr(t);return r/e+1}const{size:n,offset:o,numPagesToShow:a}=Kr(t);return o/n+a},Bi=e=>{let{recordStore:t}=e;return t().fold((()=>null),(e=>e.getDatasetSize()))},qi=e=>{let{state:t,recordStore:r}=e;const n=Bi({recordStore:r});return n?Math.ceil(n.total/ki({state:t})):null},zi=e=>{let{recordStore:t}=e;return t().fold((()=>!1),(e=>{const t=e.getDatasetSize();return e.isCursorPaging()&&!(null==t||!t.cursor)}))},Hi=e=>{let{state:t}=e;const r=Vi({state:t});return null!=r&&r>0},$i=e=>{let{state:t,recordStore:r}=e;if(zi({recordStore:r}))return!0;const n=Bi({recordStore:r});if(!n)return!1;const o=Vi({state:t});return null!=o&&o<n.total-1},Yi=e=>{let{state:t}=e;const{offset:r}=Kr(t);return r>0},Xi=e=>{let{state:t,recordStore:r}=e;if(zi({recordStore:r}))return!0;const n=Bi({recordStore:r});if(!n)return!1;const{offset:o,size:a}=Kr(t);return o+a<n.total},Ji=async e=>{let{index:t,recordStore:r}=e;await r().fold((()=>{}),(e=>e.getRecords(t,1)))},{Checkbox:Ki,Dropdown:Qi}=rt,Zi=e=>e.type===Ki?"checked":"value",es=e=>{let{component:t,connectionConfig:r,currentRecord:n,previousRecord:o,getFieldType:a,formatter:i,modeIsLivePreview:s,logger:c,PresetVerboseMessage:l,recordStore:d,actions:u}=e;const{role:p,isInput:f}=t,{properties:h={},totalCount:m,expressions:g={}}=r,y={};if(m&&!u.isCursorPaging()){var v;const e=null==(v=Bi({recordStore:d}))?void 0:v.total;if("number"==typeof e){const r=Ri({value:e,role:p});t.setValue(r,{propPath:m.prop})}}n&&(et(g).forEach((e=>{let[r,{expression:o}]=e;const a="$text"===r?"text":r,s=Mi({expression:o,record:n,propPath:a,role:p,componentIsInput:f,formatter:i,logger:c});y[a]=s,t.setValue(s,{propPath:a})})),et(h).forEach((e=>{let[r,l]=e;try{const{fieldName:e,format:c}=l,d=a(e).getOrElse(void 0),u=Ri({value:ka(n,e),role:p,componentIsInput:f,fieldType:d,propPath:r,format:c,utils:{formatter:i}});if(y[r]=u,(e=>{let{previousRecord:t,currentRecord:r,fieldName:n}=e;return(e=>!e)(t)||Ga({previousRecord:t,currentRecord:r,fieldName:n})})({currentRecord:n,previousRecord:o,fieldName:e})){if(s&&(e=>void 0===e||""===e||Array.isArray(e)&&0===e.length)(u))return;t.setValue(u,{propPath:r,fieldType:d,binding:l})}}catch(e){c.log(new N("Failed setting "+r,{cause:e}))}})),c.log(new l(He.types.COMPONENT.FILLED,{component:t,description:y})))},ts=e=>{let{getConnectedComponents:t,getFieldType:r}=e;return e=>{const n=t();if(!n)return Qe.Maybe.Nothing();const o=n.filter((e=>{let{role:t}=e;return t===oe}));return xa(e).map((e=>{let{field:t,condition:n,value:a,positive:i}=e;const s=((e,t)=>e.map((e=>e===Ua&&"string"==typeof t&&/^[+-]?(?:\d+\.?\d*|\d*\.?\d+)$/.test(t.trim())?Number(t):e===Ma&&0===(0,M.get)(t,"length",0)?null:t)).getOrElse(t))(r(t),((e,t)=>{const{filterId:r}=e,n=t.find((e=>e.connectionConfig.filters[r]));if(!n)return;const o=Zi(n);return n.getValue({propPath:o})})(a,o));if(!s&&0!==s)return{$and:[]};const c={[t]:{[n]:s}};return i?c:{$not:[c]}}))}};var rs=a(4479),ns=a(8031),os=a(3878);const as=e=>(0,rs.X)(e)||(0,ns.X)(e)||ss(e),is=e=>{let{valueResolvers:t,getConnectedComponents:r,getFieldType:n,getUserFilterInitialData:o,wasSetFilterCalled:a}=e;return e=>{const i=Na(as,(e=>(0,rs.X)(e)?t.currentUser():(0,ns.X)(e)?t.dataBinding(e):ss(e)?t.userInput(e):void 0),e).map((e=>{if(a())return e;const t=r().filter((e=>{let{role:t}=e;return De.includes(t)})).map((e=>{const{userInputFilter:t}=e.connectionConfig,{prop:r,fieldName:a}=t,i=e.getValue({propPath:r}),s=Qn(a)?Wn(a):a;if([Ae,"",!1].includes(i)||(0,M.isEqual)(i,[])||e.role===Ne&&(0,M.isEqual)(i,e.getBounds()))return null;const c=(e=>{let{value:t,fieldType:r,fieldName:n,getUserFilterInitialData:o}=e;switch(r){case m.FieldType.reference:{var a;const e=null==(a=o())?void 0:a.find((e=>e.fieldName===n&&xe.includes(e.role)));if(!e)return null;const{referencedItemIdsByOption:r}=e;return(0,M.isArray)(t)?t.flatMap((e=>r[e])):r[t]}case m.FieldType.number:return Array.isArray(t)?t.map(Number):Number(t);default:return t}})({value:i,fieldType:n(s).getOrElse(null),fieldName:a,getUserFilterInitialData:o});if(null===c)return null;return{[s]:e.role===Ne?{$gte:c[0],$lte:c[1]}:Array.isArray(c)?{$hasSome:c}:c}})).filter(Boolean);return 0===t.length?e:{$and:[e].filter(Boolean).concat(t)}}));return i}},ss=e=>xa(e).map((e=>{let{value:t}=e;return(0,os.X)(t)})).getOrElse(!1),cs=e=>Pa(ns.X,e),ls=e=>!(0,M.isEmpty)(Pa(os.X,e)),ds=e=>ls(e)||(e=>!(0,M.isEmpty)(Pa(rs.X,e)))(e)||(e=>cs(e).length>0)(e),{WRITE:us}=e,ps=(e,t,r)=>{const{readWriteType:n,deferred:o,filter:a,collectionName:i}=e,s=n===us,c=r.some((e=>{let{role:t}=e;return t===ne})),l=t===br,d=Boolean(o)&&!(c||l||s),u=a&&ds(a),p=(e=>{let{collectionId:t,datasetHasDynamicFilter:r,datasetIsDeferred:n,datasetIsRouter:o,datasetIsWriteOnly:a}=e;return t?r||n||o||a?"REGULAR":Ta:"UNCONFIGURED"})({collectionId:i,datasetHasDynamicFilter:u,datasetIsDeferred:d,datasetIsRouter:l,datasetIsWriteOnly:s});return{sequenceType:p,datasetIsWriteOnly:s,datasetIsMaster:c,datasetIsRouter:l,datasetIsDeferred:d,datasetHasDynamicFilter:u}},fs=e=>{const t=(0,M.values)({DATASET:Tr,ROUTER_DATASET:br});return e.map((e=>{const{id:r,type:n,collectionId:o,filter:a,sort:i,pageSize:s,readWriteType:c,includes:l,nested:d,deferred:u,connections:p,dataIsInvalidated:f,updatedCompIds:h,dynamicPageData:m,cursor:g}=e;t.includes(n)||j.logger.log(new N("type of controller MUST be one of "+t+" but is "+n));const y=(0,M.defaults)({collectionName:o,filter:a,sort:i,includes:l,nested:d,pageSize:s,readWriteType:c,cursor:g,deferred:u,uniqueFieldValues:[]},Lt);return{id:r,compId:r,type:n,livePreviewOptions:{shouldFetchData:f,compsIdsToReset:h},connections:p,dynamicPageData:m,config:{dataset:y,datasetStaticConfig:ps(y,n,p)}}}))},hs=Symbol("isPristine"),ms=e=>e._id,gs=e=>({...e,[hs]:!1}),ys=(e,t)=>({...e,_id:t||O().v4(),[hs]:!0}),vs=(e,t)=>e&&t&&e._id===t._id,_s=e=>(0,M.omit)(e,[hs]),Es=e=>{let{record:t,draft:r,includes:n,nestedFieldKeys:o,fieldKey:a}=e;return(e=>{let{includes:t,nestedFieldKeys:r,fieldKey:n}=e;const o=null==t?void 0:t.includes(n),a=r.includes(n);return o||a})({includes:n,nestedFieldKeys:o,fieldKey:a})&&(e=>{let{record:t,draft:r,fieldKey:n}=e;return(0,M.isPlainObject)(t[n])&&(0,M.isPlainObject)(r[n])})({record:t,draft:r,fieldKey:a})},Is={chain:e=>t=>e.matchWith({Empty:()=>e,Results:e=>{let{items:r,datasetSize:n,offset:o}=e;return t({items:r,datasetSize:n,offset:o})}}),map:e=>t=>e.matchWith({Empty:()=>e,Results:e=>{let{items:r,datasetSize:n,offset:o}=e;const{items:a=r,datasetSize:i=n,offset:s=o}=t({items:r,datasetSize:n,offset:o});return ws.Results(a,i,s)}}),filter:e=>t=>e.matchWith({Empty:()=>e,Results:r=>{let{items:n,datasetSize:o,offset:a}=r;return t({items:n,datasetSize:o,offset:a})?e:ws.Empty()}}),orElse:e=>t=>e.matchWith({Empty:()=>t(),Results:()=>e}),get:e=>()=>e.matchWith({Empty:()=>({items:[],datasetSize:{total:0,loaded:0},offset:0}),Results:e=>e}),of:()=>Ss},ws=(0,Qe.union)("QueryResults",{Empty:()=>({}),Results:function(e,t,r){return void 0===r&&(r=0),{items:e,datasetSize:t,offset:r}}},Is);function Ss(e){let{items:t,datasetSize:r,offset:n}=e;return r&&Math.max(r.total,r.loaded)>0&&Array.isArray(t)?ws.Results(t,r,n):ws.Empty()}const Rs={Empty:ws.Empty,Results:ws.Results,fromWixDataQueryResults:function(e,t){return e?this.of({items:e.items,datasetSize:e.datasetSize,offset:t}):ws.Empty()},of:Ss},Ts=e=>t=>({...t,...e}),bs=(e,t)=>r=>t(e(r))(r),Os=(e,t,r)=>{const n=new Map;return function(){for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];const s=t(a),c=n.get(s);if(c&&r(a,c.args))return c.result;const l=e.apply(this,a);return n.set(s,{args:a,result:l}),l}},Ps=e=>Ts({records:e}),Cs=e=>t=>{var r,n,o;return{...t,datasetSize:{cursor:null==(r=t.datasetSize)?void 0:r.cursor,total:((null==(n=t.datasetSize)?void 0:n.total)||0)+e,loaded:((null==(o=t.datasetSize)?void 0:o.loaded)||0)+e}}},Ns=e=>{let{cursor:t,loaded:r,total:n}=e;return e=>({...e,datasetSize:{cursor:t,loaded:r+Fs(e),total:n+Fs(e)}})},Ds=e=>({...e,numSeedRecords:e.records.length}),As=e=>e.matchWith({Empty:()=>Ns({total:0,loaded:0}),Results:e=>{let{items:t,datasetSize:r}=e;return(0,M.flow)(Ps(t.map((e=>ms(e)))),Ns(r),Ds)}}),xs=e=>t=>({...t,newRecordMarkers:e(t.newRecordMarkers)}),Fs=(e,t)=>e.newRecordMarkers.filter((e=>null==t||e<=t)).length,Ls=function(e,t,r){let{overwrite:n=!0,fixIndex:o=!0}=void 0===r?{}:r;return bs((r=>{const a=e+(o?Fs(r,e):0),i=Math.max(0,a-r.records.length),s=a+(n?t.length:0);return r.records.slice(0,a).concat(new Array(i)).concat(t.map((e=>ms(e)))).concat(r.records.slice(s))}),Ps)},Ms=(e,t,r)=>n=>Object.assign({},e(n),...r.map((e=>({[t(e)]:e})))),Us=(e,t,r)=>n=>({...e(n),[t]:r(e(n)[t])}),ks=(e,t)=>r=>Object.assign({},...Object.keys(e(r)).filter((e=>e!==t)).map((t=>({[t]:e(r)[t]})))),Gs=e=>Ts({records:e}),js=e=>Ts({drafts:e}),Vs=(0,M.curry)(((e,t,r)=>Ts({scopes:{...r.scopes,[e]:t}})(r))),Ws=e=>t=>t.scopes[e],Bs=e=>bs(Ms((e=>{let{records:t}=e;return t}),ms,e),Gs),qs=e=>bs(Ms((e=>{let{drafts:t}=e;return t}),ms,[e]),js),zs=e=>bs(ks((e=>{let{drafts:t}=e;return t}),ms(e)),js),Hs=()=>js({}),$s=e=>e.matchWith({Empty:()=>e=>e,Results:e=>{let{items:t}=e;return t.length>0?Bs(t):e=>e}}),Ys=(e,t)=>bs(Us((e=>{let{drafts:t}=e;return t}),e,(0,M.flow)(gs,(e=>t=>Object.entries(e).reduce(((e,t)=>{let[r,n]=t;return(0,M.set)(e,r,n)}),(0,M.cloneDeep)(t)))(t))),js),Xs=(e,t,r,n)=>{const o=t.records[e],a=t.drafts[e],i=(0,M.isPlainObject)(o),s=(0,M.isPlainObject)(a);return i&&s?(e=>{let{record:t,draft:{_id:r,...n},includes:o,nestedFieldKeys:a}=e;const i=Object.keys(n).filter((e=>Es({record:t,draft:n,includes:o,nestedFieldKeys:a,fieldKey:e}))),s={...t,...n};return i.reduce(((e,r)=>({...e,[r]:(0,M.merge)({},t[r],n[r])})),s)})({record:o,draft:a,includes:r,nestedFieldKeys:n}):i?{...o}:s?{...a}:null},Js=(0,M.curry)(((e,t,r)=>Object.keys(r.scopes).filter((e=>t(r.scopes[e],e))).map((t=>e(r.scopes[t],t))))),Ks=(0,M.curry)((function(e,t,r,n,o,a,i){void 0===i&&(i=!1);const{records:s,datasetSize:c}=Ws(e)(a),l=r-t,d=s.slice(t,r).reduce(((e,t)=>{const r=Xs(t,a,n,o);return null!=r?e.concat(_s(r)):e}),[]);return Rs.of({items:d,datasetSize:c,offset:t}).filter((function(e){let{items:t}=e;return i||t.length>=l}))})),Qs=(0,M.curry)(((e,t)=>bs((0,M.flow)(Ws(e),t),Vs(e)))),Zs=(0,M.curry)(((e,t)=>Ts({[e]:t}))),ec=e=>t=>t[e],tc=(0,M.curry)(((e,t)=>bs((0,M.flow)(ec(e),t),Zs(e)))),rc=e=>e===Je,nc=e=>{let[{datasetId:t}]=e;return t},oc=(e,t)=>{let[r]=e,[n]=t;return(0,M.every)(r,((e,t)=>{return"filter"===t?(r=e,o=n[t],JSON.stringify(r)===JSON.stringify(o)):e===n[t];var r,o}))},ac=e=>{let{primaryDatasetId:t,recordStoreCache:r,refreshStoreCache:n,dataProvider:o,mainCollectionName:a,includes:i,nestedFieldKeys:s,uniqueFieldValues:c,readWriteType:l,cursorPagingRequired:d}=e;const{breadcrumbReporting:u}=j,p=()=>r[t],f=e=>{r[t]=e};((0,M.isEmpty)(p())||n||rc(l))&&f((e=>({[e]:{records:{},drafts:{},scopes:{}}}))(a));const h=[],g=Os((e=>{let{pageSize:t,sort:r,filter:n,datasetId:g,referencedCollectionName:y,fixedRecordId:v}=e;const _=null!=y?y:a,E=JSON.stringify({filter:n,sort:r}),I=ec(_),w=tc(_),S=(0,M.flow)(I,Ws(E)),R=Qs(E),T=()=>o.getSchema(_),b=e=>e-e%t,O=(0,M.memoize)((e=>{let{offset:t,length:a,datasetSize:s}=e;return o.getData({datasetId:g,length:a,collectionId:_,cursorPaging:U.isCursorPaging(),offset:t,filter:n,sort:r,includes:null!=y?void 0:i,uniqueFieldValues:c,datasetSize:s}).then((e=>({items:e.items,datasetSize:e.datasetSize,offset:t})))}),(e=>{let{offset:t,length:r,datasetSize:n}=e;return[t,r,null==n?void 0:n.cursor].join("-")})),P=e=>U.isCursorPaging()?(async e=>{const t=[];let{datasetSize:r}=S(p());for(const{offset:n,length:o}of e){const e=await O({offset:n,length:o,datasetSize:r});if(t.push(e),r=e.datasetSize,!r.cursor)break}return t})(e):Promise.all(e.map((e=>{let{offset:t,length:r}=e;return O({offset:t,length:r})}))),C=(e,r,n)=>{const o=U.isCursorPaging()?0:b(r),a=(i=r,s=n,Math.ceil((b(i)+(s-b(i)))/t)*t);var i,s;const c=Kn(T())||m.DefaultMaxPageSize[U.getPaging()],l=((e,t,r)=>{const n=e.records.slice(t,r),o=n.findIndex(u),a=((e,t)=>{if(t.length>0)for(let r=t.length-1;r>=0;r-=1)if(e(t[r]))return r;return-1})(u,n),i=p(o,t),s=p(a,r),c=Fs(e,i),l=i-c,d=s-c-l;return 0===d?Qe.Maybe.Nothing():Qe.Maybe.Just({offset:l,length:d});function u(e){return"string"!=typeof e}function p(t,r){return-1===t?Math.max(e.records.length,r):o+r}})(e,o,a),d=l.map((e=>{let{offset:t,length:r}=e;return r<=c?[{offset:t,length:r}]:(0,M.flatten)((0,M.times)(Math.ceil(r/c),(e=>[{offset:t+e*c,length:Math.min(c,r-e*c)}])))})).getOrElse([]);return P(d)},N=(e,t,r)=>Oa()(Qe.Result,h.map((n=>Qe.Result.try((()=>n(null!=e?_s(e):null,null!=t?_s(t):null,r)))))),D=function(e,t,r){const n=S(p()).records[r],o=Xs(n,I(p()),i,s);if(null==o)return t();{const t=function(){f((0,M.flow)(...arguments)(p()))},d=e=>{const t=Xs(n,I(p()),i,s);return(0,M.isEqual)(o,t)?Qe.Result.Ok([]):N(o,t,e)};for(var a=arguments.length,c=new Array(a>3?a-3:0),l=3;l<a;l++)c[l-3]=arguments[l];return e({update:t,notifyIfChanged:d},o,r,...c)}},A=(e,t)=>function(r){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return D(e,t,r,...o)},x=(e,t)=>async function(r){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return D(e,t,r,...o)},F=(e,t)=>u(t,Be.with({category:"recordStore",message:e,data:{datasetId:g,scope:E}})),L=e=>{return e&&(t=ms(e),!I(p()).records[t]);var t},U={getRecords:F("getRecords",(async(e,t)=>{const{datasetSize:r}=S(p()),n=(e=>{let{from:t,length:r,datasetSize:n,cursorPaging:o}=e;if(!n)return t+r;const{total:a,loaded:i,cursor:s}=n,c=o?s?1/0:i:a;return Math.min(t+r,c)})({from:e,length:t,datasetSize:r,cursorPaging:U.isCursorPaging()}),o=Ks(E,e,n,i,s),a=rc(l)||!r||(e=>{let{loaded:t,total:r,cursor:n}=e;return!t&&!r&&!n})(r);return o(I(p()),a).orElse((async()=>{const t=await C(S(p()),e,n),r=w((0,M.flow)(...t.map((e=>{let{items:t,datasetSize:r,offset:n}=e;return Rs.fromWixDataQueryResults({items:t,datasetSize:r},n)})).map((e=>(0,M.flow)($s(e),R(e.matchWith({Empty:()=>Ns({total:0,loaded:0}),Results:e=>{let{items:t,datasetSize:r,offset:n}=e;return(0,M.flow)(Ns(r),t.length>0?Ls(n,t):e=>e)}}))))))),a=p();var i,s;return f(r(p())),i=I(a),s=I(p()),Object.keys(i.records).filter((e=>(0,M.isPlainObject)(s.records[e])&&s.records[e]._updatedDate>i.records[e]._updatedDate)).forEach((e=>N(i.records[e],s.records[e]))),o(I(p()),!0)}))})),getRecordsLimitedByMaxPageSize:(e,t)=>{const r=Math.min(t,Kn(T())||t);return U.getRecords(e,r)},seed:F("seed",(()=>{if(0===S(p()).numSeedRecords){return(v?o.getData({datasetId:g,length:t,collectionId:_,cursorPaging:void 0,offset:0,filter:n,sort:r,includes:null!=y?void 0:i,uniqueFieldValues:c}):o.getInitialData({datasetId:g,collectionId:_,filter:n,sort:r,includes:i,length:t,uniqueFieldValues:c})).then((e=>{const t=Rs.fromWixDataQueryResults(e,0),r=w((0,M.flow)($s(t),R(As(t))));f(r(p()))}))}return Promise.resolve()})),getTheStore:p,getPaging:()=>(({schema:e,cursorPagingPreferred:t})=>{var r,n,o;const a=null===(r=null==e?void 0:e.pagingMode)||void 0===r?void 0:r.includes(m.PagingMode.Offset),i=null===(n=null==e?void 0:e.pagingMode)||void 0===n?void 0:n.includes(m.PagingMode.Cursor);return 1===(null===(o=null==e?void 0:e.pagingMode)||void 0===o?void 0:o.length)&&i||a&&i&&t?m.PagingMode.Cursor:m.PagingMode.Offset})({schema:T(),cursorPagingPreferred:d}),isCursorPaging:()=>U.getPaging()===m.PagingMode.Cursor,getSeedRecords:F("getSeedRecords",(()=>Ks(E,0,S(p()).numSeedRecords,i,s,I(p()),!0))),getDatasetSize:F("getDatasetSize",(()=>S(p()).datasetSize)),getRecordById:F("getRecordById",(e=>Qe.Maybe.fromNullable(I(p()).records[e]))),removeRecord:F("removeRecord",x((async(e,t)=>{let{update:r,notifyIfChanged:n}=e;const a=ms(t);!L(t)&&a&&await o.remove({collectionId:_,recordId:a}),O.cache.clear();const i=Js(((e,t)=>{return Qs(t,(0,M.flow)((n=a,bs((e=>e.records.filter((e=>e!==n))),Ps)),Cs(-1),xs((r=((e,t)=>t.records.indexOf(e))(a,e),e=>e.filter((e=>e!==r))))));var r,n}),(s=a,e=>e.records.includes(s)),I(p()));var s;return r(w((0,M.flow)((0,M.flow)(zs(t),(e=>bs(ks((e=>{let{records:t}=e;return t}),e),Gs))(a)),...i))),n()}),(()=>Promise.resolve(Qe.Result.Error("cannot remove record: index not found"))))),reset:F("reset",(()=>{O.cache.clear(),f(w((0,M.flow)(Vs(E,{records:[],numSeedRecords:0,newRecordMarkers:[]}),Hs()))(p()))})),newRecord:F("newRecord",((e,t)=>{const r=ys(t),n=w((0,M.flow)(qs(r),R((0,M.flow)(Cs(1),Ts({newRecordMarkers:[e]}),Ls(e,[r],{overwrite:!1,fixIndex:!1})))));return f(n(p())),N(null,r),_s(r)})),saveRecord:F("saveRecord",x((async(e,t,r)=>{let{update:n,notifyIfChanged:a}=e;const i=await o.save({collectionId:_,record:_s(t),includeReferences:!0});return n(w((0,M.flow)((e=>Bs([e]))(i),zs(t),R((0,M.flow)(((e,t)=>Ls(e,[t],{fixIndex:!1}))(r,i),xs((e=>e.filter((e=>e!==r))))))))),a(),_s(i)}),(()=>Promise.reject(new Error("cannot save record: index not found"))))),setFieldsValues:F("setFieldsValues",A(((e,t,r,n,o)=>{let{update:a,notifyIfChanged:i}=e;return Object.keys(n).length&&a(w(Ys(ms(t),n))),i(o)}),(()=>Qe.Result.Error("cannot update field values: index not found")))),isPristine:F("isPristine",A(((e,t)=>(e=>"boolean"!=typeof e[hs]||e[hs])(t)),(()=>!0))),hasDraft:F("hasDraft",A(((e,t)=>(e=>"boolean"==typeof e[hs])(t)),(()=>!1))),isNewRecord:F("isNewRecord",A(((e,t)=>L(t)),(()=>!0))),clearDrafts:F("clearDrafts",(()=>{f(w(Hs())(p()))})),resetDraft:F("resetDraft",A(((e,t,r,n)=>{let{update:o,notifyIfChanged:a}=e;return o(w(L(t)?((e,t)=>bs(Us((e=>{let{drafts:t}=e;return t}),ms(e),(e=>ys(t,e._id))),js))(t,n):zs(t))),a()}),(()=>Qe.Result.Error("cannot reset draft: index not found")))),hasSeedData:F("hasSeedData",(()=>S(p()).numSeedRecords>0)),getUniqueFieldValues:F("getUniqueFieldValues",(e=>o.getUniqueFieldValues({collectionId:_,fieldKey:e})))};if(I(p())||f(Zs(_,{records:{},drafts:{},scopes:{}})(p())),!I(p()).scopes[E]){const e=[];if(v){const t=o.getRecord({collectionId:_,recordId:v,includes:i})||Xs(v,I(p()),i,s),r=t?[t]:[],n=r.length>0?Rs.of({items:r,offset:0,datasetSize:{loaded:r.length,total:r.length}}):Rs.Empty(),a=n.matchWith({Empty:Qe.Maybe.Nothing,Results:(0,M.flow)(Rs.of,Qe.Maybe.Just)});(0,M.some)(r,L)&&e.push($s(n)),a.fold((()=>{e.push(Vs(E,{records:[],numSeedRecords:0,newRecordMarkers:[]}))}),(t=>{e.push(Vs(E,As(t)({records:[],numSeedRecords:0,newRecordMarkers:[]})))}))}else e.push(Vs(E,{records:[],numSeedRecords:0,newRecordMarkers:[]}));f(w((0,M.flow)(...e))(p()))}return U.externalApi={getRecords:async(e,t)=>(await U.getRecords(e,t)).map((e=>{let{items:t,...r}=e;return{items:(0,M.cloneDeep)(t),...r}})),getSeedRecords:()=>U.getSeedRecords().map((e=>{let{items:t,...r}=e;return{items:(0,M.cloneDeep)(t),...r}})),getRecordsLimitedByMaxPageSize:async(e,t)=>(await U.getRecordsLimitedByMaxPageSize(e,t)).map((e=>{let{items:t,...r}=e;return{items:(0,M.cloneDeep)(t),...r}}))},U}),nc,oc);var y;return g.onChange=(y=h,e=>(y.push(e),()=>{const t=y.indexOf(e);t>=0&&y.splice(t,1)})),g},ic=e=>{const t={};return{setController:(r,n)=>{let{repeaterId:o,itemId:a}=r;e.log(new Be({category:"scopeStore",message:"adding scope",data:{componentId:o,itemId:a}})),t[o]=t[o]||{},t[o][a]=n},getController:e=>{let{repeaterId:r,itemId:n}=e;const o=t[r];return o&&o[n]},removeController:r=>{let{repeaterId:n,itemId:o}=r;e.log(new Be({category:"scopeStore",message:"removing scope",data:{componentId:n,itemId:o}}));const a=t[n];(0,M.get)(a,o)&&(a[o].dispose(),(0,M.unset)(a,o))},getAll:()=>Object.values(t).reduce(((e,t)=>e.concat(Object.values(t))),[])}};var sc=a(7538);const cc=(0,Qe.union)("GoToIndexResult",{Record:(e,t)=>({index:e,record:t}),InvalidIndex:()=>({}),NoRecord:()=>({})}),lc=function(e,t){return void 0===t&&(t=!1),{type:Wt,index:e,suppressRefreshView:t}},dc=(e,t)=>({type:Ut,fieldsToUpdate:e,updateSource:t}),uc=e=>({type:er,atIndex:e}),pc=()=>({type:rr}),fc=async(e,t,r,n)=>{const o=await e(n).fold((()=>Rs.Empty()),(e=>e.externalApi.getRecords(t,r)));return o.get()},hc=(e,t)=>fc(e,Gi({state:t}),ji({state:t})),mc=e=>({type:nr,userFilterInitialData:e}),gc={doFetch:fc,fetchCurrentPage:hc,flushDraft:()=>({type:Jt}),goToRecordByIndexResult:(e,t)=>({type:Ht,error:e,payload:t}),incrementNumOfPagesToShow:()=>({type:jt}),initWriteOnly:e=>e?lc(0):uc(0),loadPage:e=>({type:zt,pageNumber:e}),newRecord:uc,newRecordResult:(e,t)=>({type:tr,error:e,payload:t}),nextPage:()=>({type:Bt}),previousPage:()=>({type:qt}),reInitWriteOnly:()=>uc(0),refresh:pc,refreshCurrentRecord:()=>({type:kt}),refreshCurrentView:()=>({type:Gt}),refreshResult:(e,t)=>({type:Ht,error:e,payload:t}),remove:()=>({type:Qt}),removeCurrentRecordResult:(e,t)=>({type:Zt,error:e,payload:t}),revert:()=>({type:Yt}),revertResult:(e,t)=>({type:Xt,error:e,payload:t}),saveRecordResult:(e,t)=>({type:Kt,error:e,payload:t}),setCurrentIndex:lc,setCurrentRecord:(e,t,r)=>({type:Mt,record:e,recordIndex:t,updateSource:r}),setDefaultRecord:e=>({type:Vt,record:e}),updateCurrentViewResult:(e,t)=>({type:$t,error:e,payload:t}),updateFields:dc,GoToIndexResult:cc},yc=e=>({type:jr,connections:e}),vc=e=>({type:cr,filter:e}),_c=e=>({type:lr,sort:e}),Ec=e=>({type:dr,isDatasetReady:e});var Ic=a(6286),wc=a.n(Ic);const Sc=(e,t)=>{const{middleware:r,subscribe:n,onIdle:o}=wc().createMiddleware(),a=xt($r,void 0,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error(Pt(15))},o={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},a=t.map((function(e){return e(o)}));return n=Ft.apply(void 0,a)(r.dispatch),Ot(Ot({},r),{},{dispatch:n})}}}(r,((e,t)=>()=>r=>n=>(e.log(new Be({category:"redux",message:n.type+" (dataset: "+t+")",data:(0,M.omit)(n,"type","record")})),r(n)))(e,t)));return{store:a,subscribe:n,onIdle:o}},{READ:Rc,WRITE:Tc,READ_WRITE:bc}=e,Oc={[Rc]:"read-only",[Tc]:"write-only",[bc]:"read-write"},Pc=(e,t)=>{if(e)throw new A("Operation ("+t+") not allowed on a dataset with non-offset paging mode",{code:"OPERATION_NOT_ALLOWED"})},Cc=(e,t)=>{if(r=e(),Rr.isDuringSave(r.records))throw new A("Operation ("+t+") not allowed during save",{code:"OPERATION_NOT_ALLOWED"});var r},Nc=function(e,t,r,n,o){void 0===t&&(t=""),void 0===o&&(o=!0),((e,t,r)=>{if(!Zr(e()))throw new A(r===br?"Operation ("+t+") is not allowed because the field used to build this page's URL is empty":"Operation ("+t+") not allowed on an unconfigured dataset",{code:"OPERATION_NOT_ALLOWED"})})(e,t,n),function(e,t,r){void 0===r&&(r=[]);const n=Qr(e());if(!(0,M.includes)(r,n))throw new A("Operation ("+t+") not allowed on "+Oc[n]+" dataset",{code:"OPERATION_NOT_ALLOWED"})}(e,t,r),o||Cc(e,t)},Dc=(e,t)=>{if(!(0,M.isNumber)(t))throw new A("Parameter ("+e+") must be a number",{code:"DS_INVALID_ARGUMENT"})},Ac=(e,t)=>{if(!(0,M.isInteger)(t)||t<1)throw new A("Parameter ("+e+") must be a positive integer number",{code:"DS_INVALID_ARGUMENT"})},xc=(e,t)=>{if(!(0,M.isFunction)(t))throw new A("The callback passed to ("+e+") must be a function",{code:"DS_INVALID_ARGUMENT"})},Fc=(e,t)=>{if(!en(e()))throw new A("The dataset didn't load yet. You need to call "+t+" inside the onReady for the dataset.",{code:"DS_NOT_LOADED"})},Lc=e=>{if(null==Vi({state:e()}))throw new A("There is no current item",{code:"DS_NO_CURRENT_ITEM"})},Mc=(e,t)=>{if(e)throw new A('The "'+t+'" function cannot be called on the dataset because the dataset was selected using a repeated item scope selector.\nRead more about repeated item scope selectors: http://wix.to/94BuAAs/$w.Repeater.html#repeated-item-scope',{code:"OPERATION_NOT_ALLOWED"})},Uc=(e,t)=>{if(e!==br)throw new A('"'+t+'" function on the dataset is not allowed. "'+t+'" can only be called on a Dynamic Page Dataset.',{code:"OPERATION_NOT_ALLOWED"})},kc=e=>{let{datasetType:t,siblingDynamicPageUrlGetter:r}=e;const n={getNextDynamicPage:async()=>null!=r?r.getNextDynamicPageUrl():null,getPreviousDynamicPage:async()=>r?r.getPreviousDynamicPageUrl():null};return(0,M.mapValues)(n,((e,r)=>function(){return Uc(t,r),e(...arguments)}))},{READ:Gc,WRITE:jc,READ_WRITE:Vc}=e,Wc=e=>{let{store:{dispatch:t,getState:r},recordStore:n,eventListeners:{fireEvent:o,register:a},controllerStore:i,datasetId:s,datasetType:c,isFixedItem:l,siblingDynamicPageUrlGetter:d,onIdle:u,dispatcher:p,onReadyAsync:f}=e;const{logger:h,errorReporting:m,breadcrumbReporting:g,verboseReporting:y}=j,v=async function(){try{await t(gc.flushDraft());const n=(e=r(),Rr.selectLastSavedRecord(e.records)||un(r()));return(0,M.cloneDeep)(n)}catch(e){throw p.dispatch("datasetSaveError"),e}var e},_=async function(e,o){void 0===e&&(e=(e=>{let{state:t}=e;const r=Vi({state:t});return null==r?0:r+1})({state:r()})),Fc(r,o),Nc(r,o,[jc,Vc],c,!1),Dc("atIndex",e),await v(),Ui({recordStore:n})&&await Ji({index:e,recordStore:n}),(e=>{let{index:t,datasetSize:{total:r,loaded:n}}=e;if(t<0||t>Math.max(r,n))throw new A("Invalid index",{code:"DS_INDEX_OUT_OF_RANGE"})})({index:e,datasetSize:Bi({recordStore:n})}),await t(gc.newRecord(e))};return e=>{const p=e?(e,t)=>m(e,D.withMessage("An error occurred in one of "+t+" callbacks")):M.identity,E={async isIdle(){await new Promise((e=>{const t=u((()=>{t(),e()}))}))},onBeforeSave:e=>(xc("onBeforeSave",e),Nc(r,"onBeforeSave",[jc,Vc],c,!1),a("beforeSave",p(e,"beforeSave"))),onAfterSave:e=>(xc("onAfterSave",e),Nc(r,"onAfterSave",[jc,Vc],c,!1),a("afterSave",p(e,"afterSave"))),async save(){Nc(r,"save",[jc,Vc],c,!1);const e=await v();return rn(r())&&await t(gc.reInitWriteOnly()),e},async getItems(e,t){Nc(r,"getItems",[Gc,Vc],c,!1),Dc("fromIndex",e),Dc("numberOfItems",t);const{items:o,offset:a,datasetSize:i}=await gc.doFetch(n,e,t);return{items:o,totalCount:Ui({recordStore:n})?void 0:i.total,offset:a}},getTotalCount:()=>(Nc(r,"getTotalCount",[Gc,Vc],c,!1),en(r())?(Pc(Ui({recordStore:n}),"getTotalCount"),Bi({recordStore:n}).total):null),getCurrentItem:()=>{Nc(r,"getCurrentItem",[Gc,jc,Vc],c);const e=un(r());return e?(0,M.cloneDeep)(e):null},getCurrentItemIndex:()=>(Nc(r,"getCurrentItemIndex",[Gc,Vc],c),Vi({state:r()})),async setCurrentItemIndex(e){Mc(l,"setCurrentItemIndex"),Nc(r,"setCurrentItemIndex",[Gc,Vc],c,!1),(e=>{if(!(0,M.isInteger)(e))throw new A("Parameter ("+e+") must be a number",{code:"PARAMETER_NOT_ALLOWED"})})(e),await new Promise((e=>w.onReady(e))),tn(r())||await v(),await t(gc.setCurrentIndex(e))},setFieldValue:(e,n)=>{Fc(r,"setFieldValue"),Nc(r,"setFieldValue",[jc,Vc],c),Lc(r),t(gc.updateFields({[e]:(0,M.cloneDeep)(n)}))},setFieldValues:e=>{Fc(r,"setFieldValues"),Nc(r,"setFieldValues",[jc,Vc],c),Lc(r),t(gc.updateFields((0,M.mapValues)(e,M.cloneDeep)))},async next(){if(Mc(l,"next"),Fc(r,"next"),Nc(r,"next",[Gc,Vc],c,!1),tn(r())||await v(),!w.hasNext())throw new A("There are no more items in the dataset",{code:"NO_SUCH_ITEM"});const e=Vi({state:r()});return await t(gc.setCurrentIndex(e+1)),w.getCurrentItem()},async previous(){if(Mc(l,"previous"),Fc(r,"previous"),Nc(r,"previous",[Gc,Vc],c,!1),tn(r())||await v(),!w.hasPrevious())throw new A("This is the first item in the dataset",{code:"NO_SUCH_ITEM"});const e=Vi({state:r()});return await t(gc.setCurrentIndex(e-1)),w.getCurrentItem()},hasNext:()=>(Nc(r,"hasNext",[Gc,Vc],c),$i({state:r(),recordStore:n})),hasPrevious:()=>(Nc(r,"hasPrevious",[Gc,Vc],c),Hi({state:r()})),new:async e=>_(e,"new"),add:async e=>_(e,"add"),async remove(){Fc(r,"remove"),Nc(r,"remove",[Vc],c,!1);if(null==Vi({state:r()}))throw new A("Invalid index",{code:"DS_INDEX_OUT_OF_RANGE"});await t(gc.remove())},revert:async()=>(Fc(r,"revert"),Nc(r,"revert",[jc,Vc],c,!1),Lc(r),t(gc.revert())),async refresh(){Fc(r,"refresh"),Nc(r,"refresh",[Gc,jc,Vc],c,!1),await t(gc.refresh())},onCurrentIndexChanged:e=>(xc("onCurrentIndexChanged",e),Nc(r,"onCurrentIndexChanged",[Vc,Gc],c,!1),a("currentIndexChanged",p(e,"currentIndexChanged"))),onItemValuesChanged:e=>(xc("onItemValuesChanged",e),Nc(r,"onItemValuesChanged",[Vc,jc],c,!1),a("itemValuesChanged",p(e,"itemValuesChanged"))),onError:e=>(xc("onError",e),Nc(r,"onError",[Vc,Gc,jc],c,!1),a("datasetError",p(e,"datasetError"))),onReady:e=>(xc("onReady",e),Nc(r,"onReady",[Gc,jc,Vc],c,!1),en(r())?(Promise.resolve(p(e)()),M.noop):a("datasetReady",p(e,"datasetReady"))),onReadyAsync:f,async setSort(e){Mc(l,"setSort"),Nc(r,"setSort",[Gc,Vc],c,!1),(e=>{if(!e||!(0,M.isFunction)(e._build))throw new A("The given sort object is invalid",{code:"DS_INVALID_ARGUMENT"})})(e),await new Promise((e=>w.onReady(e))),tn(r())||await v();const n=m((()=>e._build()),D.withMessage("Sort building failed"));await t(_c((0,M.cloneDeep)(n())))},async setFilter(e){Mc(l,"setFilter"),Nc(r,"setFilter",[Gc,Vc],c,!1),(e=>{if(!e||!(0,M.isFunction)(e._build))throw new A("The given filter object is invalid",{code:"DS_INVALID_ARGUMENT"})})(e),await new Promise((e=>w.onReady(e))),tn(r())||await v();const n=m((()=>e._build()),D.withMessage("Filter building failed"));await t(vc((0,M.cloneDeep)(n())))},loadMore:async()=>{Mc(l,"loadMore"),Fc(r,"loadMore"),Nc(r,"loadMore",[Gc,Vc],c,!1),await t(gc.incrementNumOfPagesToShow())},async nextPage(){if(Mc(l,"nextPage"),Fc(r,"nextPage"),Nc(r,"nextPage",[Gc,Vc],c,!1),tn(r())||await v(),!w.hasNextPage())throw new A("There are no more pages in the dataset",{code:"NO_SUCH_PAGE"});await t(gc.nextPage());const{items:e}=await gc.fetchCurrentPage(n,r());return e},async previousPage(){if(Mc(l,"previousPage"),Fc(r,"previousPage"),Nc(r,"previousPage",[Gc,Vc],c,!1),tn(r())||await v(),!w.hasPreviousPage())throw new A("This is the first page in the dataset",{code:"NO_SUCH_PAGE"});await t(gc.previousPage());const{items:e}=await gc.fetchCurrentPage(n,r());return e},hasNextPage:()=>(Nc(r,"hasNextPage",[Gc,Vc],c),Xi({state:r(),recordStore:n})),hasPreviousPage:()=>(Nc(r,"hasPreviousPage",[Gc,Vc],c),Yi({state:r()})),getTotalPageCount:()=>(Nc(r,"getTotalPageCount",[Gc,Vc],c),en(r())?(Pc(Ui({recordStore:n}),"getTotalPageCount"),qi({state:r(),recordStore:n})):null),getCurrentPageIndex:()=>(Nc(r,"getCurrentPageIndex",[Gc,Vc],c),Wi({state:r()})),async loadPage(e){Nc(r,"loadPage",[Gc,Vc],c,!1),Mc(l,"loadPage"),Fc(r,"loadPage"),Pc(Ui({recordStore:n}),"loadPage"),((e,t)=>{if(Ac("pageNumber",e),e>t)throw new A("Page "+e+" does not exist",{code:"NO_SUCH_PAGE"})})(e,w.getTotalPageCount()),tn(r())||await v(),await t(gc.loadPage(e));const{items:o}=await gc.fetchCurrentPage(n,r());return o},inScope:(e,t)=>{Nc(r,"inScope",[Gc,jc,Vc],c,!1);const n=i.getController({repeaterId:e,itemId:t});return n?n.staticExports:w},getPageSize:()=>(Nc(r,"getPageSize",[Gc,Vc],c),ki({state:r()})),async setPageSize(e){Nc(r,"setPageSize",[Gc,Vc],c,!1),Ac("size",e),await new Promise((e=>w.onReady(e))),tn(r())||await v(),await t(sr({size:e}))}},I=kc({datasetType:c,siblingDynamicPageUrlGetter:d}),w=Object.assign(E,I),S={};for(const e in w)S[e]=(0,M.flow)((t=>g(t,Be.with({category:"datasetAPI",message:"method: "+e+" - datasetId:"+s}))),(t=>y(t,e)),(t=>{return $(t,(r=e,e=>{throw e instanceof D?h.log(new D("datasetApi '"+r+"' operation failed",{cause:e})):e instanceof F?h.log(e):h.log(new N("datasetApi '"+r+"' operation failed",{cause:e})),o("datasetError",r,e instanceof x?e.cause.message:e.cause||e),e.cause||e}));var r}))(w[e]);return S}},Bc=function(e){void 0===e&&(e=M.noop);let t=!1,r={};const n=e=>r[e]?r[e]:r[e]=[],o=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return Promise.all(n(e).map((e=>e(...r))))};return{register:(e,r)=>{if(t)return M.noop;const o=(e=>$((function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return Promise.resolve(e(t,...n))}),(e=>Promise.reject(e))))(r);return n(e).push(o),()=>{(0,M.remove)(n(e),(e=>e===o))}},executeHooks:o,fireEvent:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return j.logger.log(new He(He.types.DS_API.TRIGGERED,{eventName:t,eventArgs:n})),e(t,...n),o(t,...n)},dispose:()=>{t=!0,r={}}}},qc=["siteButtonRole","imageButtonRole","stylableButtonRole"],zc=[le,de,oe,we,...De],Hc=e=>e.filter((e=>{let{role:t,isInput:r}=e;return r&&!zc.includes(t)})),$c=(e,t)=>e.filter((e=>{let{role:t}=e;return(0,M.includes)(qc,t)})).filter((e=>{let{connectionConfig:r}=e;return(0,M.includes)(t,(0,M.get)(r,"events.onClick.action"))})),Yc=(e,t,r,n)=>{e.enabled!==t&&(t?e.enable():e.disable(),r.log(new Be({category:"components",message:e.id+" changed to "+(t?"enabled":"disabled")+" (dataset: "+n+")"})))},Xc=(e,t,r,n,o)=>{let{getState:a,subscribe:i}=e;const s={new:()=>!tn(a()),save:()=>nn(a()),revert:()=>nn(a()),remove:()=>nn(a()),next:()=>$i({state:a(),recordStore:o}),previous:()=>Hi({state:a()}),nextPage:()=>Xi({state:a(),recordStore:o}),previousPage:()=>Yi({state:a()}),nextDynamicPage:()=>vn(a()).hasUrl(),previousDynamicPage:()=>_n(a()).hasUrl(),loadMore:()=>(e=>{let{state:t,recordStore:r}=e;if(zi({recordStore:r}))return!0;const n=Bi({recordStore:r});return!!n&&Gi({state:t})+ji({state:t})<n.total})({state:a(),recordStore:o})},{inputComponents:c,linkedComponents:l}=((e,t)=>{const r=(0,M.uniqBy)(e.filter((e=>{let{enabled:t}=e;return t})),(e=>{let{id:t}=e;return t}));return{inputComponents:Hc(r),linkedComponents:$c(r,t)}})(t,Object.keys(s)),d=c.length+l.length?i((e=>{let{getState:t,inputComponents:r,linkedComponents:n,datasetId:o,logger:a,shouldEnableLinkedComponent:i}=e;return()=>{const e=t();if(!en(e))return;const s=nn(e);r.forEach((e=>{Yc(e,s,a,o)})),n.forEach((e=>{const{action:t}=e.connectionConfig.events.onClick,r=i[t]();Yc(e,r,a,o)}))}})({getState:a,inputComponents:c,linkedComponents:l,datasetId:n,logger:r,shouldEnableLinkedComponent:s})):M.noop;return d},Jc={SHORT_DATE:"SHORT_DATE",MEDIUM_DATE:"MEDIUM_DATE",LONG_DATE:"LONG_DATE",FULL_DATE:"FULL_DATE",SHORT_DATE_TIME:"SHORT_DATE_TIME",LONG_DATE_TIME:"LONG_DATE_TIME",FULL_DATE_TIME:"FULL_DATE_TIME",MEDIUM_TIME_12:"MEDIUM_TIME_12",MEDIUM_TIME_24:"MEDIUM_TIME_24",LONG_TIME_12:"LONG_TIME_12",LONG_TIME_24:"LONG_TIME_24",HOUR_ONLY:"HOUR_ONLY",MINUTE_ONLY:"MINUTE_ONLY",YEAR_ONLY:"YEAR_ONLY",MONTH_ONLY:"MONTH_ONLY",SHORT_MONTH_ONLY:"SHORT_MONTH_ONLY",DAY_ONLY:"DAY_ONLY"},Kc=(new Set([Jc.SHORT_DATE_TIME,Jc.LONG_DATE_TIME,Jc.FULL_DATE_TIME,Jc.MEDIUM_TIME_12,Jc.MEDIUM_TIME_24,Jc.LONG_TIME_12,Jc.LONG_TIME_24,Jc.HOUR_ONLY,Jc.MINUTE_ONLY]),{[Jc.SHORT_DATE]:{day:"numeric",month:"numeric",year:"2-digit"},[Jc.MEDIUM_DATE]:{day:"numeric",month:"short",year:"numeric"},[Jc.LONG_DATE]:{day:"numeric",month:"long",year:"numeric"},[Jc.FULL_DATE]:{day:"numeric",month:"long",year:"numeric",weekday:"long"},[Jc.SHORT_DATE_TIME]:{day:"numeric",month:"numeric",year:"2-digit",hour:"numeric",minute:"numeric"},[Jc.LONG_DATE_TIME]:{day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},[Jc.FULL_DATE_TIME]:{day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric",weekday:"long",timeZoneName:"short"},[Jc.MEDIUM_TIME_12]:{minute:"numeric",hour:"numeric",hour12:!0},[Jc.MEDIUM_TIME_24]:{minute:"numeric",hour:"numeric",hour12:!1},[Jc.LONG_TIME_12]:{minute:"numeric",hour:"numeric",second:"numeric",hour12:!0},[Jc.LONG_TIME_24]:{minute:"numeric",hour:"numeric",second:"numeric",hour12:!1},[Jc.HOUR_ONLY]:{hour:"numeric"},[Jc.MINUTE_ONLY]:{minute:"numeric"},[Jc.YEAR_ONLY]:{year:"numeric"},[Jc.MONTH_ONLY]:{month:"long"},[Jc.SHORT_MONTH_ONLY]:{month:"short"},[Jc.DAY_ONLY]:{weekday:"long"}}),Qc=({locale:e,timeZone:t}={})=>{if(!e)throw new Error('A "locale" parameter is required for wixFormatting');return{formatDateTime(r,n,{locale:o,timeZone:a}={}){const i=Object.assign(Object.assign({},Kc[n]),{timeZone:a||t});return new Intl.DateTimeFormat(o||e,i).format(r)},dateFormats:Jc}},Zc=e=>(0,M.isEqual)(!1,e);function el(e,t){return(0,M.mapValues)(t,((t,r)=>e(r).map((e=>function(e,t){switch(e){case"number":return Number(t);case"boolean":if("string"==typeof t)return"true"===t.toLowerCase()||"1"===t.toLowerCase();break;case"text":if(null!=t&&"function"==typeof t.toString)return t.toString()}return t}(e,t))).getOrElse(t)))}const tl=function(e,t,r,n,o,a,i,s){const{logger:c,errorReporting:l,breadcrumbReporting:d}=j,u=(e,t)=>d(t,Be.with({category:"effects",message:e,data:{datasetId:o}}));function p(e,r){t.onCurrentRecordModified(r,e)}function f(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return l(i,N.withMessage("Dataset "+e+" event execution failed"))(e,...r)}function h(){return Promise.all(t.onRecordsLoaded())}const m=e=>{throw new A(e,{code:"DS_OPERATION_FAILED"})};return{goToRecordByIndex:(t,r,n)=>({run:u("goToRecordByIndex",(async function(){let o;Ui({recordStore:e})&&await Ji({index:r,recordStore:e});try{o=(e=>{let{recordStore:t,index:r}=e;const{total:n,loaded:o}=t().fold((e=>{throw e}),(e=>e.getDatasetSize()));return Math.max(Math.min(r,Math.max(n,o)-1),0)})({recordStore:e,index:r})}catch(e){m(e)}if(t!==o||n){const t=await(a=o,e().fold(m,(e=>e.getRecords(a,1))));return t.matchWith({Empty:()=>gc.GoToIndexResult.NoRecord(),Results:e=>{let{items:t}=e;return gc.GoToIndexResult.Record(o,t[0])}})}return gc.GoToIndexResult.InvalidIndex();var a})),isQueued:!0,resultActionCreator:gc.goToRecordByIndexResult}),setFieldsInCurrentRecord:(t,n,o)=>({run:u("setFieldsInCurrentRecord",(function(){const a=el(r,t);return e().fold(m,(e=>e.setFieldsValues(n,a,o).fold((e=>{throw e}),(()=>{}))))})),isQueued:!1}),revertChanges:(t,r)=>({run:u("revertChanges",(function(){e().chain((e=>e.resetDraft(t,r))),p()})),isQueued:!1,resultActionCreator:gc.revertResult}),saveRecord:(t,r)=>({run:u("saveRecord",(async function(){return await(c.log(new He(He.types.DS_API.TRIGGERED,{eventName:"beforeSave"})),n("beforeSave").then((e=>e.some(Zc))).catch((e=>({error:e}))).then((e=>{if(e)throw new A("Operation cancelled by user code. "+((0,M.isBoolean)(e)?"":e.error),{code:"DS_OPERATION_CANCELLED"})}))),e().fold((()=>!1),(async e=>{if(e.hasDraft(t)){!function(e){const t=a.filter((t=>!t.isValid(e)));if(t.forEach((e=>e.updateValidityIndication())),t.length)throw new A("Some of the elements validation failed",{code:"DS_VALIDATION_ERROR"})}(r);const n=await e.saveRecord(t);return f("afterSave",r,n),s.dispatch("afterSave",r,n),n}}))})),isQueued:!0,resultActionCreator:gc.saveRecordResult}),removeCurrentRecord:t=>({run:u("removeCurrentRecord",(()=>function(t){return e().fold(m,(e=>e.removeRecord(t)))}(t))),isQueued:!0,resultActionCreator:gc.removeCurrentRecordResult}),newRecord:(t,r)=>({run:u("newRecord",(()=>function(t,r){return e().fold(m,(e=>e.newRecord(t,r)))}(t,r))),isQueued:!0,resultActionCreator:gc.newRecordResult}),fireEvent:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return{run:u("fireEvent",(()=>f(e,...r))),isQueued:!1}},notifyIndexChange:e=>({run:u("notifyIndexChange",(()=>{t.onCurrentIndexChanged(),f("currentIndexChanged",e)})),isQueued:!1}),notifyRecordSetLoaded:()=>({run:u("notifyRecordSetLoaded",h),isQueued:!0}),updateCurrentView:e=>({run:u("updateCurrentView",(()=>Promise.all(t.onCurrentViewChanged()))),isQueued:!0,resultActionCreator:gc.updateCurrentViewResult}),refresh:(t,r,n)=>({run:u("refresh",(async function(){return e().fold(m,(async e=>(e.reset(),n?gc.GoToIndexResult.Record(0,e.newRecord(0,r)):e.getRecords(0,1).then((e=>e.matchWith({Empty:()=>gc.GoToIndexResult.NoRecord(),Results:e=>{let{items:t}=e;return gc.GoToIndexResult.Record(0,t[0])}}))))))})),isQueued:!0,resultActionCreator:gc.refreshResult}),updateComponents:(e,t)=>({run:u("updateComponents",(()=>{p(e,t)})),isQueued:!1})}},rl=e=>ki({state:e}),nl=e=>vn(e).shouldLoadUrl(),ol=e=>_n(e).shouldLoadUrl(),al=e=>{let{getNextDynamicPageUrl:t,getPreviousDynamicPageUrl:r}=e;const n={run:t,isQueued:!0,resultActionCreator:(e,t)=>({type:kr,error:e,payload:t})},o={run:r,isQueued:!0,resultActionCreator:(e,t)=>({type:Gr,error:e,payload:t})},a=e=>{let{hasChangedToTrue:t}=e;const r=[];return t(nl)&&r.push(n),t(ol)&&r.push(o),r};return e=>(0,M.flatten)([a].map((t=>t(e))))},il=/[^{}]+(?=\})/g,sl=/[^\dA-Za-z]/g,cl=async e=>{let{dataProvider:t,dynamicPagesData:{dynamicPageData:r,datasetConfig:{dataset:{sort:n,collectionName:o}},items:a}}=e;const i=await t.getSort({sort:n,collectionId:o})||[],{dynamicUrl:s,userDefinedFilter:c}=r,l=(0,kn.PL)(a)[0],d=s&&l?(u=s,u=(e=>e.replace(/(\/{2,})/g,"/").replace(/^\//,""))(u),{fields:u.match(il)||[],nonFields:u.replace(il,"").split(sl).filter((e=>!!e))}).fields:[];var u;const p=ll(i),f=(0,M.difference)(d,p),h=dl([...i,...ul(f)]),m=[...p,...f];return{dynamicUrl:s,userDefinedFilter:c,dynamicUrlPatternFieldsValues:pl(l,m,d),sort:h,sortFields:m,patternFields:d}},ll=e=>(0,M.flatten)(e.map((e=>Object.keys(e).map((e=>e))))),dl=e=>e.reduce(((e,t)=>Object.assign(e,t)),{}),ul=e=>e.map((e=>({[e]:"asc"}))),pl=(e,t,r)=>{const n=r.concat(t);return r.length?(0,M.pick)(e,n):null},fl=async e=>{let{dataProvider:t,collectionName:r,directionTowardSibling:n,dynamicPagesData:o}=e;const{dynamicUrl:a,userDefinedFilter:i,dynamicUrlPatternFieldsValues:s,sort:c,sortFields:l,patternFields:d}=o?await cl({dynamicPagesData:o,dataProvider:t}):{};if(null==a||!d.length)return null;const u=await t.getSibling({collectionName:r,sort:c,sortFields:l,directionTowardSibling:n,fieldValues:s,filter:i}),p=hl({dynamicUrl:a,schema:t.getSchema(r)});return u&&p?u[p]:void 0},hl=e=>{let{schema:t,dynamicUrl:r}=e;const[n]=Object.entries(t.fields).find((e=>{let[t,n]=e;return n.type===m.FieldType.pageLink&&n.calculator.config.pattern===r}))||[];return n},ml=(e,t)=>{try{return gl(e(t))}catch(e){return yl(e)}},gl=e=>({value:e,then:t=>ml(t,e),catch:()=>gl(e)}),yl=e=>({error:e,then:()=>yl(e),catch:t=>ml(t,e)}),vl={resolve:gl,reject:yl},_l=e=>{let{recordStore:t}=e;const{logger:r}=j;return t().fold((()=>Promise.resolve(Qe.Maybe.Nothing())),(e=>e.hasSeedData()?(e=>e.getSeedRecords().matchWith({Empty:()=>vl.resolve(Qe.Maybe.Nothing()),Results:e=>{let{items:t}=e;return vl.resolve(Qe.Maybe.Just(t[0]))}}))(e):r.log(new We("dataset/pageReady/getData",(()=>(e=>e.seed().then((()=>e.getRecords(0,1).then((e=>e.chain((e=>{let{items:t}=e;return Qe.Maybe.Just(t[0])})))))).catch((e=>(r.logError(e,"Fetch initial data failed"),Qe.Maybe.Nothing()))))(e))))))},El=e=>{let{shouldFetchInitialData:t,recordStore:r,store:n,filter:o,sort:a,datasetIsDeferred:i,modeIsSSR:s,queueMicrotask:c,datasetIsReal:l,collectionId:d,filterResolver:u,dependencyManager:p,getSchemas:f,schemasLoading:h,getUserFilterInitialData:m}=e;const g=()=>{const e=(i=n.getState(),Ur.getUserFilterConnectionProps(i.config));var i;const s=t?_l({recordStore:r}):Promise.resolve();if(!(l&&(null==e?void 0:e.length)>0))return s.then((e=>Promise.resolve([e])));const c=u(o).map((async t=>{const r=m();if(r)return n.dispatch(mc(r)),r;await h;const o=f(),i=o[d];if(i){const r=await j.dataFetcher.fetchUserFilterInitialData({filter:t,sort:await fa({datasetConfigSort:a,getSchema:()=>i}),userFilterConnectionProps:e,schema:i,schemas:o});return n.dispatch(mc(r)),r}})).getOrElse(null);return Promise.all([s,c])},y=p.getDependencyResolutionPromise(o),v=i&&((e,t)=>{const{promise:r,resolve:n}=new H;return e||t(n),r})(s,c),{waitingForUserInput:_,resolveUserInputDependency:E}=ls(o)&&(()=>{const{promise:e,resolve:t}=new H;return{waitingForUserInput:e,resolveUserInputDependency:t}})(),I=[y,v,_].filter((e=>Boolean(e)));return{fetchingInitialData:I.length?Promise.all(I).then(g):g(),resolveUserInputDependency:()=>E&&E()}},Il=e=>{const t=["value","checked"];return e.reduce(((e,r)=>{var n;const o=(null==(n=r.connectionConfig)?void 0:n.properties)||{};return t.forEach((t=>{(0,M.has)(o,t)&&((e,t,r)=>{const n=(0,M.get)(r,t),o=Ba(n)&&qa(e)?za({time:n,date:e}):qa(n)&&Ba(e)?za({time:e,date:n}):e;(0,M.set)(r,t,o)})(r.getValue({propPath:t}),o[t].fieldName,e)})),e}),{})},wl=(e,t,r)=>{var n;return t===r||(null==(n=e[t])?void 0:n.some((t=>wl(e,t,r))))},Sl=e=>{let{components:t,connectionsGraph:r,updatedCompIds:n,datasetIsReal:o}=e;const a=t.filter((e=>(e=>{let{component:t,updatedCompIds:r,datasetIsReal:n,connectionsGraph:o}=e;if(r.length&&n){const{id:e}=t;return r.some((t=>wl(o,e,t)||wl(o,t,e)))}return!0})({component:e,connectionsGraph:r,updatedCompIds:n,datasetIsReal:o})));return a.some((e=>{let{role:t}=e;return t===oe}))?t:a},Rl=(e,t)=>{let{repeaterId:r,itemId:n}=t;return[e,"componentId",r,"itemId",n].join("_")},Tl=e=>e.split("_componentId_")[0],bl=(e,t)=>{const{logger:r}=j;return(n,o,a)=>{const i=((e,t)=>(0,M.isNull)(e)&&(0,M.isNull)(t))(n,o);if(i)return void r.log(new N("onChangeHandler invoked with illegal arguments",{extra:{arguments:{before:n,after:o,componentIdToExclude:a}}}));if((e=>(0,M.isNull)(e))(n))return void t(gc.refreshCurrentView()).catch((()=>{}));const s=un(e());if(((e,t)=>(0,M.isNull)(t))(0,o))return vs(n,s)&&t(gc.refreshCurrentRecord()).catch((()=>{})),void t(gc.refreshCurrentView()).catch((()=>{}));if(((e,t)=>vs(e,t))(n,s)){const r=Vi({state:e()});t(gc.setCurrentRecord(o,r,a)).catch((()=>{}))}}},Ol=e=>{let{detailsDatasetApis:t,masterDatasetApi:r,controllerConfig:n,unsubscribeHandlers:o}=e;const{logger:a}=j;t.forEach((e=>{const t=()=>{o.push(Pl({masterDatasetApi:r,masterDatasetConfig:n,detailsDatasetApi:e}))};try{o.push(r.onReady(t))}catch(e){a.log(new $e(new A("The dataset cannot filter by the dynamic dataset because the field used to build this page's URL is empty",{code:"DS_EMPTY_URL_FIELD",cause:e}),"error"))}}))},Pl=e=>{let{masterDatasetConfig:t,masterDatasetApi:r,detailsDatasetApi:n}=e;const o=pr(t.dataset);let a,i;return o!==Je&&(a=r.onCurrentIndexChanged((()=>n.onReady((()=>n.refresh()))))),o!==Xe&&(i=r.onItemValuesChanged((()=>n.refresh()))),()=>[a,i].forEach((e=>null==e?void 0:e()))},{richText:Cl}=m.FieldType,Nl={$text:e=>e===Cl?"html":"text"},Dl=e=>{let{propName:t,getFieldType:r}=e;return t in Nl?Nl[t](r()):t},Al=e=>e.startsWith("$"),xl=e=>({id:e.id,role:e.role,isValidConnection:()=>!0,bind:()=>{},clear:()=>e.clear(),hide:()=>e.hide(),show:t=>e.show(t),resetUserFilter:()=>{},onRecordsLoaded:async()=>{},onCurrentViewChanged:async()=>{},onCurrentIndexChanged:async()=>{},onCurrentRecordModified:async()=>{}}),Fl=e=>!!e&&Object.values(e).some((e=>!(0,M.isEmpty)(e))),Ll=(e,t,r)=>{const{logger:n,platform:{location:o,utils:a,executeTpaAction:i}}=j,{getState:s,getFieldType:c,wixFormatter:l,modeIsLivePreview:d,PresetVerboseMessage:u}=r,p=o=>{es({currentRecord:un(s()),previousRecord:o,component:e,connectionConfig:t,formatter:l,modeIsLivePreview:d,getFieldType:c,logger:n,PresetVerboseMessage:u,recordStore:r.recordStore,actions:r.actions})},f=e=>e.matchWith({Empty(){},Loading(){},Loaded(e){let{url:t}=e;o.navigateTo(t)}}),h=t=>{const{datasetApi:s,getState:c,actions:l}=r;(0,M.forEach)(t,((t,r)=>{let{action:d,postAction:u}=t;e.on(r,(async()=>{try{if(d.startsWith("tpa/")){const e=s.getCurrentItem();return void await i({currentItem:e,action:d})}if("nextDynamicPage"===d)return f(vn(c()));if("previousDynamicPage"===d)return f(_n(c()));if("applyUserInputFilters"===d)return l.refresh();if("resetUserFilter"===d)return l.resetUserInputFilters();const e=await Promise.resolve(s[d]());if(u&&u.navigate){const t=((e,t)=>e.fieldName?ka(t,e.fieldName):e.linkObject?a.links.toUrl(e.linkObject):void 0)(u.navigate,e);o.navigateTo(t)}}catch(e){e instanceof C||n.log(new N(d+" operation failed:",{cause:e}))}}))}))};return{...xl(e),isValidConnection:()=>Fl(t),bind(){const{events:o,behaviors:a}=t;o&&h(o),a&&(t=>{const{dispatcher:n,eventListeners:{register:o}}=r;t.forEach((t=>{let r=!1;switch(t.type){case"saveSuccessFeedback":o("beforeSave",(()=>e.hide())),o("afterSave",(()=>{e.show(),r=!0})),o("currentIndexChanged",(()=>{r?r=!1:e.hide()})),o("itemValuesChanged",(()=>e.hide()));break;case"saveFailureFeedback":o("beforeSave",(()=>e.hide())),o("currentIndexChanged",(()=>e.hide())),n.subscribe("datasetSaveError",(()=>e.show()))}}))})(a),n.log(new u(He.types.COMPONENT.BOUND,{component:e,description:ja(t)}))},clear(){const{getFieldType:n}=r,{properties:o}=t;(0,M.forEach)(o,((t,r)=>{const o=n(t.fieldName).getOrElse(void 0),a=(e=>e===Va?[]:void 0)(o);e.setValue(a,{propPath:r,fieldType:o,binding:t})}))},async onRecordsLoaded(){const{behaviors:t}=e.connectionConfig;p(),t&&t.forEach((t=>{"saveSuccessFeedback"===t.type&&e.hide()}))},async onCurrentViewChanged(){p()},async onCurrentIndexChanged(){p()},async onCurrentRecordModified(e){p(e)}}};const Ml=(e,t)=>{return r=e,n=t,Object.defineProperties({},{...Object.getOwnPropertyDescriptors(r),...Object.getOwnPropertyDescriptors(n)});var r,n},Ul=e=>{const t={getValue:()=>e.data,setValue(t){e.data=t},clear(){e.data=[]},onItemReady(t){e.onItemReady(t)},onItemRemoved(t){e.onItemRemoved(t)}};return Ml(Vl(e),t)},kl=e=>"onChange"in e&&("value"in e||"checked"in e),Gl=(e,t)=>{const r=t.split("."),n=r.slice(0,-1),[o]=r.slice(-1);return{obj:n.length>0?(0,M.get)(e,n):e,prop:o}},jl=e=>{if(!e||!e.parent)return;const{parent:t}=e;return t.type===rt.Repeater?Ul(t):jl(t)},Vl=e=>{const{connectionConfig:t,uniqueId:r,type:n,role:o,id:a}=e,i=!!e.hidden,s={id:r,connectionConfig:t,nickname:a,type:n,role:o,isInput:kl(e),parentRepeater:jl(e),getValue(t){let{propPath:r}=void 0===t?{}:t;if(r){const{obj:t,prop:n}=Gl(e,r);return t[n]}},setValue(t,r){let{propPath:n,fieldType:o,binding:a}=void 0===r?{}:r;if(n){const{obj:r,prop:i}=Gl(e,n);r[i]="reference"===o&&(e=>(0,M.isObject)(e)&&(0,M.has)(e,"_id"))(t)?t._id:t;const s=null==a?void 0:a.linkTarget;(e=>e===m.FieldType.url||e===m.FieldType.pageLink)(o)&&s&&(r.target=s)}},setOptions(t){"options"in e&&(e.options=t)},hide(){e.hidden||null==e.hide||e.hide()},show(t){let{ignoreInitiallyHidden:r}=void 0===t?{ignoreInitiallyHidden:!1}:t;!e.hidden||r&&i||null==e.show||e.show()},clear(e){s.setValue(void 0,e)},get enabled(){return!("enabled"in e)||e.enabled},enable(){"enable"in e&&!s.enabled&&e.enable()},disable(){"disable"in e&&s.enabled&&e.disable()},isValid:()=>!("validity"in e)||"object"!=typeof e.validity||e.validity.valid,updateValidityIndication(){"updateValidityIndication"in e&&e.updateValidityIndication()},resetValidityIndication(){"resetValidityIndication"in e&&e.resetValidityIndication()},onChange(e){s.on("onChange",e)},on(t,r){var n;null==(n=e[t])||n.call(e,r)}};return"placeholder"in e&&Object.defineProperty(s,"placeholder",{get:()=>e.placeholder}),s},Wl=e=>{switch(e.role){case ae:return(e=>{const t={setValue(t,r){let{fieldType:n,propPath:o="text",binding:a}=void 0===r?{}:r;if(n===m.FieldType.url){const r=(null==a?void 0:a.linkTarget)||"_blank";e.text="<a href="+t+' target="'+r+'" style="text-decoration: underline">'+t+"</a>";const{html:n}=e;return e.text="",void(e.html=(0,M.unescape)(n))}n!==m.FieldType.richText?e[o]=t:e.html=t},clear(t){let{fieldType:r}=void 0===t?{}:t;const n=r===m.FieldType.richText||r===m.FieldType.url?"html":"text";e[n]=""}};return Ml(Vl(e),t)})(e);case me:case re:return Ul(e);case ue:return(e=>{const t={get nextEnabled(){return e.nextEnabled},set nextEnabled(t){e.nextEnabled=t},get previousEnabled(){return e.previousEnabled},set previousEnabled(t){e.previousEnabled=t},setValue(t){e.rows=t},getValue:()=>e.rows,set rows(e){t.setValue(e)},get rows(){return e.rows},get columns(){return e.columns},clear(){e.rows=[],e.dataFetcher=void 0},set dataFetcher(t){e.dataFetcher=t},refresh:()=>e.refresh(),onCellSelect:t=>e.onCellSelect(t),onRowSelect:t=>e.onRowSelect(t)};return Ml(Vl(e),t)})(e);case he:return(e=>{const t={isValid(t){const{connectionConfig:r,validity:n}=e;if(n.valid)return!0;if((0,M.some)((0,M.values)((0,M.omit)(n,["valid","valueMissing"])),(e=>e)))return!1;const o=(0,M.get)(r,"properties.value.fieldName")||"";return!(0,M.isEmpty)(ka(t,o))},set fileType(t){e.fileType=t},get fileType(){return e.fileType},getValue:()=>e.value,clear(){e.reset()},uploadFiles:async()=>e.uploadFiles()};return Ml(Vl(e),t)})(e);case Se:return(e=>{const t=Vl(e),r={setValue(r,n){r?t.setValue(r,n):e.clear()}};return Ml(t,r)})(e);case ie:return(e=>{e.clickAction&&(e.clickAction=e.clickAction);const t={setValue(t){e.items=t},getValue:()=>e.items,clear(){e.items=[]},set currentIndex(t){try{e.galleryCapabilities.hasCurrentItem&&(e.currentIndex=t)}catch(e){}},get currentIndex(){return e.currentIndex},get clickAction(){return e.clickAction},onCurrentItemChanged(t){e.galleryCapabilities.hasCurrentItem&&e.onCurrentItemChanged((e=>{let{item:r,itemIndex:n}=e;return t(r,n)}))}};return Ml(Vl(e),t)})(e);case ye:return(e=>{const t={get currentPage(){return e.currentPage},set currentPage(t){e.currentPage=t},get totalPages(){return e.totalPages},set totalPages(t){e.totalPages=t},get nextEnabled(){return e.nextEnabled},set nextEnabled(t){e.nextEnabled=t},get previousEnabled(){return e.previousEnabled},set previousEnabled(t){e.previousEnabled=t},get navigationType(){return e.navigationType},set navigationType(t){e.navigationType=t},onNextClicked(t){e.onNextClicked(t)},onPreviousClicked(t){e.onPreviousClicked(t)}};return Ml(Vl(e),t)})(e);case _e:return(e=>{const t={setValue(t){e.location=t},getValue:()=>e.location,clear(){e.markers=[]},set location(t){e.location=t},get location(){return e.location},set markers(t){e.markers=t},get markers(){return e.markers},setCenter(t){e.setCenter(t)}};return Ml(Vl(e),t)})(e);case Ne:return(e=>{const t={setValue(t){e.value=t},getValue:()=>e.value,clear(){e.value=[]},setBounds(t,r){e.min=t,e.max=r},getBounds:()=>[e.min,e.max]};return Ml(Vl(e),t)})(e);default:return Vl(e)}},Bl=e=>t=>{const r=[],n=[];(0,M.uniq)(t.map((e=>{let{role:t}=e;return t}))).forEach((t=>{if(t===ne){return void(e("@"+t)||[]).forEach((e=>e&&n.push(e)))}if(t===ge){const t=e("@"+ge)||[],[n]=Array.isArray(t)?t:[t],o=e("Document");if(o&&n){const e=new Proxy(o,{get:(e,t)=>"connectionConfig"===t?n.connectionConfig:"role"===t?ge:e[t]});r.push(e)}return}(e("@"+t)||[]).forEach((e=>{e&&r.push(e)}))}));return{components:r.map((e=>Wl(e))),detailsDatasetApis:n}},ql=(e,t,r)=>{const{logger:n,errorReporting:o}=j,{getState:a,getFieldType:i,actions:s,modeIsLivePreview:c,PresetVerboseMessage:l}=r,d=o=>{es({currentRecord:un(a()),previousRecord:o,component:e,connectionConfig:t,modeIsLivePreview:c,getFieldType:i,logger:n,PresetVerboseMessage:l,recordStore:r.recordStore,actions:r.actions})},u=()=>{const t=s.isCurrentRecordPristine(a()),r=s.isCurrentRecordNew(a());t&&r&&e.resetValidityIndication()};return{...xl(e),isValidConnection:()=>Fl(t),bind(){(()=>{const{id:r,role:n}=e,{properties:c}=t;e.onChange(o((e=>{const t=c.checked?"checked":"value",o=c[t].fieldName,l=un(a()),d=Si({value:e.target[t],currentValue:ka(l,o),fieldType:i(o).getOrElse(void 0),fieldName:o,utils:{referenceFetcher:(e,t)=>s.fetchRecordById(e,t).getOrElse(e)},role:n});s.setFieldInCurrentRecordAndSynchronize(o,d,r)}),N.withMessage("Input adapter onChange - setting value to record failed")))})(),t.filters&&e.onChange(o(s.refresh,N.withMessage("Input adapter onChange - sync actions failed"))),n.log(new l(He.types.COMPONENT.BOUND,{component:e,description:ja(t)}))},async onRecordsLoaded(){d(),u()},async onCurrentViewChanged(){d(),u()},async onCurrentIndexChanged(){d(),u()},async onCurrentRecordModified(e){d(e),u()}}},zl={start:0,end:0},Hl=(e,t)=>{let{valueSource:r,labelField:n,dataTransformer:o}=t;const a=o(e,r);return{value:a,label:n?o(e,{type:"field",fieldName:n}):a}},$l=e=>(0,M.get)(e,"properties.value.fieldName")||"",Yl=(e,t,r)=>{const{errorReporting:n}=j,{actions:o,recordStore:a,getState:i}=r,s=t.userInputFilter.fieldName;e.onChange(n((async()=>{const t=In(i()),n=(c=i(),Rr.selectIsApplyUserInputFiltersActionBindingPresent(c.records));var c;if(t||n)return;await o.refresh();const l=a().fold((()=>{}),(e=>e.getDatasetSize().total)),d=Yr(i());(e=>{let{state:t,numberOfResults:r,filteredBy:n,componentType:o,fieldType:a,schema:i}=e;const{logger:s,platform:{settings:{env:{editor:c}}}}=j,l=Qr(t),d=Yr(t);if(!d)return;const u=i.getOrElse({displayName:d}).displayName;s.log(new Un({id:c?366:371,collectionId:d,collectionName:u,datasetMode:l,numberOfResults:r,filteredBy:n,componentType:o,fieldType:a}))})({filteredBy:s,numberOfResults:l,state:r.getState(),componentType:e.type,fieldType:r.getFieldType(s).getOrElse(void 0),schema:r.getSchema(d)})}),N.withMessage("Filter input adapter onChange failed")))},Xl=(e,t,r)=>{const{i18n:n}=j,{getState:o}=r,a=t=>{const r=Array.isArray(e.getValue({propPath:t}))?[]:Ae;e.setValue(r,{propPath:t})};return{...xl(e),isValidConnection:()=>Or(t),bind(){Yl(e,t,r);const{userInputFilter:{prop:i,fieldName:s}}=t,c=(e=>{var t;return null==(t=On(o()))?void 0:t.find((t=>t.fieldName===e&&xe.includes(t.role)))})(s);c&&(e.setOptions((e=>{let{component:t,prop:r,userFilterInitialData:o}=e;return[!Array.isArray(t.getValue({propPath:r}))&&{value:Ae,label:n.t("USER_INPUT_FILTER_OPTION_RESET_ALL")},...o.options.map((e=>({value:String(e),label:String(e)})))].filter(Boolean)})({component:e,prop:i,userFilterInitialData:c})),(e=>"placeholder"in e)(e)||a(i))},resetUserFilter(){const{userInputFilter:{prop:r}}=t;e.getValue({propPath:r})&&a(r)}}},Jl=new Map([[me,(e,t,r)=>{const{logger:n,errorReporting:o}=j,{controllerFactory:a,controllerStore:i,PresetVerboseMessage:s}=r,c=[],l=(t,r)=>{const n={repeaterId:e.id,itemId:r._id},o=a.createScopedDataset({datasetScope:n,fixedItem:r});i.setController(n,o);const s=Bl(t.scoped),l=o.pageReady(s);c.push(l)},d=t=>{const r={repeaterId:e.id,itemId:t._id};i.removeController(r)},u=async()=>{const{actions:t,getState:o,modeIsLivePreview:a}=r,{items:i}=await t.fetchCurrentItems(o());a&&0===i.length||(n.log(new s(He.types.COMPONENT.FILLED,{component:e,description:{data:i}})),e.setValue(i),await Promise.all(c),c.splice(0))};return{...xl(e),bind(){e.onItemReady(o(l,N.withMessage("Repeater adapter onItemReady failed"))),e.onItemRemoved(o(d,N.withMessage("Repeater adapter onItemRemoved failed"))),n.log(new s(He.types.COMPONENT.BOUND,{component:e}))},onRecordsLoaded:async()=>u(),async onCurrentViewChanged(){u()},async onCurrentIndexChanged(){},async onCurrentRecordModified(){const{getState:t}=r,n=un(t()),o=e.getValue();if(o&&o.length>0){const t=o.map((e=>e._id===n._id?n:e));e.setValue(t)}}}}],[re,(e,t,r)=>{const{errorReporting:n}=j,{controllerFactory:o,controllerStore:a}=r,i=(t,r)=>{const n={repeaterId:e.id,itemId:r._id},i=o.createScopedDetailsDataset({datasetScope:n});a.setController(n,i);const s=Bl(t.scoped);i.pageReady(s)},s=t=>{const r={repeaterId:e.id,itemId:t._id};a.removeController(r)};return{...xl(e),bind(){e.onItemReady(n(i,N.withMessage("Details repeater adapter onItemReady failed"))),e.onItemRemoved(n(s,N.withMessage("Details repeater adapter onItemRemoved failed")))}}}],[oe,(e,t,r)=>{const{errorReporting:n}=j,{actions:o}=r;return{...xl(e),isValidConnection:()=>Fl(t),bind(){e.onChange(n(o.refresh,N.withMessage("Filter input adapter onChange failed")))},resetUserFilter(){const t=Zi(e);e.setValue((e=>{switch(e.type){case Ki:return!1;case Qi:return"";default:return null}})(e),{propPath:t})}}}],[Te,Xl],[Pe,Xl],[Oe,Xl],[Ce,Xl],[be,(e,t,r)=>{const n=()=>{const{userInputFilter:{prop:r}}=t;e.setValue(null,{propPath:r})};return{...xl(e),isValidConnection:()=>Or(t),bind(){Yl(e,t,r),n()},resetUserFilter(){n()}}}],[Ne,(e,t,r)=>{const{getState:n}=r,o=t=>{var r;const o=null==(r=On(n()))?void 0:r.find((r=>r.fieldName===t&&r.role===e.role));if(!o)return null;const{min:a,max:i}=o;return void 0===a||void 0===i?null:{min:a,max:i}},a=r=>{let{firstRender:n,min:o,max:a}=r;const{userInputFilter:{prop:i}}=t;n&&e.setBounds(o,a),e.setValue([o,a],{propPath:i})};return{...xl(e),isValidConnection:()=>Or(t),bind(){const n=o(t.userInputFilter.fieldName);n&&(Yl(e,t,r),a({firstRender:!0,...n}))},resetUserFilter(){const e=o(t.userInputFilter.fieldName);e&&a({firstRender:!1,...e})}}}],[ue,(e,t,r)=>{const{logger:n,errorReporting:o}=j,{datasetApi:a,PresetVerboseMessage:i,getState:s,modeIsLivePreview:c,actions:l}=r;let d=zl;const u=e=>d=e,p=()=>u(zl),f=e=>{let{fetchRows:t,logGridValue:r,disableNavigation:n=!1}=e;return async(e,o)=>{const{items:a,datasetSize:i}=await t(e,o-e);return r(a),{pageRows:a,totalRowsCount:n?a.length:i.total}}},h=t=>{let{fetchRows:r,logGridValue:n}=t;return async t=>{let{direction:o,limit:a}=t,{start:i,end:s}=d;"previous"===o?(s=i,i-=a):(i=s,s+=a);const{items:c,datasetSize:l}=await r(i,s-i);return u({start:i,end:s}),e.nextEnabled=!!l.cursor||s<l.loaded,e.previousEnabled=i>0,n(c),{pageRows:c,totalRowsCount:l.total||void 0}}},m=t=>{const r=[],o=e.columns;(0,M.forEach)(t,(e=>{const t={};(0,M.forEach)(o,(r=>{t[r.label]=(0,M.get)(e,r.dataPath)})),r.push(t)})),n.log(new i(He.types.COMPONENT.FILLED,{component:e,description:r}))};return{...xl(e),bind(){l.getInitialData().chain((t=>{let{items:r}=t;e.rows=r}));const t=un(s());if(c&&!t)return;const r=l.isCursorPaging();e.dataFetcher=r?{type:"directional",value:h({fetchRows:l.fetch,logGridValue:m,component:e})}:{type:"pages",value:f({fetchRows:l.fetch,logGridValue:m})},e.onCellSelect(o((e=>{let{cellRowIndex:t}=e;a.setCurrentItemIndex(t)}),N.withMessage("Grid adapter onCellSelect failed"))),e.onRowSelect(o((e=>{let{rowIndex:t}=e;a.setCurrentItemIndex(t)}),N.withMessage("Grid adapter onRowSelect failed"))),(()=>{const t={};e.columns.forEach((e=>{let{label:r,dataPath:n,linkPath:o}=e;(n||o)&&(t[r]=Object.assign(n?{dataPath:n}:{},o?{linkPath:o}:{}))})),n.log(new i(He.types.COMPONENT.BOUND,{component:e,description:t}))})()},async onCurrentRecordModified(){e.refresh()},async onRecordsLoaded(){p(),e.refresh()},async onCurrentViewChanged(){p(),e.refresh()}}}],[le,(e,t,r)=>{const{logger:n}=j,{actions:o,getFieldType:a,getSchema:i,PresetVerboseMessage:s}=r,c=async()=>{var r;const{role:c}=e,l=(e=>{const t=e[0];return 1===e.length&&""===t.label&&""===t.value?[]:e})(await(async(e,t)=>{if("field"===t.type&&a(t.fieldName).map((e=>"reference"===e)).getOrElse(!1)){const{fieldName:r}=t;return i().chain((t=>{const n=Xn(r,t);return i(n).map(Jn).map((async t=>{const{items:n}=await o.fetchAll(r),a=n.map((r=>Hl(r,{valueSource:{type:"field",fieldName:"_id"},labelField:t,dataTransformer:e})));return(0,M.orderBy)(a,[e=>e.label.toLowerCase()])}))})).getOrElse(Promise.resolve([]))}{const{items:r}=await o.fetchAll(),n=r.map((r=>Hl(r,{valueSource:t,dataTransformer:e})));return(0,M.uniqBy)(n,"value")}})(((e,t)=>"expression"===t.type?Mi({expression:t.expression,record:e,propPath:"value",role:c,logger:n}):Ri({value:ka(e,t.fieldName),role:c})),null!=(r=t.expressions)&&r.value?{type:"expression",expression:t.expressions.value.expression}:{type:"field",fieldName:t.properties.value.fieldName}));n.log(new s(He.types.COMPONENT.FILLED,{component:e,description:{options:l}})),e.setOptions(l)};return{...xl(e),isValidConnection:()=>Fl(t),clear(){e.setOptions([])},bind(){n.log(new s(He.types.COMPONENT.BOUND,{component:e,description:t}))},async onRecordsLoaded(){c()},async onCurrentRecordModified(){c()}}}],[de,(e,t,r)=>{const{logger:n}=j,{actions:o,PresetVerboseMessage:a}=r,i=async()=>{var r;const{role:i}=e,s=(e=>{const t=e[0];return 1===e.length&&""===t.label&&""===t.value?[]:e})(await(async(e,t)=>{const{items:r}=await o.fetchAll(),n=r.map((r=>((e,t)=>{let{valueSource:r,labelField:n,dataTransformer:o}=t;const a=o(e,r);return{value:a,label:n?o(e,{type:"field",fieldName:n}):a}})(r,{valueSource:t,dataTransformer:e})));return(0,M.uniqBy)(n,"value")})(((e,t)=>"expression"===t.type?Mi({expression:t.expression,record:e,propPath:"options",role:i,logger:n}):Ri({value:ka(e,t.fieldName),role:i})),null!=(r=t.expressions)&&r.value?{type:"expression",expression:t.expressions.options.expression}:{type:"field",fieldName:t.properties.options.fieldName}));n.log(new a(He.types.COMPONENT.FILLED,{component:e,description:{options:s}})),e.setOptions(s)};return{...xl(e),isValidConnection:()=>Fl(t),clear(){e.setOptions([])},bind(){n.log(new a(He.types.COMPONENT.BOUND,{component:e,description:t}))},async onRecordsLoaded(){i()},async onCurrentRecordModified(){i()}}}],[we,(e,t,r)=>{const{logger:n}=j,{actions:o,PresetVerboseMessage:a,modeIsLivePreview:i}=r,s=async()=>{const{role:r}=e,{items:s}=await o.fetchAll(),c=s.reduce(((e,o)=>{var a;if(null!=(a=t.expressions)&&a.options){const a=Mi({expression:t.expressions.options.expression,record:o,propPath:"options",role:r,logger:n});return e.push({value:a,label:a}),e}const{properties:{options:{fieldName:i}}}=t,s=Ri({value:ka(o,i),role:r});return s&&e.push({value:s,label:s}),e}),[]);i&&0===c.length||(e.setOptions(c),n.log(new a(He.types.COMPONENT.FILLED,{component:e,description:{options:c}})))};return{...xl(e),isValidConnection:()=>Fl(t),bind(){n.log(new a(He.types.COMPONENT.BOUND,{component:e,description:t}))},clear(){e.setOptions([])},async onRecordsLoaded(){s()},async onCurrentRecordModified(){s()}}}],[he,(e,t,r)=>{const{logger:n,errorReporting:o}=j,{actions:a,datasetApi:i,getState:s,getFieldType:c,PresetVerboseMessage:l}=r,d={},u=function(r){void 0===r&&(r=!1);const n=un(s()),o=$l(t),i=a.isCurrentRecordNew(s()),c=(0,M.isEmpty)(ka(n,o));(a.isCurrentRecordPristine(s())||r)&&e.clear(),!c||i&&!r||e.updateValidityIndication()};return{...xl(e),isValidConnection:()=>Fl(t),bind(){if(tn(s()))return;const{id:r,role:u}=e,p=$l(t),f=c(p).getOrElse(void 0);e.onChange(o((()=>{d[r]=!0}),N.withMessage("Upload button adapter onChange failed"))),i.onBeforeSave((()=>{if(d[r]&&e.getValue().length)return e.uploadFiles().then((e=>{d[r]=!1;const t=un(s()),n=Si({value:e,currentValue:ka(t,p),fieldType:f,fieldName:p,role:u});a.setFieldInCurrentRecordAndSynchronize(p,n,r)})).catch((t=>{const r=e.getValue(),o=Array.isArray(r)&&1===r.length?r[0].name:"unknown";throw n.log(new D("The "+o+" file failed to upload. Please try again later.",{cause:t})),t}))})),c(p).map((t=>{switch(t){case"image":e.fileType="Image";break;case"document":e.fileType="Document"}}));const{properties:h}=t;(0,M.forEach)(h,((t,r)=>{let{fieldName:o}=t;n.log(new l(He.types.COMPONENT.BOUND,{component:e,description:{[r]:o}}))}))},async onCurrentRecordModified(r){const{id:n}=e,o=$l(t),a=un(s()),i=Ga({previousRecord:r,currentRecord:a,fieldName:o});i&&(d[n]=!1),u(i)},async onRecordsLoaded(){u()},async onCurrentViewChanged(){u()},async onCurrentIndexChanged(){u()}}}],[ie,(e,t,r)=>{const{logger:n,errorReporting:o}=j,{actions:a,getState:i,getFieldType:s,modeIsLivePreview:c,wixFormatter:l,PresetVerboseMessage:d}=r,u=(e,t,r,o)=>{(0,M.forEach)(r.expressions,((r,a)=>{let{expression:i}=r;const s=Mi({expression:i,record:t,propPath:a,role:o,formatter:l,logger:n});e[a]=s})),(0,M.forEach)(r.properties,((r,n)=>{let{fieldName:a,format:i}=r;const c=Ri({value:ka(t,a),role:o,fieldType:s(a).getOrElse(void 0),propPath:n,format:i,utils:{formatter:l}});e[n]=c}))},p=()=>{e.currentIndex=Vi({state:i()})},f=async()=>{const{role:r}=e,{items:o}=await a.fetchCurrentItems(i());try{const a=o.map((e=>{const n={};return u(n,e,t,r),n})),i=a.every((e=>{let{src:t}=e;return!t}));if(c&&i)return;n.log(new d(He.types.COMPONENT.FILLED,{component:e,description:a})),e.setValue(a)}catch(e){if("URIError"!==e.name)throw e}p()};return{...xl(e),isValidConnection:()=>Fl(t),bind(){e.onCurrentItemChanged(o((()=>{a.setCurrentIndex(e.currentIndex)}),N.withMessage("Gallery adapter onItemReady failed"))),n.log(new d(He.types.COMPONENT.BOUND,{component:e,description:t}))},async onCurrentRecordModified(){const{role:r}=e,n=un(i()),o=Vi({state:i()}),a=e.getValue()||[],s=a[o];s&&u(s,n,t,r),e.setValue(a),p()},async onRecordsLoaded(){f()},async onCurrentViewChanged(){f()},async onCurrentIndexChanged(){p()}}}],[ye,(e,t,r)=>{const{logger:n,errorReporting:o}=j,{actions:a,getState:i,PresetVerboseMessage:s}=r,c=()=>{a.isCursorPaging()?(()=>{const t=Wi({state:i()});e.nextEnabled=a.hasNextPage(i()),e.previousEnabled=t>1})():(()=>{const t=Wi({state:i()}),r=a.getTotalPageCount(i());e.currentPage=t,r<1?e.disable():(e.enable(),e.totalPages=r)})()};return{...xl(e),bind(){const t=a.isCursorPaging(),r=e=>{let{delta:r,index:n}=e;const o=Wi({state:i()}),s=r?o+r:n,c=ki({state:i()}),l=t?s:(0,M.clamp)(s,1,a.getTotalPageCount(i()));a.setCurrentIndex(((e,t)=>t*(e-1))(l,c))};t?(e.navigationType="arrowsOnly",e.onNextClicked(o((()=>r({delta:1})),N.withMessage("Pagination adapter onNextClicked failed"))),e.onPreviousClicked(o((()=>r({delta:-1})),N.withMessage("Pagination adapter onPreviousClicked failed")))):e.onChange(o((e=>r({index:e.target.currentPage})),N.withMessage("Pagination adapter onChange failed"))),n.log(new s(He.types.COMPONENT.BOUND,{component:e}))},async onRecordsLoaded(){c()},async onCurrentViewChanged(){c()}}}],[_e,(e,t,r)=>{const{logger:n}=j,{actions:o,getState:a,getFieldType:i,wixFormatter:s,PresetVerboseMessage:c}=r,l=(e,t,r)=>{let{expressions:n={},properties:o={}}=t;const a=e=>{let{propPath:t,marker:n,value:o,fieldType:a,format:i}=e;if("address"===t)return Object.assign(n,{address:(0,M.get)(o,"formatted"),location:(0,M.get)(o,"location")});if("link"===t&&(0,M.isEmpty)(o))return n;const c=Ri({value:o,role:r,fieldType:a,propPath:t,format:i,utils:{formatter:s}});return Object.assign(n,{[t]:c})};let c={};return c=(0,M.reduce)(n,((t,r,n)=>{let{expression:o}=r;const i=Ci({expression:o,variables:e,functions:Li()});return a({propPath:n,marker:t,value:i})}),c),c=(0,M.reduce)(o,((t,r,n)=>{let{fieldName:o,format:s}=r;const c=ka(e,o);return a({propPath:n,marker:t,format:s,value:c,fieldType:i(o).getOrElse(void 0)})}),c),c},d=async()=>{const{role:r}=e;try{const{items:n}=await o.fetchCurrentItems(a());e.markers=n.map((e=>l(e,t,r)))}catch(e){n.log(new N("Failed setting markers",{cause:e}))}};return{...xl(e),isValidConnection:()=>Fl(t),bind(){n.log(new c(He.types.COMPONENT.BOUND,{component:e,description:t}))},async onRecordsLoaded(){d()},async onCurrentViewChanged(){d()},async onCurrentIndexChanged(){const t=Vi({state:a()});e.setCenter((0,M.get)(e,["markers",t,"location"]))},async onCurrentRecordModified(){const{role:r}=e,n=un(a()),o=Vi({state:a()});e.markers[o]=l(n,t,r),e.setCenter((0,M.get)(e,["markers",o,"location"]))}}}]]),Kl=e=>{let{components:t,context:r}=e;const n=(e=>{let{recordStore:t,dispatch:n}=e;const a={fetchRecordById:(e,r)=>t(r).fold((()=>Qe.Maybe.Nothing()),(t=>t.getRecordById(e))),fetchAll:e=>(async(e,t,r,n)=>{const o=await e(n).fold((()=>Rs.Empty()),(e=>e.externalApi.getRecordsLimitedByMaxPageSize(t,r)));return o.get()})(t,0,1e3,e),fetchCurrentItems:e=>hc(t,e).catch((()=>Rs.Empty().get())),fetchOne:()=>fc(t,0,1),fetch:(e,r,n)=>fc(t,e,r,n),getTotalPageCount:e=>qi({state:e,recordStore:t}),getInitialData:()=>t().fold((()=>Rs.Empty()),(e=>e.externalApi.getSeedRecords())),setCurrentIndex:(e,t)=>n(lc(e,t)),setFieldInCurrentRecordAndSynchronize:(e,t,r)=>{n(dc({[e]:(0,M.cloneDeep)(t)},r))},refresh:()=>n(pc()),resetUserInputFilters:()=>{const e=o.filter((e=>{let{role:t}=e;return t===oe||De.includes(t)})),t=In(r.getState());e.length&&(e.forEach((e=>e.resetUserFilter())),t||a.refresh())},isCurrentRecordNew:e=>t().fold((()=>!1),(t=>t.isNewRecord(Vi({state:e})))),isCurrentRecordPristine:e=>t().fold((()=>!1),(t=>t.isPristine(Vi({state:e})))),isCursorPaging:()=>Ui({recordStore:t}),hasNextPage:e=>Xi({state:e,recordStore:t}),getUniqueFieldValues:e=>t().fold((()=>!1),(t=>t.getUniqueFieldValues(e)))};return a})(r),o=t.map((e=>((e,t,r)=>(Jl.get(e.role)||(e.isInput?ql:Ll))(e,t,r))(e,((e,t)=>{if(!e)return e;const{properties:r,totalCount:n}=e;return{...e,...r?{properties:(0,M.mapKeys)(r,((e,r)=>Al(r)?Dl({propName:r,getFieldType:()=>t(e.fieldName).getOrElse(null)}):r))}:{},...n?{totalCount:{prop:Al(n.prop)?Dl({propName:n.prop,getFieldType:()=>null}):n.prop}}:{}}})(e.connectionConfig,r.getFieldType),{...r,actions:n}))).filter((e=>e.isValidConnection()));return{bindAll:async()=>Promise.all(o.map((e=>(e.bind(),e.onRecordsLoaded())))),hideAll:()=>o.map((e=>e.hide())),showAll:()=>o.map((e=>e.show({ignoreInitiallyHidden:!0}))),clearAll:()=>o.map((e=>e.clear())),onRecordsLoaded:()=>o.map((e=>e.onRecordsLoaded())),onCurrentViewChanged:()=>o.map((e=>e.onCurrentViewChanged())),onCurrentIndexChanged:()=>o.map((e=>e.onCurrentIndexChanged())),onCurrentRecordModified:(e,t)=>o.filter((e=>{let{id:r}=e;return!t||t!==r})).map((t=>t.onCurrentRecordModified(e)))}},Ql=e=>{let{datasetId:t,masterIds:r,connectionsGraph:n}=e;const o=e=>n[t].includes(e.id)?"PRIMARY":r.some((t=>n[t].includes(e.id)))?"DETAILS":"OTHER";return{isInsidePrimaryOrDetailsRepeater:e=>{let{parentRepeater:t}=e;return!!(r=t)&&["PRIMARY","DETAILS"].includes(o(r));var r},getDetailsRepeaters:e=>{const t=[];return e.forEach((e=>{let{parentRepeater:r}=e;r&&"DETAILS"===o(r)&&t.push(new Proxy(r,{get:(e,t)=>"role"===t?re:e[t]}))})),(0,M.uniqBy)(t,"uniqueId")}}},Zl=[m.FieldType.text,m.FieldType.number,m.FieldType.image,m.FieldType.video,m.FieldType.mediaGallery,m.FieldType.richContent],ed={[m.FieldType.text]:"text",[m.FieldType.number]:"number",[m.FieldType.image]:"image",[m.FieldType.video]:"video",[m.FieldType.mediaGallery]:"gallery",[m.FieldType.richContent]:"rich-content"},td=e=>{var t;let{recordStore:r,state:n,schema:o,connections:a,isDpItemDataset:i}=e;if(!i&&!a.length)return{collectionData:void 0};const s=un(n);if(!s)return{collectionData:void 0};const{id:c,displayName:l,displayField:d,fields:u}=o,p=i&&d?s[d]:void 0,f=i?1:null!=(t=(e=>{let{recordStore:t}=e;const r=Bi({recordStore:t});return r?r.total:null})({recordStore:r}))?t:void 0;return{title:p,collectionData:{id:c,name:l||c,totalCount:f,fields:rd({connections:a,fields:u,currentRecord:s}),primary:i}}},rd=e=>{let{connections:t,fields:r,currentRecord:n}=e;const o=t.reduce(od,{});return Object.entries(r).filter((e=>{let[t,r]=e;return!r.pii&&!r.isDeleted&&Zl.includes(r.type)})).map((e=>{var t;let[r,a]=e;return{key:r,type:ed[a.type],label:a.displayName,connected:!(null==(t=o[r])||!t.length),value:nd({key:r,field:a,currentRecord:n,connections:o[r]||[]})}}))},nd=e=>{let{key:t,field:r,currentRecord:n,connections:o}=e;const{type:a}=r,i=n[t];switch(a){case m.FieldType.image:return i&&ad({src:i},o);case m.FieldType.video:return i&&id({src:i},o);case m.FieldType.mediaGallery:return sd(i,o);case m.FieldType.text:case m.FieldType.number:case m.FieldType.richContent:return i;default:throw new Error("Unsupported field type: "+a)}},od=(e,t)=>{var r;const n=(null==t||null==(r=t.config)?void 0:r.properties)||{};return Object.values(n).map((e=>{let{fieldName:t}=e;return t})).forEach((r=>{e[r]||(e[r]=[]),e[r].push(t)})),e},ad=(e,t)=>{let{src:r}=e;const n=t.some((e=>{var t,r,n;let{role:o,config:a}=e;return o===se&&Boolean(null==a||null==(t=a.properties)?void 0:t.items)||o===ie&&Boolean(null==a||null==(r=a.properties)?void 0:r.src)||"imageRole"===o&&Boolean(null==a||null==(n=a.properties)?void 0:n.src)}));return{url:r,...cd(r),connectedToSrc:n}},id=(e,t)=>{let{src:r,title:n,description:o}=e;const a=t.some((e=>{var t,r,n;let{role:o,config:a}=e;return o===se&&Boolean(null==a||null==(t=a.properties)?void 0:t.items)||"videoPlayerRole"===o&&Boolean(null==a||null==(r=a.properties)?void 0:r.src)||"videoRole"===o&&Boolean(null==a||null==(n=a.properties)?void 0:n.src)}));if(!ud(r))return{thumbnailUrl:void 0,title:n,description:o,uploadDate:void 0,connectedToSrc:a};const[i,s]=r.match(/posterUri=(\w+)/)||[],[c,l]=r.match(/posterWidth=(\d+)/)||[],[d,u]=r.match(/posterHeight=(\d+)/)||[];return{thumbnailUrl:ld({uri:s,width:Number(l),height:Number(u)}),title:n,description:o,uploadDate:void 0,connectedToSrc:a}},sd=function(e,t){return void 0===e&&(e=[]),e.map((e=>"image"===e.type?ad(e,t):id(e,t)),t)},cd=e=>{if(!dd(e))return{height:void 0,width:void 0};const[t,r]=e.match(/originHeight=(\d+)/)||[],[n,o]=e.match(/originWidth=(\d+)/)||[];return{height:r?Number(r):void 0,width:o?Number(o):void 0}},ld=e=>{let{uri:t,width:r,height:n,filename:o="image.ext"}=e;return"wix:image://v1/"+t+"/"+o+"#originWidth="+r+"&originHeight="+n},dd=e=>e.startsWith("wix:image://"),ud=e=>e.startsWith("wix:video://"),pd=(e,t)=>r=>{let{shouldCollectSeoData:n,controllerConfig:o,datasetType:a,connections:i,connectionsGraph:s,isScoped:c,datasetScope:l,dataProvider:d,dependencyManager:u,seoManager:p,firePlatformEvent:f,dynamicPagesData:h,datasetId:m,fixedRecordId:g,recordStoreService:y,updatedCompIds:v,markControllerAsRendered:_,markDatasetDataFetched:E,renderingRegularControllers:I,modeIsLivePreview:w,modeIsSSR:S,schemasLoading:R,listenersByEvent:T}=r;const b=i.filter((e=>!(e=>{let{role:t}=e;return De.includes(t)})(e)||e.config)),O=!!g,{logger:P,loadFormulaJs:C,platform:{user:D,settings:{locale:A},timers:{queueMicrotask:x}}}=j,{setConnectedComponents:F,getConnectedComponents:L}=(()=>{let e;return{setConnectedComponents:t=>e=t,getConnectedComponents:()=>e}})(),U=[],{store:k,subscribe:G,onIdle:V}=Sc(P,m),W=Bc(f),{fireEvent:B,register:q}=W;U.push(W.dispose);const H=new z({datasetId:Tl(m),scopedDatasetId:c?m:void 0,getState:k.getState,getSchema:function(e){return void 0===e&&(e=ee),d.getSchema(e)}}),Y=H.subscribe(T);U.push(...Y),k.dispatch(ir({controllerConfig:o,connections:b,isScoped:c,datasetType:a}));const{datasetIsVirtual:X,datasetIsReal:J,datasetIsDeferred:K,datasetIsWriteOnly:Q,datasetIsRouter:Z,datasetCollectionName:ee,dynamicPageNavComponentsShouldBeLinked:te}=(re=k.getState(),{datasetIsRouter:on(re),datasetIsMaster:an(re),datasetIsVirtual:sn(re),datasetIsReal:cn(re),datasetIsDeferred:ln(re),datasetIsWriteOnly:rn(re),datasetCollectionName:Yr(re),dynamicPageNavComponentsShouldBeLinked:dn(re)});var re;const ne=Xr(k.getState()),oe=Jr(k.getState()),ae=function(e){return void 0===e&&(e=ee),Qe.Maybe.fromNullable(d.getSchema(e))},ie=e=>{const t=ae(ee),r=d.getReferencedSchemas(ee);return t.chain((t=>Qe.Maybe.fromNullable(Yn(t,r)(e))))},se=((e,t,r)=>({dataBinding:Aa(e),currentUser:Da(),userInput:ts({getConnectedComponents:t,getFieldType:r})}))((e=>u.getDependencyById(e,l)),L,ie),ce=is({valueResolvers:se,getConnectedComponents:()=>en(k.getState())?L():[],getFieldType:ie,getUserFilterInitialData:()=>On(k.getState()),wasSetFilterCalled:(0,M.flow)((()=>k.getState()),In)}),le=(e=>{let{recordStoreService:t,getFilter:r,getSort:n,getPageSize:o,datasetId:a,filterResolver:i,getSchema:s,fixedRecordId:c}=e;return e=>{const l=o();return t.chain((t=>{if(e)return Qe.Result.fromMaybe(s().map((t=>Xn(e,t))),"cannot resolve referenced collection name for field "+e).map((e=>t({pageSize:l,sort:null,filter:null,datasetId:a,referencedCollectionName:e,fixedRecordId:c})));{const e=r();return Qe.Result.fromMaybe(i(e).map((e=>t({pageSize:l,sort:n(),filter:e,datasetId:a,referencedCollectionName:null,fixedRecordId:c}))),"could not resolve dynamic filter")}}))}})({recordStoreService:y,getFilter:(0,M.flow)((()=>k.getState()),Xr),getSort:(0,M.flow)((()=>k.getState()),Jr),getPageSize:()=>ki({state:k.getState()}),datasetId:m,filterResolver:ce,getSchema:ae,fixedRecordId:g}),de=te?(e=>{let{dataProvider:t,dynamicPagesData:r,collectionName:n}=e;return{getNextDynamicPageUrl:()=>fl({dataProvider:t,dynamicPagesData:r,collectionName:n,directionTowardSibling:"asc"}),getPreviousDynamicPageUrl:()=>fl({dataProvider:t,dynamicPagesData:r,collectionName:n,directionTowardSibling:"desc"})}})({dataProvider:d,dynamicPagesData:h,collectionName:ee}):null;let ue,pe;te&&(G(al(de)),k.dispatch(yc(b)));const fe=new Promise(((e,t)=>{ue=e,pe=t})),me=c?void 0:()=>fe;c||q("datasetReady",ue);const ge=Wc({store:k,recordStore:le,eventListeners:W,controllerStore:t,datasetId:m,datasetType:a,isFixedItem:O,siblingDynamicPageUrlGetter:de,onIdle:V,dispatcher:H,onReadyAsync:me}),ye=ge(!1);U.push(y.map((e=>e.onChange(bl(k.getState,k.dispatch)))).getOrElse((()=>{})));const{fetchingInitialData:ve,resolveUserInputDependency:_e}=El({dependencyManager:u,shouldFetchInitialData:o&&!Q,recordStore:le,store:k,filter:ne,sort:oe,datasetIsDeferred:K,modeIsSSR:S,queueMicrotask:x,datasetIsReal:J,collectionId:ee,filterResolver:ce,getSchemas:()=>d.getSchemas(),schemasLoading:R,getUserFilterInitialData:()=>d.getUserFilterInitialData(m)});ve.then((()=>{E();const e=le().fold((()=>{}),(e=>e.getSeedRecords().matchWith({Empty:()=>{},Results:e=>{let{items:t}=e;return t[0]}})));e&&k.dispatch(gc.setCurrentRecord(e,0))}));c&&!O&&u.getDependenciesByFilter(ne,l).forEach((e=>{let{masterDataset:{api:t}}=e;Ol({detailsDatasetApis:[ye],store:k,masterDatasetApi:t,controllerConfig:o,unsubscribeHandlers:U})}));n&&J&&!K&&Promise.all([ve,R]).then((()=>{let e={};try{e=td({isDpItemDataset:Z,recordStore:le,state:k.getState(),schema:d.getSchema(ee),connections:b})}catch(e){P.log(new N("Failed to extract seo data for dataset "+m,{cause:e}))}p.submitSeoData(e)}));const Ee=async function(r){D.onLogin((()=>{(()=>{const e=Vi({state:k.getState()}),t=le().fold((()=>!1),(t=>t.isPristine(e)));return t&&!Q})()&&ye.refresh()}));const{components:n,detailsDatasetApis:i}=r(b),c=Sl({updatedCompIds:v,datasetIsReal:J,connectionsGraph:s,components:n});F(c);const l=((e,t)=>{let{datasetId:r,connectionsGraph:n,datasetIsReal:o,getDependencies:a}=t;if(!o)return e;const{isInsidePrimaryOrDetailsRepeater:i,getDetailsRepeaters:s}=Ql({datasetId:r,connectionsGraph:n,masterIds:a().map((e=>e.masterDatasetId))}),c=e.filter((e=>!i(e)));return c.push(...s(e)),c})(c,{datasetId:m,datasetIsReal:J,connectionsGraph:s,getDependencies:()=>u.getDependenciesByFilter(ne)});if(Ol({detailsDatasetApis:i,masterDatasetApi:ye,dependencyManager:u,controllerConfig:o,unsubscribeHandlers:U}),J&&await R,_e(),!Zr(k.getState())||!d.hasSchema(o.dataset.collectionName))return ve.then((()=>{_(),u.resolveDependants(m),k.dispatch(Ec(!0)),B("datasetReady")})),Promise.resolve();const p=Kl({components:l,context:{connections:b,recordStore:le,dispatch:k.dispatch,getState:k.getState,datasetApi:ye,eventListeners:W,dispatcher:H,getFieldType:ie,getSchema:ae,controllerFactory:e,controllerStore:t,PresetVerboseMessage:He.with({collectionId:ee}),modeIsLivePreview:w,wixFormatter:A?Qc({locale:A}):null}});G(((e,t,r,n,o,a,i,s)=>{const c=tl(e,t,r,n,o,a,i,s),l=e=>{let{from:t,to:r,hasChanged:n,hasChangedToFalse:o,hasChangedToTrue:a,hasChangedToMatch:i}=e;const s=pn(r),l=pn(t),d=hn(r),u=wn(r),p=[];return(i(hn,(e=>e>=0&&e!==s))||a(wn))&&p.push(c.goToRecordByIndex(l,d,u)),(n(pn)&&l>=0||o(En)&&0===s)&&p.push(c.notifyIndexChange(s)),p},d=e=>{let{from:t,to:r,hasChanged:n,hasChangedToMatch:o,hasChangedToTrue:a}=e;const i=pn(r),s=un(r),l=un(t),d=[];vs(l,s)?(0,M.isEqual)(l,s)||(d.push(c.updateComponents(gn(r),l)),d.push(c.fireEvent("itemValuesChanged",(0,M.cloneDeep)(l),(0,M.cloneDeep)(s)))):null==l||null==s||n(pn)||d.push(c.updateComponents());const u=mn(r);return o(mn,(e=>null!=e))&&d.push(c.setFieldsInCurrentRecord(u,i,gn(r))),a(Tn)&&d.push(c.revertChanges(i,fn(r))),a(Rn)&&d.push(c.removeCurrentRecord(i)),d},u=e=>{let{to:t,hasChanged:r,hasChangedToFalse:n,hasChangedToTrue:o}=e;const a=[];return r(rl)&&a.push(c.refresh(pn(t),fn(t),rn(t))),r(Kr)&&a.push(c.notifyRecordSetLoaded()),o(En)&&a.push(c.refresh(pn(t),fn(t),rn(t))),n(En)&&a.push(c.notifyRecordSetLoaded()),o(Sn)&&a.push(c.updateCurrentView()),a},p=e=>{let{to:t,hasChangedToTrue:r}=e;const n=pn(t),o=un(t);if(r(bn))return c.saveRecord(n,o)},f=e=>{let{to:t,hasChangedToNotNull:r}=e;const n=[];return r(yn)&&n.push(c.newRecord(yn(t),fn(t))),n};return e=>(0,M.flatten)([l,d,u,p,f].map((t=>t(e))))})(le,p,ie,W.executeHooks,m,l,B,H)),U.push(((e,t,r,n,o)=>Xc(e,t,r,n,o))(k,l,P,m,le));const f=Il(l.filter((e=>{let{role:t}=e;return![he,Se].includes(t)})));k.dispatch(gc.setDefaultRecord(f)),Q&&await k.dispatch(gc.initWriteOnly(X)),K&&(p.hideAll(),S&&p.clearAll());const h=b.some((e=>{var t;return Object.keys((null==e||null==(t=e.config)?void 0:t.expressions)||{}).length>0}))?C():Promise.resolve(),g=Promise.all([ve,h]).then((async()=>{if(K&&await I,!S)try{((e,t,r,n,o,a)=>{if(n)return;const i=Yr(e);if(!i)return;const s=a.fold((()=>i),(e=>e.displayName)),c=Qr(e),l=!!un(e),{logger:d,platform:{settings:{env:{editor:u}}}}=j;l&&[Pn,Cn].includes(c)&&t.find((e=>{let{role:t,config:r}=e;return Ke(t,r)}))&&d.log(new Un({id:u?153:152,collectionId:i,collectionName:s,datasetId:o,datasetType:r,datasetMode:c})),wt(Qr(e),t)&&d.log(new Un({id:u?157:156,collectionId:i,collectionName:s,datasetId:o,datasetType:r,datasetMode:c}))})(k.getState(),b,a,X,m,ae(ee))}catch(e){P.log(new N("Failed to report dataset active BI",{cause:e}))}await p.bindAll(),J&&await(e=>Promise.all(e.getAll().map((e=>new Promise((t=>{e.staticExports.onReady(t)}))))))(t),K&&p.showAll(),u.resolveDependants(m),k.dispatch(Ec(!0)),B("datasetReady")}));return K?(_(),Promise.resolve()):(g.then(_),g)},Ie=ge(!0);return{pageReady:$(X?Ee:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return P.log(new We("dataset/pageReady",(()=>Ee(...t))))},(e=>(pe(),P.logError(e,"Dataset pageReady callback failed",{datasetId:m})))),exports:e=>e.type===sc.l.COMPONENT?Ie.inScope(e.compId,e.additionalData.itemId):Ie,staticExports:Ie,dispose:()=>{U.forEach((e=>e()))},api:ye,userFilterInitialDataPromise:ve.then((e=>{let[t,r]=e;return r}))}},fd=(e,t)=>{const r=ic(e),n={createRealDataset:()=>o({...t,isScoped:!1}),createScopedDetailsDataset:e=>{let{datasetScope:r}=e;return o({...t,isScoped:!0,firePlatformEvent:M.noop,datasetId:Rl(t.datasetId,r),datasetScope:r})},createScopedDataset:e=>{let{datasetScope:r,fixedItem:n}=e;const{dataProvider:a,controllerConfig:i,dynamicPagesData:s}=t,c=(0,M.cloneDeep)(i),l={items:[n]};c.dataset.filter=a.createSimpleFilter("_id",n._id);const{collectionName:d}=i.dataset;return a.setCollectionData({collectionId:d,data:l}),o({...t,isScoped:!0,controllerConfig:c,firePlatformEvent:M.noop,dynamicPagesData:s,datasetId:Rl(t.datasetId,r),fixedRecordId:r.itemId})}},o=pd(n,r);return n},hd=e=>cs(e).map((e=>{let{filterExpression:{filterId:t}}=e;return t}));var md=a(9025);function gd(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var yd=new WeakMap;class vd{constructor(){gd(this,yd,{writable:!0,value:void 0}),d()(this,yd,new Map)}get datasetConfigs(){return c()(this,yd)}}function _d(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var Ed=new WeakMap,Id=new WeakMap,wd=new WeakMap,Sd=new WeakMap,Rd=new WeakMap,Td=new WeakMap,bd=new WeakMap;class Od{constructor(e){let{platform:t,dataFetcher:r,warmupCache:n,staticCache:o,features:a,listenersByEvent:i,logger:s,i18n:c,global:l,loadFormulaJs:u}=e;_d(this,Ed,{writable:!0,value:void 0}),_d(this,Id,{writable:!0,value:void 0}),_d(this,wd,{writable:!0,value:void 0}),_d(this,Sd,{writable:!0,value:void 0}),_d(this,Rd,{writable:!0,value:void 0}),_d(this,Td,{writable:!0,value:void 0}),_d(this,bd,{writable:!0,value:void 0});const p=new xn(s,l);V({loadFormulaJs:u,platform:t,features:a,dataFetcher:r,i18n:c,appState:new vd,logger:p,errorReporting:Fn(p),breadcrumbReporting:Ln(p),verboseReporting:Mn(p)}),d()(this,Ed,new wa),d()(this,Id,n),d()(this,wd,o),d()(this,Sd,a),d()(this,Td,p),d()(this,bd,{}),d()(this,Rd,i)}initializeDatasets(e){let{datasetConfigs:t,firePlatformEvent:r}=e;try{return c()(this,Td).log(new We("databinding/createControllers",(()=>this._initializeDatasets({datasetConfigs:t,firePlatformEvent:r}))))}catch(e){return c()(this,Td).logError(e,"Datasets initialisation failed"),[]}}_initializeDatasets(e){let{datasetConfigs:t,firePlatformEvent:r}=e;const{platform:{settings:{mode:{name:n,csr:o,ssr:a},env:{livePreview:i,live:s}},seo:l,location:d}}=j,u=fs(t),p=this._updateDatasetConfigsState(u),f=c()(this,Sd).warmupData,h=[],m=[],{resolve:g,promise:y}=new H;c()(this,Ed).setSchemas({...f&&o&&c()(this,Id).getSchemas()||{},...c()(this,wd).getSchemas()||{}});const v=c()(this,Td).log(new We("databinding/loadSchemas",(()=>c()(this,Ed).loadSchemas(Pd(u)).then((()=>f&&a&&c()(this,Id).setSchemas(c()(this,Ed).getSchemas()))))));c()(this,Ed).setDatasetConfigs(u.map((e=>{let{config:{dataset:{collectionName:t}},compId:r,type:n}=e;return{collectionId:t,datasetId:r,type:n}})));const _=o&&f&&c()(this,Id).getDataStore();_&&c()(this,Ed).setStore(Ad(_));const E=c()(this,wd).getDataStore();E&&c()(this,Ed).setStaticStore(Ad(E)),c()(this,Ed).createInitialDataRequest(this._getInitialDataRequestConfigs(u,p));const I=u.reduce(((e,t)=>{let{compId:r,connections:n}=t;return e[r]=n.map((e=>{let{compId:t}=e;return t})),e}),{}),w=(e=>{let{datasetConfigs:t}=e;const r={},n={},o=(e,t)=>{const o=n[e];if(!o)return;const a=r[o.masterDatasetId];return a?{...o,masterDataset:t?{...a,api:a.api.inScope(t.repeaterId,t.itemId)}:a}:o};return t.forEach((e=>{let{id:t,connections:r}=e;r.forEach((e=>{let{role:r,config:o}=e;r===ne&&Object.entries(o.filters).forEach((e=>{let r,[o,{fieldName:a}]=e;n[o]={id:o,fieldName:a,masterDatasetId:t,isResolved:!1,promise:new Promise((e=>r=e)),resolve:()=>{n[o].isResolved=!0,r()}}}))}))})),{resolveDependants:e=>Object.values(n).forEach((t=>{let{id:r,masterDatasetId:o}=t;e===o&&n[r].resolve()})),getDependencyResolutionPromise:e=>{const t=hd(e).flatMap((e=>n[e]&&!n[e].isResolved?[n[e].promise]:[]));return t.length>0?Promise.all(t):void 0},getDependencyById:o,getDependenciesByFilter:(e,t)=>hd(e).flatMap((e=>o(e,t)||[])),registerDataset:e=>{let{id:t,api:n,config:o}=e;r[t]={id:t,api:n,config:o}}}})({datasetConfigs:u}),S=u.some((e=>{let{type:t,dynamicPageData:r}=e;return t===br&&!(null==(n=null==r?void 0:r.dynamicUrl)||!n.match(/\{.+\}/));var n})),R=S&&u.some((e=>{let{type:t,dynamicPageData:r}=e;return t===br&&(null==r?void 0:r.seoV2)})),T=s&&S&&R,b=T?(e=>{let{seo:t,pageUrl:r}=e;const{logger:n}=j;let o;const a={title:void 0,pageUrl:r,collections:[]};return{submitSeoData:e=>{let{title:t,collectionData:r}=e;o||(t&&(a.title=t),r&&a.collections.push(r))},renderSeoTagsOnce:()=>(o||(o=t.renderSEOTags({itemType:md.ITEM_TYPES.WIX_DATA_PAGE_ITEM,itemData:a}).catch((e=>{n.log(new N("Failed to render seo tags",{cause:e}))}))),o)}})({seo:l,pageUrl:d.pageUrl}):null,O=u.map((e=>{let{type:t,config:s,connections:l,compId:d,livePreviewOptions:{shouldFetchData:u,compsIdsToReset:p=[]}={},dynamicPageData:g}=e;const{datasetIsRouter:E,datasetIsDeferred:S}=s.datasetStaticConfig;c()(this,Td).log(new Be({category:"createControllers",message:"warmup data contents",data:{datasetId:d,datasetType:t,mode:n,warmupData:Boolean(_)}}));const R=(e=>{let{primaryDatasetId:t,recordStoreCache:r,refreshStoreCache:n,dataProvider:o,controllerConfig:a}=e;return Qe.Result.fromNullable(a,"missing controller configuration").chain((e=>{let{dataset:t}=e;return Qe.Result.fromNullable(t,"controller configuration is missing dataset object")})).chain((e=>{let{collectionName:t}=e;return Qe.Result.fromNullable(t,"dataset is not connected to a collection")})).map((e=>{const i=(0,M.get)(a,["dataset","includes"]),s=(0,M.get)(a,["dataset","nested"]),c=(0,M.get)(a,["dataset","cursor"]),l=(0,M.get)(a,["dataset","readWriteType"]),d=(0,M.get)(a,["dataset","uniqueFieldValues"]);return ac({primaryDatasetId:t,recordStoreCache:r,refreshStoreCache:n,dataProvider:o,mainCollectionName:e,includes:i,nestedFieldKeys:s,uniqueFieldValues:d,readWriteType:l,cursorPagingRequired:c})}))})({primaryDatasetId:d,recordStoreCache:c()(this,bd),refreshStoreCache:u,dataProvider:c()(this,Ed),controllerConfig:s}),{promise:O,resolve:P}=new H;E||S||h.push(O);const{promise:C,resolve:N}=new H;m.push(C);const D=o&&f&&c()(this,Id).getUserFilterInitialData(d);D&&c()(this,Ed).setUserFilterInitialData(d,D);const A=fd(c()(this,Td),{shouldCollectSeoData:T,seoManager:b,dependencyManager:w,controllerConfig:s,datasetType:t,connections:l,connectionsGraph:I,recordStoreService:R,dataProvider:c()(this,Ed),firePlatformEvent:r(d),dynamicPagesData:E&&g?{dynamicPageData:g,items:c()(this,wd).getItems(),datasetConfig:s}:void 0,datasetId:d,schemasLoading:v,listenersByEvent:c()(this,Rd),updatedCompIds:p,markControllerAsRendered:N,markDatasetDataFetched:P,renderingRegularControllers:y,modeIsLivePreview:i,modeIsSSR:a}).createRealDataset();return w.registerDataset({id:d,api:A.api,config:s}),a&&f&&A.userFilterInitialDataPromise.then((e=>{c()(this,Id).setUserFilterInitialData(d,e)})),Cd(A)}));a&&f&&h.length&&Promise.all(h).then((()=>{c()(this,Id).setDataStore(Dd(c()(this,Ed).getStore()))})),Promise.all(m).then(g);const P=()=>Promise.all(h).then(b.renderSeoTagsOnce);return T?O.map((e=>({...e,pageReady:function(){return e.pageReady(...arguments).then(P)}}))):O}_updateDatasetConfigsState(e){const{appState:t}=j;return e.reduce(((e,r)=>{let{compId:n,config:{dataset:o}}=r;const a=t.datasetConfigs.get(n);return a&&!(0,M.isEqual)(a,o)&&e.push(n),t.datasetConfigs.set(n,o),e}),[])}_getInitialDataRequestConfigs(e,t){return e.reduce(((e,r)=>{let{compId:n,config:{datasetStaticConfig:{sequenceType:o}},livePreviewOptions:{shouldFetchData:a}={}}=r;return o===Ta?[...e,{id:n,refresh:a||t.includes(n)}]:e}),[])}}const Pd=e=>[...e.reduce(((e,t)=>{let{config:{dataset:{collectionName:r}}}=t;return r?e.add(r):e}),new Set)],Cd=e=>{let{pageReady:t,exports:r,dispose:n}=e;return{pageReady:t,exports:r,dispose:n}},Nd=e=>t=>{if(t)return{...t,recordsByCollectionId:Object.entries(t.recordsByCollectionId).reduce(((t,r)=>{let[n,o]=r;return t[n]=e(o),t}),{})}},Dd=Nd(kn.ah),Ad=Nd(kn.PL),xd=e=>{let{datasetId:t,record:r,schema:n,getSchema:o}=e;const a={"form-id":{value:t,keyName:""}},i=(0,M.pickBy)(n.fields,((e,t)=>((e,t)=>{const r=e.type,n=T.includes(r),o=!!e.systemField,a=["_createdDate","_updatedDate"].includes(t||e.name);return(!o||a)&&n})(e,t)&&!function(e){return!!e.isDeleted}(e)));return(0,M.forEach)(i,((e,n)=>{const i=function(e){let{record:t,fieldData:r,fieldName:n,getSchema:o}=e;if("reference"===r.type){const e=o(r.referencedCollection);if(!e)return;const a=ka(t[n],e.displayField);return{value:Ka(a),type:e.fields[e.displayField].type}}return{value:Ka(ka(t,n)),type:r.type}}({record:r,fieldData:e,fieldName:n,getSchema:o});if(!i)return;const{value:s,type:c}=i,{displayName:l,index:d}=e,u=((e,t)=>`${e}.${t}`)(t,n);a["field:"+u]={value:s,keyName:l,index:d,valueType:c}})),a};const Fd=e=>{let{automationsClientCreator:t,pageId:r}=e;const n=t().reportFormEventToAutomationCreator();return{afterSave:async(e,t,o)=>{let{datasetId:a,getSchema:i,getState:s}=e;const c=s(),l=i();if(!Boolean(c.records.isForm)||!l)return;const{eventUTCTime:d,detailedEventPayload:u,collectionId:p}=(e=>{let{datasetId:t,getSchema:r,record:n,schema:o}=e;return{eventUTCTime:ka(n,"_updatedDate"),detailedEventPayload:xd({datasetId:t,record:n,schema:o,getSchema:r}),collectionId:o.id}})({datasetId:a,record:o,schema:l,getSchema:i});await n({eventUTCTime:d,detailedEventPayload:u},p,r)}}};var Ld=a(5675),Md=a.n(Ld);function Ud(e){return"object"===Md()(e)}function kd(e){return"array"===Md()(e)}function Gd(e){return"string"===Md()(e)}function jd(e){return function(e){if(!Gd(e))return e;var t=e.slice(0,1).toUpperCase(),r=e.slice(1,e.length);return t+r}(Md()(e))}function Vd(e){if(null==e||"object"!=typeof e)return e;var t=null;if(function(e){return"date"===Md()(e)}(e))t=new Date(e.getTime());else for(var r in t=e.constructor(),e)t[r]=Vd(e[r]);return t}var Wd=a(3065);a(5174);var Bd=function(){return"WDE0001: Collection name must be a string."},qd=function(){return"WDE0002: ItemId must be a string."},zd=function(){return"WDE0068: Item ids must be an array of strings"},Hd=function(e){return"WDE0069: Failed to remove items from [".concat(e,"].\nCannot remove more than 1000 items in one request")},$d=function(){return"WDE0003: FieldName must be a string."},Yd=function(e,t){return"WDE0004: Failed to save [".concat(e,"] into [").concat(t,"].\nItems must be JavaScript objects.")},Xd=function(e){return"WDE0005: Failed to bulk save items into [".concat(e,"].\nItems must be an array of JavaScript objects and itemIds must be strings if present.")},Jd=function(e){return"WDE0006: Failed to bulk save items into [".concat(e,"].\nCannot insert more than 1000 items in one request")},Kd=function(){return"WDE0007: Invalid update. Updated object must have a string _id property."},Qd=function(e,t,r,n){return"WDE0008: wixData.".concat(e," expects between ").concat(t," and ").concat(r," arguments, but was called with ").concat(n,".")},Zd=function(e){return"WDE0018: Options must be an object with one or all of the following boolean properties: ".concat(e.join(", "),".")},eu=function(){return"WDE0019: Reference operation takes a string ID or an object with an ID to be connected."},tu=function(){return"WDE0021: Invalid reference"},ru=function(e){return"WDE0025: The ".concat(e," collection does not exist. You cannot work with a collection using the Data API before it is created in the Editor.")},nu=function(e){return"WDE0026: The ".concat(e," collection was removed, so you cannot work with it. To restore its data, create a new collection with the same name.")},ou={queryInvalid:function(e,t){return"Failed to perform query on [".concat(e,"].\n").concat(t.join("\n"))},isNumber:function(e,t,r){return"WDE0032: Invalid ".concat(e," parameter [").concat(jd(r),"]. ").concat(e," parameter must be a ").concat(t," number.")},isPositiveNumber:function(e,t){return"WDE0033: Invalid ".concat(e," parameter [").concat(t,"]. ").concat(e," parameter must be a positive number.")},isNonNegativeNumber:function(e,t){return"WDE0034: Invalid ".concat(e," parameter [").concat(t,"]. ").concat(e," parameter must be a non-negative number.")},isInteger:function(e,t){return"WDE0035: Invalid ".concat(e," parameter [").concat(t,"]. ").concat(e," parameter must be an integer.")},isNonEmptyString:function(e){return"WDE0094: Invalid ".concat(e," parameter. ").concat(e," parameter must be non-empty string.")},notGreaterThan:function(e,t,r){return"WDE0036: Invalid ".concat(e," parameter [").concat(t,"]. ").concat(e," parameter cannot exceed ").concat(r,".")},invalidSkipParameter:function(e,t){return"WDE0037: Invalid query on [".concat(e,"].\nInvalid prev positioned query skip on a negative number ").concat(t,".")},noPrevPage:function(e){return"WDE0159: Invalid query on [".concat(e,"].\nThere is no prev page.")},noNextPage:function(e){return"WDE0165: Invalid query on [".concat(e,"].\nThere is no next page.")}},au={arityIsZero:function(e){return"WDE0038: Invalid ".concat(e," usage. ").concat(e," does not take parameters.")},arityIsOne:function(e){return"WDE0039: Invalid ".concat(e," usage. ").concat(e," requires one parameter.")},arityIsTwo:function(e){return"WDE0040: Invalid ".concat(e," usage. ").concat(e," requires two parameters.")},arityIsThree:function(e){return"WDE0041: Invalid ".concat(e," usage. ").concat(e," requires three parameters.")},arityIsAtLeastTwo:function(e){return"WDE0042: Invalid ".concat(e," usage. ").concat(e," requires at least two parameters.")},arityIsAtLeastOne:function(e){return"WDE0043: Invalid ".concat(e," usage. ").concat(e," requires at least one parameter.")}},iu="WD_UNKNOWN_ERROR",su="WD_VALIDATION_ERROR",cu="WD_COLLECTION_DELETED",lu="WD_SCHEMA_DOES_NOT_EXIST";function du(e,t){return uu(e,t)}function uu(e,t){var r=new(t&&t!==iu?fu:Error)(e);return r.code=t,r}function pu(e){return du(ru(e),lu)}function fu(e){var t=new Wd.UserCodeError(e);return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(t,fu),t.name=Error.name,t}Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),fu.prototype=Object.create(Wd.UserCodeError.prototype,{constructor:{value:fu,enumerable:!1,writable:!0,configurable:!0}});var hu=function(){function e(){this._validations=[]}return e.prototype.arityIsZero=function(e){var t=this;return this.addValidation((function(){return 0===e.length}),(function(){return au.arityIsZero(t.operatorName)}))},e.prototype.arityIsOne=function(e){var t=this;return this.addValidation((function(){return 1===e.length}),(function(){return au.arityIsOne(t.operatorName)}))},e.prototype.arityIsTwo=function(e){var t=this;return this.addValidation((function(){return 2===e.length}),(function(){return au.arityIsTwo(t.operatorName)}))},e.prototype.arityIsThree=function(e){var t=this;return this.addValidation((function(){return 3===e.length}),(function(){return au.arityIsThree(t.operatorName)}))},e.prototype.arityIsAtLeastTwo=function(e){var t=this;return this.addValidation((function(){return e.length>=2}),(function(){return au.arityIsAtLeastTwo(t.operatorName)}))},e.prototype.arityIsAtLeastOne=function(e){var t=this;return this.addValidation((function(){return e.length>=1}),(function(){return au.arityIsAtLeastOne(t.operatorName)}))},e.prototype.addValidation=function(e,t){return this._validations.push({predicateFn:e,messageFn:t}),this},e}(),mu=(function(e){function t(t){var r=e.call(this)||this;return r._invalidArguments=Vd(t),r}Di(t,e),t.prototype.validateAndAggregate=function(){var e=this,t=this._validations.every((function(t){var r=t.predicateFn,n=t.messageFn;return e._appendIfInvalid(r(),n())}));return[this._invalidArguments,t]},t.prototype._appendIfInvalid=function(e,t){return!!e||(this._invalidArguments.push(t),!1)}}(hu),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Di(t,e),t.prototype.validateAndReject=function(){var e=this;return Promise.resolve().then((function(){e._validations.forEach((function(e){var t=e.predicateFn,r=e.messageFn;if(!t())throw uu(r(),su)}))}))},t}(hu));!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Di(t,e),t.prototype.arity=function(e,t,r,n){return this.addValidation((function(){return t.length<=n&&t.length>=r}),(function(){return Qd(e,r,n,t.length)}))},t.prototype._isObject=function(e,t){return this.addValidation((function(){return Ud(e)}),(function(){return Yd(e,t)}))},t.prototype.item=function(e,t,r){return this._isObject(e,t).addValidation((function(){return void 0!==e._id?Gd(e._id):!r}),(function(){return Kd()}))},t.prototype.items=function(e,t){return this.addValidation((function(){return kd(e)&&e.every((function(e){return Ud(e)&&(void 0===e._id||null===e._id||Gd(e._id))}))}),(function(){return Xd(t)})).addValidation((function(){return e.length<=1e3}),(function(){return Jd(t)}))},t.prototype.fieldName=function(e){return this.addValidation((function(){return Gd(e)}),(function(){return $d()}))},t.prototype.itemId=function(e){return this.addValidation((function(){return Gd(e)}),(function(){return qd()}))},t.prototype.itemIds=function(e,t){return this.addValidation((function(){return kd(e)&&e.every((function(e){return Gd(e)}))}),(function(){return zd()})).addValidation((function(){return e.length<=1e3}),(function(){return Hd(t)}))},t.prototype._options=function(e,t){return this.addValidation((function(){var r=Ud(e)&&t.every((function(t){return"language"===t?null==(r=e[t])||Gd(r)&&r.length>0:function(e){return null==e||(t=e,"boolean"===Md()(t));var t}(e[t]);var r}));return null==e||r}),(function(){return Zd(t)}))},t.prototype.referenceRemoveParameters=function(e){return this.addValidation((function(){return kd(e)&&e.every(yu)}),eu)},t.prototype.referenceParameters=function(e){return this.addValidation((function(){return kd(e)&&e.every(gu)}),eu)},t.prototype.referenceParameter=function(e){return this.addValidation((function(){return gu(e)}),eu)},t.prototype.isNonEmptyString=function(e,t){return this.addValidation((function(){return"string"==typeof e&&e.length>0}),(function(){return ou.isNonEmptyString(t)}))},t.prototype.references=function(e){return this.addValidation((function(){return kd(e)&&e.every((function(e){return Gd(e.relationshipName)&&gu(e.left)&&gu(e.right)}))}),tu)},t.prototype.options=function(e){return this._options(e,["suppressAuth","suppressHooks","showDrafts","consistentRead","language"])},t.prototype.bulkInsertOptions=function(e){return this._options(e,["suppressAuth","suppressHooks","overrideExisting"])},t.prototype.bulkUpdateOptions=function(e){return this._options(e,["suppressAuth","suppressHooks","showDrafts"])},t.prototype.bulkRemoveOptions=function(e){return this._options(e,["suppressAuth","suppressHooks","showDrafts"])},t.prototype.truncateOptions=function(e){return this._options(e,["suppressAuth"])},t.prototype.collectionName=function(e){return this.addValidation((function(){return Gd(e)}),(function(){return Bd()}))}}(mu);function gu(e){return Gd(e)&&""!==e||Ud(e)&&e.hasOwnProperty("_id")}function yu(e){return Gd(e)||Ud(e)&&e.hasOwnProperty("_id")}var vu=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function _u(e){return function(e,t){return Promise.reject(du(e,t))}(nu(e),cu)}var Eu=function(e){function t(t,r){var n=e.call(this,t)||this;return Object.setPrototypeOf(n,r.prototype),n.name=r.name,Error.captureStackTrace?Error.captureStackTrace(n,r):n.stack=new Error(t).stack,n}return vu(t,e),t}(Error),Iu=function(e){function t(r){var n=e.call(this,r,t)||this;return n.reason=r,n.message=r,n}return vu(t,e),t}(Eu),wu=function(e){function t(r,n,o,a){var i=e.call(this,o,t)||this;return i.status=r,i.responseText=n,i.requestId=a,i}return vu(t,e),t}(Eu),Su=a(4126),Ru=function(e){return"object"==typeof e&&e.message?e.message:"string"==typeof e?e:JSON.stringify(e)},Tu=function(e){return e.reduce((function(e,t){var r;return Object.assign({},e,((r={})[t.id]=t,r))}),{})},bu=function(e,t){return e.endsWith(t)?e.substring(0,e.length-t.length):e},Ou=function(){function e(e,t,r,n){var o=this,a=function(e){return e=bu(e,"/"),bu(e,"/v1/schemas")}(n&&n.baseUrl||"https://cloud-data.wix-code.com");this.signedInstance=t,this.gridAppId=r,this.mutate=function(t,r,n){return e[t](a+r,n,o._setHeaders()).then((function(e){return e.data})).catch(o._handleError)},this.retrieve=function(t){return e.get(a+t,o._setHeaders()).then((function(e){return e.data})).catch(o._handleError)}}return e.prototype.wrapWithDefaultOptions=function(e){return Object.assign({},e,{appId:this.gridAppId})},e.prototype.formRequestUrl=function(e){return"/v1/schemas?"+Su.Pz(e)},e.prototype.get=function(e,t){void 0===t&&(t={includeDeletedCollections:!1});var r=this.wrapWithDefaultOptions({includeDeleted:!0,schemaIds:e});return this.retrieve(this.formRequestUrl(r)).then((function(r){var n=r.schemas[0];return n&&n.isDeleted&&!t.includeDeletedCollections?_u(e):n||Promise.reject(pu(e))}))},e.prototype.bulkGet=function(e,t){void 0===t&&(t={includeDeletedCollections:!1,referencedCollectionsDepth:0});var r=this.wrapWithDefaultOptions({depth:t.referencedCollectionsDepth||0,includeDeleted:t.includeDeletedCollections||!1,schemaIds:e});return this.retrieve(this.formRequestUrl(r)).then((function(e){var t=e.schemas;return Tu(t)}))},e.prototype.list=function(e){void 0===e&&(e={includeDeletedCollections:!1});var t=this.wrapWithDefaultOptions({schemaIds:[],depth:0,includeDeleted:e.includeDeletedCollections||!1});return this.retrieve(this.formRequestUrl(t)).then((function(e){var t=e.schemas;return Tu(t)}))},e.prototype.save=function(e,t){var r=this.wrapWithDefaultOptions({schemaId:e,schema:t});return this.mutate("post","/v1/schemas",r).then((function(e){return e.schemas}))},e.prototype.setIsDeletedFlag=function(e,t){var r=this.wrapWithDefaultOptions({schemaId:e,partialSchema:{isDeleted:t}});return this.mutate("patch","/v1/schemas",r).then((function(e){return e.schemas}))},e.prototype.remove=function(e){return this.setIsDeletedFlag(e,!0)},e.prototype.restore=function(e){return this.setIsDeletedFlag(e,!1)},e.prototype._setHeaders=function(){return{headers:{authorization:this.signedInstance}}},e.prototype._handleError=function(e){if(!e.response)return Promise.reject(new Iu(Ru(e)));var t=e.response,r=t.headers&&t.headers["x-wix-request-id"];return Promise.reject(new wu(t.status,t.data,Ru(t.data),r))},e}();const Pu=Ou;var Cu,Nu,Du,Au,xu,Fu,Lu,Mu,Uu,ku,Gu,ju,Vu=a(3368),Wu=a(2681),Bu={typeMetadata:"_typeMetadata"},qu={createdDate:"google.protobuf.Timestamp",updatedDate:"google.protobuf.Timestamp",fields:"_field"},zu={dataCollection:"_dataCollection"},Hu={numberRange:"_numberRange",typeMetadata:"_typeMetadata"},$u={},Yu={activeCollections:"_dataCollectionWithMetadata",deletedCollections:"_dataCollectionWithMetadata"},Xu={min:"google.protobuf.DoubleValue",max:"google.protobuf.DoubleValue"},Ju={fields:"_objectField"},Ku={typeMetadata:"_typeMetadata"},Qu={object:"_object",array:"_array"};function Zu(e){return(0,Wu.Kk)(Object.assign(e,{domainToMappings:{"api._api_base_domain_":[{srcPath:"/autocms-server",destPath:""}],"www._base_domain_":[{srcPath:"/_api/autocms-server",destPath:""}],"manage._base_domain_":[{srcPath:"/_api/autocms-server",destPath:""}],"editor._base_domain_":[{srcPath:"/_api/autocms-server",destPath:""}],"blocks._base_domain_":[{srcPath:"/_api/autocms-server",destPath:""}],"create.editorx":[{srcPath:"/_api/autocms-server",destPath:""}],_:[{srcPath:"/_api/autocms-server",destPath:""}]}}))}function ep(e){var t=(0,Vu.G)($u,{}),r=t.toJSON,n=t.fromJSON,o=(0,Vu.G)(Yu,{_array:Bu,_dataCollection:qu,_dataCollectionWithMetadata:zu,_field:Hu,_numberRange:Xu,_object:Ju,_objectField:Ku,_typeMetadata:Qu}).fromJSON;function a(t){var n=t.host,a=r(e);return{entityFqdn:"wix.data.autocms.v1.batch_response",method:"POST",methodFqn:"com.wixpress.cloud.autocms.v1.BatchRequestService.GetDataCollectionsWithMetadata",url:Zu({protoPath:"/v1/batch/collections/get",data:a,host:n}),data:a,transformResponse:o}}return a.fromReq=n,a}function tp(e){return Object.keys(e).reduce((function(t,r){return void 0!==e[r]&&(t[r]=e[r]),t}),{})}function rp(e){for(var t={},r=0,n=Object.keys(e);r<n.length;r++){var o=n[r],a=e[o];void 0!==a&&(t[a]=o)}return t}ep.__isAmbassador=!0,function(e){e.LIVE="LIVE",e.SANDBOX="SANDBOX"}(Cu||(Cu={})),function(e){e.NATIVE="NATIVE",e.WIX_APP="WIX_APP",e.BLOCKS_APP="BLOCKS_APP",e.EXTERNAL="EXTERNAL"}(Nu||(Nu={})),function(e){e.ASC="ASC",e.DESC="DESC"}(Du||(Du={})),function(e){e.AGGREGATE="AGGREGATE",e.BULK_INSERT="BULK_INSERT",e.BULK_REMOVE="BULK_REMOVE",e.BULK_SAVE="BULK_SAVE",e.BULK_UPDATE="BULK_UPDATE",e.COUNT="COUNT",e.DISTINCT="DISTINCT",e.FIND="FIND",e.GET="GET",e.INSERT="INSERT",e.INSERT_REFERENCE="INSERT_REFERENCE",e.IS_REFERENCED="IS_REFERENCED",e.QUERY_REFERENCED="QUERY_REFERENCED",e.REMOVE="REMOVE",e.REMOVE_REFERENCE="REMOVE_REFERENCE",e.REPLACE_REFERENCES="REPLACE_REFERENCES",e.SAVE="SAVE",e.TRUNCATE="TRUNCATE",e.UPDATE="UPDATE"}(Au||(Au={})),function(e){e.UPDATE="UPDATE",e.REMOVE="REMOVE"}(xu||(xu={})),function(e){e.UNKNOWN_FIELD_TYPE="UNKNOWN_FIELD_TYPE",e.TEXT="TEXT",e.NUMBER="NUMBER",e.DATE="DATE",e.DATETIME="DATETIME",e.IMAGE="IMAGE",e.BOOLEAN="BOOLEAN",e.DOCUMENT="DOCUMENT",e.URL="URL",e.RICH_TEXT="RICH_TEXT",e.VIDEO="VIDEO",e.ANY="ANY",e.ARRAY_STRING="ARRAY_STRING",e.ARRAY_DOCUMENT="ARRAY_DOCUMENT",e.AUDIO="AUDIO",e.TIME="TIME",e.LANGUAGE="LANGUAGE",e.RICH_CONTENT="RICH_CONTENT",e.MEDIA_GALLERY="MEDIA_GALLERY",e.ADDRESS="ADDRESS",e.PAGE_LINK="PAGE_LINK",e.REFERENCE="REFERENCE",e.MULTI_REFERENCE="MULTI_REFERENCE",e.OBJECT="OBJECT",e.ARRAY="ARRAY",e.LEGACY_TIME="LEGACY_TIME",e.LEGACY_BOOK="LEGACY_BOOK",e.LEGACY_EXTERNAL_URL="LEGACY_EXTERNAL_URL",e.LEGACY_BROKEN_REFERENCE="LEGACY_BROKEN_REFERENCE",e.LEGACY_IMAGE="LEGACY_IMAGE",e.LEGACY_COLOR="LEGACY_COLOR",e.LEGACY_EXTERNAL_VIDEO="LEGACY_EXTERNAL_VIDEO"}(Fu||(Fu={})),function(e){e.EQ="EQ",e.LT="LT",e.GT="GT",e.NE="NE",e.LTE="LTE",e.GTE="GTE",e.STARTS_WITH="STARTS_WITH",e.ENDS_WITH="ENDS_WITH",e.CONTAINS="CONTAINS",e.HAS_SOME="HAS_SOME",e.HAS_ALL="HAS_ALL",e.EXISTS="EXISTS",e.URLIZED="URLIZED"}(Lu||(Lu={})),function(e){e.UNKNOWN_ROLE="UNKNOWN_ROLE",e.ADMIN="ADMIN",e.SITE_MEMBER_AUTHOR="SITE_MEMBER_AUTHOR",e.SITE_MEMBER="SITE_MEMBER",e.ANYONE="ANYONE"}(Mu||(Mu={})),function(e){e.UNKNOWN_PUBLISH_PLUGIN_STATUS="UNKNOWN_PUBLISH_PLUGIN_STATUS",e.PUBLISHED="PUBLISHED",e.DRAFT="DRAFT"}(Uu||(Uu={})),function(e){e.UNKNOWN_URLIZED_PLUGIN_FORMAT="UNKNOWN_URLIZED_PLUGIN_FORMAT",e.ORIGINAL="ORIGINAL",e.PLAIN="PLAIN"}(ku||(ku={})),function(e){e.UNKNOWN_PLUGIN_TYPE="UNKNOWN_PLUGIN_TYPE",e.PUBLISH="PUBLISH",e.SINGLE_ITEM="SINGLE_ITEM",e.URLIZED="URLIZED",e.GRIDAPPLESS="GRIDAPPLESS",e.MULTILINGUAL="MULTILINGUAL",e.SHARED="SHARED",e.EDITABLE_PAGE_LINK="EDITABLE_PAGE_LINK"}(Gu||(Gu={})),function(e){e.OFFSET="OFFSET",e.CURSOR="CURSOR"}(ju||(ju={}));var np,op,ap=function(){return ap=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ap.apply(this,arguments)},ip=((np={})[ju.OFFSET]=m.PagingMode.Offset,np[ju.CURSOR]=m.PagingMode.Cursor,np),sp=((op={})[Nu.NATIVE]=m.Storage.docstore,op[Nu.WIX_APP]=m.Storage.driver,op[Nu.BLOCKS_APP]=m.Storage.staticAppSchema,op[Nu.EXTERNAL]=m.Storage.external,op),cp={IS_REFERENCED:m.DataOperation.isReferenced,INSERT:m.DataOperation.insert,SAVE:m.DataOperation.save,BULK_INSERT:m.DataOperation.bulkInsert,BULK_UPDATE:m.DataOperation.bulkUpdate,UPDATE:m.DataOperation.update,TRUNCATE:m.DataOperation.truncate,REMOVE:m.DataOperation.remove,REMOVE_REFERENCE:m.DataOperation.removeReference,COUNT:m.DataOperation.count,FIND:m.DataOperation.find,REPLACE_REFERENCES:m.DataOperation.replaceReferences,BULK_REMOVE:m.DataOperation.bulkRemove,INSERT_REFERENCE:m.DataOperation.insertReference,GET:m.DataOperation.get,BULK_SAVE:m.DataOperation.bulkSave,QUERY_REFERENCED:m.DataOperation.queryReferenced,DISTINCT:m.DataOperation.distinct,AGGREGATE:m.DataOperation.aggregate},lp={UPDATE:m.CollectionOperation.UPDATE,REMOVE:m.CollectionOperation.REMOVE},dp={EQ:m.AllowedFilterOperator.eq,LT:m.AllowedFilterOperator.lt,GT:m.AllowedFilterOperator.gt,NE:m.AllowedFilterOperator.ne,LTE:m.AllowedFilterOperator.lte,GTE:m.AllowedFilterOperator.gte,STARTS_WITH:m.AllowedFilterOperator.startsWith,ENDS_WITH:m.AllowedFilterOperator.endsWith,CONTAINS:m.AllowedFilterOperator.contains,HAS_SOME:m.AllowedFilterOperator.hasSome,HAS_ALL:m.AllowedFilterOperator.hasAll,EXISTS:m.AllowedFilterOperator.exists,URLIZED:m.AllowedFilterOperator.urlized},up={ADMIN:m.PermissionRole.admin,SITE_MEMBER_AUTHOR:m.PermissionRole.siteMemberAuthor,SITE_MEMBER:m.PermissionRole.siteMember,ANYONE:m.PermissionRole.anyone,UNKNOWN_ROLE:void 0},pp={TEXT:m.FieldType.text,NUMBER:m.FieldType.number,DATE:m.FieldType.date,DATETIME:m.FieldType.dateTime,IMAGE:m.FieldType.image,BOOLEAN:m.FieldType.boolean,DOCUMENT:m.FieldType.document,URL:m.FieldType.url,RICH_TEXT:m.FieldType.richText,VIDEO:m.FieldType.video,ANY:m.FieldType.any,ARRAY_STRING:m.FieldType.stringArray,ARRAY_DOCUMENT:m.FieldType.documentArray,AUDIO:m.FieldType.audio,TIME:m.FieldType.time,LANGUAGE:m.FieldType.language,RICH_CONTENT:m.FieldType.richContent,MEDIA_GALLERY:m.FieldType.mediaGallery,ADDRESS:m.FieldType.address,PAGE_LINK:m.FieldType.pageLink,REFERENCE:m.FieldType.reference,MULTI_REFERENCE:m.FieldType.multiReference,OBJECT:m.FieldType.object,ARRAY:m.FieldType.array,LEGACY_TIME:m.FieldType.time,LEGACY_BOOK:m.FieldType.legacyBook,LEGACY_EXTERNAL_URL:m.FieldType.legacyExternalUrl,LEGACY_BROKEN_REFERENCE:m.FieldType.legacyBrokenRef,LEGACY_IMAGE:m.FieldType.image,LEGACY_COLOR:m.FieldType.color,LEGACY_EXTERNAL_VIDEO:m.FieldType.legacyExternalVideo,UNKNOWN_FIELD_TYPE:void 0};function fp(e){var t,r,n,o=e;return tp({id:o.id,isDeleted:!1,namespace:bp(o.id),storage:sp[o.collectionType],ownerAppId:o.ownerAppId||null,displayNamespace:o.displayNamespace||null,displayField:o.displayField,allowedOperations:gp(o),collectionOperations:yp(o),fields:Ep(o),displayName:null!==(t=o.displayName)&&void 0!==t?t:o.id,permissions:mp(o),maxPageSize:null!==(r=o.maxPageSize)&&void 0!==r?r:void 0,defaultSort:vp(o.defaultDisplayOrder),version:hp(o.revision),plugins:_p(o.plugins),pagingMode:null===(n=o.pagingModes)||void 0===n?void 0:n.map((function(e){return ip[e]})),translatable:!1,ttl:null,capabilities:Pp(o)})}function hp(e){var t=parseInt(null!=e?e:"0",10);return isNaN(t)?0:t}function mp(e){if(e.permissions){var t=e.permissions;return{read:up[t.read],insert:up[t.insert],remove:up[t.remove],update:up[t.update]}}}function gp(e){var t,r=null===(t=null==e?void 0:e.capabilities)||void 0===t?void 0:t.dataOperations;if(r&&0!==r.length)return r.map((function(e){return cp[e]}))}function yp(e){var t,r=null===(t=null==e?void 0:e.capabilities)||void 0===t?void 0:t.collectionOperations;return null==r?void 0:r.map((function(e){return lp[e]}))}function vp(e){return e?{direction:e.direction===Du.DESC?m.Direction.desc:m.Direction.asc,fieldName:e.fieldKey}:null}function _p(e){var t,r,n,o,a,i,s,c,l,d,u,p;if(e){for(var f={},h={},g=0,y=e;g<y.length;g++){var v=y[g];switch(v.type){case Gu.MULTILINGUAL:f[m.MULTILINGUAL_PLUGIN_ID]={translatable:null!==(r=null===(t=v.multilingualOptions)||void 0===t?void 0:t.translatableFieldKeys)&&void 0!==r?r:[]};break;case Gu.PUBLISH:f[m.PUBLISHING_PLUGIN_ID]={defaultStatus:null===(n=v.publishOptions)||void 0===n?void 0:n.defaultStatus};break;case Gu.SINGLE_ITEM:f[m.SINGLES_PLUGIN_ID]={singleItemId:null!==(a=null===(o=v.singleItemOptions)||void 0===o?void 0:o.singleItemId)&&void 0!==a?a:"SINGLE_ITEM_ID"};break;case Gu.URLIZED:f[m.URLIZED_PLUGIN_ID]={format:(null===(i=v.urlizedOptions)||void 0===i?void 0:i.format)===ku.ORIGINAL?m.UrlizedFormat.ORIGINAL:m.UrlizedFormat.PLAIN};break;case Gu.GRIDAPPLESS:f[m.GRID_APPLESS_PLUGIN_ID]={isMigrated:null!==(c=null===(s=v.gridapplessOptions)||void 0===s?void 0:s.migrated)&&void 0!==c&&c};break;case Gu.SHARED:f[m.SHARED_PLUGIN_ID]={};break;case Gu.EDITABLE_PAGE_LINK:f[m.PAGE_LINK_PLUGIN_ID]={isPersisted:null!==(d=null===(l=v.editablePageLinkOptions)||void 0===l?void 0:l.isPersisted)&&void 0!==d&&d,isUpdatable:null!==(p=null===(u=v.editablePageLinkOptions)||void 0===u?void 0:u.isMutable)&&void 0!==p&&p};break;default:h[v.type]=v}}return ap(ap({},f),h)}}function Ep(e){return e.fields?e.fields.reduce((function(e,t,r){var n;return Object.assign({},e,((n={})[t.key]=function(e,t){var r,n,o,a,i,s,c,l,d,u,p,f,h,m,g,y,v,_,E,I,w,S,R,T,b,O,P,C=e;return tp({displayName:null!==(r=C.displayName)&&void 0!==r?r:C.key,systemField:null!==(n=C.systemField)&&void 0!==n&&n,sortable:null===(o=null==C?void 0:C.capabilities)||void 0===o?void 0:o.sortable,isDeleted:!1,index:t,queryOperators:Rp(C),plugin:null!==(a=null==C?void 0:C.plugin)&&void 0!==a?a:void 0,calculator:Tp(C),pii:!!C.encrypted||void 0,linkedRouterPage:null!==(c=null===(s=null===(i=null==C?void 0:C.typeMetadata)||void 0===i?void 0:i.pageLink)||void 0===s?void 0:s.linkedRouterPage)&&void 0!==c?c:void 0,description:null!==(l=C.description)&&void 0!==l?l:void 0,readOnly:null!==(d=C.readOnly)&&void 0!==d?d:void 0,immutable:null!==(u=C.immutable)&&void 0!==u?u:void 0,required:null!==(p=C.required)&&void 0!==p?p:void 0,minValue:null!==(h=null===(f=null==C?void 0:C.numberRange)||void 0===f?void 0:f.min)&&void 0!==h?h:void 0,maxValue:null!==(g=null===(m=null==C?void 0:C.numberRange)||void 0===m?void 0:m.max)&&void 0!==g?g:void 0,minStrLength:null!==(v=null===(y=null==C?void 0:C.stringLengthRange)||void 0===y?void 0:y.minLength)&&void 0!==v?v:void 0,maxStrLength:null!==(E=null===(_=null==C?void 0:C.stringLengthRange)||void 0===_?void 0:_.maxLength)&&void 0!==E?E:void 0,minArraySize:null!==(w=null===(I=null==C?void 0:C.arraySizeRange)||void 0===I?void 0:I.minSize)&&void 0!==w?w:void 0,maxArraySize:null!==(R=null===(S=null==C?void 0:C.arraySizeRange)||void 0===S?void 0:S.maxSize)&&void 0!==R?R:void 0,type:pp[C.type],referencedCollection:Op(C.typeMetadata),referencingFieldKey:null===(b=null===(T=C.typeMetadata)||void 0===T?void 0:T.multiReference)||void 0===b?void 0:b.referencingFieldKey,referencingDisplayName:null===(P=null===(O=C.typeMetadata)||void 0===O?void 0:O.multiReference)||void 0===P?void 0:P.referencingDisplayName,fields:wp(C.typeMetadata),elementType:Sp(C.typeMetadata)})}(t,r),n))}),{}):{}}function Ip(e,t){return{type:pp[e],fields:wp(t),elementType:Sp(t)}}function wp(e){var t,r=null==e?void 0:e.object;if(r)return null===(t=r.fields)||void 0===t?void 0:t.reduce((function(e,t){var r;return Object.assign(e,((r={})[t.key]=function(e){var t;return tp(Object.assign({displayName:e.displayName,sortable:null===(t=null==e?void 0:e.capabilities)||void 0===t?void 0:t.sortable,queryOperators:Rp(e)},Ip(e.type,e.typeMetadata)))}(t),r))}),{})}function Sp(e){var t=null==e?void 0:e.array;if(t)return tp(Ip(t.elementType,t.typeMetadata))}function Rp(e){var t,r=null===(t=null==e?void 0:e.capabilities)||void 0===t?void 0:t.queryOperators;return r?r.length>=Object.keys(dp).length?void 0:r.map((function(e){return dp[e]})):[]}function Tp(e){var t,r,n,o,a,i,s,c,l,d,u=null===(t=e.typeMetadata)||void 0===t?void 0:t.pageLink;return u?{config:{lowercase:null!==(o=null===(n=null===(r=u.calculator)||void 0===r?void 0:r.fieldsPattern)||void 0===n?void 0:n.lowercase)&&void 0!==o&&o,pattern:null!==(d=null!==(s=null===(i=null===(a=u.calculator)||void 0===a?void 0:a.fieldsPattern)||void 0===i?void 0:i.pattern)&&void 0!==s?s:null===(l=null===(c=u.calculator)||void 0===c?void 0:c.urlizedOnlyPattern)||void 0===l?void 0:l.pattern)&&void 0!==d?d:"unknown"}}:void 0}function bp(e){if(!e)return null;var t=e.lastIndexOf("/");return-1===t?null:e.substring(0,t)}function Op(e){var t,r,n;return null!==(r=null===(t=null==e?void 0:e.multiReference)||void 0===t?void 0:t.referencedCollectionId)&&void 0!==r?r:null===(n=null==e?void 0:e.reference)||void 0===n?void 0:n.referencedCollectionId}function Pp(e){var t,r=null===(t=null==e?void 0:e.capabilities)||void 0===t?void 0:t.indexLimits;if(r)return{indexing:{regular:r.regular,unique:r.unique,total:r.total}}}var Cp=rp(up),Np=rp(pp);function Dp(e){if(e.permissions)return{insert:Cp[e.permissions.insert],update:Cp[e.permissions.update],remove:Cp[e.permissions.remove],read:Cp[e.permissions.read]}}function Ap(e){return Object.entries(e.fields||{}).filter((function(e){e[0];return!e[1].isDeleted})).sort((function(e,t){var r,n,o=null!==(r=e[1].index)&&void 0!==r?r:0,a=null!==(n=t[1].index)&&void 0!==n?n:0;return o>a?1:o<a||null!=o&&null==a?-1:null==o&&null!=a?1:0})).map((function(e){return function(e,t){function r(e){return Object.values(e).some((function(e){return void 0!==e}))?e:void 0}return tp({key:e,displayName:t.displayName,type:Np[t.type],typeMetadata:xp(t),encrypted:t.pii,description:t.description,plugin:t.plugin,stringLengthRange:r({minLength:t.minStrLength,maxLength:t.maxStrLength}),arraySizeRange:r({minSize:t.minArraySize,maxSize:t.maxArraySize}),readOnly:t.readOnly,numberRange:r({min:t.minValue,max:t.maxValue}),immutable:t.immutable,required:t.required})}(e[0],e[1])}))}function xp(e){switch(e.type){case"pagelink":return function(e){return null==e.calculator||null==e.calculator.config?void 0:{pageLink:{linkedRouterPage:e.linkedRouterPage,calculator:tp({fieldsPattern:tp({pattern:e.calculator.config.pattern,lowercase:e.calculator.config.lowercase}),urlizedOnlyPattern:tp({pattern:e.calculator.config.pattern})})}}}(e);case"reference":return function(e){return{reference:{referencedCollectionId:e.referencedCollection}}}(e);case"multi-reference":return function(e){return{multiReference:{referencedCollectionId:e.referencedCollection,referencingFieldKey:e.referencingFieldKey,referencingDisplayName:e.referencingDisplayName}}}(e);case"object":return function(e){return{object:{fields:Object.entries(e.fields).map((function(e){return function(e,t){return tp({key:e,displayName:t.displayName,type:Np[t.type],typeMetadata:xp(t)})}(e[0],e[1])}))}}}(e);case"array":return function(e){return null==e.elementType?void 0:{array:tp({elementType:Np[e.elementType.type],typeMetadata:xp(e.elementType)})}}(e)}}function Fp(e){for(var t,r,n,o,a,i,s,c=[],l=null!==(t=e.plugins)&&void 0!==t?t:{},d=0,u=Object.keys(l);d<u.length;d++){var p=u[d];switch(p){case m.MULTILINGUAL_PLUGIN_ID:c.push({type:Gu.MULTILINGUAL,multilingualOptions:{translatableFieldKeys:null===(r=l.multilingual)||void 0===r?void 0:r.translatable}});break;case m.PUBLISHING_PLUGIN_ID:c.push({type:Gu.PUBLISH,publishOptions:{defaultStatus:null===(n=l.publishing)||void 0===n?void 0:n.defaultStatus}});break;case m.SINGLES_PLUGIN_ID:c.push({type:Gu.SINGLE_ITEM,singleItemOptions:{singleItemId:null===(o=l.singleItem)||void 0===o?void 0:o.singleItemId}});break;case m.URLIZED_PLUGIN_ID:c.push({type:Gu.URLIZED,urlizedOptions:{format:null===(a=l.urlized)||void 0===a?void 0:a.format.toUpperCase()}});break;case m.GRID_APPLESS_PLUGIN_ID:c.push({type:Gu.GRIDAPPLESS,gridapplessOptions:{migrated:l.gridAppless.isMigrated}});break;case m.SHARED_PLUGIN_ID:c.push({type:Gu.SHARED});break;case m.PAGE_LINK_PLUGIN_ID:c.push({type:Gu.EDITABLE_PAGE_LINK,editablePageLinkOptions:{isPersisted:null===(i=l.persistentPageLink)||void 0===i?void 0:i.isPersisted,isMutable:null===(s=l.persistentPageLink)||void 0===s?void 0:s.isUpdatable}});break;default:c.push(l[p])}}return c}var Lp=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))},Mp=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},Up=a(1231),kp=function(){function e(e,t,r){this.httpClient=e,this.signedInstance=t,this.baseUrl=function(e){var t=e&&e.baseUrl||"https://cloud-data.wix-code.com";return t=jp(t,"/"),t=jp(t,"/v1/schemas"),t=jp(t,"/_api/cloud-data")}(r),this.stripCloudDataPrefix=r.stripCloudDataPrefix||!1}return e.prototype.get=function(e){return Lp(this,void 0,void 0,(function(){return Mp(this,(function(t){switch(t.label){case 0:return[4,this._call(Up.getDataCollection({dataCollectionId:e})).catch((function(t){return"WDE0025"===function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=0,o=t;n<o.length;n++){var a=o[n];if(!e)return;e=e[a]}return e}(t,"responseText","details","applicationError","code")?Promise.reject(pu(e)):Promise.reject(t)}))];case 1:return[2,fp(t.sent().collection)]}}))}))},e.prototype.bulkGet=function(e,t){var r;return void 0===t&&(t={referencedCollectionsDepth:0,includeMetadata:!1}),Lp(this,void 0,void 0,(function(){var n;return Mp(this,(function(o){switch(o.label){case 0:return n={dataCollectionIds:e,includeReferencedCollections:(null!==(r=t.referencedCollectionsDepth)&&void 0!==r?r:0)>0},t.includeMetadata?[4,this._call(ep(n))]:[3,2];case 1:return[2,Vp(o.sent().activeCollections.map((function(e){var t=fp(e.dataCollection);return t.metadata=e.metadata,t})))];case 2:return[4,this._call(Up.bulkGetDataCollections(n))];case 3:return[2,Vp(o.sent().activeCollections.map(fp))]}}))}))},e.prototype.list=function(){return Lp(this,void 0,void 0,(function(){return Mp(this,(function(e){switch(e.label){case 0:return[4,this._call(Up.listDataCollections({}))];case 1:return[2,Vp(e.sent().collections.map(fp))]}}))}))},e.prototype.save=function(e,t){return Lp(this,void 0,void 0,(function(){var r,n;return Mp(this,(function(o){switch(o.label){case 0:return r=function(e){var t;return tp({id:e.id,displayName:e.displayName,displayField:e.displayField,fields:Ap(e),permissions:Dp(e),revision:null===(t=e.version)||void 0===t?void 0:t.toString(),plugins:Fp(e)})}(t),r.id=e||r.id,t.version>0?[4,this._call(Up.updateDataCollection({collection:r}))]:[3,2];case 1:return n=o.sent(),[3,4];case 2:return[4,this._call(Up.createDataCollection({collection:r}))];case 3:n=o.sent(),o.label=4;case 4:return[2,[fp(n.collection)]]}}))}))},e.prototype.remove=function(e){return Lp(this,void 0,void 0,(function(){return Mp(this,(function(t){switch(t.label){case 0:return[4,this._call(Up.deleteDataCollection({dataCollectionId:e}))];case 1:return t.sent(),[2,[{id:e,isDeleted:!0}]]}}))}))},e.prototype.restore=function(){return Promise.reject(new Error("Collection restoring is not supported."))},e.prototype._call=function(e){var t=this;return this.httpClient.request((function(r){var n=e(r),o=t.stripCloudDataPrefix?function(e,t){return e.startsWith(t)?e.substring(t.length):e}(n.url,"/_api/cloud-data"):n.url;return Object.assign({},n,{url:o,baseURL:t.baseUrl,headers:Object.assign({},n.headers,{authorization:t.signedInstance})})})).then((function(e){return e.data})).catch((function(e){if(!e.response)return Promise.reject(new Iu(Wp(e)));var t=e.response,r=t.headers&&t.headers["x-wix-request-id"];return Promise.reject(new wu(t.status,t.data,Wp(t.data),r))}))},e}();const Gp=kp;function jp(e,t){return e.endsWith(t)?e.substring(0,e.length-t.length):e}function Vp(e){return e.reduce((function(e,t){var r;return Object.assign({},e,((r={})[t.id]=t,r))}),{})}function Wp(e){return"object"==typeof e&&e.message?e.message:"string"==typeof e?e:JSON.stringify(e)}var Bp=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))},qp=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},zp=function(){function e(e,t,r,n){this.httpRequest=e,this.signedInstance=t,this.gridAppId=r,this.options=n}return Object.defineProperty(e,"FailedRequestException",{get:function(){return Iu},enumerable:!1,configurable:!0}),Object.defineProperty(e,"UnsuccessfulResponseException",{get:function(){return wu},enumerable:!1,configurable:!0}),e.prototype.get=function(e,t){var r=this;return this._client.get(e,t).then((function(e){return r._mapDefaults(e)}))},e.prototype.bulkGet=function(e,t){return Bp(this,void 0,void 0,(function(){var r=this;return qp(this,(function(n){return e&&0!==e.length?[2,this._client.bulkGet(e,t).then((function(e){return r._mapDefaultsForSchemas(e)}))]:[2,{}]}))}))},e.prototype.list=function(e){var t=this;return this._client.list(e).then((function(e){return t._mapDefaultsForSchemas(e)}))},e.prototype.save=function(e,t){return this._client.save(e,t)},e.prototype.remove=function(e){return this._client.remove(e)},e.prototype.restore=function(e){return this._clientV1.restore(e)},Object.defineProperty(e.prototype,"_clientV1",{get:function(){return new Pu(this.httpRequest,this.signedInstance,this.gridAppId,this.options)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_clientV2",{get:function(){return new Gp(this.httpRequest,this.signedInstance,this.options)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_client",{get:function(){var e,t;return(null===(e=this.options)||void 0===e?void 0:e.client)||((null===(t=this.options)||void 0===t?void 0:t.useApiV2)?this._clientV2:this._clientV1)},enumerable:!1,configurable:!0}),e.prototype._mapDefaultsForSchemas=function(e){var t=this;return Object.keys(e).reduce((function(r,n){var o=e[n];return r[n]=t._mapDefaults(o),r}),{})},e.prototype._mapDefaults=function(e){return e.displayField||(e.fields&&e.fields.title?e.displayField="title":e.displayField="_id"),e},e}();const Hp=zp,$p={SCALE_TO_FILL:"fill",SCALE_TO_FIT:"fit",STRETCH:"stretch",ORIGINAL_SIZE:"original_size",TILE:"tile",TILE_HORIZONTAL:"tile_horizontal",TILE_VERTICAL:"tile_vertical",FIT_AND_TILE:"fit_and_tile",LEGACY_STRIP_TILE:"legacy_strip_tile",LEGACY_STRIP_TILE_HORIZONTAL:"legacy_strip_tile_horizontal",LEGACY_STRIP_TILE_VERTICAL:"legacy_strip_tile_vertical",LEGACY_STRIP_SCALE_TO_FILL:"legacy_strip_fill",LEGACY_STRIP_SCALE_TO_FIT:"legacy_strip_fit",LEGACY_STRIP_FIT_AND_TILE:"legacy_strip_fit_and_tile",LEGACY_STRIP_ORIGINAL_SIZE:"legacy_strip_original_size",LEGACY_ORIGINAL_SIZE:"actual_size",LEGACY_FIT_WIDTH:"fitWidth",LEGACY_FIT_HEIGHT:"fitHeight",LEGACY_FULL:"full",LEGACY_BG_FIT_AND_TILE:"legacy_tile",LEGACY_BG_FIT_AND_TILE_HORIZONTAL:"legacy_tile_horizontal",LEGACY_BG_FIT_AND_TILE_VERTICAL:"legacy_tile_vertical",LEGACY_BG_NORMAL:"legacy_normal"},Yp="fit",Xp="fill",Jp="fill_focal",Kp="crop",Qp="legacy_crop",Zp="legacy_fill",ef="center",tf="top",rf="top_left",nf="top_right",of="bottom",af="bottom_left",sf="bottom_right",cf="left",lf="right",df={[ef]:{x:.5,y:.5},[rf]:{x:0,y:0},[nf]:{x:1,y:0},[tf]:{x:.5,y:0},[af]:{x:0,y:1},[sf]:{x:1,y:1},[of]:{x:.5,y:1},[lf]:{x:1,y:.5},[cf]:{x:0,y:.5}},uf={center:"c",top:"t",top_left:"tl",top_right:"tr",bottom:"b",bottom_left:"bl",bottom_right:"br",left:"l",right:"r"},pf="img",ff={AUTO:"auto",CLASSIC:"classic",SUPER:"super"},hf=1,mf=2,gf={radius:"0.66",amount:"1.00",threshold:"0.01"},yf=25e6,vf=[1.5,2,4],_f={HIGH:{size:196e4,quality:90,maxUpscale:1},MEDIUM:{size:36e4,quality:85,maxUpscale:1},LOW:{size:16e4,quality:80,maxUpscale:1.2},TINY:{size:0,quality:80,maxUpscale:1.4}},Ef="HIGH",If="MEDIUM",wf="LOW",Sf="TINY",Rf="contrast",Tf="brightness",bf="saturation",Of="hue",Pf="blur",Cf="jpg",Nf="jpeg",Df="jpe",Af="png",xf="webp",Ff="gif",Lf="unrecognized",Mf={isMobile:!1};function Uf(){if("undefined"!=typeof window&&"undefined"!=typeof navigator){const t=window.matchMedia&&window.matchMedia("(max-width: 767px)").matches,r=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);e=t&&r,Mf["isMobile"]=e}var e}function kf(e,...t){return function(...r){const n=r[r.length-1]||{},o=[e[0]];return t.forEach((function(t,a){const i=Number.isInteger(t)?r[t]:n[t];o.push(i,e[a+1])})),o.join("")}}function Gf(e){return e[e.length-1]}const jf=[Af,Nf,Cf,Df,"wix_ico_mp","wix_mp",xf],Vf=[Nf,Cf,Df];function Wf(e,t,r){return!function(e,t,r=!1){return Bf(e)&&(t||!r)}(e,t,r)&&function(e){return jf.includes($f(e))}(e)&&!function(e){return/(^https?)|(^data)|(^\/\/)/.test(e)}(e)}function Bf(e){return $f(e)===xf}const qf=["/","\\","?","<",">","|","\u201c",":",'"'].map(encodeURIComponent),zf=["\\.","\\*"];function Hf(e){return function(e){return Vf.includes($f(e))}(e)?Cf:function(e){return $f(e)===Af}(e)?Af:Bf(e)?xf:Lf}function $f(e){return(/[.]([^.]+)$/.exec(e)&&/[.]([^.]+)$/.exec(e)[1]||"").toLowerCase()}function Yf(e,t,r,n,o){let a;return a=o===Xp?function(e,t,r,n){return Math.max(r/e,n/t)}(e,t,r,n):o===Yp?function(e,t,r,n){return Math.min(r/e,n/t)}(e,t,r,n):1,a}function Xf(e,t,r,n,o,a){e=e||n.width,t=t||n.height;const{scaleFactor:i,width:s,height:c}=function(e,t,r,n,o){let a,i=r,s=n;if(a=Yf(e,t,r,n,o),o===Yp&&(i=e*a,s=t*a),i&&s&&i*s>yf){const r=Math.sqrt(yf/(i*s));i*=r,s*=r,a=Yf(e,t,i,s,o)}return{scaleFactor:a,width:i,height:s}}(e,t,n.width*o,n.height*o,r);return function(e,t,r,n,o,a,i){const{optimizedScaleFactor:s,upscaleMethodValue:c,forceUSM:l}=function(e,t,r,n){if("auto"===n)return function(e,t){const r=Zf(e,t);return{optimizedScaleFactor:_f[r].maxUpscale,upscaleMethodValue:hf,forceUSM:!1}}(e,t);if("super"===n)return function(e){return{optimizedScaleFactor:Gf(vf),upscaleMethodValue:mf,forceUSM:!(vf.includes(e)||e>Gf(vf))}}(r);return function(e,t){const r=Zf(e,t);return{optimizedScaleFactor:_f[r].maxUpscale,upscaleMethodValue:hf,forceUSM:!1}}(e,t)}(e,t,a,o);let d=r,u=n;if(a<=s)return{width:d,height:u,scaleFactor:a,upscaleMethodValue:c,forceUSM:l,cssUpscaleNeeded:!1};switch(i){case Xp:d=r*(s/a),u=n*(s/a);break;case Yp:d=e*s,u=t*s}return{width:d,height:u,scaleFactor:s,upscaleMethodValue:c,forceUSM:l,cssUpscaleNeeded:!0}}(e,t,s,c,a,i,r)}function Jf(e,t,r,n){const o=Qf(r)||function(e=ef){return df[e]}(n);return{x:Math.max(0,Math.min(e.width-t.width,o.x*e.width-t.width/2)),y:Math.max(0,Math.min(e.height-t.height,o.y*e.height-t.height/2)),width:Math.min(e.width,t.width),height:Math.min(e.height,t.height)}}function Kf(e){return e.alignment&&uf[e.alignment]||uf[ef]}function Qf(e){let t;return!e||"number"!=typeof e.x||isNaN(e.x)||"number"!=typeof e.y||isNaN(e.y)||(t={x:eh(Math.max(0,Math.min(100,e.x))/100,2),y:eh(Math.max(0,Math.min(100,e.y))/100,2)}),t}function Zf(e,t){const r=e*t;return r>_f[Ef].size?Ef:r>_f[If].size?If:r>_f[wf].size?wf:Sf}function eh(e,t){const r=Math.pow(10,t||0);return(e*r/r).toFixed(t)}function th(e){return e&&e.upscaleMethod&&ff[e.upscaleMethod.toUpperCase()]||ff.AUTO}function rh(){return Mf["isMobile"]}function nh(e,t,r){let n;switch(t.crop&&(n=function(e,t){const r=Math.max(0,Math.min(e.width,t.x+t.width)-Math.max(0,t.x)),n=Math.max(0,Math.min(e.height,t.y+t.height)-Math.max(0,t.y));return r&&n&&(e.width!==r||e.height!==n)?{x:Math.max(0,t.x),y:Math.max(0,t.y),width:r,height:n}:null}(t,t.crop),n&&(e.src.width=n.width,e.src.height=n.height,e.src.isCropped=!0,e.parts.push(ah(n)))),e.fittingType){case $p.SCALE_TO_FIT:case $p.LEGACY_FIT_WIDTH:case $p.LEGACY_FIT_HEIGHT:case $p.LEGACY_FULL:case $p.FIT_AND_TILE:case $p.LEGACY_BG_FIT_AND_TILE:case $p.LEGACY_BG_FIT_AND_TILE_HORIZONTAL:case $p.LEGACY_BG_FIT_AND_TILE_VERTICAL:case $p.LEGACY_BG_NORMAL:e.parts.push(oh(e,r));break;case $p.SCALE_TO_FILL:e.parts.push(function(e,t){const r=Xf(e.src.width,e.src.height,Xp,t,e.devicePixelRatio,e.upscaleMethod),n=Qf(e.focalPoint);return{transformType:n?Jp:Xp,width:Math.round(r.width),height:Math.round(r.height),alignment:Kf(t),focalPointX:n&&n.x,focalPointY:n&&n.y,upscale:r.scaleFactor>1,forceUSM:r.forceUSM,scaleFactor:r.scaleFactor,cssUpscaleNeeded:r.cssUpscaleNeeded,upscaleMethodValue:r.upscaleMethodValue}}(e,r));break;case $p.STRETCH:e.parts.push(function(e,t){const r=Yf(e.src.width,e.src.height,t.width,t.height,Xp),n=Object.assign({},t);return n.width=e.src.width*r,n.height=e.src.height*r,oh(e,n)}(e,r));break;case $p.TILE_HORIZONTAL:case $p.TILE_VERTICAL:case $p.TILE:case $p.LEGACY_ORIGINAL_SIZE:case $p.ORIGINAL_SIZE:n=Jf(e.src,r,e.focalPoint,r.alignment),e.src.isCropped?(Object.assign(e.parts[0],n),e.src.width=n.width,e.src.height=n.height):e.parts.push(ah(n));break;case $p.LEGACY_STRIP_TILE_HORIZONTAL:case $p.LEGACY_STRIP_TILE_VERTICAL:case $p.LEGACY_STRIP_TILE:case $p.LEGACY_STRIP_ORIGINAL_SIZE:e.parts.push(function(e){return{transformType:Qp,width:Math.round(e.width),height:Math.round(e.height),alignment:Kf(e),upscale:!1,forceUSM:!1,scaleFactor:1,cssUpscaleNeeded:!1}}(r));break;case $p.LEGACY_STRIP_SCALE_TO_FIT:case $p.LEGACY_STRIP_FIT_AND_TILE:e.parts.push(function(e){return{transformType:Yp,width:Math.round(e.width),height:Math.round(e.height),upscale:!1,forceUSM:!0,scaleFactor:1,cssUpscaleNeeded:!1}}(r));break;case $p.LEGACY_STRIP_SCALE_TO_FILL:e.parts.push(function(e){return{transformType:Zp,width:Math.round(e.width),height:Math.round(e.height),alignment:Kf(e),upscale:!1,forceUSM:!0,scaleFactor:1,cssUpscaleNeeded:!1}}(r))}}function oh(e,t){const r=Xf(e.src.width,e.src.height,Yp,t,e.devicePixelRatio,e.upscaleMethod);return{transformType:!e.src.width||!e.src.height?Yp:Xp,width:Math.round(r.width),height:Math.round(r.height),alignment:uf.center,upscale:r.scaleFactor>1,forceUSM:r.forceUSM,scaleFactor:r.scaleFactor,cssUpscaleNeeded:r.cssUpscaleNeeded,upscaleMethodValue:r.upscaleMethodValue}}function ah(e){return{transformType:Kp,x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height),upscale:!1,forceUSM:!1,scaleFactor:1,cssUpscaleNeeded:!1}}function ih(e,t){var r;t=t||{},e.quality=function(e,t){const r=e.fileType===Af,n=e.fileType===Cf,o=e.fileType===xf,a=n||r||o;if(a){const n=Gf(e.parts),o=(i=n.width,s=n.height,_f[Zf(i,s)].quality);let a=t.quality&&t.quality>=5&&t.quality<=90?t.quality:o;return a=r?a+5:a,a}var i,s;return 0}(e,t),e.progressive=function(e){return!1!==e.progressive}(t),e.watermark=function(e){return e.watermark}(t),e.autoEncode=null===(r=t.autoEncode)||void 0===r||r,e.unsharpMask=function(e,t){var r,n,o;if(function(e){const t="number"==typeof(e=e||{}).radius&&!isNaN(e.radius)&&e.radius>=.1&&e.radius<=500,r="number"==typeof e.amount&&!isNaN(e.amount)&&e.amount>=0&&e.amount<=10,n="number"==typeof e.threshold&&!isNaN(e.threshold)&&e.threshold>=0&&e.threshold<=255;return t&&r&&n}(t.unsharpMask))return{radius:eh(null===(r=t.unsharpMask)||void 0===r?void 0:r.radius,2),amount:eh(null===(n=t.unsharpMask)||void 0===n?void 0:n.amount,2),threshold:eh(null===(o=t.unsharpMask)||void 0===o?void 0:o.threshold,2)};if(("number"!=typeof(a=(a=t.unsharpMask)||{}).radius||isNaN(a.radius)||0!==a.radius||"number"!=typeof a.amount||isNaN(a.amount)||0!==a.amount||"number"!=typeof a.threshold||isNaN(a.threshold)||0!==a.threshold)&&function(e){const t=Gf(e.parts);return!(t.scaleFactor>=1)||t.forceUSM||t.transformType===Yp}(e))return gf;var a;return}(e,t),e.filters=function(e){const t=e.filters||{},r={};sh(t[Rf],-100,100)&&(r[Rf]=t[Rf]);sh(t[Tf],-100,100)&&(r[Tf]=t[Tf]);sh(t[bf],-100,100)&&(r[bf]=t[bf]);sh(t[Of],-180,180)&&(r[Of]=t[Of]);sh(t[Pf],0,100)&&(r[Pf]=t[Pf]);return r}(t)}function sh(e,t,r){return"number"==typeof e&&!isNaN(e)&&0!==e&&e>=t&&e<=r}function ch(e,t,r,n){const o=function(e){var t;return null!==(t=null==e?void 0:e.isSEOBot)&&void 0!==t&&t}(n),a=Hf(t.id),i=function(e,t){const r=/\.([^.]*)$/,n=new RegExp(`(${qf.concat(zf).join("|")})`,"g");if(t&&t.length){let e=t;const o=t.match(r);return o&&jf.includes(o[1])&&(e=t.replace(r,"")),encodeURIComponent(e).replace(n,"_")}const o=e.match(/\/(.*?)$/);return(o?o[1]:e).replace(r,"")}(t.id,t.name),s=o?1:function(e){return Math.min(e.pixelAspectRatio||1,2)}(r),c=$f(t.id),l=c,d=Wf(t.id,null==n?void 0:n.hasAnimation,null==n?void 0:n.allowWEBPTransform),u={fileName:i,fileExtension:c,fileType:a,fittingType:e,preferredExtension:l,src:{id:t.id,width:t.width,height:t.height,isCropped:!1},focalPoint:{x:t.focalPoint&&t.focalPoint.x,y:t.focalPoint&&t.focalPoint.y},parts:[],devicePixelRatio:s,quality:0,upscaleMethod:th(n),progressive:!0,watermark:"",unsharpMask:{},filters:{},transformed:d};return d&&(nh(u,t,r),ih(u,n)),u}const lh=kf`fit/w_${"width"},h_${"height"}`,dh=kf`fill/w_${"width"},h_${"height"},al_${"alignment"}`,uh=kf`fill/w_${"width"},h_${"height"},fp_${"focalPointX"}_${"focalPointY"}`,ph=kf`crop/x_${"x"},y_${"y"},w_${"width"},h_${"height"}`,fh=kf`crop/w_${"width"},h_${"height"},al_${"alignment"}`,hh=kf`fill/w_${"width"},h_${"height"},al_${"alignment"}`,mh=kf`,lg_${"upscaleMethodValue"}`,gh=kf`,q_${"quality"}`,yh=kf`,usm_${"radius"}_${"amount"}_${"threshold"}`,vh=kf`,bl`,_h=kf`,wm_${"watermark"}`,Eh={[Rf]:kf`,con_${"contrast"}`,[Tf]:kf`,br_${"brightness"}`,[bf]:kf`,sat_${"saturation"}`,[Of]:kf`,hue_${"hue"}`,[Pf]:kf`,blur_${"blur"}`},Ih=kf`,enc_auto`;function wh(e,t,r,n={},o){return Wf(t.id,null==n?void 0:n.hasAnimation,null==n?void 0:n.allowWEBPTransform)?function(e){const t=[];e.parts.forEach((e=>{switch(e.transformType){case Kp:t.push(ph(e));break;case Qp:t.push(fh(e));break;case Zp:let r=hh(e);e.upscale&&(r+=mh(e)),t.push(r);break;case Yp:let n=lh(e);e.upscale&&(n+=mh(e)),t.push(n);break;case Xp:let o=dh(e);e.upscale&&(o+=mh(e)),t.push(o);break;case Jp:let a=uh(e);e.upscale&&(a+=mh(e)),t.push(a)}}));let r=t.join("/");return e.quality&&(r+=gh(e)),e.unsharpMask&&(r+=yh(e.unsharpMask)),e.progressive||(r+=vh(e)),e.watermark&&(r+=_h(e)),e.filters&&(r+=Object.keys(e.filters).map((t=>Eh[t](e.filters))).join("")),e.autoEncode&&e.fileType!==Ff&&(r+=Ih(e)),`${e.src.id}/v1/${r}/${e.fileName}.${e.preferredExtension}`}(o=o||ch(e,t,r,n)):t.id}const Sh={[ef]:"50% 50%",[rf]:"0% 0%",[nf]:"100% 0%",[tf]:"50% 0%",[af]:"0% 100%",[sf]:"100% 100%",[of]:"50% 100%",[lf]:"100% 50%",[cf]:"0% 50%"};Object.entries(Sh).reduce(((e,[t,r])=>(e[r]=t,e)),{});function Rh(e,t,r,n){if(function(e,t,r){return r&&t&&!function(e){return!e||!e.trim()||"none"===e.toLowerCase()}(t.id)&&Object.values($p).includes(e)}(e,t,r)){const o=function(e,t,r){const n=Object.assign({},r),o=rh();switch(e){case $p.LEGACY_BG_FIT_AND_TILE:case $p.LEGACY_BG_FIT_AND_TILE_HORIZONTAL:case $p.LEGACY_BG_FIT_AND_TILE_VERTICAL:case $p.LEGACY_BG_NORMAL:const e=o?1e3:1920,r=o?1e3:1920;n.width=Math.min(e,t.width),n.height=Math.min(r,Math.round(n.width/(t.width/t.height))),n.pixelAspectRatio=1}return n}(e,t,r);return{uri:wh(e,t,o,n||{},ch(e,t,o,n))}}return{uri:""}}const Th=/^media\//i,bh="undefined"!=typeof window?window.devicePixelRatio:1,Oh=(e,t)=>{const r=t&&t.baseHostURL;return r?`${r}${e}`:(e=>Th.test(e)?`https://static.wixstatic.com/${e}`:`https://static.wixstatic.com/media/${e}`)(e)};Uf(),Uf();const Ph={getScaleToFitImageURL:function(e,t,r,n,o,a){const i=Rh($p.SCALE_TO_FIT,{id:e,width:t,height:r,name:a&&a.name},{width:n,height:o,htmlTag:pf,alignment:ef,pixelAspectRatio:bh},a);return Oh(i.uri,a)},getScaleToFillImageURL:function(e,t,r,n,o,a){const i=Rh($p.SCALE_TO_FILL,{id:e,width:t,height:r,name:a&&a.name,focalPoint:{x:a&&a.focalPoint&&a.focalPoint.x,y:a&&a.focalPoint&&a.focalPoint.y}},{width:n,height:o,htmlTag:pf,alignment:ef,pixelAspectRatio:bh},a);return Oh(i.uri,a)},getCropImageURL:function(e,t,r,n,o,a,i,s,c,l){const d=Rh($p.SCALE_TO_FILL,{id:e,width:t,height:r,name:l&&l.name,crop:{x:n,y:o,width:a,height:i}},{width:s,height:c,htmlTag:pf,alignment:ef,pixelAspectRatio:bh},l);return Oh(d.uri,l)}};function Ch(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var Nh=new WeakMap,Dh=new WeakMap,Ah=new WeakMap,xh=new WeakMap,Fh=new WeakMap,Lh=new WeakMap,Mh=new WeakMap;class Uh{constructor(e){let{platformUtils:t,wixSdk:r,bi:n,tpaActionImplementations:o,devMode:a,verbose:i}=e;Ch(this,Nh,{writable:!0,value:void 0}),Ch(this,Dh,{writable:!0,value:void 0}),Ch(this,Ah,{writable:!0,value:void 0}),Ch(this,xh,{writable:!0,value:void 0}),Ch(this,Fh,{writable:!0,value:void 0}),Ch(this,Lh,{writable:!0,value:void 0}),Ch(this,Mh,{writable:!0,value:void 0}),d()(this,Nh,this._getSettings({wixSdk:r,bi:n,devMode:a,verbose:i})),d()(this,Dh,this._getUser(r.user)),d()(this,Ah,this._getLocation(r.location,n)),d()(this,xh,this._getUtils(t)),d()(this,Fh,this._getTimers(r)),d()(this,Lh,(async e=>{let{currentItem:t,action:n}=e;const a=o[n];await a({wixSdk:r,currentItem:t})})),d()(this,Mh,this._getSeo(r))}get settings(){return c()(this,Nh)}get user(){return c()(this,Dh)}get location(){return c()(this,Ah)}get utils(){return c()(this,xh)}get timers(){return c()(this,Fh)}get executeTpaAction(){return c()(this,Lh)}get seo(){return c()(this,Mh)}_getSettings(e){let{wixSdk:{window:{viewMode:t,rendering:{env:r},browserLocale:n},site:{regionalSettings:o=n}},bi:{metaSiteId:a,viewerName:i},devMode:s,verbose:c}=e;return{metaSiteId:a,locale:o,mode:{name:r,dev:s,verbose:c,ssr:"backend"===r,csr:"backend"!==r},env:{name:t,live:"Site"===t,preview:"Preview"===t,livePreview:"Editor"===t,editor:"Preview"===t||"Editor"===t,renderer:i}}}_getUser(e){return{get id(){return e.currentUser.id},get loggedIn(){return e.currentUser.loggedIn},onLogin:e.onLogin}}_getLocation(e,t){let{baseUrl:r,url:n,to:o}=e,{pageId:a}=t;return{pageId:a,pageUrl:n,baseUrl:r,navigateTo:o}}_getUtils(e){let{links:t,mediaItemUtils:r}=e;return{links:t,media:{...r,getScaleToFillImageURL:Ph.getScaleToFillImageURL}}}_getTimers(e){var t;return{queueMicrotask:(null==(t=e.environment)||null==(t=t.timers)?void 0:t.queueMicrotask)||queueMicrotask}}_getSeo(e){return{renderSEOTags:e.seo.renderSEOTags}}}const kh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u0627\u0644\u0643\u0644"}');var Gh=a.t(kh,2);const jh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u0412\u0441\u0438\u0447\u043a\u0438"}');var Vh=a.t(jh,2);const Wh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Tot"}');var Bh=a.t(Wh,2);const qh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"V\u0161e"}');var zh=a.t(qh,2);const Hh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Alle"}');var $h=a.t(Hh,2);const Yh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Alle"}');var Xh=a.t(Yh,2);const Jh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u038c\u03bb\u03b1"}');var Kh=a.t(Jh,2);const Qh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"All"}');var Zh=a.t(Qh,2);const em=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Todo"}');var tm=a.t(em,2);const rm=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Tout"}');var nm=a.t(rm,2);const om=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u05d4\u05db\u05dc"}');var am=a.t(om,2);const im=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u0938\u092d\u0940"}');var sm=a.t(im,2);const cm=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\xd6sszes"}');var lm=a.t(cm,2);const dm=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Semua"}');var um=a.t(dm,2);const pm=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Tutti"}');var fm=a.t(pm,2);const hm=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u3059\u3079\u3066"}');var mm=a.t(hm,2);const gm=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\uc804\uccb4"}');var ym=a.t(gm,2);const vm=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Viskas"}');var _m=a.t(vm,2);const Em=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Semua"}');var Im=a.t(Em,2);const wm=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Alle"}');var Sm=a.t(wm,2);const Rm=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Alle"}');var Tm=a.t(Rm,2);const bm=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Wszystkie"}');var Om=a.t(bm,2);const Pm=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Todos"}');var Cm=a.t(Pm,2);const Nm=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Toate"}');var Dm=a.t(Nm,2);const Am=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u0412\u0441\u0435"}');var xm=a.t(Am,2);const Fm=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"V\u0161etky"}');var Lm=a.t(Fm,2);const Mm=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Vse"}');var Um=a.t(Mm,2);const km=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Alla"}');var Gm=a.t(km,2);const jm=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u0e17\u0e31\u0e49\u0e07\u0e2b\u0e21\u0e14"}');var Vm=a.t(jm,2);const Wm=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Lahat"}');var Bm=a.t(Wm,2);const qm=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Hepsi"}');var zm=a.t(qm,2);const Hm=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u0423\u0441\u0456"}');var $m=a.t(Hm,2);const Ym=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"T\u1ea5t c\u1ea3"}');var Xm=a.t(Ym,2);const Jm=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u6240\u6709"}');const Km={ar:Gh,bg:Vh,ca:Bh,cs:zh,da:$h,de:Xh,el:Kh,en:Zh,es:tm,fr:nm,he:am,hi:sm,hu:lm,id:um,it:fm,ja:mm,ko:ym,lt:_m,ms:Im,nl:Sm,no:Tm,pl:Om,pt:Cm,ro:Dm,ru:xm,sk:Lm,sl:Um,sv:Gm,th:Vm,tl:Bm,tr:zm,uk:$m,vi:Xm,zh:a.t(Jm,2)},Qm=Km.en;function Zm(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var eg=new WeakMap,tg=new WeakMap,rg=new WeakMap,ng=new WeakMap,og=new WeakMap,ag=new WeakMap,ig=new WeakMap;const{initAppForPage:sg,createControllers:cg}=new class{constructor(e){var t=this;let{verbose:r=!1,wixDataSchemasForItTests:n,automationsClientCreator:i=P,tpaActionImplementations:s=p}=void 0===e?{}:e;return o()(this,"initAppForPage",(function(e,r,n,o){let{bi:i={},monitoring:{createMonitor:s},fedOpsLoggerFactory:l,biLoggerFactory:u,essentials:{httpClient:p,experiments:f}}=void 0===o?{}:o;try{const o=new Uh({platformUtils:r,wixSdk:n,bi:i,tpaActionImplementations:c()(t,ig),devMode:!1,verbose:c()(t,ng)}),{settings:m}=o,{instance:g,appData:{gridAppId:y},url:v}=e;(e=>{try{a.p=e.substr(0,e.lastIndexOf("/")+1)}catch(e){}})(v);const{data:_,window:{warmupData:E,getRouterData:I},location:{baseUrl:w,protocol:S},site:{language:R,currentPage:T}}=n;d()(t,rg,I()),d()(t,tg,new ra({fedops:{factory:l,hooks:{start:e=>{let{name:r}=e;return c()(t,tg).log(new Be({category:"interaction start",message:"interaction "+r+" started"}))},end:e=>{let{name:r,duration:n}=e;return c()(t,tg).log(new Be({category:"interaction end",message:"interaction "+r+" ended after "+n+" ms"}))}}},bi:{factory:u},monitor:{factory:s},verbose:{factory:()=>({log:function(){var e;return((null==(e=n.telemetry)?void 0:e.console)||console).verbose(...arguments)}})},console:{factory:()=>{var e;return(null==(e=n.telemetry)?void 0:e.console)||console}},settings:m,global:self})),c()(t,tg).log(new We("databinding/initAppForPage",We.types.START));const b=(e=>{var t;const r=null!=(t=Km[e])?t:Qm;return{t:e=>{var t;return null!=(t=null==r?void 0:r[e])?t:e}}})(R),O=(e=>{let{experiments:t,settings:{env:r}}=e;return{get fes(){return t.enabled("specs.wixDataViewer.EnableFES")},get warmupData(){return r.live},get newCurrentPageIndex(){return t.enabled("specs.wixDataViewer.NewCurrentPageIndex")},get schemasClientV2(){return t.enabled("specs.wixDataClient.SchemasClientV2")},get automationsClientV2(){return t.enabled("specs.wixDataClient.AutomationsClientV2")}}})({experiments:f,settings:m}),P=O.fes?new jn({httpClient:p,getRequestParams:()=>({instance:g,gridAppId:y})}):new go({wixData:_,wixDataSchemas:c()(t,og)||new Hp(p,g,y,{baseUrl:m.env.editor?void 0:S+"://"+h()(w).hostname+"/_api/cloud-data/v1/schemas",useApiV2:O.schemasClientV2})}),C=new Ro(E),N=new No(c()(t,rg)),D=Fd({automationsClientCreator:()=>O.automationsClientV2?(e=>({reportFormEventToAutomationCreator:()=>async(t,r,n)=>{const o=t.detailedEventPayload["form-id"].value,a=Ze(t.detailedEventPayload).filter((e=>"form-id"!==e)).reduce(((e,r)=>{const n=r.split(".")[1],{keyName:o,valueType:a,value:i}=t.detailedEventPayload[r];return e[n]={displayName:o,value:i,type:a},e}),{}),i={formId:o,pageId:n,submissionTime:new Date,fields:a,collectionId:r};await e.post("/_serverless/cms-automations/report-cms-form-submission",i)}}))(p):c()(t,ag).call(t,{httpClient:p}),pageId:T.id});return d()(t,eg,new Od({platform:o,dataFetcher:P,warmupCache:C,staticCache:N,features:O,listenersByEvent:D,logger:c()(t,tg),i18n:b,global:self,loadFormulaJs:Fi})),c()(t,tg).log(new We("databinding/initAppForPage",We.types.END)),Promise.resolve()}catch(e){return c()(t,tg)&&c()(t,tg).log(new N("App initialisation failed",{cause:e})),Promise.reject(e)}})),o()(this,"createControllers",(e=>{if(!e.length)return[];const t=(r=e,n=c()(this,rg),r.map((e=>{let{compId:t,config:{dataset:{collectionName:r,filter:o,sort:a,includes:i,nested:s,pageSize:c,readWriteType:l,deferred:d,cursor:u}={}}={},type:p,connections:f,livePreviewOptions:{shouldFetchData:h,compsIdsToReset:m=[]}={}}=e;const g={id:t,type:p,collectionId:r,filter:o,sort:a,pageSize:c,readWriteType:l,includes:i,nested:s,deferred:d,connections:f,dataIsInvalidated:h,updatedCompIds:m,cursor:u};return p===br&&n?((e,t)=>{const{readWriteType:r}=e,{config:{dataset:{collectionName:n,filter:o,sort:a,includes:i,pageSize:s,lowercase:c,seoV2:l}},dynamicUrl:d,userDefinedFilter:u}=t;return{...e,collectionId:n,filter:o,sort:a,includes:i,pageSize:s,readWriteType:r,dynamicPageData:{lowercase:c,dynamicUrl:d,userDefinedFilter:u,seoV2:l}}})(g,n):g})));var r,n;const o=e.reduce(((e,t)=>{let{$w:r,compId:n}=t;return e[n]=r.fireEvent,e}),{});return c()(this,eg).initializeDatasets({datasetConfigs:t,firePlatformEvent:e=>o[e]}).map((e=>({...e,pageReady:t=>e.pageReady(Bl(t))})))})),Zm(this,eg,{writable:!0,value:void 0}),Zm(this,tg,{writable:!0,value:void 0}),Zm(this,rg,{writable:!0,value:void 0}),Zm(this,ng,{writable:!0,value:void 0}),Zm(this,og,{writable:!0,value:void 0}),Zm(this,ag,{writable:!0,value:void 0}),Zm(this,ig,{writable:!0,value:void 0}),d()(this,og,n),d()(this,ag,i),d()(this,ng,r),d()(this,ig,s),{initAppForPage:this.initAppForPage,createControllers:this.createControllers}}}})(),i})()));
//# sourceMappingURL=app.js.map