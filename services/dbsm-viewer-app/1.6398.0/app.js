!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("_")):"function"==typeof define&&define.amd?define("app",["_"],t):"object"==typeof exports?exports.app=t(require("_")):e.app=t(e._)}("undefined"!=typeof self?self:this,(function(e){return function(){var t,r,n={101:function(e){"use strict";e.exports.CMEditor={dsn:"https://e788f1b6d7b54d3482c54d1e27b95f38@sentry.wixpress.com/165"},e.exports.CMMyAccount={dsn:"https://bd7df26433634b41b7e711922156bff7@sentry.wixpress.com/166"},e.exports.DBSMEditor={dsn:"https://adc03f08d1814b5a835f586aaba9d8ff@sentry.wixpress.com/159"},e.exports.DBSMViewer={dsn:"https://27180ecd50484e4eafe543b40d29866d@sentry.wixpress.com/89"},e.exports.UserErrors={dsn:"https://73a0410004ae41b7b60ca1c4b4684996@sentry.wixpress.com/183"},e.exports.WixData={dsn:"https://9653fbb3e48143d890dba8a09a5a98c6@sentry.wixpress.com/184"},e.exports.DBSMEditorNext={dsn:"https://7f23189a6c7a4329936b36eef60054eb@sentry-next.wixpress.com/995"}},9025:function(e,t,r){e.exports={ITEM_TYPES:r(8834).iB}},8834:function(e,t){"use strict";t.iB=t._5=void 0,t._5="STATIC_PAGE_V2",t.iB={DEFAULT:"DEFAULT",STATIC_PAGE:"STATIC_PAGE",STATIC_PAGE_V2:t._5,STORES_PRODUCT:"STORES_PRODUCT",FORUM_POST:"FORUM_POST",FORUM_CATEGORY:"FORUM_CATEGORY",PRO_GALLERY_ITEM:"PRO_GALLERY_ITEM",BLOG_POST:"BLOG_POST",BLOG_CATEGORY:"BLOG_CATEGORY",BLOG_TAGS:"BLOG_TAGS",BLOG_ARCHIVE:"BLOG_ARCHIVE",GROUPS_PAGE:"GROUPS_PAGE",GROUPS_POST:"GROUPS_POST",EVENTS_PAGE:"EVENTS_PAGE",CHALLENGES_PAGE:"CHALLENGES_PAGE",SEARCH_PAGE:"SEARCH_PAGE",BOOKINGS_SERVICE:"BOOKINGS_SERVICE",BOOKINGS_CALENDAR:"BOOKINGS_CALENDAR",BOOKINGS_FORM:"BOOKINGS_FORM",BREADCRUMBS_COMPONENT:"BREADCRUMBS_COMPONENT",BLOG_HASHTAGS:"BLOG_HASHTAGS",RESTAURANTS_ORDER_PAGE:"RESTAURANTS_ORDER_PAGE",MEMBERS_AREA_PROFILE:"MEMBERS_AREA_PROFILE",VIDEO_COMPONENT:"VIDEO_COMPONENT",PORTFOLIO_COLLECTIONS:"PORTFOLIO_COLLECTIONS",PORTFOLIO_PROJECTS:"PORTFOLIO_PROJECTS",GIFT_CARD:"GIFT_CARD",SCHEDULE_PAGE:"SCHEDULE_PAGE",WIX_DATA_PAGE_ITEM:"WIX_DATA_PAGE_ITEM",REVIEWS_COMPONENT:"REVIEWS_COMPONENT",STORES_CATEGORY:"STORES_CATEGORY"}},5965:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.RICH_CONTENT=t.WIX_GROUPS=t.WIX_CHALLENGES=t.WIX_FORMS=t.WIX_FAQ=t.WIX_SITE_SEARCH=t.WIX_MUSIC=t.BANDSINTOWN=t.WIX_PORTFOLIO=t.WIX_PRO_GALLERY=t.WIX_PHOTO_ALBUMS=t.WIX_HOTELS_RUNNER=t.WIX_VIDEO=t.WIX_GET_SUBSCRIBERS=t.INSTAGRAM_FEED=t.DEVIANTART_FEED=t.WIX_CHAT=t.WIX_RESTAURANTS_MENUS=t.WIX_RESTAURANTS_ORDERS=t.WIX_RESERVATIONS=t.NOTIFICATIONS=t.META_SITE=t.MEMBERS=t.MEMBERS_AREA=t.WIX_NEW_STORES=t.WIX_STORES=t.WIX_ECOM=t.PRICING_PLANS=t.WIX_FORUM=t.WIX_BOOKINGS=t.WIX_EVENTS=t.WIX_BLOG=t.WIX_HOTELS=t.ADMIN_PAGES=t.DASHBOARD_SALES=t.DASHBOARD_SUGGESTIONS=t.DASHBOARD_SETUP=t.BUSINESS_DASHBOARD=t.WIX_CODE_PLATFORM_VISIBILITY=t.WIX_ACCESSIBILITY_WIZARD=t.WIX_CODE_SITE_MONITORING=t.WIX_CODE_SECRETS_MANAGER=t.WIX_CODE_RELEASE_MANAGER=t.CLOUD_DATA_SCHEMA_NOTIFIER=t.OLD_BLOG=t.SITE_MEMBERS=t.DATA_BINDING=t.WIX_CODE_DUPLEXER=t.WIX_CODE_SITE_EXTENSION=t.WIX_CODE=void 0,t.getAppDependencies=t.WIX_FILE_SHARE=void 0,t.WIX_CODE="wix-code",t.WIX_CODE_SITE_EXTENSION="CloudSiteExtension",t.WIX_CODE_DUPLEXER="af6d536e-0fc6-428b-a7f9-1d8cd6aa3703",t.DATA_BINDING="dataBinding",t.SITE_MEMBERS="SiteMembers",t.OLD_BLOG="79f391eb-7dfc-4adf-be6e-64434c4838d9",t.CLOUD_DATA_SCHEMA_NOTIFIER="f1fbeff1-05c3-4121-bdb5-75e74b6e9e51",t.WIX_CODE_RELEASE_MANAGER="8c41f3a6-47f7-40be-ad77-02a72cb2ddb3",t.WIX_CODE_SECRETS_MANAGER="4b10fcce-732d-4be3-9d46-801d271acda9",t.WIX_CODE_SITE_MONITORING="675bbcef-18d8-41f5-800e-131ec9e08762",t.WIX_ACCESSIBILITY_WIZARD="9699c03d-5c19-4a7c-a454-e8109a6e43fc",t.WIX_CODE_PLATFORM_VISIBILITY="8048f115-449b-4dab-b0e6-e09d5ffc8199",t.BUSINESS_DASHBOARD="a7597ab5-1ed4-458f-a5c1-5884d5e14281",t.DASHBOARD_SETUP="0750d046-d599-4cfc-9f6b-e9f4af169aa9",t.DASHBOARD_SUGGESTIONS="cead4297-02ee-4c0f-ae07-461f4ba71b3b",t.DASHBOARD_SALES="f95c72b1-84de-48ec-a61b-d96d61315ffe",t.ADMIN_PAGES="1514b01b-cb08-41b4-8582-0a88551ac769",t.WIX_HOTELS="135aad86-9125-6074-7346-29dc6a3c9bcf",t.WIX_BLOG="14bcded7-0066-7c35-14d7-466cb3f09103",t.WIX_EVENTS="140603ad-af8d-84a5-2c80-a0f60cb47351",t.WIX_BOOKINGS="13d21c63-b5ec-5912-8397-c3a5ddb27a97",t.WIX_FORUM="14724f35-6794-cd1a-0244-25fd138f9242",t.PRICING_PLANS="1522827f-c56c-a5c9-2ac9-00f9e6ae12d3",t.WIX_ECOM="1380b703-ce81-ff05-f115-39571d94dfcd",t.WIX_STORES="1380b703-ce81-ff05-f115-39571d94dfcd",t.WIX_NEW_STORES="215238eb-22a5-4c36-9e7b-e7c08025e04e",t.MEMBERS_AREA="14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9",t.MEMBERS="14dbefd2-01b4-fb61-32a7-3abd44da4908",t.META_SITE="22bef345-3c5b-4c18-b782-74d4085112ff",t.NOTIFICATIONS="14f25924-5664-31b2-9568-f9c5ed98c9b1",t.WIX_RESERVATIONS="1475ab65-206b-d79a-856d-fa10bdb479ea",t.WIX_RESTAURANTS_ORDERS="13e8d036-5516-6104-b456-c8466db39542",t.WIX_RESTAURANTS_MENUS="13c1402c-27f2-d4ab-7463-ee7c89e07578",t.WIX_CHAT="14517e1a-3ff0-af98-408e-2bd6953c36a2",t.DEVIANTART_FEED="7d297b79-baed-46d7-ac58-4bd68dcb70d0",t.INSTAGRAM_FEED="14635256-b183-1c71-a4d2-f55179b80e8a",t.WIX_GET_SUBSCRIBERS="1375baa8-8eca-5659-ce9d-455b2009250d",t.WIX_VIDEO="14409595-f076-4753-8303-9a86f9f71469",t.WIX_HOTELS_RUNNER="826670ba-3a6b-4157-ac72-7c4fca9ce220",t.WIX_PHOTO_ALBUMS="13ff8629-c1fc-e289-e81f-bc8c8968e9d6",t.WIX_PRO_GALLERY="14271d6f-ba62-d045-549b-ab972ae1f70e",t.WIX_PORTFOLIO="d90652a2-f5a1-4c7c-84c4-d4cdcc41f130",t.BANDSINTOWN="1405ef82-0ee0-65fb-88a1-2f172aa3573c",t.WIX_MUSIC="13bb5d67-1add-e770-a71f-001277e17c57",t.WIX_SITE_SEARCH="1484cb44-49cd-5b39-9681-75188ab429de",t.WIX_FAQ="14c92d28-031e-7910-c9a8-a670011e062d",t.WIX_FORMS="14ce1214-b278-a7e4-1373-00cebd1bef7c",t.WIX_CHALLENGES="2936472a-a1ed-4ae5-9f71-614313a9f4e7",t.WIX_GROUPS="148c2287-c669-d849-d153-463c7486a694",t.RICH_CONTENT="949cfcc9-2a3f-4a96-bd6c-11d9d82763a4",t.WIX_FILE_SHARE="1537b24e-29d1-6d8f-b8e1-d6860f2f70b9";var r={};t.getAppDependencies=function(e){return r[e]||[]}},9540:function(e){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}var r="User",n="Error",o="EDM",a=function(e,r){e&&"object"===t(e)&&(e.errorGroup=r)};e.exports={markUserError:function(e){return a(e,r)},isUserError:function(e){return e&&e.errorGroup===r},markAppError:function(e){return a(e,n)},isAppError:function(e){return e&&e.errorGroup===n},markEdmError:function(e){return a(e,o)},isEdmError:function(e){return e&&e.errorGroup===o},markError:a,isMarked:function(e){return!!e&&void 0!==e.errorGroup},USER_ERROR_GROUP:r,APP_ERROR_GROUP:n,EDM_ERROR_GROUP:o,UNKNOWN_ERROR_GROUP:"Unknown"}},3164:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}var d=r(9540),p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(u,e);var t,r,n,c=s(u);function u(){var e;a(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=c.call.apply(c,[this].concat(r)),Error.captureStackTrace&&Error.captureStackTrace(l(e),e.constructor),e.name=u.name,d.markUserError(l(e)),e}return t=u,r&&o(t.prototype,r),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error));e.exports={UserCodeError:p}},3065:function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(9540),s=r(3164);e.exports=o(o({},s),i)},5882:function(e,t,r){"use strict";t.PL=t.ah=void 0;var n=r(4725);Object.defineProperty(t,"ah",{enumerable:!0,get:function(){return n.convertToCustomFormat}}),Object.defineProperty(t,"PL",{enumerable:!0,get:function(){return n.convertFromCustomFormat}});var o=r(6658)},4455:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConvertersComposer=void 0;var n=r(1561),o=function(e){return null!==e&&"object"==typeof e},a=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._converters=e}return e.prototype.convertToCustomFormat=function(e,t,r){var n;if(void 0===t&&(t=new Set),void 0===r&&(r=!1),o(e)){if(t.has(e))throw new TypeError("Converting circular structure to JSON");t.add(e)}if(Array.isArray(e))return this._convertArray(e,t);var a=null===(n=this._findConverterToCustomFormat(e))||void 0===n?void 0:n.convertToCustomFormat(e,r);return o(e)?this._convertObject(a,e,t):a},e.prototype.convertFromCustomFormat=function(e){var t,r=this,a=e;return Array.isArray(e)?a=e.map((function(e){return r.convertFromCustomFormat(e)})):o(e)&&(a=(0,n.mapValues)(e,this.convertFromCustomFormat.bind(this))),null===(t=this._findConverterFromCustomFormat(a))||void 0===t?void 0:t.convertFromCustomFormat(a)},e.prototype._convertObject=function(e,t,r){var o,a=this;return o="function"==typeof e.toJSON?(0,n.mapValues)(e.toJSON(),(function(e){return a.convertToCustomFormat(e,r)})):(0,n.mapValues)(e,(function(e){return a.convertToCustomFormat(e,r)})),r.delete(t),o},e.prototype._convertArray=function(e,t){var r=this,n=e.map((function(e){return r.convertToCustomFormat(e,t,!0)}));return t.delete(e),n},e.prototype._findConverterFromCustomFormat=function(e){return this._converters.find((function(t){return t.canConvertFromCustomFormat(e)}))},e.prototype._findConverterToCustomFormat=function(e){return this._converters.find((function(t){return t.canConvertToCustomFormat(e)}))},e}();t.ConvertersComposer=a},5362:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DateConverter=void 0;var r=function(){function e(){}return e.prototype.canConvertToCustomFormat=function(e){return e instanceof Date},e.prototype.convertToCustomFormat=function(e){return{$date:e.toISOString()}},e.prototype.canConvertFromCustomFormat=function(e){return this._isObjectWith$Date(e)&&"string"==typeof e.$date&&(t=e.$date,!Number.isNaN(Date.parse(t)));var t},e.prototype.convertFromCustomFormat=function(e){return new Date(e.$date)},e.prototype._isObjectWith$Date=function(e){return!!e&&"object"==typeof e&&"$date"in e},e}();t.DateConverter=r},5574:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultConverter=void 0;var r=function(){function e(){}return e.prototype.canConvertToCustomFormat=function(){return!0},e.prototype.convertToCustomFormat=function(e,t){return t&&void 0===e?null:e},e.prototype.canConvertFromCustomFormat=function(){return!0},e.prototype.convertFromCustomFormat=function(e){return e},e}();t.DefaultConverter=r},4725:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertFromCustomFormat=t.convertToCustomFormat=void 0;var n=r(4455),o=r(5362),a=r(5574),i=new n.ConvertersComposer(new o.DateConverter,new a.DefaultConverter);t.convertToCustomFormat=function(e){return i.convertToCustomFormat(e)};t.convertFromCustomFormat=function(e){return i.convertFromCustomFormat(e)}},1561:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapValues=void 0,t.mapValues=function(e,t){var r={};return Object.keys(e).forEach((function(n){var o=t(e[n]);void 0!==o&&(r[n]=o)})),r}},6658:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBackendPackageNameFromImportName=t.generateBackendPackageWebMethodUrl=t.generatePackageWebMethodUrl=t.exceptionToWebMethodPayload=t.resultToWebMethodPayload=void 0;var n=r(4725);t.resultToWebMethodPayload=function(e,t){var r=t?JSON.parse(JSON.stringify(e,t)):(0,n.convertToCustomFormat)(e);return void 0===r?{}:{result:r}};t.exceptionToWebMethodPayload=function(e,t,r){return void 0===t&&(t=function(e){return e}),void 0===r&&(r=function(e){return""}),{result:e instanceof Error?{message:t(e.message),name:e.name,stack:r(e.stack),code:e.code,_elementoryError:!0}:e,exception:!0}};var o=function(e,t){return"/_webMethods/packages/".concat(encodeURIComponent(e),"/").concat(t,".ajax")};t.generatePackageWebMethodUrl=o;t.generateBackendPackageWebMethodUrl=function(e,t){return o("".concat(e,"-backend"),t)};t.getBackendPackageNameFromImportName=function(e){return"".concat(e,"-backend")}},4479:function(e,t,r){"use strict";const n=r(7030),o=r(1290),a="currentUser";e.exports.X=e=>n(e)&&e[o]===a},8031:function(e,t,r){"use strict";const n=r(7030),{DATA_BINDING:o}=r(5965),a=r(1290),i=o;e.exports.X=e=>n(e)&&e[a]===i},1290:function(e){"use strict";e.exports="@resolver"},3878:function(e,t,r){"use strict";const n=r(7030),o=r(1290),a="userInput";e.exports.X=e=>n(e)&&e[o]===a},8582:function(e){"use strict";e.exports=(e,t)=>t.reduce(((e,t)=>e.chain((e=>t.map((t=>Array.isArray(t)?e.concat([t]):e.concat(t)))))),e.of([]))},6471:function(e){"use strict";const t="unknown",r=e=>{const t=e.split("/"),r=t[t.length-3],n=t[t.length-2];if(!/^\d+\.\d+\.\d+$/.test(n))throw Error(`Invalid version string ${n}`);return{appName:r,version:n}};e.exports=e=>{try{const{appName:t,version:n}=r(e);return`${t}@${n}`}catch(e){return t}},e.exports.getAppVersion=e=>{try{const{version:t}=r(e);return t}catch(e){return t}},e.exports.UNKNOWN_VERSION=t},4095:function(e){"use strict";e.exports={maxUrlLength:1e3}},8590:function(e,t,r){"use strict";const n=r(3059),{Result:o}=r(477),a=r(9345),{isLocalhost:i}=r(2499),s=e=>o.try(e).getOrElse("unknown"),c=e=>o.try(e).fold((e=>e.message),(e=>e));e.exports.S=({Raven:e,globalScope:t,dsn:r,params:o={},appName:l})=>{i()||(a({Raven:e,appName:l,browserUrlGetter:()=>s((()=>t["wix-location"].url)),dsn:r,params:o}),e.setDataCallback(((e,r=n)=>(e.extra=Object.assign(e.extra||{},(e=>({referrer:c((()=>e["wix-window"].referrer)),workerUrl:c((()=>e.location.href))}))(t)),e.tags=Object.assign(e.tags||{},o.tags||{},(e=>({renderMode:s((()=>e["wix-window"].rendering.env)),viewMode:s((()=>e["wix-window"].viewMode)),santaVersion:s((()=>(e=>{const t=e.match(/santa\/([^/]*)/);return t?t[1]:"unknown"})(e.location.href)))}))(t)),r(e)))))}},9345:function(e,t,r){"use strict";const n=r(3059),o=r(4095),a=r(6471),{getAppUrl:i}=r(2499),s=r(2161);e.exports=({Raven:e,appName:t,browserUrlGetter:r,dsn:c,params:l})=>{const u=i(t),d=a(u);e.config(c,Object.assign({},o,{captureUnhandledRejections:!1,autoBreadcrumbs:{dom:!1}})),e.setRelease(l.release||d),e.setShouldSendCallback(l.shouldSendCallback||s),e.setDataCallback(((e,t=n)=>(e.request=Object.assign(e.request||{},{url:r()}),t(e))));return()=>{e.setDataCallback(n)}}},2161:function(e,t,r){"use strict";const{extract:n,parse:o}=r(4126),a=r(2579),i=r(1886),s=r(3059),{Result:c,Maybe:l}=r(477),u=["ReactSource","EditorSource","experiments","petri_ovr","WixCodeRuntimeSource","js-wixcode-sdk-override","debug"],d=e=>l.fromNullable(e).chain((e=>c.try((()=>o(n(e)))))).map((e=>(e=>"true"===e.forceReportSentry)(e)||(e=>Object.keys(e).every((e=>!i(u,e))))(e))).getOrElse(!0),p=[e=>(e=>[a(e,["request","headers","Referer"]),a(e,["request","url"])])(e).every(d)];e.exports=(e,t=s)=>p.concat(t).every((t=>t(e)))},7538:function(e){e.exports.l={COMPONENT:"COMPONENT_SCOPE",GLOBAL:"GLOBAL_SCOPE"}},2499:function(e){const t=()=>{const e=new Error;return e.stack?e.stack.toString():""};e.exports.getAppUrl=e=>{const r=t().match(new RegExp(`https?://.*?${e}.*?.js`));return r?r[0]:""},e.exports.isLocalhost=()=>/https?:\/\/localhost/.test(t())},477:function(e,t,r){const n=r(4169),o=r(3297),a=r(6939);e.exports={union:n,Result:o,Maybe:a}},6939:function(e){"use strict";const t=e=>({map:r=>t(r(e)),chain:t=>t(e),fold:(t,r)=>r(e),getOrElse:()=>e,orElse:()=>t(e),filter:n=>n(e)?t(e):r()}),r=()=>({map:()=>r(),chain:()=>r(),fold:e=>e(),getOrElse:e=>e,orElse:e=>e(),filter:()=>r()}),n={Just:t,Nothing:r,fromNullable:e=>null!=e?t(e):r(),of:e=>t(e)};e.exports=n},3297:function(e){"use strict";const t=e=>({map:r=>t(r(e)),chain:t=>t(e),fold:(t,r)=>r(e),getOrElse:()=>e,merge:()=>e}),r=e=>({map:()=>r(e),chain:()=>r(e),fold:t=>t(e),getOrElse:e=>e,merge:()=>e}),n={Ok:t,Error:r,try:e=>{try{return t(e())}catch(e){return r(e)}},fromNullable:(e,n)=>null!=e?t(e):r(n),fromMaybe:(e,n)=>e.fold((()=>r(n)),(e=>t(e))),of:e=>t(e)};e.exports=n},4169:function(e){const t=Symbol.for("union-type-any-symbol"),r=e=>r=>{const n=Object.keys(r);for(const t of n)if(t===e.name)return r[t](e.payload);if(r[t])return r[t]();throw new Error(`Variant "${e.name}" not covered in pattern with keys [${n}].\nThis could mean you did not include all variants in your Union's matchWith function.`)},n=(e,t,n={})=>Object.keys(t).reduce(((o,a)=>(o[a]=((e,t,n,o)=>{const a=Symbol(`[${e}:${t}]`),i=(...e)=>{const i=n(...e),s={matchWith:r({name:t,payload:i}),toString:()=>t,[a]:!0};return Object.keys(o).forEach((e=>{s[e]=o[e](s)})),s};return i.hasInstance=e=>e&&!0===e[a],i})(e,a,t[a],n),o)),{});n.any=t,e.exports=n},3121:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultMaxPageSize=void 0;const n=r(3810);t.DefaultMaxPageSize={[n.PagingMode.Offset]:1e3,[n.PagingMode.Cursor]:100}},2295:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AllowedFilterOperator=t.FieldType=void 0,function(e){e.number="number",e.text="text",e.image="image",e.boolean="boolean",e.document="document",e.url="url",e.richText="richtext",e.date="date",e.dateTime="datetime",e.video="video",e.reference="reference",e.multiReference="multi-reference",e.pageLink="pagelink",e.object="object",e.mediaGallery="media-gallery",e.address="address",e.stringArray="array<string>",e.color="color",e.audio="audio",e.time="time",e.array="array",e.richContent="rich-content",e.language="language",e.documentArray="array<document>",e.any="any"}(t.FieldType||(t.FieldType={})),function(e){e.eq="eq",e.ne="ne",e.lt="lt",e.lte="lte",e.gt="gt",e.gte="gte",e.hasSome="hasSome",e.hasAll="hasAll",e.contains="contains",e.startsWith="startsWith",e.endsWith="endsWith",e.urlized="urlized"}(t.AllowedFilterOperator||(t.AllowedFilterOperator={}))},2722:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Operator=void 0,function(e){e.and="$and",e.or="$or",e.not="$not",e.eq="$eq",e.ne="$ne",e.lt="$lt",e.lte="$lte",e.gt="$gt",e.gte="$gte",e.hasSome="$hasSome",e.hasAll="$hasAll",e.contains="$contains",e.startsWith="$startsWith",e.endsWith="$endsWith",e.urlized="$urlized"}(t.Operator||(t.Operator={}))},4361:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(9166),t),o(r(2722),t),o(r(2295),t),o(r(3530),t),o(r(3810),t),o(r(47),t),o(r(3121),t)},9166:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Direction=void 0,function(e){e.asc="asc",e.desc="desc"}(t.Direction||(t.Direction={}))},3810:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PagingMode=void 0,function(e){e.Offset="OFFSET",e.Cursor="CURSOR"}(t.PagingMode||(t.PagingMode={}))},47:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UrlizedFormat=t.URLIZED_PLUGIN_ID=t.SINGLE_ITEM_ID=t.SINGLES_PLUGIN_ID=t.GRID_APPLESS_PLUGIN_ID=t.PublishingStatus=t.DRAFT_DATE_FIELD_KEY=t.PUBLISH_DATE_FIELD_KEY=t.PUBLISH_STATUS_FIELD_KEY=t.PUBLISHING_PLUGIN_ID=void 0,t.PUBLISHING_PLUGIN_ID="publishing",t.PUBLISH_STATUS_FIELD_KEY="_publishStatus",t.PUBLISH_DATE_FIELD_KEY="_publishDate",t.DRAFT_DATE_FIELD_KEY="_draftDate",function(e){e.DRAFT="DRAFT",e.PUBLISHED="PUBLISHED"}(t.PublishingStatus||(t.PublishingStatus={})),t.GRID_APPLESS_PLUGIN_ID="gridAppless",t.SINGLES_PLUGIN_ID="singleItem",t.SINGLE_ITEM_ID="SINGLE_ITEM_ID",t.URLIZED_PLUGIN_ID="urlized",function(e){e.PLAIN="plain",e.ORIGINAL="original"}(t.UrlizedFormat||(t.UrlizedFormat={}))},3530:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=t.PermissionRole=t.DataOperation=void 0,function(e){e.aggregate="aggregate",e.bulkInsert="bulkInsert",e.bulkRemove="bulkRemove",e.bulkSave="bulkSave",e.bulkUpdate="bulkUpdate",e.count="count",e.distinct="distinct",e.find="find",e.get="get",e.insert="insert",e.insertReference="insertReference",e.isReferenced="isReferenced",e.queryReferenced="queryReferenced",e.remove="remove",e.removeReference="removeReference",e.replaceReferences="replaceReferences",e.save="save",e.truncate="truncate",e.update="update"}(t.DataOperation||(t.DataOperation={})),function(e){e.anyone="anyone",e.siteMember="siteMember",e.siteMemberAuthor="siteMemberAuthor",e.admin="admin"}(t.PermissionRole||(t.PermissionRole={})),function(e){e.driver="driver",e.docstore="docstore",e.app="app",e.external="external",e.dynamicApplication="dynamicApplication",e.staticAppSchema="staticAppSchema"}(t.Storage||(t.Storage={}))},5675:function(e){var t=Object.prototype.toString;e.exports=function(e){var r=typeof e;return"undefined"===r?"undefined":null===e?"null":!0===e||!1===e||e instanceof Boolean?"boolean":"string"===r||e instanceof String?"string":"number"===r||e instanceof Number?"number":"function"===r||e instanceof Function?void 0!==e.constructor.name&&"Generator"===e.constructor.name.slice(0,9)?"generatorfunction":"function":void 0!==Array.isArray&&Array.isArray(e)?"array":e instanceof RegExp?"regexp":e instanceof Date?"date":"[object RegExp]"===(r=t.call(e))?"regexp":"[object Date]"===r?"date":"[object Arguments]"===r?"arguments":"[object Error]"===r?"error":"[object Promise]"===r?"promise":function(e){return e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}(e)?"buffer":"[object Set]"===r?"set":"[object WeakSet]"===r?"weakset":"[object Map]"===r?"map":"[object WeakMap]"===r?"weakmap":"[object Symbol]"===r?"symbol":"[object Map Iterator]"===r?"mapiterator":"[object Set Iterator]"===r?"setiterator":"[object String Iterator]"===r?"stringiterator":"[object Array Iterator]"===r?"arrayiterator":"[object Int8Array]"===r?"int8array":"[object Uint8Array]"===r?"uint8array":"[object Uint8ClampedArray]"===r?"uint8clampedarray":"[object Int16Array]"===r?"int16array":"[object Uint16Array]"===r?"uint16array":"[object Int32Array]"===r?"int32array":"[object Uint32Array]"===r?"uint32array":"[object Float32Array]"===r?"float32array":"[object Float64Array]"===r?"float64array":"object"}},5909:function(){if("function"!=typeof self.queueMicrotask&&(self.queueMicrotask=function(e){Promise.resolve().then(e).catch((e=>setTimeout((()=>{throw e}))))}),"function"!=typeof Array.prototype.at){const e=Reflect.getPrototypeOf(Int8Array);for(const t of[Array,String,e])Object.defineProperty(t.prototype,"at",{value:function(e){if((e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this[e]},writable:!0,enumerable:!1,configurable:!0})}},5554:function(e){"use strict";var t="%[a-f0-9]{2}",r=new RegExp(t,"gi"),n=new RegExp("("+t+")+","gi");function o(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],o(r),o(n))}function a(e){try{return decodeURIComponent(e)}catch(a){for(var t=e.match(r),n=1;n<t.length;n++)t=(e=o(t,n).join("")).match(r);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},r=n.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(e){var o=a(r[0]);o!==r[0]&&(t[r[0]]=o)}r=n.exec(e)}t["%C2"]="\ufffd";for(var i=Object.keys(t),s=0;s<i.length;s++){var c=i[s];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},9612:function(e,t,r){var n=r(2118),o=r(6909),a=r(8138),i=r(4174),s=r(7942);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=i,c.prototype.set=s,e.exports=c},235:function(e,t,r){var n=r(3945),o=r(1846),a=r(8028),i=r(2344),s=r(4769);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=i,c.prototype.set=s,e.exports=c},326:function(e,t,r){var n=r(8761)(r(7772),"Map");e.exports=n},6738:function(e,t,r){var n=r(2411),o=r(6417),a=r(6928),i=r(9493),s=r(4150);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=i,c.prototype.set=s,e.exports=c},857:function(e,t,r){var n=r(7772).Symbol;e.exports=n},1634:function(e,t,r){var n=r(6473),o=r(9631),a=r(6152),i=r(3226),s=r(9045),c=r(7598),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=a(e),u=!r&&o(e),d=!r&&!u&&i(e),p=!r&&!u&&!d&&c(e),f=r||u||d||p,h=f?n(e.length,String):[],g=h.length;for(var m in e)!t&&!l.call(e,m)||f&&("length"==m||d&&("offset"==m||"parent"==m)||p&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,g))||h.push(m);return h}},343:function(e){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}},2218:function(e,t,r){var n=r(1225);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},1359:function(e){e.exports=function(e,t,r,n){for(var o=e.length,a=r+(n?1:-1);n?a--:++a<o;)if(t(e[a],a,e))return a;return-1}},3324:function(e,t,r){var n=r(2774),o=r(3812);e.exports=function(e,t){for(var r=0,a=(t=n(t,e)).length;null!=e&&r<a;)e=e[o(t[r++])];return r&&r==a?e:void 0}},3366:function(e,t,r){var n=r(857),o=r(2107),a=r(7157),i=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?o(e):a(e)}},7832:function(e,t,r){var n=r(1359),o=r(2195),a=r(6024);e.exports=function(e,t,r){return t==t?a(e,t,r):n(e,o,r)}},5183:function(e,t,r){var n=r(3366),o=r(5125);e.exports=function(e){return o(e)&&"[object Arguments]"==n(e)}},2195:function(e){e.exports=function(e){return e!=e}},6840:function(e,t,r){var n=r(1049),o=r(7394),a=r(9259),i=r(7035),s=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,u=c.toString,d=l.hasOwnProperty,p=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||o(e))&&(n(e)?p:s).test(i(e))}},5522:function(e,t,r){var n=r(3366),o=r(1158),a=r(5125),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&o(e.length)&&!!i[n(e)]}},6411:function(e,t,r){var n=r(6001),o=r(4248),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return o(e);var t=[];for(var r in Object(e))a.call(e,r)&&"constructor"!=r&&t.push(r);return t}},6473:function(e){e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},1054:function(e,t,r){var n=r(857),o=r(343),a=r(6152),i=r(4795),s=n?n.prototype:void 0,c=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(a(t))return o(t,e)+"";if(i(t))return c?c.call(t):"";var r=t+"";return"0"==r&&1/t==-Infinity?"-0":r}},1704:function(e,t,r){var n=r(2153),o=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(o,""):e}},7826:function(e){e.exports=function(e){return function(t){return e(t)}}},753:function(e,t,r){var n=r(343);e.exports=function(e,t){return n(t,(function(t){return e[t]}))}},2774:function(e,t,r){var n=r(6152),o=r(1401),a=r(4452),i=r(6188);e.exports=function(e,t){return n(e)?e:o(e,t)?[e]:a(i(e))}},4019:function(e,t,r){var n=r(7772)["__core-js_shared__"];e.exports=n},1242:function(e,t,r){var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},7937:function(e,t,r){var n=r(8304);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},8761:function(e,t,r){var n=r(6840),o=r(8109);e.exports=function(e,t){var r=o(e,t);return n(r)?r:void 0}},7353:function(e,t,r){var n=r(241)(Object.getPrototypeOf,Object);e.exports=n},2107:function(e,t,r){var n=r(857),o=Object.prototype,a=o.hasOwnProperty,i=o.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=a.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(e){}var o=i.call(e);return n&&(t?e[s]=r:delete e[s]),o}},8109:function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},2118:function(e,t,r){var n=r(9191);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},6909:function(e){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},8138:function(e,t,r){var n=r(9191),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return o.call(t,e)?t[e]:void 0}},4174:function(e,t,r){var n=r(9191),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:o.call(t,e)}},7942:function(e,t,r){var n=r(9191);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},9045:function(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var n=typeof e;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<r}},1401:function(e,t,r){var n=r(6152),o=r(4795),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!o(e))||(i.test(e)||!a.test(e)||null!=t&&e in Object(t))}},8304:function(e){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},7394:function(e,t,r){var n,o=r(4019),a=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!a&&a in e}},6001:function(e){var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},3945:function(e){e.exports=function(){this.__data__=[],this.size=0}},1846:function(e,t,r){var n=r(2218),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0)&&(r==t.length-1?t.pop():o.call(t,r,1),--this.size,!0)}},8028:function(e,t,r){var n=r(2218);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},2344:function(e,t,r){var n=r(2218);e.exports=function(e){return n(this.__data__,e)>-1}},4769:function(e,t,r){var n=r(2218);e.exports=function(e,t){var r=this.__data__,o=n(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this}},2411:function(e,t,r){var n=r(9612),o=r(235),a=r(326);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(a||o),string:new n}}},6417:function(e,t,r){var n=r(7937);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},6928:function(e,t,r){var n=r(7937);e.exports=function(e){return n(this,e).get(e)}},9493:function(e,t,r){var n=r(7937);e.exports=function(e){return n(this,e).has(e)}},4150:function(e,t,r){var n=r(7937);e.exports=function(e,t){var r=n(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this}},7777:function(e,t,r){var n=r(733);e.exports=function(e){var t=n(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}},9191:function(e,t,r){var n=r(8761)(Object,"create");e.exports=n},4248:function(e,t,r){var n=r(241)(Object.keys,Object);e.exports=n},4146:function(e,t,r){e=r.nmd(e);var n=r(1242),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,i=a&&a.exports===o&&n.process,s=function(){try{var e=a&&a.require&&a.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=s},7157:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},241:function(e){e.exports=function(e,t){return function(r){return e(t(r))}}},7772:function(e,t,r){var n=r(1242),o="object"==typeof self&&self&&self.Object===Object&&self,a=n||o||Function("return this")();e.exports=a},6024:function(e){e.exports=function(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}},4452:function(e,t,r){var n=r(7777),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,i=n((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,(function(e,r,n,o){t.push(n?o.replace(a,"$1"):r||e)})),t}));e.exports=i},3812:function(e,t,r){var n=r(4795);e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},7035:function(e){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},2153:function(e){var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},1225:function(e){e.exports=function(e,t){return e===t||e!=e&&t!=t}},2579:function(e,t,r){var n=r(3324);e.exports=function(e,t,r){var o=null==e?void 0:n(e,t);return void 0===o?r:o}},3059:function(e){e.exports=function(e){return e}},1886:function(e,t,r){var n=r(7832),o=r(7878),a=r(5505),i=r(8101),s=r(8346),c=Math.max;e.exports=function(e,t,r,l){e=o(e)?e:s(e),r=r&&!l?i(r):0;var u=e.length;return r<0&&(r=c(u+r,0)),a(e)?r<=u&&e.indexOf(t,r)>-1:!!u&&n(e,t,r)>-1}},9631:function(e,t,r){var n=r(5183),o=r(5125),a=Object.prototype,i=a.hasOwnProperty,s=a.propertyIsEnumerable,c=n(function(){return arguments}())?n:function(e){return o(e)&&i.call(e,"callee")&&!s.call(e,"callee")};e.exports=c},6152:function(e){var t=Array.isArray;e.exports=t},7878:function(e,t,r){var n=r(1049),o=r(1158);e.exports=function(e){return null!=e&&o(e.length)&&!n(e)}},3226:function(e,t,r){e=r.nmd(e);var n=r(7772),o=r(6330),a=t&&!t.nodeType&&t,i=a&&e&&!e.nodeType&&e,s=i&&i.exports===a?n.Buffer:void 0,c=(s?s.isBuffer:void 0)||o;e.exports=c},1049:function(e,t,r){var n=r(3366),o=r(9259);e.exports=function(e){if(!o(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1158:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},9259:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},5125:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},7030:function(e,t,r){var n=r(3366),o=r(7353),a=r(5125),i=Function.prototype,s=Object.prototype,c=i.toString,l=s.hasOwnProperty,u=c.call(Object);e.exports=function(e){if(!a(e)||"[object Object]"!=n(e))return!1;var t=o(e);if(null===t)return!0;var r=l.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&c.call(r)==u}},5505:function(e,t,r){var n=r(3366),o=r(6152),a=r(5125);e.exports=function(e){return"string"==typeof e||!o(e)&&a(e)&&"[object String]"==n(e)}},4795:function(e,t,r){var n=r(3366),o=r(5125);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==n(e)}},7598:function(e,t,r){var n=r(5522),o=r(7826),a=r(4146),i=a&&a.isTypedArray,s=i?o(i):n;e.exports=s},249:function(e,t,r){var n=r(1634),o=r(6411),a=r(7878);e.exports=function(e){return a(e)?n(e):o(e)}},733:function(e,t,r){var n=r(6738);function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var i=e.apply(this,n);return r.cache=a.set(o,i)||a,i};return r.cache=new(o.Cache||n),r}o.Cache=n,e.exports=o},6330:function(e){e.exports=function(){return!1}},5707:function(e,t,r){var n=r(7642),o=1/0;e.exports=function(e){return e?(e=n(e))===o||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},8101:function(e,t,r){var n=r(5707);e.exports=function(e){var t=n(e),r=t%1;return t==t?r?t-r:t:0}},7642:function(e,t,r){var n=r(1704),o=r(9259),a=r(4795),i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return NaN;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=s.test(e);return r||c.test(e)?l(e.slice(2),r?2:8):i.test(e)?NaN:+e}},6188:function(e,t,r){var n=r(1054);e.exports=function(e){return null==e?"":n(e)}},8346:function(e,t,r){var n=r(753),o=r(249);e.exports=function(e){return null==e?[]:n(e,o(e))}},7320:function(e){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,a){for(var i,s,c=o(e),l=1;l<arguments.length;l++){for(var u in i=Object(arguments[l]))r.call(i,u)&&(c[u]=i[u]);if(t){s=t(i);for(var d=0;d<s.length;d++)n.call(i,s[d])&&(c[s[d]]=i[s[d]])}}return c}},4126:function(e,t,r){"use strict";var n=r(7785),o=r(7320),a=r(5554);function i(e,t){return t.encode?t.strict?n(e):encodeURIComponent(e):e}function s(e){return Array.isArray(e)?e.sort():"object"==typeof e?s(Object.keys(e)).sort((function(e,t){return Number(e)-Number(t)})).map((function(t){return e[t]})):e}function c(e){var t=e.indexOf("?");return-1===t?"":e.slice(t+1)}function l(e,t){var r=function(e){var t;switch(e.arrayFormat){case"index":return function(e,r,n){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=r):n[e]=r};case"bracket":return function(e,r,n){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],r):n[e]=[r]:n[e]=r};default:return function(e,t,r){void 0!==r[e]?r[e]=[].concat(r[e],t):r[e]=t}}}(t=o({arrayFormat:"none"},t)),n=Object.create(null);return"string"!=typeof e?n:(e=e.trim().replace(/^[?#&]/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),o=t.shift(),i=t.length>0?t.join("="):void 0;i=void 0===i?null:a(i),r(a(o),i,n)})),Object.keys(n).sort().reduce((function(e,t){var r=n[t];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?e[t]=s(r):e[t]=r,e}),Object.create(null))):n}t.extract=c,t.parse=l,t.stringify=function(e,t){!1===(t=o({encode:!0,strict:!0,arrayFormat:"none"},t)).sort&&(t.sort=function(){});var r=function(e){switch(e.arrayFormat){case"index":return function(t,r,n){return null===r?[i(t,e),"[",n,"]"].join(""):[i(t,e),"[",i(n,e),"]=",i(r,e)].join("")};case"bracket":return function(t,r){return null===r?i(t,e):[i(t,e),"[]=",i(r,e)].join("")};default:return function(t,r){return null===r?i(t,e):[i(t,e),"=",i(r,e)].join("")}}}(t);return e?Object.keys(e).sort(t.sort).map((function(n){var o=e[n];if(void 0===o)return"";if(null===o)return i(n,t);if(Array.isArray(o)){var a=[];return o.slice().forEach((function(e){void 0!==e&&a.push(r(n,e,a.length))})),a.join("&")}return i(n,t)+"="+i(o,t)})).filter((function(e){return e.length>0})).join("&"):""},t.parseUrl=function(e,t){return{url:e.split("?")[0]||"",query:l(c(e),t)}}},7375:function(e,t){"use strict";var r=Object.prototype.hasOwnProperty;function n(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function o(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var n,a,i=[];for(a in"string"!=typeof t&&(t="?"),e)if(r.call(e,a)){if((n=e[a])||null!=n&&!isNaN(n)||(n=""),a=o(a),n=o(n),null===a||null===n)continue;i.push(a+"="+n)}return i.length?t+i.join("&"):""},t.parse=function(e){for(var t,r=/([^=?#&]+)=?([^&]*)/g,o={};t=r.exec(e);){var a=n(t[1]),i=n(t[2]);null===a||null===i||a in o||(o[a]=i)}return o}},4438:function(e){"use strict";var t=function(e){return null!=e&&"function"==typeof e.run&&"boolean"==typeof e.isQueued&&(!e.resultActionCreator||"function"==typeof e.resultActionCreator)};e.exports={isEffect:t,isImmediateEffect:function(e){return t(e)&&!e.isQueued},isQueuedEffect:function(e){return t(e)&&e.isQueued}}},6286:function(e,t,r){"use strict";var n=r(6356);e.exports={createMiddleware:n}},6356:function(e,t,r){"use strict";var n=r(4520).isPromise,o=r(8620),a=o.sequence,i=o.try_,s=r(5676),c=r(4438),l=c.isEffect,u=c.isImmediateEffect,d=c.isQueuedEffect,p=function(e){return function(t){return e.push(t),function(){var r=e.indexOf(t);r>=0&&e.splice(r,1)}}};e.exports=function(){var e=[],t=[],r=Promise.resolve();return{middleware:function(o){return function(c){return function(p){var f=function(e){var t=i((function(){return e.run()}));return t.fold((function(r){var n=e.resultActionCreator?o.dispatch(e.resultActionCreator(!0,r)):Promise.resolve();return[t,n]}),(function(r){if(n(r)){var a=r.then((function(t){return e.resultActionCreator?o.dispatch(e.resultActionCreator(!1,t)):Promise.resolve()}),(function(t){throw e.resultActionCreator&&o.dispatch(e.resultActionCreator(!0,t)).catch((function(){})),t}));return[t,a]}var i=e.resultActionCreator?o.dispatch(e.resultActionCreator(!1,r)):Promise.resolve();return[t,i]}))},h=function(){var e=void 0,n=new Promise((function(t){return e=t})),o=new Promise((function(e,o){var a=r=r.then((function(){return n})).then(function(e,t){return function(r){if(r.length>0){var n=r.filter(d).map(f);return Promise.all(n.map((function(e){return e[1]}))).then((function(){return e()}),t),Promise.all(n.map((function(e){return e[0]})).map((function(e){return e.fold((function(e){return Promise.reject(e)}),(function(e){return e}))}))).catch(t)}return e(),Promise.resolve()}}(e,o),o).catch(o).then((function(){a===r&&t.slice().forEach((function(e){return e()}))}))}));return{promise:o,trigger:e}},g=function(e){var t=h(),r=t.promise,n=t.trigger;return i((function(){return function(e){var t=e.filter(u).map(f);return t.map((function(e){return e[0]})).map((function(e){return e.fold((function(e){throw e}),(function(e){return e}))})),t.map((function(e){return e[1]})).map((function(e){return e.catch((function(){}))})),e.filter(d)}(e)})).fold((function(e){throw n([]),e}),(function(e){return n(e),r}))},m=o.getState(),y=c(p),v=o.getState();if(m!==v){var w=s(m,v);return a(e.slice().map((function(e){return i((function(){return e(w)||[]}))}))).fold((function(e){throw e}),(function(e){return g(e.filter(l))}))}return Promise.resolve(y)}}},subscribe:p(e),onIdle:p(t)}}},8620:function(e){"use strict";var t=function(){},r=function(e,r){return e.fold(r.Error||t,r.Ok||t)},n=function(e){return{map:function(e){return this},fold:function(t,r){return t(e)},chain:function(e){return this},match:function(e){return r(this,e)},value:e}},o=function e(t){return{map:function(r){return e(r(t))},fold:function(e,r){return r(t)},chain:function(e){return e(t)},match:function(e){return r(this,e)},value:t}},a={Left:n,Right:o};e.exports={Either:a,sequence:function(e){return e.reduce((function(e,t){return e.chain((function(e){return t.map((function(t){return e.concat(t)}))}))}),o([]))},try_:function(e){try{return o(e())}catch(e){return n(e)}}}},4520:function(e){"use strict";e.exports.isPromise=function(e){return null!=e&&"function"==typeof e.then}},5676:function(e){"use strict";e.exports=function(e,t){var r={from:e,to:t,hasChanged:function(r){return r(e)!==r(t)},hasChangedToMatch:function(e,n){return r.hasChanged(e)&&n(e(t))},hasChangedToTrue:function(e){return r.hasChangedToMatch(e,(function(e){return!0===e}))},hasChangedToFalse:function(e){return r.hasChangedToMatch(e,(function(e){return!1===e}))},hasChangedToNull:function(e){return r.hasChangedToMatch(e,(function(e){return null===e}))},hasChangedToNotNull:function(e){return r.hasChangedToMatch(e,(function(e){return null!==e}))}};return r}},7245:function(e){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},5174:function(e){var t=Object.prototype.hasOwnProperty;function r(e){return"[Throws: "+(e?e.message:"?")+"]"}function n(e){var n=[];return function e(o){if(null===o||"object"!=typeof o)return o;if(-1!==n.indexOf(o))return"[Circular]";if(n.push(o),"function"==typeof o.toJSON)try{var a=e(o.toJSON());return n.pop(),a}catch(e){return r(e)}if(Array.isArray(o)){var i=o.map(e);return n.pop(),i}var s=Object.keys(o).reduce((function(n,a){return n[a]=e(function(e,n){if(t.call(e,n))try{return e[n]}catch(e){return r(e)}return e[n]}(o,a)),n}),{});return n.pop(),s}(e)}e.exports=function(e,t,r){return JSON.stringify(n(e),t,r)},e.exports.ensureProperties=n},7785:function(e){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}},7288:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}}),e=r.hmd(e);var n=function(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r.g?r.g:e)},4846:function(e,t,r){"use strict";var n=r(7245),o=r(7375),a=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,i=/[\n\r\t]/g,s=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,u=/^[a-zA-Z]:/;function d(e){return(e||"").toString().replace(a,"")}var p=[["#","hash"],["?","query"],function(e,t){return g(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],f={hash:1,query:1};function h(e){var t,n=("undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{}).location||{},o={},a=typeof(e=e||n);if("blob:"===e.protocol)o=new y(unescape(e.pathname),{});else if("string"===a)for(t in o=new y(e,{}),f)delete o[t];else if("object"===a){for(t in e)t in f||(o[t]=e[t]);void 0===o.slashes&&(o.slashes=s.test(e.href))}return o}function g(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function m(e,t){e=(e=d(e)).replace(i,""),t=t||{};var r,n=l.exec(e),o=n[1]?n[1].toLowerCase():"",a=!!n[2],s=!!n[3],c=0;return a?s?(r=n[2]+n[3]+n[4],c=n[2].length+n[3].length):(r=n[2]+n[4],c=n[2].length):s?(r=n[3]+n[4],c=n[3].length):r=n[4],"file:"===o?c>=2&&(r=r.slice(2)):g(o)?r=n[4]:o?a&&(r=r.slice(2)):c>=2&&g(t.protocol)&&(r=n[4]),{protocol:o,slashes:a||g(o),slashesCount:c,rest:r}}function y(e,t,r){if(e=(e=d(e)).replace(i,""),!(this instanceof y))return new y(e,t,r);var a,s,c,l,f,v,w=p.slice(),I=typeof t,b=this,E=0;for("object"!==I&&"string"!==I&&(r=t,t=null),r&&"function"!=typeof r&&(r=o.parse),a=!(s=m(e||"",t=h(t))).protocol&&!s.slashes,b.slashes=s.slashes||a&&t.slashes,b.protocol=s.protocol||t.protocol||"",e=s.rest,("file:"===s.protocol&&(2!==s.slashesCount||u.test(e))||!s.slashes&&(s.protocol||s.slashesCount<2||!g(b.protocol)))&&(w[3]=[/(.*)/,"pathname"]);E<w.length;E++)"function"!=typeof(l=w[E])?(c=l[0],v=l[1],c!=c?b[v]=e:"string"==typeof c?~(f="@"===c?e.lastIndexOf(c):e.indexOf(c))&&("number"==typeof l[2]?(b[v]=e.slice(0,f),e=e.slice(f+l[2])):(b[v]=e.slice(f),e=e.slice(0,f))):(f=c.exec(e))&&(b[v]=f[1],e=e.slice(0,f.index)),b[v]=b[v]||a&&l[3]&&t[v]||"",l[4]&&(b[v]=b[v].toLowerCase())):e=l(e,b);r&&(b.query=r(b.query)),a&&t.slashes&&"/"!==b.pathname.charAt(0)&&(""!==b.pathname||""!==t.pathname)&&(b.pathname=function(e,t){if(""===e)return t;for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=r.length,o=r[n-1],a=!1,i=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),i++):i&&(0===n&&(a=!0),r.splice(n,1),i--);return a&&r.unshift(""),"."!==o&&".."!==o||r.push(""),r.join("/")}(b.pathname,t.pathname)),"/"!==b.pathname.charAt(0)&&g(b.protocol)&&(b.pathname="/"+b.pathname),n(b.port,b.protocol)||(b.host=b.hostname,b.port=""),b.username=b.password="",b.auth&&(~(f=b.auth.indexOf(":"))?(b.username=b.auth.slice(0,f),b.username=encodeURIComponent(decodeURIComponent(b.username)),b.password=b.auth.slice(f+1),b.password=encodeURIComponent(decodeURIComponent(b.password))):b.username=encodeURIComponent(decodeURIComponent(b.auth)),b.auth=b.password?b.username+":"+b.password:b.username),b.origin="file:"!==b.protocol&&g(b.protocol)&&b.host?b.protocol+"//"+b.host:"null",b.href=b.toString()}y.prototype={set:function(e,t,r){var a=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(r||o.parse)(t)),a[e]=t;break;case"port":a[e]=t,n(t,a.protocol)?t&&(a.host=a.hostname+":"+t):(a.host=a.hostname,a[e]="");break;case"hostname":a[e]=t,a.port&&(t+=":"+a.port),a.host=t;break;case"host":a[e]=t,c.test(t)?(t=t.split(":"),a.port=t.pop(),a.hostname=t.join(":")):(a.hostname=t,a.port="");break;case"protocol":a.protocol=t.toLowerCase(),a.slashes=!r;break;case"pathname":case"hash":if(t){var i="pathname"===e?"/":"#";a[e]=t.charAt(0)!==i?i+t:t}else a[e]=t;break;case"username":case"password":a[e]=encodeURIComponent(t);break;case"auth":var s=t.indexOf(":");~s?(a.username=t.slice(0,s),a.username=encodeURIComponent(decodeURIComponent(a.username)),a.password=t.slice(s+1),a.password=encodeURIComponent(decodeURIComponent(a.password))):a.username=encodeURIComponent(decodeURIComponent(t))}for(var l=0;l<p.length;l++){var u=p[l];u[4]&&(a[u[1]]=a[u[1]].toLowerCase())}return a.auth=a.password?a.username+":"+a.password:a.username,a.origin="file:"!==a.protocol&&g(a.protocol)&&a.host?a.protocol+"//"+a.host:"null",a.href=a.toString(),a},toString:function(e){e&&"function"==typeof e||(e=o.stringify);var t,r=this,n=r.host,a=r.protocol;a&&":"!==a.charAt(a.length-1)&&(a+=":");var i=a+(r.protocol&&r.slashes||g(r.protocol)?"//":"");return r.username?(i+=r.username,r.password&&(i+=":"+r.password),i+="@"):r.password?(i+=":"+r.password,i+="@"):"file:"!==r.protocol&&g(r.protocol)&&!n&&"/"!==r.pathname&&(i+="@"),(":"===n[n.length-1]||c.test(r.hostname)&&!r.port)&&(n+=":"),i+=n+r.pathname,(t="object"==typeof r.query?e(r.query):r.query)&&(i+="?"!==t.charAt(0)?"?"+t:t),r.hash&&(i+=r.hash),i}},y.extractProtocol=m,y.location=h,y.trimLeft=d,y.qs=o,e.exports=y},8022:function(e,t,r){var n=r(4481),o=r(6426),a=o;a.v1=n,a.v4=o,e.exports=a},8725:function(e){for(var t=[],r=0;r<256;++r)t[r]=(r+256).toString(16).substr(1);e.exports=function(e,r){var n=r||0,o=t;return[o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]]].join("")}},9157:function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}},4481:function(e,t,r){var n,o,a=r(9157),i=r(8725),s=0,c=0;e.exports=function(e,t,r){var l=t&&r||0,u=t||[],d=(e=e||{}).node||n,p=void 0!==e.clockseq?e.clockseq:o;if(null==d||null==p){var f=a();null==d&&(d=n=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==p&&(p=o=16383&(f[6]<<8|f[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),g=void 0!==e.nsecs?e.nsecs:c+1,m=h-s+(g-c)/1e4;if(m<0&&void 0===e.clockseq&&(p=p+1&16383),(m<0||h>s)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=h,c=g,o=p;var y=(1e4*(268435455&(h+=122192928e5))+g)%4294967296;u[l++]=y>>>24&255,u[l++]=y>>>16&255,u[l++]=y>>>8&255,u[l++]=255&y;var v=h/4294967296*1e4&268435455;u[l++]=v>>>8&255,u[l++]=255&v,u[l++]=v>>>24&15|16,u[l++]=v>>>16&255,u[l++]=p>>>8|128,u[l++]=255&p;for(var w=0;w<6;++w)u[l+w]=d[w];return t||i(u)}},6426:function(e,t,r){var n=r(9157),o=r(8725);e.exports=function(e,t,r){var a=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||n)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var s=0;s<16;++s)t[a+s]=i[s];return t||o(i)}},5663:function(e){"use strict";const t={SHORT_DATE:"SHORT_DATE",MEDIUM_DATE:"MEDIUM_DATE",LONG_DATE:"LONG_DATE",FULL_DATE:"FULL_DATE",SHORT_DATE_TIME:"SHORT_DATE_TIME",LONG_DATE_TIME:"LONG_DATE_TIME",FULL_DATE_TIME:"FULL_DATE_TIME",MEDIUM_TIME_12:"MEDIUM_TIME_12",MEDIUM_TIME_24:"MEDIUM_TIME_24",LONG_TIME_12:"LONG_TIME_12",LONG_TIME_24:"LONG_TIME_24",HOUR_ONLY:"HOUR_ONLY",MINUTE_ONLY:"MINUTE_ONLY",YEAR_ONLY:"YEAR_ONLY",MONTH_ONLY:"MONTH_ONLY",SHORT_MONTH_ONLY:"SHORT_MONTH_ONLY",DAY_ONLY:"DAY_ONLY"},r=new Set([t.SHORT_DATE_TIME,t.LONG_DATE_TIME,t.FULL_DATE_TIME,t.MEDIUM_TIME_12,t.MEDIUM_TIME_24,t.LONG_TIME_12,t.LONG_TIME_24,t.HOUR_ONLY,t.MINUTE_ONLY]),n={[t.SHORT_DATE]:{day:"numeric",month:"numeric",year:"2-digit"},[t.MEDIUM_DATE]:{day:"numeric",month:"short",year:"numeric"},[t.LONG_DATE]:{day:"numeric",month:"long",year:"numeric"},[t.FULL_DATE]:{day:"numeric",month:"long",year:"numeric",weekday:"long"},[t.SHORT_DATE_TIME]:{day:"numeric",month:"numeric",year:"2-digit",hour:"numeric",minute:"numeric"},[t.LONG_DATE_TIME]:{day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},[t.FULL_DATE_TIME]:{day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric",weekday:"long",timeZoneName:"short"},[t.MEDIUM_TIME_12]:{minute:"numeric",hour:"numeric",hour12:!0},[t.MEDIUM_TIME_24]:{minute:"numeric",hour:"numeric",hour12:!1},[t.LONG_TIME_12]:{minute:"numeric",hour:"numeric",second:"numeric",hour12:!0},[t.LONG_TIME_24]:{minute:"numeric",hour:"numeric",second:"numeric",hour12:!1},[t.HOUR_ONLY]:{hour:"numeric"},[t.MINUTE_ONLY]:{minute:"numeric"},[t.YEAR_ONLY]:{year:"numeric"},[t.MONTH_ONLY]:{month:"long"},[t.SHORT_MONTH_ONLY]:{month:"short"},[t.DAY_ONLY]:{weekday:"long"}};e.exports=({locale:e,timeZone:r}={})=>{if(!e)throw new Error('A "locale" parameter is required for wixFormatting');return{formatDateTime(t,o,{locale:a,timeZone:i}={}){const s=Object.assign(Object.assign({},n[o]),{timeZone:i||r});return new Intl.DateTimeFormat(a||e,s).format(t)},dateFormats:t}},e.exports.dateFormats=t,e.exports.setOfDateFormatsWithTime=r},9479:function(t){"use strict";t.exports=e},7544:function(e){e.exports=function(e,t){return t.get?t.get.call(e):t.value},e.exports.__esModule=!0,e.exports.default=e.exports},2440:function(e){e.exports=function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}},e.exports.__esModule=!0,e.exports.default=e.exports},2132:function(e){e.exports=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7481:function(e,t,r){var n=r(7544),o=r(2132);e.exports=function(e,t){var r=o(e,t,"get");return n(e,r)},e.exports.__esModule=!0,e.exports.default=e.exports},4070:function(e,t,r){var n=r(2440),o=r(2132);e.exports=function(e,t,r){var a=o(e,t,"set");return n(e,a,r),r},e.exports.__esModule=!0,e.exports.default=e.exports},6290:function(e,t,r){var n=r(7739);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},8064:function(e,t,r){var n=r(7425).default;e.exports=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7739:function(e,t,r){var n=r(7425).default,o=r(8064);e.exports=function(e){var t=o(e,"string");return"symbol"===n(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},7425:function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={id:e,loaded:!1,exports:{}};return n[e].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},r=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},a.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var o=Object.create(null);a.r(o);var i={};t=t||[null,r({}),r([]),r(r)];for(var s=2&n&&e;"object"==typeof s&&!~t.indexOf(s);s=r(s))Object.getOwnPropertyNames(s).forEach((function(t){i[t]=function(){return e[t]}}));return i.default=function(){return e},a.d(o,i),o},a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e};var i={};return function(){"use strict";a.r(i),a.d(i,{createControllers:function(){return fh},initAppForPage:function(){return ph}});var e={};a.r(e),a.d(e,{READ:function(){return ze},READ_WRITE:function(){return qe},WRITE:function(){return $e}});var t={};a.r(t),a.d(t,{collectionName:function(){return zt},deferred:function(){return Zt},filter:function(){return Ht},includes:function(){return Yt},nested:function(){return Jt},pageSize:function(){return Kt},readWriteType:function(){return $t},sort:function(){return Xt}});var r={};a.r(r),a.d(r,{DATASET:function(){return Gr},ROUTER_DATASET:function(){return Br}});var n=a(6290),o=a.n(n),s=a(7481),c=a.n(s),l=a(4070),u=a.n(l),d=a(5965);const p={"tpa/addVariantToCart":async({wixSdk:e,currentItem:t})=>{const r=await e.site.getPublicAPI(d.WIX_STORES);await r.cart.addProducts([{productId:t.productId,quantity:1}])},"tpa/addProductToCart":async({wixSdk:e,currentItem:t})=>{const r=await e.site.getPublicAPI(d.WIX_STORES);await r.cart.addProducts([{productId:t._id,quantity:1}])},"tpa/quicklyViewProduct":async({wixSdk:e,currentItem:t})=>{const r=await e.site.getPublicAPI(d.WIX_STORES);await r.product.openQuickView(t._id)},"tpa/purchasePricingPlan":async({wixSdk:e,currentItem:t})=>{await e["pricing-plans"].checkout.startOnlinePurchase(t._id)}};a(5909);var f=a(4846),h=a.n(f);var g=a(4361);const{text:m,boolean:y,number:v,dateTime:w,date:I,richText:b,url:E,reference:_,stringArray:S}=g.FieldType,R=[m,b,y,w,I,_,v,E,S];var T=a(8022),C=a.n(T);const O=({httpClient:e})=>({reportFormEventToAutomationCreator:()=>async({detailedEventPayload:t,eventUTCTime:r})=>{const n={eventIdentifier:{eventUniqueId:C().v4(),eventType:"form/form/code",sourceUniqueId:"675bbcef-18d8-41f5-800e-131ec9e08762"},eventUTCTime:r,detailedEventPayload:t};await e.post("/_api/action-triggers-server/v1/report-event",n)}});class P extends Error{static withMessage(e){return class extends(this){constructor(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];super(e,...r)}}}static with(e){let{message:t,options:r}=e;return class extends(this){constructor(e){super(t||e instanceof String&&e,{...r,...e instanceof Object?e:{}})}}}constructor(e,t,r){void 0===r&&(r="DataBindingError"),super(e,t);const{cause:n,...o}=t||{};this.name=r,this.options=o,this.cause||(this.cause=n)}toString(){return this.cause?super.toString()+"\nCaused by "+this.cause.toString():super.toString()}}o()(P,"scopes",{USER_SCOPE:"userCodeZone",APPLICATION_SCOPE:"applicationCodeZone",SERVER_SCOPE:"wixDataCodeZone"});class D extends P{constructor(e,t){super(e,t,"AppError"),this.scope=P.scopes.APPLICATION_SCOPE}}class x extends P{constructor(e,t,r){void 0===r&&(r="UserError"),super(e,t,r),this.scope=P.scopes.USER_SCOPE}}class A extends x{constructor(e,t){const{code:r,...n}=t;super(e,n,"DatasetError"),this.code=r}}class N extends x{constructor(e,t){super(e,t,"ServerValidationError")}}o()(N,"codes",["WD_SITE_IN_TEMPLATE_MODE","WD_PERMISSION_DENIED","WD_COLLECTION_DELETED","WD_VALIDATION_FAILED"]);class M extends P{constructor(e,t){const{code:r,...n}=t;super(e,n,"ServerError"),this.scope=P.scopes.SERVER_SCOPE,this.code=r}}class F extends P{constructor(e){super("Async operation error wasn't handled",e,"UnhandledPromiseRejection")}}function L(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var U=new WeakMap;const k=new class{constructor(){L(this,U,{writable:!0,value:new Proxy({},{get(e,t){if(e[t])return e[t];throw new ReferenceError("There is no "+t+" in context. Check if the context has been already set")}})})}set(e){Object.entries(e).forEach((e=>{let[t,r]=e;c()(this,U)[t]=r}))}get(){return c()(this,U)}},j=k.get(),V=k.set.bind(k);function W(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var G=new WeakMap,B=new WeakMap;class q{constructor(e){W(this,G,{writable:!0,value:void 0}),W(this,B,{writable:!0,value:new X}),u()(this,G,e)}dispatch(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return c()(this,B).has(e)?c()(this,B).get(e).reduce(((t,n)=>[...t,j.errorReporting(n,D.with({message:e+" listener failed",options:{extra:c()(this,G)}}))(c()(this,G),...r)]),[]):void 0}subscribe(e,t){return e.constructor===Object?Object.entries(e).reduce(((e,t)=>{let[r,n]=t;return[...e,this.subscribe(r,n)]}),[]):(c()(this,B).getOrDefault(e,new Y).add(t),()=>this.unsubscribe(e,t))}unsubscribe(e,t){return c()(this,B).has(e)&&c()(this,B).get(e).delete(t)}}class z{constructor(){const e={};return e.promise=new Promise(((t,r)=>{e.resolve=function(){return t(...arguments),e.promise},e.reject=function(){return r(...arguments),e.promise}})),e}}const $=(e,t)=>function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];try{const r=e(...n);return(null==r?void 0:r.catch)instanceof Function?r.catch((e=>t(e,...n))):r}catch(e){return t(e,...n)}};class H{constructor(e){return null!=e&&e.then?e:{then:t=>t(e)}}}class X extends Map{getOrDefault(e,t){return this.has(e)?this.get(e):this.set(e,t).get(e)}find(e){const[,t]=Array.from(this).find((t=>{let[r,n]=t;return e(n,r,this)}))||[];return t}}class Y extends Set{reduce(e,t){return Array.from(this).reduce(((t,r,n)=>e(t,r,n,this)),t)}}var J=a(2499),K=a(6471),Z=a.n(K);const Q="detailsRepeaterRole",ee="detailsDatasetRole",te="filterInputRole",re="galleryRole",ne="mediaGalleryRole",oe="ratingsDisplayRole",ae="dropdownRole",ie="dropdownOptionsRole",se="gridRole",ce="datepickerRole",le="radioGroupRole",ue="uploadButtonRole",de="repeaterRole",pe="pageRole",fe="paginationRole",he="addressInputRole",ge="googleMapRole",me="timePickerRole",ye="progressBarRole",ve="selectionTagsOptionsRole",we="signatureInputRole",Ie="richContentRole",be="userInputFilterDropdownRole",Ee="userInputFilterCheckboxRole",_e="userInputFilterRadioGroupRole",Se="userInputFilterCheckboxGroupRole",Re="userInputFilterSelectionTagsRole",Te="userInputFilterRangeSliderRole",Ce=[be,Ee,_e,Se,Re,Te],Oe="RESET_ALL",Pe=[be,_e,Se,Re],De=new Map([["new","add"]]),xe="dbsm-viewer-app";function Ae(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}class Ne{constructor(e){let{collectionId:t,componentType:r,datasetId:n,datasetMode:a,datasetType:i,fieldType:s,filteredBy:c,id:l,numberOfResults:u,pageId:p,pageUrl:f,viewMode:h}=e;o()(this,"type",Ne.types.EVENT),o()(this,"event",void 0),this.event={pageId:p,src:79,ver:Z()((0,J.getAppUrl)(xe)),app_name:xe,app_id:d.DATA_BINDING,evid:l,ds_id:n,ds_type:i,mode:a,collection_name:t,component_type:r,filtered_by:c,field_type:s,number_of_results:u,viewmode:h,page_url:f}}}o()(Ne,"types",{EVENT:"event",ERROR:"error"});class Me extends Ne{constructor(e){let{message:t,code:r}=e;super({}),o()(this,"type",Ne.types.ERROR),this.event={evid:10,dsc:t,errn:t,errc:r||1}}}var Fe=new WeakMap,Le=new WeakMap,Ue=new WeakMap;class ke{constructor(e,t,r){o()(this,"onStart",(e=>u()(this,Fe,e))),o()(this,"onEnd",(e=>u()(this,Le,e))),Ae(this,Fe,{writable:!0,value:()=>{}}),Ae(this,Le,{writable:!0,value:()=>{}}),Ae(this,Ue,{writable:!0,value:{[ke.types.TRACE]:e=>(c()(this,Fe).call(this),new H(e()).then((e=>(c()(this,Le).call(this),e)))),[ke.types.START]:()=>c()(this,Fe).call(this),[ke.types.END]:()=>c()(this,Le).call(this)}});const{type:n,fn:a}=t instanceof Function?{type:ke.types.TRACE,fn:t}:{type:t};this.name=e,this.params=r,this.run=()=>c()(this,Ue)[n](a)}}o()(ke,"types",{START:"START",END:"END",TRACE:"TRACE"});class je{static with(e){let{category:t,message:r,level:n,data:o}=e;return class extends(this){constructor(e){let{category:a=t,message:i=r,level:s=n,data:c}=e;super({category:a,message:i,level:s,data:c||o?{...c,...o}:void 0})}}}constructor(e){let{category:t,message:r,level:n="info",data:o}=e;this.event={category:t,message:r,level:n,data:o}}}var Ve=new WeakMap,We=new WeakMap;class Ge{static with(e){return class extends(this){constructor(t,r){void 0===r&&(r={}),super(t,{...e,...r})}}}constructor(e,t){o()(this,"messages",[]),Ae(this,Ve,{writable:!0,value:{[Ge.types.COMPONENT.BOUND]:e=>{let{collectionId:t,description:r}=e;return r?["[Dataset - Connected] '"+t+"' collection to element '"+this._getComponentPresentation()+"':",r]:["[Dataset - Connected] '"+t+"' collection to element '"+this._getComponentPresentation()+"'"]},[Ge.types.COMPONENT.FILLED]:e=>{let{collectionId:t,description:r}=e;return["[Dataset - Populated] '"+t+"' collection into element '"+this._getComponentPresentation()+"':",r]},[Ge.types.DS_API.CALLED]:e=>{let{methodName:t,args:r}=e;return 0===r.length?["[wix-dataset."+t+"] called"]:["[wix-dataset."+t+"] called with (",JSON.stringify(r),")"]},[Ge.types.DS_API.SUCCED]:e=>{let{methodName:t,result:r}=e;return void 0===r?["[wix-dataset."+t+"] returned"]:["[wix-dataset."+t+"] returned with (",JSON.stringify(r),")"]},[Ge.types.DS_API.DEPRECATED]:e=>{let{methodName:t,replacementMethodName:r}=e;return["[wix-dataset."+t+"] is deprecated"+(r?"; use [wix-dataset."+r+"] instead":"")]},[Ge.types.DS_API.REGISTERED]:e=>{let{methodName:t}=e;return["["+t+" callback registered] on wix-dataset"]},[Ge.types.DS_API.TRIGGERED]:e=>{let{eventName:t,eventArgs:r=[]}=e;if(r.length){const e=r.map((e=>e instanceof Error?e.toString():e));return["["+t+" event] triggered on wix-dataset with (",JSON.stringify(e),")"]}return["["+t+" event] triggered on wix-dataset"]}}}),Ae(this,We,{writable:!0,value:{}}),u()(this,We,t),this.messages=c()(this,Ve)[e](t)}_getComponentPresentation(){const{component:{nickname:e,parentRepeater:t}}=c()(this,We);return t?"#"+t.nickname+".#"+e:"#"+e}}o()(Ge,"types",{COMPONENT:{BOUND:"COMPONENT_BOUND",FILLED:"COMPONENT_FILLED"},DS_API:{CALLED:"DS_API_CALLED",SUCCED:"DS_API_SUCCED",DEPRECATED:"DS_API_DEPRECATED",REGISTERED:"DS_API_REGISTERED",TRIGGERED:"DS_API_TRIGGERED"}});class Be{constructor(e,t){void 0===t&&(t="log"),o()(this,"message",void 0),o()(this,"level",void 0),this.message=e,this.level=t}}const qe="READ_WRITE",ze="READ",$e="WRITE";var He=(e,t)=>[se,fe].includes(e)||t&&t.properties&&Object.keys(t.properties).length>0,Xe=a(9479),Ye=a(477);const Je=Object.keys,Ke=(Object.values,Object.entries,{AddressInput:{viewerType:["wixui.AddressInput"],sdkType:"$w.AddressInput"},Text:{viewerType:["wysiwyg.viewer.components.WRichText"],sdkType:"$w.Text"},Image:{viewerType:["wysiwyg.viewer.components.WPhoto","wixui.ImageX"],sdkType:"$w.Image"},TextInput:{viewerType:["wysiwyg.viewer.components.inputs.TextInput"],sdkType:"$w.TextInput"},TimePicker:{viewerType:["wixui.TimePicker"],sdkType:"$w.TimePicker"},Button:{viewerType:["wysiwyg.viewer.components.SiteButton"],sdkType:"$w.Button"},IconButton:{viewerType:["wysiwyg.common.components.imagebutton.viewer.ImageButton"],sdkType:"$w.IconButton"},RatingsDisplay:{viewerType:["wixui.RatingsDisplay"],sdkType:"$w.RatingsDisplay"},RatingsInput:{viewerType:["wixui.RatingsInput"],sdkType:"$w.RatingsInput"},VerticalMenu:{viewerType:["wysiwyg.common.components.verticalmenu.viewer.VerticalMenu"],sdkType:"$w.VerticalMenu"},Checkbox:{viewerType:["wysiwyg.viewer.components.inputs.Checkbox"],sdkType:"$w.Checkbox"},Gallery:{viewerType:["wysiwyg.viewer.components.MatrixGallery","wysiwyg.viewer.components.SliderGallery","wysiwyg.viewer.components.SlideShowGallery","wysiwyg.viewer.components.PaginatedGridGallery","wysiwyg.viewer.components.tpapps.TPAWidget"],sdkType:"$w.Gallery"},Dropdown:{viewerType:["wysiwyg.viewer.components.inputs.ComboBoxInput","wixui.Dropdown"],sdkType:"$w.Dropdown"},TextBox:{viewerType:["wysiwyg.viewer.components.inputs.TextAreaInput"],sdkType:"$w.TextBox"},RichTextBox:{viewerType:["wixui.RichTextBox"],sdkType:"$w.RichTextBox"},Table:{viewerType:["wysiwyg.viewer.components.Grid"],sdkType:"$w.Table"},DatePicker:{viewerType:["wysiwyg.viewer.components.inputs.DatePicker"],sdkType:"$w.DatePicker"},RadioButtonGroup:{viewerType:["wysiwyg.viewer.components.inputs.RadioGroup"],sdkType:"$w.RadioButtonGroup"},UploadButton:{viewerType:["wysiwyg.viewer.components.inputs.UploadButton","wixui.FileUploaderNew","wysiwyg.viewer.components.inputs.FileUploader"],sdkType:"$w.UploadButton"},ClassicSection:{viewerType:["wysiwyg.viewer.components.ClassicSection"],sdkType:"$w.Section"},Column:{viewerType:["wysiwyg.viewer.components.Column"],sdkType:"$w.Column"},Video:{viewerType:["wysiwyg.viewer.components.Video"],sdkType:"$w.Video"},VideoPlayer:{viewerType:["wixui.VideoPlayer"],sdkType:"$w.VideoPlayer"},VideoBox:{viewerType:["wysiwyg.viewer.components.MediaPlayer"],sdkType:"$w.VideoBox"},MusicPlayer:{viewerType:["wixui.MusicPlayer"],sdkType:"$w.AudioPlayer"},Repeater:{viewerType:["wysiwyg.viewer.components.Repeater"],sdkType:"$w.Repeater"},Pagination:{viewerType:["wixui.Pagination"],sdkType:"$w.Pagination"},Page:{viewerType:["mobile.core.components.Page"],sdkType:"$w.Page"},Document:{viewerType:["fake-document-type"],sdkType:"$w.Document"},MediaContainer:{viewerType:["wysiwyg.viewer.components.MediaContainer"],sdkType:"$w.Container"},StripColumnsContainer:{viewerType:["wysiwyg.viewer.components.StripColumnsContainer"],sdkType:"$w.ColumnStrip"},ToggleSwitch:{viewerType:["wixui.ToggleSwitch"],sdkType:"$w.Switch"},Slider:{viewerType:["wixui.Slider"],sdkType:"$w.Slider"},RangeSlider:{viewerType:["wixui.RangeSlider"],sdkType:"$w.RangeSlider"},StylableButton:{viewerType:["wixui.StylableButton"],sdkType:"$w.StylableButton"},GoogleMap:{viewerType:["wysiwyg.viewer.components.GoogleMap"],sdkType:"$w.GoogleMap"},CheckboxGroup:{viewerType:["wysiwyg.viewer.components.inputs.CheckboxGroup"],sdkType:"$w.CheckboxGroup"},ProgressBar:{viewerType:["wixui.ProgressBar"],sdkType:"$w.ProgressBar"},VectorImage:{viewerType:["wysiwyg.viewer.components.VectorImage","wysiwyg.viewer.components.svgshape.SvgShape"],sdkType:"$w.VectorImage"},SelectionTags:{viewerType:["wixui.SelectionTagsList"],sdkType:"$w.SelectionTags"},Section:{viewerType:["responsive.components.Section"],sdkType:"$w.Section"},SignatureInput:{viewerType:["wixui.SignatureInput"],sdkType:"$w.SignatureInput"},RefComponent:{viewerType:["wysiwyg.viewer.components.RefComponent"],sdkType:"$w.RefComponent"},RichContent:{viewerType:["wysiwyg.viewer.components.tpapps.TPAWidget"],sdkType:"$w.RichContent"}});var Ze=(0,Xe.mapValues)(Ke,(({sdkType:e})=>e));Je(Ke).reduce(((e,t)=>(e.concat(Ke[t].viewerType),e)),[]),Je(Ke).map((e=>Ke[e].viewerType)).reduce(((e,t)=>e.concat(t)),[]).reduce(((e,t)=>(e[t.split(".").reverse()[0]]=t,e)),{}),Je(Ke).map((e=>Ke[e].sdkType));const{AddressInput:Qe,RatingsInput:et,TextInput:tt,TextBox:rt,RichTextBox:nt,Checkbox:ot,DatePicker:at,RadioButtonGroup:it,Dropdown:st,UploadButton:ct,ToggleSwitch:lt,Slider:ut,TimePicker:dt,CheckboxGroup:pt,SelectionTags:ft,SignatureInput:ht}=Ze,gt=[{type:Qe,role:he},{type:et,role:"ratingsInputRole"},{type:tt,role:"textInputRole"},{type:rt,role:"textAreaRole"},{type:nt,role:"richTextBoxRole"},{type:ot,role:"checkboxRole"},{type:at,role:ce},{type:it,role:le},{type:st,role:ae},{type:ct,role:ue},{type:lt,role:"toggleSwitchRole"},{type:ut,role:"sliderRole"},{type:dt,role:me},{type:pt,role:"checkboxGroupRole"},{type:ft,role:"selectionTagsRole"},{type:ht,role:we}],mt=(gt.map((e=>e.type)),gt.map((e=>e.role))),yt=e=>e.some((e=>{return t=(0,Xe.get)(e,"role"),mt.includes(t);var t}));var vt=(e,t)=>(e=>[$e,qe].includes(e))(e)&&(e=>e.some((e=>"save"===(0,Xe.get)(e,"config.events.onClick.action"))))(t)&&yt(t),wt="object"==typeof global&&global&&global.Object===Object&&global,It="object"==typeof self&&self&&self.Object===Object&&self,bt=(wt||It||Function("return this")()).Symbol,Et=Object.prototype,_t=Et.hasOwnProperty,St=Et.toString,Rt=bt?bt.toStringTag:void 0;var Tt=function(e){var t=_t.call(e,Rt),r=e[Rt];try{e[Rt]=void 0;var n=!0}catch(e){}var o=St.call(e);return n&&(t?e[Rt]=r:delete e[Rt]),o},Ct=Object.prototype.toString;var Ot=function(e){return Ct.call(e)},Pt=bt?bt.toStringTag:void 0;var Dt=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Pt&&Pt in Object(e)?Tt(e):Ot(e)};var xt=function(e,t){return function(r){return e(t(r))}}(Object.getPrototypeOf,Object);var At=function(e){return null!=e&&"object"==typeof e},Nt=Function.prototype,Mt=Object.prototype,Ft=Nt.toString,Lt=Mt.hasOwnProperty,Ut=Ft.call(Object);var kt=function(e){if(!At(e)||"[object Object]"!=Dt(e))return!1;var t=xt(e);if(null===t)return!0;var r=Lt.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Ft.call(r)==Ut},jt=a(7288),Vt="@@redux/INIT";function Wt(e,t,r){var n;if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error("Expected the enhancer to be a function.");return r(Wt)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var o=e,a=t,i=[],s=i,c=!1;function l(){s===i&&(s=i.slice())}function u(){return a}function d(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return l(),s.push(e),function(){if(t){t=!1,l();var r=s.indexOf(e);s.splice(r,1)}}}function p(e){if(!kt(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(c)throw new Error("Reducers may not dispatch actions.");try{c=!0,a=o(a,e)}finally{c=!1}for(var t=i=s,r=0;r<t.length;r++){(0,t[r])()}return e}return p({type:Vt}),(n={dispatch:p,subscribe:d,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");o=e,p({type:Vt})}})[jt.Z]=function(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");function r(){e.next&&e.next(u())}return r(),{unsubscribe:t(r)}}})[jt.Z]=function(){return this},e},n}function Gt(e,t){var r=t&&t.type;return"Given action "+(r&&'"'+r.toString()+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function Bt(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};const zt=null,$t=ze,Ht=null,Xt=null,Yt=null,Jt=[],Kt=12,Zt=!1;var Qt="SET_CURRENT_RECORD",er="UPDATE_FIELDS",tr="REFRESH_CURRENT_RECORD",rr="REFRESH_CURRENT_VIEW",nr="INCREMENT_NUM_PAGES_TO_SHOW",or="SET_DEFAULT_RECORD",ar="GO_TO_INDEX",ir="GO_TO_NEXT_PAGE",sr="GO_TO_PREVIOUS_PAGE",cr="LOAD_PAGE",lr="GET_RECORD_BY_INDEX_RESULT",ur="CURRENT_VIEW_UPDATED",dr="REVERT_CHANGES",pr="RECORD_REVERTED",fr="SAVE_RECORD",hr="SAVE_RECORD_RESULT",gr="REMOVE_CURRENT_RECORD",mr="REMOVE_CURRENT_RECORD_RESULT",yr="NEW_RECORD",vr="NEW_RECORD_RESULT",wr="REFRESH",Ir="SET_USER_INPUT_OPTION_VALUES";const br={INIT:"INIT",SET_PAGINATION_DATA:"SET_PAGINATION_DATA"};var Er=br,_r=e=>{let{controllerConfig:t={},connections:r=[],isScoped:n=!1,datasetType:o}=e;return{type:br.INIT,datasetConfig:t.dataset||{},connections:r,isScoped:n,datasetType:o}},Sr=e=>({type:br.SET_PAGINATION_DATA,paginationData:e}),Rr="SET_FILTER",Tr="SET_SORT",Cr="SET_IS_DATASET_READY",Or="SET_FIXED_FILTER_ITEM";const Pr=e=>null==e?void 0:e.readWriteType;var Dr=e=>null==e?void 0:e.pageSize,xr=Pr;const Ar=e=>{let{error:t,payload:r}=e;return t?Ye.Result.Error(r):Ye.Result.Ok(r)},Nr={currentRecord:{index:void 0,data:void 0,fieldsToUpdate:void 0,updateSource:void 0},lastSavedRecord:{index:void 0,data:void 0},desiredIndex:void 0,refreshCurrentRecord:!1,removeCurrentRecord:!1,newRecordIndex:null,refreshCurrentView:!1,refreshController:!1,setFilterCalled:!1,revertChanges:!1,saveRecord:!1,defaultRecord:void 0,isForm:void 0,page:{numPagesToShow:1,offset:0,size:Kt},schema:void 0,userFilterInitialData:null,isApplyUserInputFiltersActionBindingPresent:!1},Mr=e=>((e,t)=>(0,Xe.inRange)(e,jr(t).offset,jr(t).offset+jr(t).size))(Vr(e),e),Fr=e=>e.some((e=>"applyUserInputFilters"===(0,Xe.get)(e,"config.events.onClick.action"))),Lr=(e,t,r,n)=>{const o={...e,currentRecord:{index:t,data:r,updateSource:n},desiredIndex:t,refreshCurrentRecord:!1,refreshController:!1};return Mr(o)?o:{...o,page:{...o.page,offset:Math.floor(o.currentRecord.index/o.page.size)*o.page.size,numPagesToShow:1}}},Ur=e=>e.page.size,kr=e=>e.currentRecord.data,jr=e=>e.page,Vr=e=>e.currentRecord.index;var Wr={reducer:function(e,t){switch(void 0===e&&(e=Nr),t.type){case Qt:{const{recordIndex:r,record:n,updateSource:o}=t;return Lr(e,r,n,o)}case yr:return{...e,newRecordIndex:t.atIndex};case vr:return Ar(t).fold((()=>({...e,newRecordIndex:null})),(t=>({...Lr(e,e.newRecordIndex,t),newRecordIndex:null})));case er:{const{fieldsToUpdate:r,updateSource:n}=t;return{...e,currentRecord:{...e.currentRecord,fieldsToUpdate:r,updateSource:n}}}case ar:return{...e,desiredIndex:t.index};case lr:return Ar(t).fold((()=>({...e,desiredIndex:e.currentRecord.index,refreshCurrentRecord:!1,refreshController:!1})),(t=>t.matchWith({Record:t=>{let{index:r,record:n}=t;return Lr(e,r,n)},InvalidIndex:()=>({...e,desiredIndex:e.currentRecord.index,refreshCurrentRecord:!1}),NoRecord:()=>Lr(e,null,null)})));case tr:return{...e,refreshCurrentRecord:!0};case gr:return{...e,removeCurrentRecord:!0};case mr:return Ar(t).fold((()=>({...e,removeCurrentRecord:!1})),(()=>({...e,removeCurrentRecord:!1,refreshCurrentRecord:!0})));case rr:return{...e,refreshCurrentView:!0};case ur:return{...e,refreshCurrentView:!1};case dr:return{...e,revertChanges:!0};case pr:return{...e,revertChanges:!1};case or:{const{record:r}=t;return{...e,defaultRecord:r}}case Er.INIT:{const{datasetConfig:r,connections:n}=t,o=Dr(r),a=xr(r);return{...e,isForm:vt(a,n),page:{...e.page,size:o||e.page.size},isApplyUserInputFiltersActionBindingPresent:Fr(n)}}case Er.SET_PAGINATION_DATA:{const r={...e,page:{...e.page,...t.paginationData}};return Mr(r)?r:{...r,desiredIndex:r.page.offset}}case ir:{const t=jr(e),r=Ur(e),n=t.offset+r,o={...e,page:{...e.page,numPagesToShow:1,offset:n}};return Mr(o)?o:{...o,desiredIndex:o.page.offset}}case sr:{const t=jr(e),r=Math.max(0,t.offset-t.size),n={...e,page:{...e.page,numPagesToShow:1,offset:r}};return Mr(n)?n:{...n,desiredIndex:n.page.offset}}case cr:{const{size:r}=jr(e),n={...e,page:{...e.page,numPagesToShow:1,offset:r*(t.pageNumber-1)}};return Mr(n)?n:{...n,desiredIndex:n.page.offset}}case nr:return{...e,page:{...e.page,numPagesToShow:e.page.numPagesToShow+1}};case fr:return{...e,saveRecord:!0,lastSavedRecord:{index:void 0,data:void 0}};case hr:return Ar(t).fold((()=>({...e,saveRecord:!1})),(t=>({...e,saveRecord:!1,lastSavedRecord:{index:e.currentRecord.index,data:t}})));case Rr:return{...e,setFilterCalled:!0,refreshController:!0};case Tr:case wr:return{...e,refreshController:!0};case Ir:return{...e,userFilterInitialData:t.userFilterInitialData};default:return e}},getPaginationData:jr,hasCurrentRecord:e=>!!kr(e),selectDefaultDraft:e=>({...e.defaultRecord}),selectCurrentRecord:kr,selectCurrentRecordIndex:Vr,selectDesiredRecordIndex:e=>e.desiredIndex,selectFieldsToUpdate:e=>e.currentRecord.fieldsToUpdate,selectLastSavedRecord:e=>e.lastSavedRecord.data,selectLastSavedRecordIndex:e=>e.lastSavedRecord.index,selectRefreshCurrentRecord:e=>e.refreshCurrentRecord,selectRemoveCurrentRecord:e=>e.removeCurrentRecord,selectRefreshController:e=>e.refreshController,selectSetFilterCalled:e=>e.setFilterCalled,selectRefreshCurrentView:e=>e.refreshCurrentView,selectRevertChanges:e=>e.revertChanges,selectSaveRecord:e=>e.saveRecord,selectUpdateSource:e=>e.currentRecord.updateSource,selectNewRecordIndex:e=>e.newRecordIndex,isDuringSave:e=>e.saveRecord,isForm:e=>e.isForm,getUserFilterInitialData:e=>e.userFilterInitialData,selectIsApplyUserInputFiltersActionBindingPresent:e=>e.isApplyUserInputFiltersActionBindingPresent};const Gr="dataset",Br="router_dataset",{WRITE:qr}=e,{ROUTER_DATASET:zr}=r,$r=["collectionName","readWriteType","includes","cursor"],Hr=["filter","sort"],Xr=e=>(0,Xe.pick)(e,$r),Yr=e=>(0,Xe.pick)(e,Hr),Jr=e=>{let{datasetConfig:t,connections:r,isScoped:n,datasetType:o}=e;const a=o===zr,i=r.some((e=>{let{role:t}=e;return t===ee})),s=n,c=!n,l=t.readWriteType===qr;return{datasetIsRouter:a,datasetIsMaster:i,datasetIsVirtual:s,datasetIsReal:c,datasetIsDeferred:Boolean(t.deferred)&&!(s||i||a||l),dynamicPageNavComponentsShouldBeLinked:a&&c,userFilterConnectionProps:r.filter((e=>{let{role:t}=e;return Ce.includes(t)})).map((e=>{let{config:{userInputFilter:t},role:r}=e;return{...t,role:r}}))}},Kr=(e,t)=>({...e,transientData:{...e.transientData,...t}}),Zr={canonicalData:Xr(t),canonicalCalculatedData:{},transientData:{isDatasetReady:!1,...Yr(t)}};var Qr={reducer:function(e,t){switch(void 0===e&&(e=Zr),t.type){case Er.INIT:{const{datasetConfig:r,connections:n,isScoped:o,datasetType:a}=t;return{...e,canonicalData:{...e.canonicalData,...Xr(t.datasetConfig)},canonicalCalculatedData:Jr({datasetConfig:r,connections:n,isScoped:o,datasetType:a}),transientData:{...e.transientData,...Yr(t.datasetConfig)}}}case Rr:{const{filter:r}=t;return Kr(e,{filter:r})}case Tr:{const{sort:r}=t;return Kr(e,{sort:r})}case Cr:{const{isDatasetReady:r}=t;return Kr(e,{isDatasetReady:r})}case Or:{const{fixedFilterItem:r}=t;return Kr(e,{fixedFilterItem:r})}default:return e}},isWriteOnly:e=>(0,Xe.get)(e,["canonicalData","readWriteType"])===$e,isReadOnly:e=>(0,Xe.get)(e,["canonicalData","readWriteType"])===ze,getReadWriteMode:e=>(0,Xe.get)(e,["canonicalData","readWriteType"]),isDatasetReady:e=>(0,Xe.get)(e,["transientData","isDatasetReady"]),isDatasetConfigured:e=>!!(0,Xe.get)(e,["canonicalData","collectionName"]),isCursorPagingRequired:e=>!!(0,Xe.get)(e,["canonicalData","cursor"]),isDatasetRouter:e=>{let{canonicalCalculatedData:{datasetIsRouter:t}}=e;return t},isDatasetMaster:e=>{let{canonicalCalculatedData:{datasetIsMaster:t}}=e;return t},isDatasetVirtual:e=>{let{canonicalCalculatedData:{datasetIsVirtual:t}}=e;return t},isDatasetReal:e=>{let{canonicalCalculatedData:{datasetIsReal:t}}=e;return t},isDatasetDeferred:e=>{let{canonicalCalculatedData:{datasetIsDeferred:t}}=e;return t},shouldLinkDynamicPageNavComponents:e=>{let{canonicalCalculatedData:{dynamicPageNavComponentsShouldBeLinked:t}}=e;return t},getUserFilterConnectionProps:e=>{let{canonicalCalculatedData:{userFilterConnectionProps:t}}=e;return t},getFixedFilterItem:e=>(0,Xe.get)(e,["transientData","fixedFilterItem"]),getFilter:e=>(0,Xe.get)(e,["transientData","filter"]),getSort:e=>(0,Xe.get)(e,["transientData","sort"]),getIncludes:e=>(0,Xe.get)(e,["canonicalData","includes"])||[],getCollectionName:e=>(0,Xe.get)(e,["canonicalData","collectionName"])},en="NEXT_DYNAMIC_PAGE_URL_RESULT",tn="PREVIOUS_DYNAMIC_PAGE_URL_RESULT",rn="INITIALIZE";const nn=(0,Ye.union)("DynamicPageUrlLoadState",{Empty(){},Loading(){},Loaded:e=>{if(!e)throw new Error("url must exist");return{url:e}}},{hasUrl:e=>()=>e.matchWith({Empty:()=>!1,Loading:()=>!1,Loaded:()=>!0}),shouldLoadUrl:e=>()=>e.matchWith({Empty:()=>!1,Loading:()=>!0,Loaded:()=>!1})});nn.fromUrl=e=>e?nn.Loaded(e):nn.Empty();var on=nn;const{fromUrl:an}=nn,sn={nextDynamicPageUrl:on.Empty(),previousDynamicPageUrl:on.Empty()},cn=e=>{const t=(e=>{const t=e.filter((e=>!!(0,Xe.get)(e,"config.events.onClick.action")));return new Set(t.map((e=>(0,Xe.get)(e,"config.events.onClick.action"))))})(e),r=e=>e?on.Loading():on.Empty();return{nextDynamicPageUrl:r(t.has("nextDynamicPage")),previousDynamicPageUrl:r(t.has("previousDynamicPage"))}};var ln={reducer:function(e,t){switch(void 0===e&&(e=sn),t.type){case rn:return{...e,...cn(t.connections)};case en:return{...e,nextDynamicPageUrl:on.fromUrl(t.payload)};case tn:return{...e,previousDynamicPageUrl:on.fromUrl(t.payload)};default:return e}},selectNextDynamicPageUrl:e=>e.nextDynamicPageUrl,selectPreviousDynamicPageUrl:e=>e.previousDynamicPageUrl},un=function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var o=t[n];0,"function"==typeof e[o]&&(r[o]=e[o])}var a=Object.keys(r),i=void 0;try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if(void 0===r(void 0,{type:Vt}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===r(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+Vt+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(r)}catch(e){i=e}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(i)throw i;for(var n=!1,o={},s=0;s<a.length;s++){var c=a[s],l=r[c],u=e[c],d=l(u,t);if(void 0===d){var p=Gt(c,t);throw new Error(p)}o[c]=d,n=n||d!==u}return n?o:e}}({records:Wr.reducer,config:Qr.reducer,dynamicPages:ln.reducer});const dn=e=>Qr.getCollectionName(e.config),pn=e=>Qr.getFilter(e.config),fn=e=>Qr.getSort(e.config),hn=e=>Wr.getPaginationData(e.records),gn=e=>Qr.getReadWriteMode(e.config),mn=e=>Qr.isDatasetConfigured(e.config),yn=e=>Qr.isDatasetReady(e.config),vn=e=>Qr.isReadOnly(e.config),wn=e=>Qr.isWriteOnly(e.config),In=e=>(e=>Wr.hasCurrentRecord(e.records))(e)&&!vn(e),bn=e=>Qr.isDatasetRouter(e.config),En=e=>Qr.isDatasetMaster(e.config),_n=e=>Qr.isDatasetVirtual(e.config),Sn=e=>Qr.isDatasetReal(e.config),Rn=e=>Qr.isDatasetDeferred(e.config),Tn=e=>Qr.shouldLinkDynamicPageNavComponents(e.config),Cn=e=>Wr.selectCurrentRecord(e.records),On=e=>Wr.selectCurrentRecordIndex(e.records),Pn=e=>Wr.selectDefaultDraft(e.records),Dn=e=>Wr.selectDesiredRecordIndex(e.records),xn=e=>Wr.selectFieldsToUpdate(e.records),An=e=>Wr.selectUpdateSource(e.records),Nn=e=>Wr.selectNewRecordIndex(e.records),Mn=e=>ln.selectNextDynamicPageUrl(e.dynamicPages),Fn=e=>ln.selectPreviousDynamicPageUrl(e.dynamicPages),Ln=e=>Wr.selectRefreshController(e.records),Un=e=>Wr.selectSetFilterCalled(e.records),kn=e=>Wr.selectRefreshCurrentRecord(e.records),jn=e=>Wr.selectRefreshCurrentView(e.records),Vn=e=>Wr.selectRemoveCurrentRecord(e.records),Wn=e=>Wr.selectRevertChanges(e.records),Gn=e=>Wr.selectSaveRecord(e.records),Bn=e=>Wr.getUserFilterInitialData(e.records),{READ_WRITE:qn,READ:zn}=e;function $n(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var Hn=new WeakMap,Xn=new WeakMap;class Yn{constructor(e,t){$n(this,Hn,{writable:!0,value:void 0}),$n(this,Xn,{writable:!0,value:new X([[Ne,e=>{let{mode:t,env:r}=e;return t.csr&&!r.dev}],[Ge,e=>{let{mode:t,env:r}=e;return t.verbose&&r.preview}]])}),u()(this,Hn,e),this._listenToUnhandledErrors(t)}log(e){if(this._shouldLogErrorBi(e)&&c()(this,Hn).log(e,new Me(e.cause||e)),this._shouldLog(e))return c()(this,Hn).log(e)}logError(e,t,r){this.log(e instanceof P?e:new D(t,{cause:e,...r}))}_shouldLog(e){return(c()(this,Xn).find(((t,r)=>e instanceof r))||(()=>!0))(j.platform.settings)}_shouldLogErrorBi(e){return e instanceof P&&!(e instanceof x)&&c()(this,Xn).get(Ne)(j.platform.settings)}_listenToUnhandledErrors(e){e.addEventListener("unhandledrejection",(e=>{e.reason instanceof P&&(e.preventDefault(),c()(this,Hn).log(new F({cause:e.reason})))}))}}const Jn=e=>(t,r)=>$(t,(t=>e.log(new r({cause:t})))),Kn=e=>(t,r)=>$((function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];const i=t(...o);return e.log(new r({data:{args:o,result:i}})),i}),(t=>{throw e.log(new r({data:{exception:t},level:"error"})),t})),Zn=e=>(t,r)=>function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];if(r.startsWith("on"))return e.log(new Ge(Ge.types.DS_API.REGISTERED,{methodName:r})),t(...o);if(e.log(new Ge(Ge.types.DS_API.CALLED,{methodName:r,args:o})),De.has(r)){const t=De.get(r);e.log(new Ge(Ge.types.DS_API.DEPRECATED,{methodName:r,replacementMethodName:t}))}return new H(t(...o)).then((t=>(e.log(new Ge(Ge.types.DS_API.SUCCED,{methodName:r,result:t})),t)))};class Qn{constructor(e){let{id:t,collectionId:r,datasetId:n,datasetType:o,datasetMode:a,numberOfResults:i,filteredBy:s,componentType:c,fieldType:l}=e;const{platform:{location:{pageId:u,pageUrl:d},settings:{env:p}}}=j;return new Ne({id:t,collectionId:r,datasetId:n,datasetType:o,datasetMode:a,viewMode:p.name,pageId:u,pageUrl:d,numberOfResults:i,filteredBy:s,componentType:c,fieldType:l})}}var eo=a(5882);class to{constructor(e){let{message:t,code:r}=e;const n=new Error(t);return n.code=r,n}}class ro{constructor(e){let{getRequestParams:t,httpClient:r}=e;this.getRequestParams=t,this.httpClient=r}async _makeRequestTo(e,t){const{instance:r,gridAppId:n}=this.getRequestParams();return(await this.httpClient.post("/_serverless/data-binding-server/"+e,t,{params:{gridAppId:n},headers:{Authorization:r,"Content-Type":"application/json"}})).data}async fetchBulkData(e){const{recordsByCollectionId:t,recordsInfoByDataset:r}=await this._makeRequestTo("fetch-initial-data",e);return{recordsInfoByDataset:r.reduce(((e,t)=>{let{itemIds:r=[],totalCount:n=0,error:o}=t;return[...e,{itemIds:r,totalCount:n,error:o?new to(o):void 0}]}),[]),recordsByCollectionId:Object.entries(t).reduce(((e,t)=>{let[r,n]=t;return{...e,[r]:Object.entries(n).reduce(((e,t)=>{let[r,n]=t;return{...e,[r]:(0,eo.PL)(n)}}),{})}}),{})}}async fetchData(e){const{items:t,...r}=await this._makeRequestTo("fetch-data",e);return{...r,items:t.map((e=>(0,eo.PL)(e)))}}async remove(e){return this._makeRequestTo("remove",e)}async save(e){const{item:t}=await this._makeRequestTo("save",e);return(0,eo.PL)(t)}}const no=".",oo=e=>e.split(no),ao=e=>(0,Xe.isPlainObject)(e)&&(0,Xe.has)(e,"_id"),io=(e,t)=>e!==t&&ao(e)&&!ao(t)?e:t,so=function(e,t){void 0===t&&(t={});for(const r of e){const e=t[r._id];t[r._id]=(0,Xe.mergeWith)(e,r,io)}return t},co=(e,t)=>{const r=t.flatMap((e=>["fields",e])).concat("type");return(0,Xe.get)(e,r)},lo=(e,t)=>r=>{const n=oo(r);if(((e,t)=>t.length>=2&&co(e,[t[0]])===g.FieldType.reference)(e,n)){const[r,...o]=n,a=e&&e.fields[r]?e.fields[r].referencedCollection:null,i=t&&a?t[a]:null;return co(i,o)}return co(e,n)},uo=(e,t)=>null!=t&&null!=t.fields[e]?t.fields[e].referencedCollection:null,po=e=>null!=e?e.displayField:null,fo=e=>null!=e?e.maxPageSize:void 0;function ho(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var go=new WeakMap,mo=new WeakMap;class yo{constructor(e){let{wixData:t,wixDataSchemas:r}=e;ho(this,go,{writable:!0,value:void 0}),ho(this,mo,{writable:!0,value:void 0}),u()(this,go,vo.reduce(((e,r)=>(e[r]=function(){const e=t[r](...arguments);return e.catch instanceof Function?e.catch((e=>{throw new So(e)})):e},e)),{...t})),u()(this,mo,r)}async fetchBulkData(e){const t=await Promise.all(e.map((e=>{let{collectionId:t,filter:r,sort:n,offset:o,cursor:a,length:i,includes:s,uniqueFieldValues:c}=e;return this.fetchData({collectionId:t,filter:r,sort:n,offset:o,cursor:a,length:i,includes:s,uniqueFieldValues:c}).catch((e=>({error:e})))})));return((e,t)=>t.reduce(((t,r,n)=>{let{items:o,nextCursor:a,totalCount:i,uniqueFieldValues:s,error:c}=r;if(c)return t.recordInfosInDatasetOrder.push({error:c}),t;t.recordInfosInDatasetOrder.push({itemIds:o.map((e=>{let{_id:t}=e;return t})),totalCount:i,nextCursor:a});const l=e[n].collectionId,u=t.recordsByCollectionId[l];return t.recordsByCollectionId[l]=so(o,u),t.uniqueFieldValuesByCollection[l]={...t.uniqueFieldValuesByCollection[l],...s},t}),{recordInfosInDatasetOrder:[],recordsByCollectionId:{},uniqueFieldValuesByCollection:{}}))(e,t)}async fetchData(e){let{collectionId:t,filter:r,sort:n,offset:o=0,includes:a,cursor:i,length:s,uniqueFieldValues:l}=e;const u=i?c()(this,go).fetch(t,i,s):(()=>{let e=c()(this,go).query(t).setFilterModel(r).setSortModel(n).skip(o).limit(s);return null==a||a.forEach((t=>{e=e.include(t)})),e.find()})(),d=l.length>0?this._fetchUniqueValues({collectionId:t,fieldKeys:l}):Promise.resolve({}),[p,f]=await Promise.all([u,d]),{items:h,totalCount:g}=p;let m;try{m=p.nextCursor}catch(e){}return{items:h,nextCursor:m,totalCount:g||0,uniqueFieldValues:f}}async fetchUserFilterInitialData(e){var t,r;let{filter:n,sort:o,userFilterConnectionProps:a,schema:i}=e;const s=null==(t=i.allowedOperations)?void 0:t.includes("distinct"),l=null==(r=i.allowedOperations)?void 0:r.includes("aggregate"),u=[Te],d=(0,Xe.uniqBy)(a.filter((e=>{let{role:t}=e;return u.includes(t)})),"fieldName"),p=(0,Xe.uniqWith)(a.filter((e=>{let{role:t}=e;return Pe.includes(t)})),((e,t)=>e.fieldName===t.fieldName));return Promise.all([...d.map((async e=>{var t,r;let{fieldName:o,role:a}=e;const s=null==(t=null==(r=i.fields[o])?void 0:r.sortable)||t,u=c()(this,go).filter().setFilterModel(n);if(l){const{items:[{min:e,max:t}]}=await c()(this,go).aggregate(i.id).filter(u).max(o,"max").min(o,"min").run();return{fieldName:o,role:a,min:e,max:t}}if(s){const e=c()(this,go).query(i.id).setFilterModel(n).limit(1),t=c()(this,go).sort().ascending(o).getSortModel(),r=c()(this,go).sort().descending(o).getSortModel(),[{items:s},{items:l}]=await Promise.all([e.setSortModel(t).find(),e.setSortModel(r).find()]),u=s.map((e=>e[o]))[0],d=l.map((e=>e[o]))[0];return{fieldName:o,role:a,min:u,max:d}}return{fieldName:o,role:a,min:void 0,max:void 0}})),...p.map((async e=>{let{fieldName:t,role:r}=e;const a=(e=>{var t,r,n;let{wixData:o,schema:a,sort:i,fieldName:s}=e;const c=null==(t=null==(r=a.fields[s])?void 0:r.sortable)||t,l=a.defaultSort?{[a.defaultSort.fieldName]:a.defaultSort.direction}:null,u=(null==i?void 0:i.length)>0,d=!((null==i?void 0:i.find((e=>e[s])))||(null==a||null==(n=a.defaultSort)?void 0:n.fieldName)===s)&&c,p=o.sort().ascending(s).getSortModel();return u?d?[...i,...p]:i:l?d?[l,...p]:l:c?p:null})({wixData:c()(this,go),schema:i,sort:o,fieldName:t}),l=c()(this,go).query(i.id).setFilterModel(n).setSortModel(a);if(s){const e=fo(i)||1e3,{items:n}=await l.limit(e).distinct(t);return{fieldName:t,role:r,options:n}}{const e=fo(i)||100,{items:n}=await l.limit(e).find(),o=n.map((e=>e[t]));return{fieldName:t,role:r,options:(0,Xe.uniq)(o)}}}))])}async remove(e){let{collectionId:t,recordId:r}=e;return c()(this,go).remove(t,r)}async save(e){let{collectionId:t,record:r,includeReferences:n}=e;return c()(this,go).save(t,r,{includeReferences:n})}async getSibling(e){let{collectionName:t,filter:r,sort:n,fieldValues:o,sortFields:a,directionTowardSibling:i}=e;const s=c()(this,go).query(t).setFilterModel(r),{items:[l]}=await wo({sort:n,sortFields:a,fieldValues:o,baseQuery:s,directionTowardSibling:i}).find();return l}fetchSchemas(e){return c()(this,mo).bulkGet(e,{referencedCollectionsDepth:1})}createSimpleFilter(e,t){return c()(this,go).filter().eq(e,t).getFilterModel()}async _fetchUniqueValues(e){let{collectionId:t,fieldKeys:r}=e;return(await Promise.all(r.map((e=>c()(this,go).query(t).distinct(e))))).reduce(((e,t,n)=>{let{_items:o}=t;return e[r[n]]=o,e}),{})}}const vo=["save","remove","find","sort","filter","query","fetch","aggregate"],wo=e=>{let{sort:t,sortFields:r,directionTowardSibling:n,fieldValues:o,baseQuery:a}=e;return Io({sort:t,sortFields:r,directionTowardSibling:n,fieldValues:o,baseQuery:a})(r.length-1).reduce(((e,t)=>e.or(t)))},Io=e=>{let{baseQuery:t,sortFields:r,sort:n,directionTowardSibling:o,fieldValues:a}=e;return function e(i){if(-1===i)return[];const s=r[i];if(!a[s])return e(i-1);return[(0,Xe.flow)(bo(n,o),Eo(n[s],o,s,a[s]),_o(i,r,a))(t),...e(i-1)]}},bo=(e,t)=>r=>Object.entries(e).reduce(((e,r)=>{let[n,o]=r;return o===t?e.ascending(n):e.descending(n)}),r),Eo=(e,t,r,n)=>o=>e===t?o.gt(r,n):o.lt(r,n),_o=(e,t,r)=>n=>(0,Xe.range)(e).reduce(((e,n)=>e.eq(t[n],r[t[n]])),n).limit(1);class So{constructor(e){if(!e.stack){const{message:t,code:r}="string"==typeof e?{message:e,code:"WD_VALIDATION_FAILED"}:e,n=new Error(t);return n.code=r,n}return e}}function Ro(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var To=new WeakMap;class Co{constructor(e){Ro(this,To,{writable:!0,value:void 0}),u()(this,To,e)}getSchemas(){return c()(this,To).get("schemas")}setSchemas(e){c()(this,To).set("schemas",e)}getDataStore(){return c()(this,To).get("dataStore")}setDataStore(e){c()(this,To).set("dataStore",e)}}function Oo(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var Po=new WeakMap,Do=new WeakMap,xo=new WeakMap,Ao=new WeakMap;class No{constructor(e){if(Oo(this,Po,{writable:!0,value:void 0}),Oo(this,Do,{writable:!0,value:void 0}),Oo(this,xo,{writable:!0,value:void 0}),Oo(this,Ao,{writable:!0,value:void 0}),e&&e.config){u()(this,Po,e.config.dataset.collectionName),u()(this,Do,e.items),u()(this,xo,e.schemas);const t=e.nextCursor||void 0,r=e.totalCount||0,n=(e.items||[]).length;u()(this,Ao,{cursor:t,total:r,loaded:n})}}getSchemas(){return c()(this,xo)}getDataStore(){if(c()(this,Do))return(e=>{let{items:t,datasetSize:r,collectionId:n}=e;return{recordInfosInDatasetOrder:[{itemIds:t.map((e=>{let{_id:t}=e;return t})),datasetSize:r,collectionId:n}],recordsByCollectionId:{[n]:so(t,{})}}})({items:c()(this,Do),datasetSize:c()(this,Ao),collectionId:c()(this,Po)})}getItems(){return c()(this,Do)}}class Mo{constructor(e){let{experiments:t,settings:{env:r}}=e;return{get fes(){return t.enabled("specs.wixDataViewer.EnableFES")},get warmupData(){return r.live},get dropdownOptionsDistinct(){return t.enabled("specs.wixDataViewer.DropdownDistinctOptions")},get newCurrentPageIndex(){return t.enabled("specs.wixDataViewer.NewCurrentPageIndex")},get seoIntegration(){return t.enabled("specs.wixDataViewer.SeoIntegration")},get linkTarget(){return t.enabled("specs.wixDataClient.LinkTarget")}}}}var Fo=a(101),Lo=a(8590);function Uo(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}const{USER_SCOPE:ko,APPLICATION_SCOPE:jo,SERVER_SCOPE:Vo}=P.scopes,{DBSMViewer:{dsn:Wo},UserErrors:{dsn:Go},WixData:{dsn:Bo}}=Fo,qo={[jo]:Wo,[ko]:Go,[Vo]:Bo};let zo=function(e,t){return r=>this.mode.dev?(e===Error&&(this.console.error(r),r.cause&&this.console.error("Caused by:",r.cause)),null==r.run?void 0:r.run()):t(r)};var $o=new WeakMap,Ho=new WeakMap,Xo=new WeakMap,Yo=new WeakMap,Jo=new WeakMap,Ko=new WeakMap;class Zo{constructor(e){let{fedops:t,bi:r,monitor:n,verbose:o,console:a,global:i,settings:s}=e;Uo(this,$o,{writable:!0,value:void 0}),Uo(this,Ho,{writable:!0,value:void 0}),Uo(this,Xo,{writable:!0,value:void 0}),Uo(this,Yo,{writable:!0,value:void 0}),Uo(this,Jo,{writable:!0,value:void 0}),Uo(this,Ko,{writable:!0,value:void 0});const c=a.factory();zo=zo.bind({mode:s.mode,console:c}),u()(this,$o,this._createEventToHandler()),u()(this,Ho,this._createFedopsLogger(t)),u()(this,Xo,this._createBiLoggers({bi:r,settings:s})),u()(this,Yo,this._setupMonitor({monitor:n,global:i,settings:s})),u()(this,Jo,o.factory()),u()(this,Ko,c)}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1)return t.map((e=>this.log(e)));const[n]=t,[,o]=Array.from(c()(this,$o)).find((e=>{let[t]=e;return t.prototype.isPrototypeOf(n)}))||[];return o?o(n):c()(this,Ko).error("Oj-vej! This event is not supported by logger",n)}_createEventToHandler(){return new Map([[Error,zo(Error,(e=>{if(e instanceof F)c()(this,Ko).warn("You have unhandled error in async operation. Consider catching it and handling accordingly.\n",e.cause);else{const{scope:t,cause:r,options:{extra:n,...o}={}}=e;e instanceof x&&(c()(this,Ko).error(e),r&&c()(this,Ko).error("Caused by:",r)),c()(this,Yo)[t].captureException(e,{zone:t,extra:{cause:r,...n},...o})}}))],[Ne,zo(Ne,(e=>{let{event:t,type:r}=e;return r===Ne.types.ERROR?c()(this,Xo).errorLogger.log(t):c()(this,Xo).logger.log(t)}))],[ke,zo(ke,(e=>{let{name:t,params:r,run:n,onStart:o,onEnd:a}=e;return o((()=>c()(this,Ho).interactionStarted(t,r))),a((()=>c()(this,Ho).interactionEnded(t,r))),n()}))],[je,zo(je,(e=>{let{event:t}=e;return c()(this,Yo)[jo].captureBreadcrumb(t)}))],[Ge,e=>{let{messages:t}=e;return c()(this,Jo).log(...t)}],[Be,e=>{let{message:t,level:r}=e;return c()(this,Ko)[r](t)}]])}_createFedopsLogger(e){let{factory:t,hooks:{start:r,end:n}}=e;return t.getLoggerForWidget({appId:"databinding",appName:"databinding",startHook:r,endHook:n})}_createBiLoggers(e){let{bi:{factory:t},settings:{env:r}}=e;return{logger:t().logger({endpoint:r.editor?"platform":"platform-viewer"}),errorLogger:t().logger({endpoint:"trg"})}}_setupMonitor(e){let{monitor:{factory:t},global:r,settings:{metaSiteId:n,userId:o}}=e;return Object.entries(qo).reduce(((e,a)=>{let[i,s]=a;const c=t(s);return e[i]=c,(0,Lo.S)({dsn:s,Raven:c,globalScope:r,appName:xe,user:{id:o},params:{tags:{msid:n}}}),e}),{})}}function Qo(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var ea=new WeakMap,ta=new WeakMap,ra=new WeakMap,na=new WeakMap;class oa{constructor(){Qo(this,ea,{writable:!0,value:{}}),Qo(this,ta,{writable:!0,value:{}}),Qo(this,ra,{writable:!0,value:{}}),Qo(this,na,{writable:!0,value:{}})}getData(e){let{datasetId:t,collectionId:r,includes:n}=e;const o=c()(this,ea)[t];return o?{datasetSize:o.datasetSize,items:o.itemIds.map((e=>aa(c()(this,ta)[r][e],this.getSchema(r),n)))}:null}getRecord(e){var t;let{collectionId:r,recordId:n,includes:o}=e;const a=null==(t=c()(this,ta)[r])?void 0:t[n];return a&&aa(a,this.getSchema(r),o)}updateCollectionData(e){let{collectionId:t,data:r}=e;const{[t]:n}=c()(this,ta),{[t]:o}=c()(this,ra),{items:a,uniqueFieldValues:i}=r;c()(this,ta)[t]=ia(a,n),c()(this,ra)[t]=sa(i,o)}getSchema(e){return c()(this,na)[e]}updateStore(e){let{recordsByCollectionId:t={},recordInfosByDatasetId:r={},uniqueFieldValuesByCollection:n={}}=e;u()(this,ea,{...c()(this,ea),...r});for(const[e,r]of Object.entries(t))c()(this,ta)[e]={...c()(this,ta)[e],...r};for(const[e,t]of Object.entries(n))c()(this,ra)[e]={...c()(this,ra)[e],...t}}getStore(){return{recordInfosByDatasetId:c()(this,ea),recordsByCollectionId:c()(this,ta),uniqueFieldValuesByCollection:c()(this,ra)}}hasDataset(e){return Boolean(c()(this,ea)[e])}setUniqueFieldValues(e){let{collectionId:t,fieldKey:r,data:n}=e;c()(this,ra)[t]={...c()(this,ra)[t],[r]:n}}getUniqueFieldValues(e){var t;let{collectionId:r,fieldKey:n}=e;return null==(t=c()(this,ra)[r])?void 0:t[n]}updateSchemas(e){for(const[t,r]of Object.entries(e))c()(this,na)[t]={...c()(this,na)[t],...r}}getSchemas(){return c()(this,na)}}const aa=(e,t,r)=>Object.entries(e).reduce(((e,n)=>{let[o,a]=n;return((e,t)=>{var r,n;return(null==t||null==(r=t.fields)||null==(n=r[e])?void 0:n.type)===g.FieldType.reference})(o,t)&&((e,t)=>!e||!e.includes(t))(r,o)&&Boolean(null==a?void 0:a._id)?e[o]=a._id:e[o]=a,e}),{}),ia=function(e,t){return void 0===t&&(t={}),e.reduce(((e,t)=>{const r=e[t._id];return e[t._id]=r?(0,Xe.mergeWith)(r,t,io):t,e}),t)},sa=function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),{...t,...e}};function ca(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var la=new WeakMap,ua=new WeakMap,da=new WeakMap,pa=new WeakMap,fa=new WeakMap,ha=new WeakMap,ga=new WeakMap;class ma{constructor(){ca(this,la,{writable:!0,value:void 0}),ca(this,ua,{writable:!0,value:void 0}),ca(this,da,{writable:!0,value:void 0}),ca(this,pa,{writable:!0,value:void 0}),ca(this,fa,{writable:!0,value:void 0}),ca(this,ha,{writable:!0,value:void 0}),ca(this,ga,{writable:!0,value:void 0});const{logger:e,dataFetcher:t}=j;u()(this,ua,t),u()(this,la,e),u()(this,da,new oa),u()(this,pa,{}),u()(this,fa,Promise.resolve())}createInitialDataRequest(e){u()(this,pa,e.reduce(((e,t)=>{let{id:r,refresh:n}=t;return n||!c()(this,da).hasDataset(r)?{...e,[r]:new z}:e}),{}));const t=Object.entries(c()(this,pa)).map((e=>{let[,{promise:t}]=e;return t}));u()(this,fa,this._waitForDataFetched(t).then((()=>u()(this,pa,{}))))}async getInitialData(e){let{datasetId:t,collectionId:r,cursorPaging:n,filter:o,sort:a,length:i,includes:s,uniqueFieldValues:l}=e;return c()(this,pa)[t]&&(c()(this,pa)[t].resolve({datasetId:t,collectionId:r,cursorPaging:n,filter:o,sort:a,length:i,includes:s,uniqueFieldValues:l}),await c()(this,fa)),c()(this,da).getData({datasetId:t,collectionId:r,includes:s})||this.getData({datasetId:t,collectionId:r,cursorPaging:n,filter:o,sort:a,offset:0,length:i,includes:s,uniqueFieldValues:l})}async getData(e){const{collectionId:t,cursorPaging:r,offset:n,filter:o,sort:a,includes:i,length:s,datasetSize:l,uniqueFieldValues:u}=e,d=e=>!this.getUniqueFieldValues({collectionId:t,fieldKey:e}),{items:p,totalCount:f,nextCursor:h,uniqueFieldValues:g}=await c()(this,ua).fetchData({collectionId:t,offset:n,filter:o,sort:a,includes:i,cursor:r?null==l?void 0:l.cursor:void 0,length:s,uniqueFieldValues:u.filter((e=>d(e)))}).catch(va("Data fetching failed",{datasetConfig:e}));return await c()(this,ha),c()(this,da).updateCollectionData({collectionId:t,data:{items:p,uniqueFieldValues:g}}),{items:p,datasetSize:{total:f,loaded:((null==l?void 0:l.loaded)||0)+p.length,cursor:h},uniqueFieldValues:g}}async remove(e){let{collectionId:t,recordId:r}=e;return c()(this,ua).remove({collectionId:t,recordId:r}).catch(va("Record removing failed",{collectionId:t,recordId:r}))}async save(e){let{collectionId:t,record:r,includeReferences:n}=e;return c()(this,ua).save({collectionId:t,record:r,includeReferences:n}).catch(va("Record saving failed",{collectionId:t,record:r,includeReferences:n}))}async getSibling(e){return await c()(this,ua).getSibling(e)}async loadSchemas(e){const t=c()(this,da).getSchemas(),r=e.filter((e=>!t[e]));u()(this,ha,r.length?c()(this,ua).fetchSchemas(r).catch(va("Schema fetching failed",{collectionIds:r})):Promise.resolve({}));const n=await c()(this,ha);return c()(this,da).updateSchemas({...t,...n}),c()(this,da).getSchemas()}async setSchemas(e){c()(this,da).updateSchemas(e)}getSchemas(){return c()(this,da).getSchemas()}getRecord(e){let{collectionId:t,recordId:r,includes:n}=e;return c()(this,da).getRecord({collectionId:t,recordId:r,includes:n})}getSchema(e){return c()(this,da).getSchema(e)}hasSchema(e){return Boolean(this.getSchema(e))}getReferencedSchemas(e){const t=this.getSchema(e),r=c()(this,da).getSchemas();return(e=>e?(0,Xe.flow)((e=>(0,Xe.pickBy)(e,(e=>{let{referencedCollection:t}=e;return Boolean(t)}))),(e=>(0,Xe.map)(e,(e=>{let{referencedCollection:t}=e;return t}))),Xe.uniq,(e=>e.filter(Boolean)))(e.fields):[])(t).reduce(((e,t)=>({...e,[t]:r[t]})),{})}setCollectionData(e){let{collectionId:t,data:r}=e;r&&c()(this,da).updateCollectionData({collectionId:t,data:r})}setStore(e){e&&c()(this,da).updateStore(e)}setStaticStore(e){const{recordsByCollectionId:t,recordInfosInDatasetOrder:r,uniqueFieldValuesByCollectionId:n}=e,o=c()(this,ga).find((e=>{let{type:t}=e;return t===Br}));if(o){const{datasetId:e}=o,a={[e]:r[0]};c()(this,da).updateStore({recordsByCollectionId:t,recordInfosByDatasetId:a,uniqueFieldValuesByCollectionId:n})}}getStore(){return c()(this,da).getStore()}setUniqueFieldValues(e){let{collectionId:t,fieldKey:r,data:n}=e;return c()(this,da).setUniqueFieldValues({collectionId:t,fieldKey:r,data:n})}getUniqueFieldValues(e){let{collectionId:t,fieldKey:r}=e;return c()(this,da).getUniqueFieldValues({collectionId:t,fieldKey:r})}createSimpleFilter(e,t){return c()(this,ua).createSimpleFilter(e,t)}setDatasetConfigs(e){u()(this,ga,e)}async _fetchInitialData(e){try{const{recordsByCollectionId:t,recordInfosInDatasetOrder:r,uniqueFieldValuesByCollection:n}=await c()(this,la).log(new ke("dataset/fetchPrimaryInitialData",(()=>c()(this,ua).fetchBulkData(e))));return{recordsByCollectionId:t,recordInfosByDatasetId:r.reduce(((t,r,n)=>{let{itemIds:o=[],error:a,nextCursor:i,totalCount:s}=r;const l=e[n];return a&&c()(this,la).log(new ya("Initial data fetching failed for one of the datasets",{cause:a,extra:{datasetConfig:l}})),t[l.datasetId]={itemIds:o,datasetSize:{total:s,loaded:o.length,cursor:i}},t}),{}),uniqueFieldValuesByCollection:n}}catch(t){throw new D("Initial data fetching failed",{cause:t,extra:{datasetConfigs:e}})}}async _waitForDataFetched(e){if(e.length){const t=await Promise.all(e),r=await this._fetchInitialData(t);await c()(this,ha),c()(this,da).updateStore(r)}}}class ya{constructor(e,t){let{cause:r,...n}=t;return new(N.codes.includes(r.code)?N:M)(e,{...n,cause:r,code:r.code})}}const va=(e,t)=>r=>{throw new ya(e,{cause:r,extra:t})},wa="PRIMARY";var Ia=a(8582),ba=a.n(Ia);const Ea=function(e,t,r){return void 0===r&&(r=[]),e(t)?[{path:(0,Xe.clone)(r),filterExpression:t}]:(n=t,Array.isArray(n)||(0,Xe.isPlainObject)(n)?(0,Xe.flatMap)(t,((t,n)=>Ea(e,t,r.concat(n)))):[]);var n},_a=e=>t=>t.reduce(((e,t)=>{let{path:r,filterExpression:n}=t;return((e,t,r)=>(0,Xe.set)(e,t,r))(e,r,n)}),(0,Xe.cloneDeep)(e)),Sa=(e,t,r)=>{const n=((e,t)=>ba()(Ye.Maybe,t.map((t=>{let{path:r,filterExpression:n}=t;return e(n).map((e=>({path:r,filterExpression:e})))}))))(t,Ea(e,r));return n.map(_a(r))};var Ra=()=>()=>Ye.Maybe.fromNullable(j.platform.user).map((e=>{let{id:t,loggedIn:r}=e;return r?t:null}));var Ta=e=>t=>{let{filterId:r}=t;return Ye.Maybe.fromNullable(e(r)).chain((e=>{let t,{masterDataset:r,fieldName:n}=e;try{t=r.api.getCurrentItem()}catch(e){}return Ye.Maybe.fromNullable(t).map((e=>{const t=e[n];return void 0===t?null:t}))}))};const Ca=e=>Pa(e).chain((e=>{let[t,r]=e;return"$not"===t&&(0,Xe.isArray)(r)?Oa({positive:!1,filterExpression:r[0]}):Ye.Maybe.Nothing()})).orElse((()=>Oa({positive:!0,filterExpression:e}))),Oa=e=>{let{positive:t,filterExpression:r}=e;return Pa(r).chain((e=>{let[r,n]=e;return Pa(n).map((e=>{let[n,o]=e;return{field:r,condition:n,value:o,positive:t}}))}))},Pa=e=>{if(!(0,Xe.isPlainObject)(e))return Ye.Maybe.Nothing();const t=(0,Xe.entries)(e)[0];return Ye.Maybe.fromNullable(t)},{stringArray:Da,number:xa}=g.FieldType;const Aa=(e,t)=>(0,Xe.get)(e,t),Na=e=>{let{previousRecord:t,currentRecord:r,fieldName:n}=e;return!(0,Xe.isEqual)(Aa(t,n),Aa(r,n))},Ma=e=>{const{properties:t,events:r,behaviors:n}=e,o={};return(0,Xe.forEach)(t,((e,t)=>{let{fieldName:r}=e;o[t]=r})),(0,Xe.forEach)(r,((e,t)=>{let{action:r}=e;o[t]=r})),(0,Xe.forEach)(n,(e=>{let{type:t}=e;o.text=t})),o},{mediaGallery:Fa}=g.FieldType,La="datetime",Ua=e=>/^\d{2}:\d{2}:\d{2}\.\d{3}$/.test(e),ka=e=>e instanceof Date&&!isNaN(e),ja=e=>{let{time:t,date:r}=e;const[n,o]=t.split(":");return r.setHours(n),r.setMinutes(o),r.setSeconds(0),r.setMilliseconds(0),r},Va=e=>e.toTimeString().split(" ")[0]+".000",Wa=e=>{const t=new Date(e);return ka(t)?t:(e=>{const t=new Date;return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t})()},Ga=e=>String(e).padStart(2,"0"),Ba=e=>[e.getFullYear(),Ga(e.getMonth()+1),Ga(e.getDate())].join("-");var qa=e=>{let{value:t,formatter:r,fieldType:n,format:o}=e;return o?(e=>{let{value:t,formatter:r,fieldType:n,format:o}=e;if(o.type===La){const e=n===g.FieldType.date,a=e?new Date(t):t;return ka(a)?r?r.formatDateTime(a,o.params.dateFormat,{timeZone:e?"UTC":void 0}):e&&"string"==typeof t?t:"":t}return t})({value:t,formatter:r,fieldType:n,format:o}):t},za=e=>null==e||"function"!=typeof e.toString?"":Array.isArray(e)?e.join(", "):e.toString();const{mediaGallery:$a,address:Ha,date:Xa}=g.FieldType;var Ya=(e,t)=>{let{fieldType:r,role:n,componentIsInput:o,propPath:a}=t;const i=[{converter:e=>{let{formatted:t}=e;return t},condition:e&&r===Ha&&n!==he},{converter:za,condition:!o&&![oe,ne,ye,Ie].includes(n)},{converter:e=>(e=>{let{value:t}=e;const{platform:{utils:{media:r}}}=j,n=r.parseMediaItemUri(t);if(n.error)return t;switch(n.type){case r.types.IMAGE:return r.getScaleToFillImageURL(n.mediaId,n.width,n.height,n.width,n.height,{name:n.title});case r.types.VIDEO:return"https://video.wixstatic.com/video/"+n.mediaId+"/file";case r.types.AUDIO:return"https://static.wixstatic.com/mp3/"+n.mediaId;default:return t}})({value:e}),condition:"link"===a&&n!==ge},{converter:()=>[],condition:!e&&r===$a},{converter:Va,condition:n===me&&ka(e)},{converter:e=>{const t=new Date(e);return null!==e&&ka(t)?t:""===e||null===e?void 0:e},condition:n===ce&&r===Xa}],s=i.reduce(((e,t)=>{let{converter:r,condition:n}=t;return n&&e.push(r),e}),[]);return(0,Xe.flow)(s)(e)},Ja=function(e){var t=function(e){var t=0;if(void 0===e||0===e.length)return t;for(var r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t|=0}return t*=Math.sign(t),t=Math.sqrt(t),t=Math.floor(1e6*(t-Math.floor(t)))}(e);return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e,r){var n=Math.ceil(t/(r+1))%16;return("x"===e?n:3&n|8).toString(16)}))},Ka=function(e){return void 0===e&&(e=""),e?e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-\.]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,""):""};function Za(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Za(Object(r),!0).forEach((function(t){ei(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Za(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ei(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ti=function(e,t){switch(typeof e){case"object":return{type:"wix",data:e};case"string":return{type:"web",url:e,target:t,text:e};default:return{target:"_blank",type:"none"}}},ri=function(e){void 0===e&&(e={});var t={link:e.url};return e.url&&(t.target=e.target),t},ni=function(e){return null!==/^(wix:)?(image|video)(:\/\/)/.exec(e)},oi=function(e){return ni(e)?e.split("/")[3]:e},ai=function(e){try{return ni(e)?e.split("/")[4].split("#").slice(0,-1).join("#"):"_.jpg"}catch(e){return"_.jpg"}},ii=function(e,t){return"wix:image://v1/"+(e||Ka(t.name))+"/"+Ka(t.fileName||t.name)+"#originWidth="+t.width+"&originHeight="+t.height},si=function(e,t){return"wix:video://v1/"+(e||Ka(t.name))+"/"+Ka(t.fileName||t.name)+"#posterUri="+t.posters[0].url+"&posterWidth="+t.width+"&posterHeight="+t.height},ci=function(e){var t={},r=!1;try{var n=/\/\d*_\d*\//.exec(e);if(n&&n[0]&&n[0].length>0){var o=n[0].replace(/\//g,"").split("_").map((function(e){return Number(e)})),a=o[0],i=o[1];a>0&&i>0&&(r=!0,t={originWidth:a,originHeight:i})}}catch(e){r=!1}if(!r)try{var s=/wm_(.*)\//.exec(e);if(s&&s[0]&&s[0].length>0){var c=s[1];c.length>0&&(t.watermark=c)}}catch(e){r=!1}if(!r)try{e.split("#").pop().split("&").map((function(e){return e.split("=")})).forEach((function(e){t[e[0]]=isNaN(Number(e[1]))?String(e[1]):Number(e[1])}))}catch(e){r=!1}return t},li=function(e,t){return void 0===t&&(t=0),function(e){return!!(e.src||e.type&&e.html)}(e)?function(e,t){var r,n,o,a=ci(e.src);"video"===(null==(r=e.type)?void 0:r.toLowerCase())&&(null!=(n=e.src)&&n.includes("youtube")||null!=(o=e.src)&&o.includes("vimeo"))&&(a.originWidth=1920,a.originHeight=1080),a.width=e.width||a.originWidth||a.originalWidth||a.posterWidth||1,a.height=e.height||a.originHeight||a.originalHeight||a.posterHeight||1;var i=e.settings&&e.settings.focalPoint,s=a.watermark,c=e.imageToken||e.token||a.token,l=(e.type||"image").toLowerCase(),u=Qa({itemId:Ka(e.slug)||(Ka(e.title||e.id)||Ja(e.src||e.html||t))+"_"+t,mediaUrl:oi(e.src),metaData:Object.assign({type:l,alt:e.alt||"",title:e.title||"",description:e.description||"",name:ai(e.src),fileName:ai(e.src),link:ti(e.link,e.target),width:a.width,height:a.height,sourceName:"private"},i?{focalPoint:i}:{},s?{watermarkStr:s}:{}),orderIndex:t},c&&{token:c});if("text"===l){var d=e.style;u.metaData.height=a.height||500,u.metaData.width=a.width||500*d.layoutRatio,u.metaData.textStyle={width:u.metaData.width,height:u.metaData.height,backgroundColor:d.fillColor},u.metaData.html=u.editorHtml=e.html}if("video"===l){var p={};e.thumbnail&&(p=ci(e.thumbnail));var f=function(e){return null!==/^.*\.(jpeg|jpg|webp|png|jpe)$/.exec(e)}(oi(e.thumbnail))?oi(e.thumbnail):a.posterUri;u.metaData.posters=[{url:f,width:p.width||a.width,height:p.height||a.height}],u.isExternal=0===e.src.indexOf("http"),u.isExternal||ni(e.src)?(u.metaData.source=e.src.indexOf("youtube.com")>0?"youtube":e.src.indexOf("vimeo.com")>0?"vimeo":"wix",u.metaData.videoUrl=e.src):u.metaData.qualities=[{width:a.width,height:a.height,quality:a.height+"p",formats:[ni(e.src)?"wix":e.src.split(/#|\?/)[0].split(".").pop().trim()]}]}return u}(e,t):function(e,t){return{itemId:Ja(t+"_"+(e.uri||e.alt||t)),mediaUrl:e.uri||"",metaData:{height:e.height||1,lastModified:Date.now(),link:ti(e.link,e.target),title:e.title||"",description:e.description||"",alt:e.alt||"",sourceName:"private",tags:[],width:e.width||1},orderIndex:t}}(e,t)},ui=function(e,t){return void 0===e&&(e={}),void 0===t&&(t=!0),t?function(e){void 0===e&&(e={});var t=e.metaData||e.metadata||{},r=ri(t.link)||{},n=Qa({type:t.type||"image",slug:e.itemId},r),o=n.type.toLowerCase();if("text"===o){var a=t.testStyle||{};Object.assign(n,{html:t.html,style:{width:a.width,height:a.height,bgColor:a.backgroundColor}})}else Object.assign(n,{title:t.title,description:t.description,alt:t.alt}),"image"===o?Object.assign(n,Qa(Qa({src:ii(e.mediaUrl,t),settings:Object.assign({},t.focalPoint?{focalPoint:t.focalPoint}:{})},"imageToken"in e&&{imageToken:e.imageToken}),"token"in e&&{token:e.token})):"video"===o&&Object.assign(n,{src:si(e.mediaUrl,t),thumbnail:t.posters[0].url});return n}(e):(n=(r=e).metaData||r.metadata||{},o=ri(n.link)||{},Qa({uri:r.mediaUrl,description:n.description,alt:n.alt,title:n.title,height:n.height,width:n.width},o));var r,n,o};const{mediaGallery:di,documentArray:pi}=g.FieldType;var fi=e=>{let{value:t,currentValue:r=[],fieldType:n}=e;switch(n){case di:return[...r,...t.map((e=>{let{fileUrl:t,url:r}=e;return(e=>{let{uploadedFileUrl:t}=e;const{platform:{utils:{media:r}}}=j,n=r.parseMediaItemUri(t),o=r.createMediaItemUri(n).item,a=li({...n,src:o});return ui(a)})({uploadedFileUrl:t||r})}))];case pi:return[...r,...t.map((e=>{let{fileUrl:t,url:r}=e;return t||r}))];default:return t[0].fileUrl||t[0].url}};const{reference:hi,dateTime:gi,date:mi}=g.FieldType;var yi=e=>{let{value:t,currentValue:r,fieldType:n,fieldName:o,role:a,utils:{referenceFetcher:i}={}}=e;const s=[{converter:e=>i(e,o),condition:n===hi},{converter:e=>((e,t)=>{const r={},n={};if(Ua(e))r.time=e,r.date=new Date;else{const t=Wa(e);r.date=t,r.time=Va(t)}return Ua(t)?n.time=t:n.date=Wa(t),ja({...r,...n})})(r,e),condition:n===gi&&[ce,me,le].includes(a)},{converter:Ba,condition:n===mi&&a===ce},{converter:e=>fi({value:e,currentValue:r,fieldType:n}),condition:a===ue}],c=s.reduce(((e,t)=>{let{converter:r,condition:n}=t;return n&&e.push(r),e}),[]);return(0,Xe.flow)(c)(t)};const vi=e=>{let{value:t,role:r,fieldType:n,propPath:o,componentIsInput:a,format:i,utils:{formatter:s}={}}=e;return(0,Xe.flow)([e=>qa({value:e,formatter:s,fieldType:n,format:i}),e=>Ya(e,{fieldType:n,role:r,componentIsInput:a,propPath:o})])(t)},{Checkbox:wi,Dropdown:Ii}=Ze,bi=e=>e.type===wi?"checked":"value",Ei=e=>{let{component:t,connectionConfig:r,currentRecord:n,previousRecord:o,getFieldType:a,formatter:i,modeIsLivePreview:s,logger:c,PresetVerboseMessage:l}=e;if(!n)return;const{role:u,isInput:d}=t,{properties:p={}}=r,f={};Object.entries(p).forEach((e=>{let[r,l]=e;try{const{fieldName:e,format:c}=l,p=a(e).getOrElse(void 0),h=vi({value:Aa(n,e),role:u,componentIsInput:d,fieldType:p,propPath:r,format:c,utils:{formatter:i}});if(f[r]=h,(e=>{let{previousRecord:t,currentRecord:r,fieldName:n}=e;return(e=>!e)(t)||Na({previousRecord:t,currentRecord:r,fieldName:n})})({currentRecord:n,previousRecord:o,fieldName:e})){if(s&&(e=>void 0===e||""===e||Array.isArray(e)&&0===e.length)(h))return;t.setValue(h,{propPath:r,fieldType:p,binding:l})}}catch(e){c.log(new D("Failed setting "+r,{cause:e}))}})),c.log(new l(Ge.types.COMPONENT.FILLED,{component:t,description:f}))};var _i=e=>{let{getConnectedComponents:t,getFieldType:r}=e;return e=>{const n=t();if(!n)return Ye.Maybe.Nothing();const o=n.filter((e=>{let{role:t}=e;return t===te}));return Ca(e).map((e=>{let{field:t,condition:n,value:a,positive:i}=e;const s=((e,t)=>e.map((e=>e===xa&&"string"==typeof t&&/^[+-]?(?:\d+\.?\d*|\d*\.?\d+)$/.test(t.trim())?Number(t):e===Da&&0===(0,Xe.get)(t,"length",0)?null:t)).getOrElse(t))(r(t),((e,t)=>{const{filterId:r}=e,n=t.find((e=>e.connectionConfig.filters[r]));if(!n)return;const o=bi(n);return n.getValue({propPath:o})})(a,o));if(!s&&0!==s)return{$and:[]};const c={[t]:{[n]:s}};return i?c:{$not:[c]}}))}},Si=a(4479),Ri=a(8031),Ti=a(3878);const Ci=e=>(0,Si.X)(e)||(0,Ri.X)(e)||Pi(e),Oi=e=>{let{valueResolvers:t,getConnectedComponents:r,getFieldType:n,wasSetFilterCalled:o}=e;return e=>Sa(Ci,(e=>(0,Si.X)(e)?t.currentUser():(0,Ri.X)(e)?t.dataBinding(e):Pi(e)?t.userInput(e):void 0),e).map((e=>{if(o())return e;const t=r().filter((e=>{let{role:t}=e;return Ce.includes(t)})).map((e=>{const{userInputFilter:t}=e.connectionConfig,{prop:r,fieldName:o}=t,a=e.getValue({propPath:r});if([Oe,"",!1].includes(a)||(0,Xe.isEqual)(a,[])||e.role===Te&&(0,Xe.isEqual)(a,e.getBounds()))return null;const i=(e=>{let{value:t,fieldType:r}=e;return r===g.FieldType.number?Array.isArray(t)?t.map(Number):Number(t):t})({value:a,fieldType:n(o).getOrElse(null)});return{[o]:e.role===Te?{$gte:i[0],$lte:i[1]}:Array.isArray(i)?{$hasSome:i}:i}})).filter(Boolean);return 0===t.length?e:{$and:[e].filter(Boolean).concat(t)}}))},Pi=e=>Ca(e).map((e=>{let{value:t}=e;return(0,Ti.X)(t)})).getOrElse(!1),Di=e=>Ea(Ri.X,e),xi=e=>!(0,Xe.isEmpty)(Ea(Ti.X,e)),Ai=e=>xi(e)||(e=>!(0,Xe.isEmpty)(Ea(Si.X,e)))(e)||(e=>Di(e).length>0)(e),{WRITE:Ni}=e,Mi=[ie],Fi=[ae],Li=(e,t,r)=>{const{readWriteType:n,deferred:o,filter:a,collectionName:i}=e,s=n===Ni,c=r.some((e=>{let{role:t}=e;return t===ee})),l=t===Br,u=Boolean(o)&&!(c||l||s),d=a&&Ai(a),p=(e=>{let{collectionId:t,datasetHasDynamicFilter:r,datasetIsDeferred:n,datasetIsRouter:o,datasetIsWriteOnly:a}=e;return t?r||n||o||a?"REGULAR":wa:"UNCONFIGURED"})({collectionId:i,datasetHasDynamicFilter:d,datasetIsDeferred:u,datasetIsRouter:l,datasetIsWriteOnly:s});return{sequenceType:p,datasetIsWriteOnly:s,datasetIsMaster:c,datasetIsRouter:l,datasetIsDeferred:u,datasetHasDynamicFilter:d}},Ui=e=>{const t=e.reduce(((e,t)=>{var r,n;let{config:o,role:a,compId:i}=t;const s=null==o||null==(r=o.properties)||null==(n=r.value)?void 0:n.fieldName;if(!s)return e;const c=i+"-"+s;return Fi.includes(a)?(e.set(c,null),e):(Mi.includes(a)&&!e.has(c)&&e.set(c,s),e)}),new Map);return(0,Xe.compact)(Array.from(t.values()))};var ki=e=>{const r=(0,Xe.values)({DATASET:Gr,ROUTER_DATASET:Br});return e.map((e=>{const{id:n,type:o,collectionId:a,filter:i,sort:s,pageSize:c,readWriteType:l,includes:u,nested:d,deferred:p,connections:f,dataIsInvalidated:h,updatedCompIds:g,dynamicPageData:m,cursor:y}=e;r.includes(o)||j.logger.log(new D("type of controller MUST be one of "+r+" but is "+o));const v=(0,Xe.defaults)({collectionName:a,filter:i,sort:s,includes:u,nested:d,pageSize:c,readWriteType:l,cursor:y,deferred:p,uniqueFieldValues:j.features.dropdownOptionsDistinct?Ui(f):[]},t);return{id:n,compId:n,type:o,livePreviewOptions:{shouldFetchData:h,compsIdsToReset:g},connections:f,dynamicPageData:m,config:{dataset:v,datasetStaticConfig:Li(v,o,f)}}}))};const ji=/[^{}]+(?=\})/g,Vi=/\{[^{}]+\}/g,Wi=/[^\dA-Za-z]/g,Gi=e=>e.replace(/(\/{2,})/g,"/").replace(/^\//,""),Bi=Symbol("isPristine"),qi=e=>e._id,zi=e=>({...e,[Bi]:!1}),$i=(e,t)=>({...e,_id:t||C().v4(),[Bi]:!0}),Hi=(e,t)=>e&&t&&e._id===t._id,Xi=e=>(0,Xe.omit)(e,[Bi]),Yi=e=>{let{record:t,draft:r,includes:n,nestedFieldKeys:o,fieldKey:a}=e;return(e=>{let{includes:t,nestedFieldKeys:r,fieldKey:n}=e;const o=null==t?void 0:t.includes(n),a=r.includes(n);return o||a})({includes:n,nestedFieldKeys:o,fieldKey:a})&&(e=>{let{record:t,draft:r,fieldKey:n}=e;return(0,Xe.isPlainObject)(t[n])&&(0,Xe.isPlainObject)(r[n])})({record:t,draft:r,fieldKey:a})};const Ji={chain:e=>t=>e.matchWith({Empty:()=>e,Results:e=>{let{items:r,datasetSize:n,offset:o}=e;return t({items:r,datasetSize:n,offset:o})}}),map:e=>t=>e.matchWith({Empty:()=>e,Results:e=>{let{items:r,datasetSize:n,offset:o}=e;const{items:a=r,datasetSize:i=n,offset:s=o}=t({items:r,datasetSize:n,offset:o});return Ki.Results(a,i,s)}}),filter:e=>t=>e.matchWith({Empty:()=>e,Results:r=>{let{items:n,datasetSize:o,offset:a}=r;return t({items:n,datasetSize:o,offset:a})?e:Ki.Empty()}}),orElse:e=>t=>e.matchWith({Empty:()=>t(),Results:()=>e}),get:e=>()=>e.matchWith({Empty:()=>({items:[],datasetSize:{total:0,loaded:0},offset:0}),Results:e=>e}),of:()=>Zi},Ki=(0,Ye.union)("QueryResults",{Empty:()=>({}),Results:function(e,t,r){return void 0===r&&(r=0),{items:e,datasetSize:t,offset:r}}},Ji);function Zi(e){let{items:t,datasetSize:r,offset:n}=e;return r&&Math.max(r.total,r.loaded)>0&&Array.isArray(t)?Ki.Results(t,r,n):Ki.Empty()}var Qi={Empty:Ki.Empty,Results:Ki.Results,fromWixDataQueryResults:function(e,t){return e?this.of({items:e.items,datasetSize:e.datasetSize,offset:t}):Ki.Empty()},of:Zi};const es=e=>t=>({...t,...e}),ts=(e,t)=>r=>t(e(r))(r),rs=(e,t,r)=>{const n=new Map;return function(){for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];const s=t(a),c=n.get(s);if(c&&r(a,c.args))return c.result;const l=e.apply(this,a);return n.set(s,{args:a,result:l}),l}},ns=e=>es({records:e}),os=e=>t=>{var r,n,o;return{...t,datasetSize:{cursor:null==(r=t.datasetSize)?void 0:r.cursor,total:((null==(n=t.datasetSize)?void 0:n.total)||0)+e,loaded:((null==(o=t.datasetSize)?void 0:o.loaded)||0)+e}}},as=e=>{let{cursor:t,loaded:r,total:n}=e;return e=>({...e,datasetSize:{cursor:t,loaded:r+ls(e),total:n+ls(e)}})},is=e=>({...e,numSeedRecords:e.records.length}),ss=e=>e.matchWith({Empty:()=>as({total:0,loaded:0}),Results:e=>{let{items:t,datasetSize:r}=e;return(0,Xe.flow)(ns(t.map((e=>qi(e)))),as(r),is)}}),cs=e=>t=>({...t,newRecordMarkers:e(t.newRecordMarkers)}),ls=(e,t)=>e.newRecordMarkers.filter((e=>null==t||e<=t)).length,us=function(e,t,r){let{overwrite:n=!0,fixIndex:o=!0}=void 0===r?{}:r;return ts((r=>{const a=e+(o?ls(r,e):0),i=Math.max(0,a-r.records.length),s=a+(n?t.length:0);return r.records.slice(0,a).concat(new Array(i)).concat(t.map((e=>qi(e)))).concat(r.records.slice(s))}),ns)},ds=(e,t,r)=>n=>Object.assign({},e(n),...r.map((e=>({[t(e)]:e})))),ps=(e,t,r)=>n=>({...e(n),[t]:r(e(n)[t])}),fs=(e,t)=>r=>Object.assign({},...Object.keys(e(r)).filter((e=>e!==t)).map((t=>({[t]:e(r)[t]})))),hs=e=>es({records:e}),gs=e=>es({drafts:e}),ms=(0,Xe.curry)(((e,t,r)=>es({scopes:{...r.scopes,[e]:t}})(r))),ys=e=>t=>t.scopes[e],vs=e=>ts(ds((e=>{let{records:t}=e;return t}),qi,e),hs),ws=e=>ts(ds((e=>{let{drafts:t}=e;return t}),qi,[e]),gs),Is=e=>ts(fs((e=>{let{drafts:t}=e;return t}),qi(e)),gs),bs=()=>gs({}),Es=e=>e.matchWith({Empty:()=>e=>e,Results:e=>{let{items:t}=e;return t.length>0?vs(t):e=>e}}),_s=(e,t)=>ts(ps((e=>{let{drafts:t}=e;return t}),e,(0,Xe.flow)(zi,(e=>t=>Object.entries(e).reduce(((e,t)=>{let[r,n]=t;return(0,Xe.set)(e,r,n)}),(0,Xe.cloneDeep)(t)))(t))),gs),Ss=(e,t,r,n)=>{const o=t.records[e],a=t.drafts[e],i=(0,Xe.isPlainObject)(o),s=(0,Xe.isPlainObject)(a);return i&&s?(e=>{let{record:t,draft:{_id:r,...n},includes:o,nestedFieldKeys:a}=e;const i=Object.keys(n).filter((e=>Yi({record:t,draft:n,includes:o,nestedFieldKeys:a,fieldKey:e}))),s={...t,...n};return i.reduce(((e,r)=>({...e,[r]:(0,Xe.merge)({},t[r],n[r])})),s)})({record:o,draft:a,includes:r,nestedFieldKeys:n}):i?{...o}:s?{...a}:null},Rs=(0,Xe.curry)(((e,t,r)=>Object.keys(r.scopes).filter((e=>t(r.scopes[e],e))).map((t=>e(r.scopes[t],t))))),Ts=(0,Xe.curry)((function(e,t,r,n,o,a,i){void 0===i&&(i=!1);const{records:s,datasetSize:c}=ys(e)(a),l=r-t,u=s.slice(t,r).reduce(((e,t)=>{const r=Ss(t,a,n,o);return null!=r?e.concat(Xi(r)):e}),[]);return Qi.of({items:u,datasetSize:c,offset:t}).filter((function(e){let{items:t}=e;return i||t.length>=l}))})),Cs=(0,Xe.curry)(((e,t)=>ts((0,Xe.flow)(ys(e),t),ms(e)))),Os=(0,Xe.curry)(((e,t)=>es({[e]:t}))),Ps=e=>t=>t[e],Ds=(0,Xe.curry)(((e,t)=>ts((0,Xe.flow)(Ps(e),t),Os(e)))),xs=e=>{let{recordStore:t}=e;return t().fold((()=>null),(e=>e.isCursorPaging()))},As=e=>{let{state:t}=e;const{size:r}=hn(t);return r},Ns=e=>{let{state:t}=e;const{offset:r}=hn(t);return r},Ms=e=>{let{state:t}=e;const{size:r,numPagesToShow:n}=hn(t);return r*n},Fs=e=>{let{state:t}=e;const r=On(t);return null==r?null:r},Ls=e=>{let{state:t}=e;if(null==Fs({state:t}))return null;const{features:r}=j;if(r.newCurrentPageIndex){const{size:e,offset:r}=hn(t);return r/e+1}const{size:n,offset:o,numPagesToShow:a}=hn(t);return o/n+a},Us=e=>{let{recordStore:t}=e;return t().fold((()=>null),(e=>e.getDatasetSize()))},ks=e=>{let{state:t,recordStore:r}=e;const n=Us({recordStore:r});return n?Math.ceil(n.total/As({state:t})):null},js=e=>{let{recordStore:t}=e;return t().fold((()=>!1),(e=>{const t=e.getDatasetSize();return e.isCursorPaging()&&!(null==t||!t.cursor)}))},Vs=e=>{let{state:t}=e;const r=Fs({state:t});return null!=r&&r>0},Ws=e=>{let{state:t,recordStore:r}=e;if(js({recordStore:r}))return!0;const n=Us({recordStore:r});if(!n)return!1;const o=Fs({state:t});return null!=o&&o<n.total-1},Gs=e=>{let{state:t}=e;const{offset:r}=hn(t);return r>0},Bs=e=>{let{state:t,recordStore:r}=e;if(js({recordStore:r}))return!0;const n=Us({recordStore:r});if(!n)return!1;const{offset:o,size:a}=hn(t);return o+a<n.total},qs=async e=>{let{index:t,recordStore:r}=e;await r().fold((()=>{}),(e=>e.getRecords(t,1)))},zs=e=>e===$e,$s=e=>{let[{datasetId:t}]=e;return t},Hs=(e,t)=>{let[r]=e,[n]=t;return(0,Xe.every)(r,((e,t)=>"filter"===t?((e,t)=>JSON.stringify(e)===JSON.stringify(t))(e,n[t]):e===n[t]))};var Xs=e=>{let{primaryDatasetId:t,recordStoreCache:r,refreshStoreCache:n,dataProvider:o,mainCollectionName:a,includes:i,nestedFieldKeys:s,uniqueFieldValues:c,readWriteType:l,cursorPagingRequired:u}=e;const{breadcrumbReporting:d}=j,p=()=>r[t],f=e=>{r[t]=e};((0,Xe.isEmpty)(p())||n||zs(l))&&f((e=>({[e]:{records:{},drafts:{},scopes:{}}}))(a));const h=[],m=rs((e=>{let{pageSize:t,sort:r,filter:n,datasetId:m,referencedCollectionName:y,fixedRecordId:v}=e;const w=null!=y?y:a,I=JSON.stringify({filter:n,sort:r}),b=Ps(w),E=Ds(w),_=(0,Xe.flow)(b,ys(I)),S=Cs(I),R=()=>o.getSchema(w),T=e=>e-e%t,C=(0,Xe.memoize)((e=>{let{offset:t,length:a,datasetSize:s}=e;return o.getData({datasetId:m,length:a,collectionId:w,cursorPaging:L.isCursorPaging(),offset:t,filter:n,sort:r,includes:null!=y?void 0:i,uniqueFieldValues:c,datasetSize:s}).then((e=>({items:e.items,datasetSize:e.datasetSize,offset:t})))}),(e=>{let{offset:t,length:r,datasetSize:n}=e;return[t,r,null==n?void 0:n.cursor].join("-")})),O=e=>L.isCursorPaging()?(async e=>{const t=[];let{datasetSize:r}=_(p());for(const{offset:n,length:o}of e){const e=await C({offset:n,length:o,datasetSize:r});if(t.push(e),r=e.datasetSize,!r.cursor)break}return t})(e):Promise.all(e.map((e=>{let{offset:t,length:r}=e;return C({offset:t,length:r})}))),P=(e,r,n)=>{const o=L.isCursorPaging()?0:T(r),a=(i=r,s=n,Math.ceil((T(i)+(s-T(i)))/t)*t);var i,s;const c=fo(R())||g.DefaultMaxPageSize[L.getPaging()],l=((e,t,r)=>{const n=e.records.slice(t,r),o=n.findIndex(d),a=((e,t)=>{if(t.length>0)for(let r=t.length-1;r>=0;r-=1)if(e(t[r]))return r;return-1})(d,n),i=p(o,t),s=p(a,r),c=ls(e,i),l=i-c,u=s-c-l;return 0===u?Ye.Maybe.Nothing():Ye.Maybe.Just({offset:l,length:u});function d(e){return"string"!=typeof e}function p(t,r){return-1===t?Math.max(e.records.length,r):o+r}})(e,o,a),u=l.map((e=>{let{offset:t,length:r}=e;return r<=c?[{offset:t,length:r}]:(0,Xe.flatten)((0,Xe.times)(Math.ceil(r/c),(e=>[{offset:t+e*c,length:Math.min(c,r-e*c)}])))})).getOrElse([]);return O(u)},D=(e,t,r)=>ba()(Ye.Result,h.map((n=>Ye.Result.try((()=>n(null!=e?Xi(e):null,null!=t?Xi(t):null,r)))))),x=function(e,t,r){const n=_(p()).records[r],o=Ss(n,b(p()),i,s);if(null==o)return t();{const t=function(){f((0,Xe.flow)(...arguments)(p()))},u=e=>{const t=Ss(n,b(p()),i,s);return(0,Xe.isEqual)(o,t)?Ye.Result.Ok([]):D(o,t,e)};for(var a=arguments.length,c=new Array(a>3?a-3:0),l=3;l<a;l++)c[l-3]=arguments[l];return e({update:t,notifyIfChanged:u},o,r,...c)}},A=(e,t)=>function(r){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return x(e,t,r,...o)},N=(e,t)=>async function(r){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return x(e,t,r,...o)},M=(e,t)=>d(t,je.with({category:"recordStore",message:e,data:{datasetId:m,scope:I}})),F=e=>{return e&&(t=qi(e),!b(p()).records[t]);var t},L={getRecords:M("getRecords",(async(e,t)=>{const{datasetSize:r}=_(p()),n=(e=>{let{from:t,length:r,datasetSize:n,cursorPaging:o}=e;if(!n)return t+r;const{total:a,loaded:i,cursor:s}=n,c=o?s?1/0:i:a;return Math.min(t+r,c)})({from:e,length:t,datasetSize:r,cursorPaging:L.isCursorPaging()}),o=Ts(I,e,n,i,s),a=zs(l)||!r||(e=>{let{loaded:t,total:r,cursor:n}=e;return!t&&!r&&!n})(r);return o(b(p()),a).orElse((async()=>{const t=await P(_(p()),e,n),r=E((0,Xe.flow)(...t.map((e=>{let{items:t,datasetSize:r,offset:n}=e;return Qi.fromWixDataQueryResults({items:t,datasetSize:r},n)})).map((e=>(0,Xe.flow)(Es(e),S(e.matchWith({Empty:()=>as({total:0,loaded:0}),Results:e=>{let{items:t,datasetSize:r,offset:n}=e;return(0,Xe.flow)(as(r),t.length>0?us(n,t):e=>e)}}))))))),a=p();var i,s;return f(r(p())),i=b(a),s=b(p()),Object.keys(i.records).filter((e=>(0,Xe.isPlainObject)(s.records[e])&&s.records[e]._updatedDate>i.records[e]._updatedDate)).forEach((e=>D(i.records[e],s.records[e]))),o(b(p()),!0)}))})),getRecordsLimitedByMaxPageSize:(e,t)=>{const r=Math.min(t,fo(R())||t);return L.getRecords(e,r)},seed:M("seed",(()=>{if(0===_(p()).numSeedRecords){return(v?o.getData({datasetId:m,length:t,collectionId:w,cursorPaging:void 0,offset:0,filter:n,sort:r,includes:null!=y?void 0:i,uniqueFieldValues:c}):o.getInitialData({datasetId:m,collectionId:w,filter:n,sort:r,includes:i,length:t,uniqueFieldValues:c})).then((e=>{const t=Qi.fromWixDataQueryResults(e,0),r=E((0,Xe.flow)(Es(t),S(ss(t))));f(r(p()))}))}return Promise.resolve()})),getTheStore:p,getPaging:()=>(({schema:e,cursorPagingPreferred:t})=>{var r,n,o;const a=null===(r=null==e?void 0:e.pagingMode)||void 0===r?void 0:r.includes(g.PagingMode.Offset),i=null===(n=null==e?void 0:e.pagingMode)||void 0===n?void 0:n.includes(g.PagingMode.Cursor);return 1===(null===(o=null==e?void 0:e.pagingMode)||void 0===o?void 0:o.length)&&i||a&&i&&t?g.PagingMode.Cursor:g.PagingMode.Offset})({schema:R(),cursorPagingPreferred:u}),isCursorPaging:()=>L.getPaging()===g.PagingMode.Cursor,getSeedRecords:M("getSeedRecords",(()=>Ts(I,0,_(p()).numSeedRecords,i,s,b(p()),!0))),getDatasetSize:M("getDatasetSize",(()=>_(p()).datasetSize)),getRecordById:M("getRecordById",(e=>Ye.Maybe.fromNullable(b(p()).records[e]))),removeRecord:M("removeRecord",N((async(e,t,r)=>{let{update:n,notifyIfChanged:a}=e;const i=qi(t);!F(t)&&i&&await o.remove({collectionId:w,recordId:i}),C.cache.clear();const s=Rs(((e,t)=>{return Cs(t,(0,Xe.flow)((n=i,ts((e=>e.records.filter((e=>e!==n))),ns)),os(-1),cs((r=((e,t)=>t.records.indexOf(e))(i,e),e=>e.filter((e=>e!==r))))));var r,n}),(c=i,e=>e.records.includes(c)),b(p()));var c;return n(E((0,Xe.flow)((0,Xe.flow)(Is(t),(e=>ts(fs((e=>{let{records:t}=e;return t}),e),hs))(i)),...s))),a()}),(()=>Promise.resolve(Ye.Result.Error("cannot remove record: index not found"))))),reset:M("reset",(()=>{C.cache.clear(),f(E((0,Xe.flow)(ms(I,{records:[],numSeedRecords:0,newRecordMarkers:[]}),bs()))(p()))})),newRecord:M("newRecord",((e,t)=>{const r=$i(t),n=E((0,Xe.flow)(ws(r),S((0,Xe.flow)(os(1),es({newRecordMarkers:[e]}),us(e,[r],{overwrite:!1,fixIndex:!1})))));return f(n(p())),D(null,r),Xi(r)})),saveRecord:M("saveRecord",N((async(e,t,r)=>{let{update:n,notifyIfChanged:a}=e;const i=await o.save({collectionId:w,record:Xi(t),includeReferences:!0});return n(E((0,Xe.flow)((e=>vs([e]))(i),Is(t),S((0,Xe.flow)(((e,t)=>us(e,[t],{fixIndex:!1}))(r,i),cs((e=>e.filter((e=>e!==r))))))))),a(),Xi(i)}),(()=>Promise.reject(new Error("cannot save record: index not found"))))),setFieldsValues:M("setFieldsValues",A(((e,t,r,n,o)=>{let{update:a,notifyIfChanged:i}=e;return Object.keys(n).length&&a(E(_s(qi(t),n))),i(o)}),(()=>Ye.Result.Error("cannot update field values: index not found")))),isPristine:M("isPristine",A(((e,t)=>(e=>"boolean"!=typeof e[Bi]||e[Bi])(t)),(()=>!0))),hasDraft:M("hasDraft",A(((e,t)=>(e=>"boolean"==typeof e[Bi])(t)),(()=>!1))),isNewRecord:M("isNewRecord",A(((e,t)=>F(t)),(()=>!0))),clearDrafts:M("clearDrafts",(()=>{f(E(bs())(p()))})),resetDraft:M("resetDraft",A(((e,t,r,n)=>{let{update:o,notifyIfChanged:a}=e;return o(E(F(t)?((e,t)=>ts(ps((e=>{let{drafts:t}=e;return t}),qi(e),(e=>$i(t,e._id))),gs))(t,n):Is(t))),a()}),(()=>Ye.Result.Error("cannot reset draft: index not found")))),hasSeedData:M("hasSeedData",(()=>_(p()).numSeedRecords>0)),getUniqueFieldValues:M("getUniqueFieldValues",(e=>o.getUniqueFieldValues({collectionId:w,fieldKey:e})))};if(b(p())||f(Os(w,{records:{},drafts:{},scopes:{}})(p())),!b(p()).scopes[I]){const e=[];if(v){const t=o.getRecord({collectionId:w,recordId:v,includes:i})||Ss(v,b(p()),i,s),r=t?[t]:[],n=r.length>0?Qi.of({items:r,offset:0,datasetSize:{loaded:r.length,total:r.length}}):Qi.Empty(),a=n.matchWith({Empty:Ye.Maybe.Nothing,Results:(0,Xe.flow)(Qi.of,Ye.Maybe.Just)});(0,Xe.some)(r,F)&&e.push(Es(n)),a.fold((()=>{e.push(ms(I,{records:[],numSeedRecords:0,newRecordMarkers:[]}))}),(t=>{e.push(ms(I,ss(t)({records:[],numSeedRecords:0,newRecordMarkers:[]})))}))}else e.push(ms(I,{records:[],numSeedRecords:0,newRecordMarkers:[]}));f(E((0,Xe.flow)(...e))(p()))}return L.externalApi={getRecords:async(e,t)=>(await L.getRecords(e,t)).map((e=>{let{items:t,...r}=e;return{items:(0,Xe.cloneDeep)(t),...r}})),getSeedRecords:()=>L.getSeedRecords().map((e=>{let{items:t,...r}=e;return{items:(0,Xe.cloneDeep)(t),...r}})),getRecordsLimitedByMaxPageSize:async(e,t)=>(await L.getRecordsLimitedByMaxPageSize(e,t)).map((e=>{let{items:t,...r}=e;return{items:(0,Xe.cloneDeep)(t),...r}}))},L}),$s,Hs);var y;return m.onChange=(y=h,e=>(y.push(e),()=>{const t=y.indexOf(e);t>=0&&y.splice(t,1)})),m};var Ys=e=>{const t={};return{setController:(r,n)=>{let{repeaterId:o,itemId:a}=r;e.log(new je({category:"scopeStore",message:"adding scope",data:{componentId:o,itemId:a}})),t[o]=t[o]||{},t[o][a]=n},getController:e=>{let{repeaterId:r,itemId:n}=e;const o=t[r];return o&&o[n]},removeController:r=>{let{repeaterId:n,itemId:o}=r;e.log(new je({category:"scopeStore",message:"removing scope",data:{componentId:n,itemId:o}}));const a=t[n];(0,Xe.get)(a,o)&&(a[o].dispose(),(0,Xe.unset)(a,o))},getAll:()=>Object.values(t).reduce(((e,t)=>e.concat(Object.values(t))),[])}},Js=a(7538);const Ks=(0,Ye.union)("GoToIndexResult",{Record:(e,t)=>({index:e,record:t}),InvalidIndex:()=>({}),NoRecord:()=>({})}),Zs=function(e,t){return void 0===t&&(t=!1),{type:ar,index:e,suppressRefreshView:t}},Qs=(e,t)=>({type:er,fieldsToUpdate:e,updateSource:t}),ec=e=>({type:yr,atIndex:e}),tc=()=>({type:wr}),rc=async(e,t,r,n)=>{const o=await e(n).fold((()=>Qi.Empty()),(e=>e.externalApi.getRecords(t,r)));return o.get()},nc=(e,t)=>rc(e,Ns({state:t}),Ms({state:t}));var oc={doFetch:rc,fetchCurrentPage:nc,flushDraft:()=>({type:fr}),goToRecordByIndexResult:(e,t)=>({type:lr,error:e,payload:t}),incrementNumOfPagesToShow:()=>({type:nr}),initWriteOnly:e=>e?Zs(0):ec(0),loadPage:e=>({type:cr,pageNumber:e}),newRecord:ec,newRecordResult:(e,t)=>({type:vr,error:e,payload:t}),nextPage:()=>({type:ir}),previousPage:()=>({type:sr}),reInitWriteOnly:()=>ec(0),refresh:tc,refreshCurrentRecord:()=>({type:tr}),refreshCurrentView:()=>({type:rr}),refreshResult:(e,t)=>({type:lr,error:e,payload:t}),remove:()=>({type:gr}),removeCurrentRecordResult:(e,t)=>({type:mr,error:e,payload:t}),revert:()=>({type:dr}),revertResult:(e,t)=>({type:pr,error:e,payload:t}),saveRecordResult:(e,t)=>({type:hr,error:e,payload:t}),setCurrentIndex:Zs,setCurrentRecord:(e,t,r)=>({type:Qt,record:e,recordIndex:t,updateSource:r}),setDefaultRecord:e=>({type:or,record:e}),updateCurrentViewResult:(e,t)=>({type:ur,error:e,payload:t}),updateFields:Qs,GoToIndexResult:Ks};var ac=e=>({type:rn,connections:e});var ic=e=>({type:Rr,filter:e}),sc=e=>({type:Tr,sort:e}),cc=e=>({type:Cr,isDatasetReady:e});var lc=a(6286),uc=a.n(lc);var dc=(e,t)=>{const{middleware:r,subscribe:n,onIdle:o}=uc().createMiddleware(),a=Wt(un,void 0,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(r,n,o){var a,i=e(r,n,o),s=i.dispatch,c={getState:i.getState,dispatch:function(e){return s(e)}};return a=t.map((function(e){return e(c)})),s=Bt.apply(void 0,a)(i.dispatch),qt({},i,{dispatch:s})}}}(r,((e,t)=>r=>r=>n=>(e.log(new je({category:"redux",message:n.type+" (dataset: "+t+")",data:(0,Xe.omit)(n,"type","record")})),r(n)))(e,t)));return{store:a,subscribe:n,onIdle:o}};const{READ:pc,WRITE:fc,READ_WRITE:hc}=e,gc={[pc]:"read-only",[fc]:"write-only",[hc]:"read-write"},mc=(e,t)=>{if(e)throw new A("Operation ("+t+") not allowed on a dataset with non-offset paging mode",{code:"OPERATION_NOT_ALLOWED"})},yc=(e,t)=>{if(r=e(),Wr.isDuringSave(r.records))throw new A("Operation ("+t+") not allowed during save",{code:"OPERATION_NOT_ALLOWED"});var r},vc=function(e,t,r,n,o){void 0===t&&(t=""),void 0===o&&(o=!0),((e,t,r)=>{if(!mn(e()))throw new A(r===Br?"Operation ("+t+") is not allowed because the field used to build this page's URL is empty":"Operation ("+t+") not allowed on an unconfigured dataset",{code:"OPERATION_NOT_ALLOWED"})})(e,t,n),function(e,t,r){void 0===r&&(r=[]);const n=gn(e());if(!(0,Xe.includes)(r,n))throw new A("Operation ("+t+") not allowed on "+gc[n]+" dataset",{code:"OPERATION_NOT_ALLOWED"})}(e,t,r),o||yc(e,t)},wc=(e,t)=>{if(!(0,Xe.isNumber)(t))throw new A("Parameter ("+e+") must be a number",{code:"DS_INVALID_ARGUMENT"})},Ic=(e,t)=>{if(!(0,Xe.isInteger)(t)||t<1)throw new A("Parameter ("+e+") must be a positive integer number",{code:"DS_INVALID_ARGUMENT"})},bc=(e,t)=>{if(!(0,Xe.isFunction)(t))throw new A("The callback passed to ("+e+") must be a function",{code:"DS_INVALID_ARGUMENT"})},Ec=(e,t)=>{if(!yn(e()))throw new A("The dataset didn't load yet. You need to call "+t+" inside the onReady for the dataset.",{code:"DS_NOT_LOADED"})},_c=e=>{if(null==Fs({state:e()}))throw new A("There is no current item",{code:"DS_NO_CURRENT_ITEM"})},Sc=(e,t)=>{if(e)throw new A('The "'+t+'" function cannot be called on the dataset because the dataset was selected using a repeated item scope selector.\nRead more about repeated item scope selectors: http://wix.to/94BuAAs/$w.Repeater.html#repeated-item-scope',{code:"OPERATION_NOT_ALLOWED"})},Rc=(e,t)=>{if(e!==Br)throw new A('"'+t+'" function on the dataset is not allowed. "'+t+'" can only be called on a Dynamic Page Dataset.',{code:"OPERATION_NOT_ALLOWED"})};var Tc=e=>{let{datasetType:t,siblingDynamicPageUrlGetter:r}=e;const n={async getNextDynamicPage(){return null!=r?r.getNextDynamicPageUrl():null},async getPreviousDynamicPage(){return r?r.getPreviousDynamicPageUrl():null}};return(0,Xe.mapValues)(n,((e,r)=>function(){return Rc(t,r),e(...arguments)}))};const{READ:Cc,WRITE:Oc,READ_WRITE:Pc}=e;var Dc=e=>{let{store:{dispatch:t,getState:r},recordStore:n,eventListeners:{fireEvent:o,register:a},controllerStore:i,datasetId:s,datasetType:c,isFixedItem:l,siblingDynamicPageUrlGetter:u,onIdle:d,dispatcher:p,onReadyAsync:f}=e;const{logger:h,errorReporting:g,breadcrumbReporting:m,verboseReporting:y}=j,v=async function(){try{await t(oc.flushDraft());const n=(e=r(),Wr.selectLastSavedRecord(e.records)||Cn(r()));return(0,Xe.cloneDeep)(n)}catch(e){throw p.dispatch("datasetSaveError"),e}var e},w=async function(e,o){void 0===e&&(e=(e=>{let{state:t}=e;const r=Fs({state:t});return null==r?0:r+1})({state:r()})),Ec(r,o),vc(r,o,[Oc,Pc],c,!1),wc("atIndex",e),await v(),xs({recordStore:n})&&await qs({index:e,recordStore:n}),(e=>{let{index:t,datasetSize:{total:r,loaded:n}}=e;if(t<0||t>Math.max(r,n))throw new A("Invalid index",{code:"DS_INDEX_OUT_OF_RANGE"})})({index:e,datasetSize:Us({recordStore:n})}),await t(oc.newRecord(e))};return e=>{const p=e?(e,t)=>g(e,x.withMessage("An error occurred in one of "+t+" callbacks")):Xe.identity,I={async isIdle(){await new Promise((e=>{const t=d((()=>{t(),e()}))}))},onBeforeSave:e=>(bc("onBeforeSave",e),vc(r,"onBeforeSave",[Oc,Pc],c,!1),a("beforeSave",p(e,"beforeSave"))),onAfterSave:e=>(bc("onAfterSave",e),vc(r,"onAfterSave",[Oc,Pc],c,!1),a("afterSave",p(e,"afterSave"))),async save(){vc(r,"save",[Oc,Pc],c,!1);const e=await v();return wn(r())&&await t(oc.reInitWriteOnly()),e},async getItems(e,t){vc(r,"getItems",[Cc,Pc],c,!1),wc("fromIndex",e),wc("numberOfItems",t);const{items:o,offset:a,datasetSize:i}=await oc.doFetch(n,e,t);return{items:o,totalCount:xs({recordStore:n})?void 0:i.total,offset:a}},getTotalCount:()=>(vc(r,"getTotalCount",[Cc,Pc],c,!1),yn(r())?(mc(xs({recordStore:n}),"getTotalCount"),Us({recordStore:n}).total):null),getCurrentItem:()=>{vc(r,"getCurrentItem",[Cc,Oc,Pc],c);const e=Cn(r());return e?(0,Xe.cloneDeep)(e):null},getCurrentItemIndex:()=>(vc(r,"getCurrentItemIndex",[Cc,Pc],c),Fs({state:r()})),async setCurrentItemIndex(e){Sc(l,"setCurrentItemIndex"),vc(r,"setCurrentItemIndex",[Cc,Pc],c,!1),(e=>{if(!(0,Xe.isInteger)(e))throw new A("Parameter ("+e+") must be a number",{code:"PARAMETER_NOT_ALLOWED"})})(e),await new Promise((e=>E.onReady(e))),vn(r())||await v(),await t(oc.setCurrentIndex(e))},setFieldValue:(e,n)=>{Ec(r,"setFieldValue"),vc(r,"setFieldValue",[Oc,Pc],c),_c(r),t(oc.updateFields({[e]:(0,Xe.cloneDeep)(n)}))},setFieldValues:e=>{Ec(r,"setFieldValues"),vc(r,"setFieldValues",[Oc,Pc],c),_c(r),t(oc.updateFields((0,Xe.mapValues)(e,Xe.cloneDeep)))},async next(){if(Sc(l,"next"),Ec(r,"next"),vc(r,"next",[Cc,Pc],c,!1),vn(r())||await v(),!E.hasNext())throw new A("There are no more items in the dataset",{code:"NO_SUCH_ITEM"});const e=Fs({state:r()});return await t(oc.setCurrentIndex(e+1)),E.getCurrentItem()},async previous(){if(Sc(l,"previous"),Ec(r,"previous"),vc(r,"previous",[Cc,Pc],c,!1),vn(r())||await v(),!E.hasPrevious())throw new A("This is the first item in the dataset",{code:"NO_SUCH_ITEM"});const e=Fs({state:r()});return await t(oc.setCurrentIndex(e-1)),E.getCurrentItem()},hasNext:()=>(vc(r,"hasNext",[Cc,Pc],c),Ws({state:r(),recordStore:n})),hasPrevious:()=>(vc(r,"hasPrevious",[Cc,Pc],c),Vs({state:r()})),async new(e){return w(e,"new")},async add(e){return w(e,"add")},async remove(){Ec(r,"remove"),vc(r,"remove",[Pc],c,!1);if(null==Fs({state:r()}))throw new A("Invalid index",{code:"DS_INDEX_OUT_OF_RANGE"});await t(oc.remove())},async revert(){return Ec(r,"revert"),vc(r,"revert",[Oc,Pc],c,!1),_c(r),t(oc.revert())},async refresh(){Ec(r,"refresh"),vc(r,"refresh",[Cc,Oc,Pc],c,!1),await t(oc.refresh())},onCurrentIndexChanged:e=>(bc("onCurrentIndexChanged",e),vc(r,"onCurrentIndexChanged",[Pc,Cc],c,!1),a("currentIndexChanged",p(e,"currentIndexChanged"))),onItemValuesChanged:e=>(bc("onItemValuesChanged",e),vc(r,"onItemValuesChanged",[Pc,Oc],c,!1),a("itemValuesChanged",p(e,"itemValuesChanged"))),onError:e=>(bc("onError",e),vc(r,"onError",[Pc,Cc,Oc],c,!1),a("datasetError",p(e,"datasetError"))),onReady:e=>(bc("onReady",e),vc(r,"onReady",[Cc,Oc,Pc],c,!1),yn(r())?(Promise.resolve(p(e)()),Xe.noop):a("datasetReady",p(e,"datasetReady"))),onReadyAsync:f,async setSort(e){Sc(l,"setSort"),vc(r,"setSort",[Cc,Pc],c,!1),(e=>{if(!e||!(0,Xe.isFunction)(e._build))throw new A("The given sort object is invalid",{code:"DS_INVALID_ARGUMENT"})})(e),await new Promise((e=>E.onReady(e))),vn(r())||await v();const n=g((()=>e._build()),x.withMessage("Sort building failed"));await t(sc((0,Xe.cloneDeep)(n())))},async setFilter(e){Sc(l,"setFilter"),vc(r,"setFilter",[Cc,Pc],c,!1),(e=>{if(!e||!(0,Xe.isFunction)(e._build))throw new A("The given filter object is invalid",{code:"DS_INVALID_ARGUMENT"})})(e),await new Promise((e=>E.onReady(e))),vn(r())||await v();const n=g((()=>e._build()),x.withMessage("Filter building failed"));await t(ic((0,Xe.cloneDeep)(n())))},loadMore:async()=>{Sc(l,"loadMore"),Ec(r,"loadMore"),vc(r,"loadMore",[Cc,Pc],c,!1),await t(oc.incrementNumOfPagesToShow())},async nextPage(){if(Sc(l,"nextPage"),Ec(r,"nextPage"),vc(r,"nextPage",[Cc,Pc],c,!1),vn(r())||await v(),!E.hasNextPage())throw new A("There are no more pages in the dataset",{code:"NO_SUCH_PAGE"});await t(oc.nextPage());const{items:e}=await oc.fetchCurrentPage(n,r());return e},async previousPage(){if(Sc(l,"previousPage"),Ec(r,"previousPage"),vc(r,"previousPage",[Cc,Pc],c,!1),vn(r())||await v(),!E.hasPreviousPage())throw new A("This is the first page in the dataset",{code:"NO_SUCH_PAGE"});await t(oc.previousPage());const{items:e}=await oc.fetchCurrentPage(n,r());return e},hasNextPage(){return vc(r,"hasNextPage",[Cc,Pc],c),Bs({state:r(),recordStore:n})},hasPreviousPage(){return vc(r,"hasPreviousPage",[Cc,Pc],c),Gs({state:r()})},getTotalPageCount(){return vc(r,"getTotalPageCount",[Cc,Pc],c),yn(r())?(mc(xs({recordStore:n}),"getTotalPageCount"),ks({state:r(),recordStore:n})):null},getCurrentPageIndex(){return vc(r,"getCurrentPageIndex",[Cc,Pc],c),Ls({state:r()})},async loadPage(e){vc(r,"loadPage",[Cc,Pc],c,!1),Sc(l,"loadPage"),Ec(r,"loadPage"),mc(xs({recordStore:n}),"loadPage"),((e,t)=>{if(Ic("pageNumber",e),e>t)throw new A("Page "+e+" does not exist",{code:"NO_SUCH_PAGE"})})(e,E.getTotalPageCount()),vn(r())||await v(),await t(oc.loadPage(e));const{items:o}=await oc.fetchCurrentPage(n,r());return o},inScope:(e,t)=>{vc(r,"inScope",[Cc,Oc,Pc],c,!1);const n=i.getController({repeaterId:e,itemId:t});return n?n.staticExports:E},getPageSize:()=>(vc(r,"getPageSize",[Cc,Pc],c),As({state:r()})),async setPageSize(e){vc(r,"setPageSize",[Cc,Pc],c,!1),Ic("size",e),await new Promise((e=>E.onReady(e))),vn(r())||await v(),await t(Sr({size:e}))}},b=Tc({datasetType:c,siblingDynamicPageUrlGetter:u}),E=Object.assign(I,b),_={};for(const e in E)_[e]=(0,Xe.flow)((t=>m(t,je.with({category:"datasetAPI",message:"method: "+e+" - datasetId:"+s}))),(t=>y(t,e)),(t=>{return $(t,(r=e,e=>{throw e instanceof x?h.log(new x("datasetApi '"+r+"' operation failed",{cause:e})):e instanceof M?h.log(e):h.log(new D("datasetApi '"+r+"' operation failed",{cause:e})),o("datasetError",r,e instanceof N?e.cause.message:e.cause||e),e.cause||e}));var r}))(E[e]);return _}};var xc=function(e){void 0===e&&(e=Xe.noop);let t=!1,r={};const n=e=>r[e]?r[e]:r[e]=[],o=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return Promise.all(n(e).map((e=>e(...r))))};return{register:(e,r)=>{if(t)return Xe.noop;const o=(e=>$((function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return Promise.resolve(e(t,...n))}),(e=>Promise.reject(e))))(r);return n(e).push(o),()=>{(0,Xe.remove)(n(e),(e=>e===o))}},executeHooks:o,fireEvent:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return j.logger.log(new Ge(Ge.types.DS_API.TRIGGERED,{eventName:t,eventArgs:n})),e(t,...n),o(t,...n)},dispose:()=>{t=!0,r={}}}};const Ac=["siteButtonRole","imageButtonRole","stylableButtonRole"],Nc=[ie,te,ve,...Ce],Mc=e=>e.filter((e=>{let{role:t,isInput:r}=e;return r&&!Nc.includes(t)})),Fc=(e,t)=>e.filter((e=>{let{role:t}=e;return(0,Xe.includes)(Ac,t)})).filter((e=>{let{connectionConfig:r}=e;return(0,Xe.includes)(t,(0,Xe.get)(r,"events.onClick.action"))})),Lc=(e,t,r,n)=>{e.enabled!==t&&(t?e.enable():e.disable(),r.log(new je({category:"components",message:e.id+" changed to "+(t?"enabled":"disabled")+" (dataset: "+n+")"})))},Uc=(e,t,r,n,o)=>{let{getState:a,subscribe:i}=e;const s={new:()=>!vn(a()),save:()=>In(a()),revert:()=>In(a()),remove:()=>In(a()),next:()=>Ws({state:a(),recordStore:o}),previous:()=>Vs({state:a()}),nextPage:()=>Bs({state:a(),recordStore:o}),previousPage:()=>Gs({state:a()}),nextDynamicPage:()=>Mn(a()).hasUrl(),previousDynamicPage:()=>Fn(a()).hasUrl(),loadMore:()=>(e=>{let{state:t,recordStore:r}=e;if(js({recordStore:r}))return!0;const n=Us({recordStore:r});return!!n&&Ns({state:t})+Ms({state:t})<n.total})({state:a(),recordStore:o})},{inputComponents:c,linkedComponents:l}=((e,t)=>{const r=(0,Xe.uniqBy)(e.filter((e=>{let{enabled:t}=e;return t})),(e=>{let{id:t}=e;return t}));return{inputComponents:Mc(r),linkedComponents:Fc(r,t)}})(t,Object.keys(s)),u=c.length+l.length?i((e=>{let{getState:t,inputComponents:r,linkedComponents:n,datasetId:o,logger:a,shouldEnableLinkedComponent:i}=e;return()=>{const e=t();if(!yn(e))return;const s=In(e);r.forEach((e=>{Lc(e,s,a,o)})),n.forEach((e=>{const{action:t}=e.connectionConfig.events.onClick,r=i[t]();Lc(e,r,a,o)}))}})({getState:a,inputComponents:c,linkedComponents:l,datasetId:n,logger:r,shouldEnableLinkedComponent:s})):Xe.noop;return u};var kc=a(5663),jc=a.n(kc);const Vc=e=>(0,Xe.isEqual)(!1,e);function Wc(e,t){return(0,Xe.mapValues)(t,((t,r)=>e(r).map((e=>function(e,t){switch(e){case"number":return Number(t);case"boolean":if("string"==typeof t)return"true"===t.toLowerCase()||"1"===t.toLowerCase();break;case"text":if(null!=t&&"function"==typeof t.toString)return t.toString()}return t}(e,t))).getOrElse(t)))}var Gc=function(e,t,r,n,o,a,i,s){const{logger:c,errorReporting:l,breadcrumbReporting:u}=j,d=(e,t)=>u(t,je.with({category:"effects",message:e,data:{datasetId:o}}));function p(e,r){t.onCurrentRecordModified(r,e)}function f(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return l(i,D.withMessage("Dataset "+e+" event execution failed"))(e,...r)}function h(){return Promise.all(t.onRecordsLoaded())}const g=e=>{throw new A(e,{code:"DS_OPERATION_FAILED"})};return{goToRecordByIndex:(t,r,n)=>({run:d("goToRecordByIndex",(async function(){let o;xs({recordStore:e})&&await qs({index:r,recordStore:e});try{o=(e=>{let{recordStore:t,index:r}=e;const{total:n,loaded:o}=t().fold((e=>{throw e}),(e=>e.getDatasetSize()));return Math.max(Math.min(r,Math.max(n,o)-1),0)})({recordStore:e,index:r})}catch(e){g(e)}if(t!==o||n){const t=await(a=o,e().fold(g,(e=>e.getRecords(a,1))));return t.matchWith({Empty:()=>oc.GoToIndexResult.NoRecord(),Results:e=>{let{items:t}=e;return oc.GoToIndexResult.Record(o,t[0])}})}return oc.GoToIndexResult.InvalidIndex();var a})),isQueued:!0,resultActionCreator:oc.goToRecordByIndexResult}),setFieldsInCurrentRecord:(t,n,o)=>({run:d("setFieldsInCurrentRecord",(function(){const a=Wc(r,t);return e().fold(g,(e=>e.setFieldsValues(n,a,o).fold((e=>{throw e}),(e=>{}))))})),isQueued:!1}),revertChanges:(t,r)=>({run:d("revertChanges",(function(){e().chain((e=>e.resetDraft(t,r))),p()})),isQueued:!1,resultActionCreator:oc.revertResult}),saveRecord:(t,r)=>({run:d("saveRecord",(async function(){return await(c.log(new Ge(Ge.types.DS_API.TRIGGERED,{eventName:"beforeSave"})),n("beforeSave").then((e=>e.some(Vc))).catch((e=>({error:e}))).then((e=>{if(e)throw new A("Operation cancelled by user code. "+((0,Xe.isBoolean)(e)?"":e.error),{code:"DS_OPERATION_CANCELLED"})}))),e().fold((()=>!1),(async e=>{if(e.hasDraft(t)){!function(e){const t=a.filter((t=>!t.isValid(e)));if(t.forEach((e=>e.updateValidityIndication())),t.length)throw new A("Some of the elements validation failed",{code:"DS_VALIDATION_ERROR"})}(r);const n=await e.saveRecord(t);return f("afterSave",r,n),s.dispatch("afterSave",r,n),n}}))})),isQueued:!0,resultActionCreator:oc.saveRecordResult}),removeCurrentRecord:t=>({run:d("removeCurrentRecord",(()=>function(t){return e().fold(g,(e=>e.removeRecord(t)))}(t))),isQueued:!0,resultActionCreator:oc.removeCurrentRecordResult}),newRecord:(t,r)=>({run:d("newRecord",(()=>function(t,r){return e().fold(g,(e=>e.newRecord(t,r)))}(t,r))),isQueued:!0,resultActionCreator:oc.newRecordResult}),fireEvent:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return{run:d("fireEvent",(()=>f(e,...r))),isQueued:!1}},notifyIndexChange:e=>({run:d("notifyIndexChange",(()=>{t.onCurrentIndexChanged(),f("currentIndexChanged",e)})),isQueued:!1}),notifyRecordSetLoaded:()=>({run:d("notifyRecordSetLoaded",h),isQueued:!0}),updateCurrentView:e=>({run:d("updateCurrentView",(()=>Promise.all(t.onCurrentViewChanged()))),isQueued:!0,resultActionCreator:oc.updateCurrentViewResult}),refresh:(t,r,n)=>({run:d("refresh",(async function(){return e().fold(g,(async e=>(e.reset(),n?oc.GoToIndexResult.Record(0,e.newRecord(0,r)):e.getRecords(0,1).then((e=>e.matchWith({Empty:()=>oc.GoToIndexResult.NoRecord(),Results:e=>{let{items:t}=e;return oc.GoToIndexResult.Record(0,t[0])}}))))))})),isQueued:!0,resultActionCreator:oc.refreshResult}),updateComponents:(e,t)=>({run:d("updateComponents",(()=>{p(e,t)})),isQueued:!1})}};const Bc=e=>As({state:e});const qc=e=>Mn(e).shouldLoadUrl(),zc=e=>Fn(e).shouldLoadUrl();var $c=e=>{let{getNextDynamicPageUrl:t,getPreviousDynamicPageUrl:r}=e;const n={run:t,isQueued:!0,resultActionCreator:(e,t)=>({type:en,error:e,payload:t})},o={run:r,isQueued:!0,resultActionCreator:(e,t)=>({type:tn,error:e,payload:t})},a=e=>{let{hasChangedToTrue:t}=e;const r=[];return t(qc)&&r.push(n),t(zc)&&r.push(o),r};return e=>(0,Xe.flatten)([a].map((t=>t(e))))};const Hc=async e=>{let{dataProvider:t,collectionName:r,directionTowardSibling:n,useLowerCaseDynamicPageUrl:o,dynamicPagesData:{dynamicUrl:a,userDefinedFilter:i,dynamicUrlPatternFieldsValues:s,sort:c,sortFields:l,patternFields:u}={}}=e;if(null==a||!u.length)return null;const d=await t.getSibling({collectionName:r,sort:c,sortFields:l,directionTowardSibling:n,fieldValues:s,filter:i});return d&&((e,t,r)=>"/"+Gi(t).replace(Vi,(t=>{const n=t.substring(1,t.length-1),o=r?String(e[n]).toLowerCase():e[n];return encodeURIComponent((""+o).replace(/ /g,"-"))})))(d,a,o)};const Xc=(e,t)=>{try{return Yc(e(t))}catch(e){return Jc(e)}},Yc=e=>({value:e,then:t=>Xc(t,e),catch:()=>Yc(e)}),Jc=e=>({error:e,then:()=>Jc(e),catch:t=>Xc(t,e)});var Kc={resolve:Yc,reject:Jc},Zc=e=>{let{recordStore:t}=e;const{logger:r}=j;return t().fold((()=>Promise.resolve(Ye.Maybe.Nothing())),(e=>e.hasSeedData()?(e=>e.getSeedRecords().matchWith({Empty:()=>Kc.resolve(Ye.Maybe.Nothing()),Results:e=>{let{items:t}=e;return Kc.resolve(Ye.Maybe.Just(t[0]))}}))(e):r.log(new ke("dataset/pageReady/getData",(()=>(e=>e.seed().then((()=>e.getRecords(0,1).then((e=>e.chain((e=>{let{items:t}=e;return Ye.Maybe.Just(t[0])})))))).catch((e=>(r.logError(e,"Fetch initial data failed"),Ye.Maybe.Nothing()))))(e))))))};var Qc=e=>{let{shouldFetchInitialData:t,recordStore:r,store:n,filter:o,sort:a,datasetIsDeferred:i,modeIsSSR:s,queueMicrotask:c,datasetIsReal:l,collectionId:u,filterResolver:d,dependencyManager:p,getSchema:f,schemasLoading:h}=e;const g=()=>{const e=(i=n.getState(),Qr.getUserFilterConnectionProps(i.config));var i;const s=t?Zc({recordStore:r}):Promise.resolve();if(!(l&&(null==e?void 0:e.length)>0))return s;const c=d(o).map((async t=>{await h;const r=f(u).getOrElse(null);if(r){const o=await j.dataFetcher.fetchUserFilterInitialData({filter:t,sort:a,userFilterConnectionProps:e,schema:r});n.dispatch((e=>({type:Ir,userFilterInitialData:e}))(o))}})).getOrElse(null);return Promise.all([c,s])},m=p.getDependencyResolutionPromise(o),y=i&&((e,t)=>{const{promise:r,resolve:n}=new z;return e||t(n),r})(s,c),{waitingForUserInput:v,resolveUserInputDependency:w}=xi(o)&&(()=>{const{promise:e,resolve:t}=new z;return{waitingForUserInput:e,resolveUserInputDependency:t}})(),I=[m,y,v].filter((e=>Boolean(e)));return{fetchingInitialData:I.length?Promise.all(I).then(g):g(),resolveUserInputDependency:()=>w&&w()}};var el=e=>{const t=["value","checked"];return e.reduce(((e,r)=>{var n;const o=(null==(n=r.connectionConfig)?void 0:n.properties)||{};return t.forEach((t=>{(0,Xe.has)(o,t)&&((e,t,r)=>{const n=(0,Xe.get)(r,t),o=Ua(n)&&ka(e)?ja({time:n,date:e}):ka(n)&&Ua(e)?ja({time:e,date:n}):e;(0,Xe.set)(r,t,o)})(r.getValue({propPath:t}),o[t].fieldName,e)})),e}),{})};const tl=(e,t,r)=>{var n;return t===r||(null==(n=e[t])?void 0:n.some((t=>tl(e,t,r))))},rl=e=>{let{components:t,connectionsGraph:r,updatedCompIds:n,datasetIsReal:o}=e;const a=t.filter((e=>(e=>{let{component:t,updatedCompIds:r,datasetIsReal:n,connectionsGraph:o}=e;if(r.length&&n){const{id:e}=t;return r.some((t=>tl(o,e,t)||tl(o,t,e)))}return!0})({component:e,connectionsGraph:r,updatedCompIds:n,datasetIsReal:o})));return a.some((e=>{let{role:t}=e;return t===te}))?t:a},nl=(e,t)=>{let{repeaterId:r,itemId:n}=t;return[e,"componentId",r,"itemId",n].join("_")},ol=e=>e.split("_componentId_")[0],al=(e,t)=>{const{logger:r}=j;return(n,o,a)=>{const i=((e,t)=>(0,Xe.isNull)(e)&&(0,Xe.isNull)(t))(n,o);if(i)return void r.log(new D("onChangeHandler invoked with illegal arguments",{extra:{arguments:{before:n,after:o,componentIdToExclude:a}}}));if(((e,t)=>(0,Xe.isNull)(e))(n))return void t(oc.refreshCurrentView()).catch((()=>{}));const s=Cn(e());if(((e,t)=>(0,Xe.isNull)(t))(0,o))return Hi(n,s)&&t(oc.refreshCurrentRecord()).catch((()=>{})),void t(oc.refreshCurrentView()).catch((()=>{}));if(((e,t)=>Hi(e,t))(n,s)){const r=Fs({state:e()});t(oc.setCurrentRecord(o,r,a)).catch((()=>{}))}}},il=e=>{let{detailsDatasetApis:t,masterDatasetApi:r,controllerConfig:n,unsubscribeHandlers:o}=e;const{logger:a}=j;t.forEach((e=>{const t=()=>{o.push(sl({masterDatasetApi:r,masterDatasetConfig:n,detailsDatasetApi:e}))};try{o.push(r.onReady(t))}catch(e){a.log(new Be(new A("The dataset cannot filter by the dynamic dataset because the field used to build this page's URL is empty",{code:"DS_EMPTY_URL_FIELD",cause:e}),"error"))}}))},sl=e=>{let{masterDatasetConfig:t,masterDatasetApi:r,detailsDatasetApi:n}=e;const o=Pr(t.dataset);let a,i;return o!==$e&&(a=r.onCurrentIndexChanged((()=>n.onReady((()=>n.refresh()))))),o!==ze&&(i=r.onItemValuesChanged((()=>n.refresh()))),()=>[a,i].forEach((e=>null==e?void 0:e()))},{richText:cl}=g.FieldType,ll={$text:e=>e.map((e=>e===cl?"html":"text")).getOrElse("text")},ul=(e,t)=>Ye.Maybe.fromNullable((0,Xe.get)(e,"properties")).map((e=>(0,Xe.mapKeys)(e,((e,r)=>(0,Xe.startsWith)(r,"$")?((e,t,r)=>Ye.Maybe.fromNullable(ll[e]).map((e=>e(r(t.fieldName)))).getOrElse(e))(r,e,t):r)))).map((t=>(0,Xe.assign)({},e,{properties:t}))).getOrElse(e),dl=e=>({id:e.id,role:e.role,isValidConnection:()=>!0,bind:()=>{},clear:()=>e.clear(),hide:()=>e.hide(),show:t=>e.show(t),resetUserFilter:()=>{},onRecordsLoaded:async()=>{},onCurrentViewChanged:async()=>{},onCurrentIndexChanged:async()=>{},onCurrentRecordModified:async()=>{}}),pl=e=>!!e&&Object.values(e).some((e=>!(0,Xe.isEmpty)(e))),fl=(e,t,r)=>{const{logger:n,platform:{location:o,utils:a,executeTpaAction:i}}=j,{getState:s,getFieldType:c,wixFormatter:l,modeIsLivePreview:u,PresetVerboseMessage:d}=r,p=r=>{Ei({currentRecord:Cn(s()),previousRecord:r,component:e,connectionConfig:t,formatter:l,modeIsLivePreview:u,getFieldType:c,logger:n,PresetVerboseMessage:d})},f=e=>e.matchWith({Empty(){},Loading(){},Loaded(e){let{url:t}=e;o.navigateTo(t)}}),h=t=>{const{datasetApi:s,getState:c,actions:l}=r;(0,Xe.forEach)(t,((t,r)=>{let{action:u,postAction:d}=t;e.on(r,(async()=>{try{if(u.startsWith("tpa/")){const e=s.getCurrentItem();return void await i({currentItem:e,action:u})}if("nextDynamicPage"===u)return f(Mn(c()));if("previousDynamicPage"===u)return f(Fn(c()));if("applyUserInputFilters"===u)return l.refresh();if("resetUserFilter"===u)return l.resetUserInputFilters();const e=await Promise.resolve(s[u]());if(d&&d.navigate){const t=((e,t)=>e.fieldName?Aa(t,e.fieldName):e.linkObject?a.links.toUrl(e.linkObject):void 0)(d.navigate,e);o.navigateTo(t)}}catch(e){e instanceof P||n.log(new D(u+" operation failed:",{cause:e}))}}))}))};return{...dl(e),isValidConnection(){return pl(t)},bind(){const{events:o,behaviors:a}=t;o&&h(o),a&&(t=>{const{dispatcher:n,eventListeners:{register:o}}=r;t.forEach((t=>{let r=!1;switch(t.type){case"saveSuccessFeedback":o("beforeSave",(()=>e.hide())),o("afterSave",(()=>{e.show(),r=!0})),o("currentIndexChanged",(()=>{r?r=!1:e.hide()})),o("itemValuesChanged",(()=>e.hide()));break;case"saveFailureFeedback":o("beforeSave",(()=>e.hide())),o("currentIndexChanged",(()=>e.hide())),n.subscribe("datasetSaveError",(()=>e.show()))}}))})(a),n.log(new d(Ge.types.COMPONENT.BOUND,{component:e,description:Ma(t)}))},clear(){const{getFieldType:n}=r,{properties:o}=t;(0,Xe.forEach)(o,((t,r)=>{const o=n(t.fieldName).getOrElse(void 0),a=(e=>e===Fa?[]:void 0)(o);e.setValue(a,{propPath:r,fieldType:o,binding:t})}))},async onRecordsLoaded(){const{behaviors:t}=e.connectionConfig;p(),t&&t.forEach((t=>{"saveSuccessFeedback"===t.type&&e.hide()}))},async onCurrentViewChanged(){p()},async onCurrentIndexChanged(){p()},async onCurrentRecordModified(e){p(e)}}};const hl=(e,t)=>{return r=e,n=t,Object.defineProperties({},{...Object.getOwnPropertyDescriptors(r),...Object.getOwnPropertyDescriptors(n)});var r,n},gl=e=>{const t={getValue(){return e.data},setValue(t){e.data=t},clear(){e.data=[]},onItemReady(t){e.onItemReady(t)},onItemRemoved(t){e.onItemRemoved(t)}};return hl(wl(e),t)},ml=e=>"onChange"in e&&("value"in e||"checked"in e),yl=(e,t)=>{const r=t.split("."),n=r.slice(0,-1),[o]=r.slice(-1);return{obj:n.length>0?(0,Xe.get)(e,n):e,prop:o}},vl=e=>{if(!e||!e.parent)return;const{parent:t}=e;return t.type===Ze.Repeater?gl(t):vl(t)},wl=e=>{const{connectionConfig:t,uniqueId:r,type:n,role:o,id:a}=e,i=!!e.hidden,s={id:r,connectionConfig:t,nickname:a,type:n,role:o,isInput:ml(e),parentRepeater:vl(e),getValue(t){let{propPath:r}=void 0===t?{}:t;if(r){const{obj:t,prop:n}=yl(e,r);return t[n]}},setValue(t,r){let{propPath:n,fieldType:o,binding:a}=void 0===r?{}:r;if(n){const{obj:r,prop:i}=yl(e,n);if(r[i]="reference"===o&&(e=>(0,Xe.isObject)(e)&&(0,Xe.has)(e,"_id"))(t)?t._id:t,j.features.linkTarget){const e=null==a?void 0:a.linkTarget;(e=>e===g.FieldType.url||e===g.FieldType.pageLink)(o)&&e&&(r.target=e)}}},setOptions(t){"options"in e&&(e.options=t)},hide(){e.hidden||null==e.hide||e.hide()},show(t){let{ignoreInitiallyHidden:r}=void 0===t?{ignoreInitiallyHidden:!1}:t;!e.hidden||r&&i||null==e.show||e.show()},clear(e){s.setValue(void 0,e)},get enabled(){return!("enabled"in e)||e.enabled},enable(){"enable"in e&&!s.enabled&&e.enable()},disable(){"disable"in e&&s.enabled&&e.disable()},isValid(){return!("validity"in e)||"object"!=typeof e.validity||e.validity.valid},updateValidityIndication(){"updateValidityIndication"in e&&e.updateValidityIndication()},resetValidityIndication(){"resetValidityIndication"in e&&e.resetValidityIndication()},onChange(e){s.on("onChange",e)},on(t,r){var n;null==(n=e[t])||n.call(e,r)}};return"placeholder"in e&&Object.defineProperty(s,"placeholder",{get(){return e.placeholder}}),s},Il=e=>{switch(e.role){case"textRole":return(e=>{const t={setValue(t,r){let{fieldType:n,propPath:o="text",binding:a}=void 0===r?{}:r;if(n===g.FieldType.url){const r=j.features.linkTarget&&(null==a?void 0:a.linkTarget)||"_blank";e.text="<a href="+t+' target="'+r+'" style="text-decoration: underline">'+t+"</a>";const{html:n}=e;return e.text="",void(e.html=(0,Xe.unescape)(n))}n!==g.FieldType.richText?e[o]=t:e.html=t},clear(t){let{fieldType:r}=void 0===t?{}:t;const n=r===g.FieldType.richText||r===g.FieldType.url?"html":"text";e[n]=""}};return hl(wl(e),t)})(e);case de:case Q:return gl(e);case se:return(e=>{const t={get nextEnabled(){return e.nextEnabled},set nextEnabled(t){e.nextEnabled=t},get previousEnabled(){return e.previousEnabled},set previousEnabled(t){e.previousEnabled=t},setValue(t){e.rows=t},getValue(){return e.rows},set rows(e){t.setValue(e)},get rows(){return e.rows},get columns(){return e.columns},clear(){e.rows=[],e.dataFetcher=void 0},set dataFetcher(t){e.dataFetcher=t},refresh(){return e.refresh()},onCellSelect(t){return e.onCellSelect(t)},onRowSelect(t){return e.onRowSelect(t)}};return hl(wl(e),t)})(e);case ue:return(e=>{const{logger:t}=j,r={isValid(t){const{connectionConfig:r,validity:n}=e;if(n.valid)return!0;if((0,Xe.some)((0,Xe.values)((0,Xe.omit)(n,["valid","valueMissing"])),(e=>e)))return!1;const o=(0,Xe.get)(r,"properties.value.fieldName")||"";return!(0,Xe.isEmpty)(Aa(t,o))},set fileType(t){e.fileType=t},get fileType(){return e.fileType},getValue(){return e.value},clear(){e.reset()},async uploadFiles(){return"function"!=typeof e.uploadFiles?(t.log(new D("uploadFiles API method is not supported by Platform")),e.startUpload().then((e=>[e]))):e.uploadFiles()}};return hl(wl(e),r)})(e);case we:return(e=>{const t=wl(e),r={setValue(r,n){r?t.setValue(r,n):e.clear()}};return hl(t,r)})(e);case re:return(e=>{e.clickAction&&(e.clickAction=e.clickAction);const t={setValue(t){e.items=t},getValue(){return e.items},clear(){e.items=[]},set currentIndex(t){try{e.galleryCapabilities.hasCurrentItem&&(e.currentIndex=t)}catch(e){}},get currentIndex(){return e.currentIndex},get clickAction(){return e.clickAction},onCurrentItemChanged(t){e.galleryCapabilities.hasCurrentItem&&e.onCurrentItemChanged((e=>{let{item:r,itemIndex:n}=e;return t(r,n)}))}};return hl(wl(e),t)})(e);case fe:return(e=>{const t={get currentPage(){return e.currentPage},set currentPage(t){e.currentPage=t},get totalPages(){return e.totalPages},set totalPages(t){e.totalPages=t},get nextEnabled(){return e.nextEnabled},set nextEnabled(t){e.nextEnabled=t},get previousEnabled(){return e.previousEnabled},set previousEnabled(t){e.previousEnabled=t},get navigationType(){return e.navigationType},set navigationType(t){e.navigationType=t},onNextClicked(t){e.onNextClicked(t)},onPreviousClicked(t){e.onPreviousClicked(t)}};return hl(wl(e),t)})(e);case ge:return(e=>{const t={setValue(t){e.location=t},getValue(){return e.location},clear(){e.markers=[]},set location(t){e.location=t},get location(){return e.location},set markers(t){e.markers=t},get markers(){return e.markers},setCenter(t){e.setCenter(t)}};return hl(wl(e),t)})(e);case Te:return(e=>{const t={setValue(t){e.value=t},getValue(){return e.value},clear(){e.value=[]},setBounds(t,r){e.min=t,e.max=r},getBounds(){return[e.min,e.max]}};return hl(wl(e),t)})(e);default:return wl(e)}},bl=e=>t=>{const r=[],n=[];(0,Xe.uniq)(t.map((e=>{let{role:t}=e;return t}))).forEach((t=>{if(t===ee){return void(e("@"+t)||[]).forEach((e=>e&&n.push(e)))}if(t===pe){const t=e("@pageRole")||[],[n]=Array.isArray(t)?t:[t],o=e("Document");if(o&&n){const e=new Proxy(o,{get(e,t){return"connectionConfig"===t?n.connectionConfig:"role"===t?pe:e[t]}});r.push(e)}return}(e("@"+t)||[]).forEach((e=>{e&&r.push(e)}))}));return{components:r.map((e=>Il(e))),detailsDatasetApis:n}},El=(e,t,r)=>{const{logger:n,errorReporting:o}=j,{getState:a,getFieldType:i,actions:s,modeIsLivePreview:c,PresetVerboseMessage:l}=r,u=r=>{Ei({currentRecord:Cn(a()),previousRecord:r,component:e,connectionConfig:t,modeIsLivePreview:c,getFieldType:i,logger:n,PresetVerboseMessage:l})},d=()=>{const t=s.isCurrentRecordPristine(a()),r=s.isCurrentRecordNew(a());t&&r&&e.resetValidityIndication()};return{...dl(e),isValidConnection(){return pl(t)},bind(){(()=>{const{id:r,role:n}=e,{properties:c}=t;e.onChange(o((e=>{const t=c.checked?"checked":"value",o=c[t].fieldName,l=Cn(a()),u=yi({value:e.target[t],currentValue:Aa(l,o),fieldType:i(o).getOrElse(void 0),fieldName:o,utils:{referenceFetcher:(e,t)=>s.fetchRecordById(e,t).getOrElse(e)},role:n});s.setFieldInCurrentRecordAndSynchronize(o,u,r)}),D.withMessage("Input adapter onChange - setting value to record failed")))})(),t.filters&&e.onChange(o(s.refresh,D.withMessage("Input adapter onChange - sync actions failed"))),n.log(new l(Ge.types.COMPONENT.BOUND,{component:e,description:Ma(t)}))},async onRecordsLoaded(){u(),d()},async onCurrentViewChanged(){u(),d()},async onCurrentIndexChanged(){u(),d()},async onCurrentRecordModified(e){u(e),d()}}},_l={start:0,end:0},Sl=(e,t)=>{let{valueField:r,labelField:n,dataTransformer:o}=t;const a=o(Aa(e,r));return{value:a,label:n?o(Aa(e,n)):a}},Rl=e=>(0,Xe.get)(e,"properties.value.fieldName")||"",Tl=()=>"bolt"===j.platform.settings.env.renderer,Cl=(e,t,r)=>{const{errorReporting:n}=j,{actions:o,recordStore:a,getState:i}=r,s=t.userInputFilter.fieldName;e.onChange(n((async()=>{const t=Un(i()),n=(c=i(),Wr.selectIsApplyUserInputFiltersActionBindingPresent(c.records));var c;if(t||n)return;await o.refresh();const l=a().fold((()=>{}),(e=>e.getDatasetSize().total));(e=>{let{state:t,numberOfResults:r,filteredBy:n,componentType:o,fieldType:a}=e;const{logger:i,platform:{settings:{env:{editor:s}}}}=j,c=gn(t),l=dn(t);l&&i.log(new Qn({id:s?366:371,collectionId:l,datasetMode:c,numberOfResults:r,filteredBy:n,componentType:o,fieldType:a}))})({filteredBy:s,numberOfResults:l,state:r.getState(),componentType:e.type,fieldType:r.getFieldType(s).getOrElse(void 0)})}),D.withMessage("Filter input adapter onChange failed")))},Ol=(e,t,r)=>{const{i18n:n}=j,{getState:o}=r,a=t=>{const r=Array.isArray(e.getValue({propPath:t}))?[]:Oe;e.setValue(r,{propPath:t})};return{...dl(e),bind(){const{userInputFilter:i}=t;Cl(e,t,r);const{prop:s,fieldName:c}=i,l=(e=>{var t;return null==(t=Bn(o()))?void 0:t.find((t=>t.fieldName===e&&Pe.includes(t.role)))})(c);l&&(e.setOptions((e=>{let{component:t,prop:r,userFilterInitialData:o}=e;return[!Array.isArray(t.getValue({propPath:r}))&&{value:Oe,label:n.t("USER_INPUT_FILTER_OPTION_RESET_ALL")},...o.options.map((e=>({value:String(e),label:String(e)})))].filter(Boolean)})({component:e,prop:s,userFilterInitialData:l})),(e=>"placeholder"in e)(e)||a(s))},resetUserFilter(){const{userInputFilter:{prop:r}}=t;e.getValue({propPath:r})&&a(r)}}},Pl=new Map([[de,(e,t,r)=>{const{logger:n,errorReporting:o}=j,{controllerFactory:a,controllerStore:i,PresetVerboseMessage:s}=r,c=[],l=(t,r,n)=>{const o={repeaterId:e.id,itemId:r._id},s=a.createScopedDataset({datasetScope:o,fixedItem:r});i.setController(o,s);const l=bl(t.scoped),u=s.pageReady(l);c.push(u)},u=t=>{const r={repeaterId:e.id,itemId:t._id};i.removeController(r)},d=async()=>{const{actions:t,getState:o,modeIsLivePreview:a}=r,{items:i}=await t.fetchCurrentItems(o());a&&0===i.length||(n.log(new s(Ge.types.COMPONENT.FILLED,{component:e,description:{data:i}})),e.setValue(i),await Promise.all(c),c.splice(0))};return{...dl(e),bind(){e.onItemReady(o(l,D.withMessage("Repeater adapter onItemReady failed"))),e.onItemRemoved(o(u,D.withMessage("Repeater adapter onItemRemoved failed"))),n.log(new s(Ge.types.COMPONENT.BOUND,{component:e}))},async onRecordsLoaded(){return d()},async onCurrentViewChanged(){d()},async onCurrentIndexChanged(){},async onCurrentRecordModified(){const{getState:t}=r,n=Cn(t()),o=e.getValue();if(o&&o.length>0){const t=o.map((e=>e._id===n._id?n:e));e.setValue(t)}}}}],[Q,(e,t,r)=>{const{errorReporting:n}=j,{controllerFactory:o,controllerStore:a}=r,i=(t,r,n)=>{const i={repeaterId:e.id,itemId:r._id},s=o.createScopedDetailsDataset({datasetScope:i});a.setController(i,s);const c=bl(t.scoped);s.pageReady(c)},s=t=>{const r={repeaterId:e.id,itemId:t._id};a.removeController(r)};return{...dl(e),bind(){e.onItemReady(n(i,D.withMessage("Details repeater adapter onItemReady failed"))),e.onItemRemoved(n(s,D.withMessage("Details repeater adapter onItemRemoved failed")))}}}],[te,(e,t,r)=>{const{errorReporting:n}=j,{actions:o}=r;return{...dl(e),isValidConnection(){return pl(t)},bind(){e.onChange(n(o.refresh,D.withMessage("Filter input adapter onChange failed")))},resetUserFilter(){const t=bi(e);e.setValue((e=>{switch(e.type){case wi:return!1;case Ii:return"";default:return null}})(e),{propPath:t})}}}],[be,Ol],[Se,Ol],[_e,Ol],[Re,Ol],[Ee,(e,t,r)=>{const n=()=>{e.setValue(null,{propPath:"checked"})};return{...dl(e),bind(){Cl(e,t,r),n()},resetUserFilter(){n()}}}],[Te,(e,t,r)=>{const{getState:n}=r,o=r=>{let{firstRender:o}=r;const{userInputFilter:{fieldName:a}}=t,{min:i,max:s}=(t=>{var r;return null==(r=Bn(n()))?void 0:r.find((r=>r.fieldName===t&&r.role===e.role))})(a);o&&e.setBounds(i,s),e.setValue([i,s])};return{...dl(e),bind(){Cl(e,t,r),o({firstRender:!0})},resetUserFilter(){o({firstRender:!1})}}}],[se,(e,t,r)=>{const{logger:n,errorReporting:o}=j,{datasetApi:a,PresetVerboseMessage:i,getState:s,modeIsLivePreview:c,actions:l}=r;let u=_l;const d=e=>u=e,p=()=>d(_l),f=e=>{let{fetchRows:t,logGridValue:r,disableNavigation:n=!1}=e;return async(e,o)=>{const{items:a,datasetSize:i}=await t(e,o-e);return r(a),{pageRows:a,totalRowsCount:n?a.length:i.total}}},h=t=>{let{fetchRows:r,logGridValue:n}=t;return async t=>{let{direction:o,limit:a}=t,{start:i,end:s}=u;"previous"===o?(s=i,i-=a):(i=s,s+=a);const{items:c,datasetSize:l}=await r(i,s-i);return d({start:i,end:s}),e.nextEnabled=!!l.cursor||s<l.loaded,e.previousEnabled=i>0,n(c),{pageRows:c,totalRowsCount:l.total||void 0}}},g=t=>{const r=[],o=e.columns;(0,Xe.forEach)(t,(e=>{const t={};(0,Xe.forEach)(o,(r=>{t[r.label]=(0,Xe.get)(e,r.dataPath)})),r.push(t)})),n.log(new i(Ge.types.COMPONENT.FILLED,{component:e,description:r}))};return{...dl(e),bind(){l.getInitialData().chain((t=>{let{items:r}=t;e.rows=r}));const t=Cn(s());if(c&&!t)return;const r=l.isCursorPaging(),u="bolt"===j.platform.settings.env.renderer;e.dataFetcher=u?f({fetchRows:l.fetch,logGridValue:g,disableNavigation:r}):r?{type:"directional",value:h({fetchRows:l.fetch,logGridValue:g,component:e})}:{type:"pages",value:f({fetchRows:l.fetch,logGridValue:g})},e.onCellSelect(o((e=>{let{cellRowIndex:t}=e;a.setCurrentItemIndex(t)}),D.withMessage("Grid adapter onCellSelect failed"))),e.onRowSelect(o((e=>{let{rowIndex:t}=e;a.setCurrentItemIndex(t)}),D.withMessage("Grid adapter onRowSelect failed"))),(()=>{const t={};e.columns.forEach((e=>{let{label:r,dataPath:n,linkPath:o}=e;(n||o)&&(t[r]=Object.assign(n?{dataPath:n}:{},o?{linkPath:o}:{}))})),n.log(new i(Ge.types.COMPONENT.BOUND,{component:e,description:t}))})()},async onCurrentRecordModified(){e.refresh()},async onRecordsLoaded(){p(),e.refresh()},async onCurrentViewChanged(){p(),e.refresh()}}}],[ie,(e,t,r)=>{const{features:n,logger:o}=j,{actions:a,getFieldType:i,getSchema:s,PresetVerboseMessage:c}=r,l=async(e,t)=>(e=>{const t=e[0];return 1===e.length&&""===t.label&&""===t.value?[]:e})(await(async(e,t)=>{if(i(e).map((e=>"reference"===e)).getOrElse(!1))return s().chain((r=>{const n=uo(e,r);return s(n).map(po).map((async r=>{const{items:n}=await a.fetchAll(e),o=n.map((e=>Sl(e,{valueField:"_id",labelField:r,dataTransformer:t})));return(0,Xe.orderBy)(o,[e=>e.label.toLowerCase()])}))})).getOrElse(Promise.resolve([]));if(!n.dropdownOptionsDistinct){const{items:r}=await a.fetchAll(),n=r.map((r=>Sl(r,{valueField:e,dataTransformer:t})));return(0,Xe.uniqBy)(n,"value")}{const r=a.getUniqueFieldValues(e);if(r)return r.map((e=>{const r=t(e);return{value:r,label:r}}))}})(e,t)),u=async()=>{const{role:r}=e,{properties:n}=t,a=await l(n.value.fieldName,(e=>vi({value:e,role:r})));o.log(new c(Ge.types.COMPONENT.FILLED,{component:e,description:{options:a}})),e.setOptions(a)};return{...dl(e),isValidConnection(){return pl(t)},clear(){e.setOptions([])},bind(){(()=>{const{properties:r}=t,n={options:r.value.fieldName};o.log(new c(Ge.types.COMPONENT.BOUND,{component:e,description:n}))})()},async onRecordsLoaded(){u()},async onCurrentRecordModified(){u()}}}],[ve,(e,t,r)=>{const{logger:n}=j,{actions:o,PresetVerboseMessage:a,modeIsLivePreview:i}=r,s=async()=>{const{role:r}=e,{properties:{options:{fieldName:s}}}=t,{items:c}=await o.fetchAll(),l=c.reduce(((e,t)=>{const n=vi({value:Aa(t,s),role:r});return n&&e.push({value:n,label:n}),e}),[]);i&&0===l.length||(e.setOptions(l),n.log(new a(Ge.types.COMPONENT.FILLED,{component:e,description:{options:l}})))};return{...dl(e),isValidConnection(){return pl(t)},bind(){const{properties:{options:{fieldName:r}}}=t;n.log(new a(Ge.types.COMPONENT.BOUND,{component:e,description:{options:r}}))},clear(){e.setOptions([])},async onRecordsLoaded(){s()},async onCurrentRecordModified(){s()}}}],[ue,(e,t,r)=>{const{logger:n,errorReporting:o}=j,{actions:a,datasetApi:i,getState:s,getFieldType:c,PresetVerboseMessage:l}=r,u={},d=function(r){void 0===r&&(r=!1);const n=Cn(s()),o=Rl(t),i=a.isCurrentRecordNew(s()),c=(0,Xe.isEmpty)(Aa(n,o));(a.isCurrentRecordPristine(s())||r)&&e.clear(),!c||i&&!r||e.updateValidityIndication()};return{...dl(e),isValidConnection(){return pl(t)},bind(){if(vn(s()))return;const{id:r,role:d}=e,p=Rl(t),f=c(p).getOrElse(void 0);e.onChange(o((()=>{u[r]=!0}),D.withMessage("Upload button adapter onChange failed"))),i.onBeforeSave((()=>{if(u[r]&&e.getValue().length)return e.uploadFiles().then((e=>{u[r]=!1;const t=Cn(s()),n=yi({value:e,currentValue:Aa(t,p),fieldType:f,fieldName:p,role:d});a.setFieldInCurrentRecordAndSynchronize(p,n,r)})).catch((t=>{const r=e.getValue(),o=Array.isArray(r)&&1===r.length?r[0].name:"unknown";throw n.log(new x("The "+o+" file failed to upload. Please try again later.",{cause:t})),t}))})),c(p).map((t=>{switch(t){case"image":e.fileType="Image";break;case"document":e.fileType="Document"}}));const{properties:h}=t;(0,Xe.forEach)(h,((t,r)=>{let{fieldName:o}=t;n.log(new l(Ge.types.COMPONENT.BOUND,{component:e,description:{[r]:o}}))}))},async onCurrentRecordModified(r){const{id:n}=e,o=Rl(t),a=Cn(s()),i=Na({previousRecord:r,currentRecord:a,fieldName:o});i&&(u[n]=!1),d(i)},async onRecordsLoaded(){d()},async onCurrentViewChanged(){d()},async onCurrentIndexChanged(){d()}}}],[re,(e,t,r)=>{const{logger:n,errorReporting:o}=j,{actions:a,getState:i,getFieldType:s,modeIsLivePreview:c,wixFormatter:l,PresetVerboseMessage:u}=r,d=(e,t,r,n)=>{(0,Xe.forEach)(r,((r,o)=>{let{fieldName:a,format:i}=r;const c=vi({value:Aa(t,a),role:n,fieldType:s(a).getOrElse(void 0),propPath:o,format:i,utils:{formatter:l}});e[o]=c}))},p=()=>{e.currentIndex=Fs({state:i()})},f=async()=>{const{role:r}=e,{properties:o}=t,{items:s}=await a.fetchCurrentItems(i());try{const t=s.map((e=>{const t={};return d(t,e,o,r),t})),a=t.every((e=>{let{src:t}=e;return!t}));if(c&&a)return;n.log(new u(Ge.types.COMPONENT.FILLED,{component:e,description:t})),e.setValue(t)}catch(e){if("URIError"!==e.name)throw e}p()};return{...dl(e),isValidConnection(){return pl(t)},bind(){e.onCurrentItemChanged(o((()=>{a.setCurrentIndex(e.currentIndex)}),D.withMessage("Gallery adapter onItemReady failed"))),(()=>{const{properties:r}=t,o={};(0,Xe.forEach)(r,((e,t)=>{let{fieldName:r}=e;o[t]=r})),n.log(new u(Ge.types.COMPONENT.BOUND,{component:e,description:o}))})()},async onCurrentRecordModified(){const{role:r}=e,{properties:n}=t,o=Cn(i()),a=Fs({state:i()}),s=e.getValue()||[],c=s[a];c&&d(c,o,n,r),e.setValue(s),p()},async onRecordsLoaded(){f()},async onCurrentViewChanged(){f()},async onCurrentIndexChanged(){p()}}}],[fe,(e,t,r)=>{const{logger:n,errorReporting:o}=j,{actions:a,getState:i,PresetVerboseMessage:s}=r,c=()=>{const t=a.isCursorPaging();Tl()&&t||(t?(()=>{const t=Ls({state:i()});e.nextEnabled=a.hasNextPage(i()),e.previousEnabled=t>1})():(()=>{const t=Ls({state:i()}),r=a.getTotalPageCount(i());e.currentPage=t,r<1?e.disable():(e.enable(),e.totalPages=r)})())};return{...dl(e),bind(){const t=e=>{let{delta:t,index:r}=e;const n=Ls({state:i()}),o=t?n+t:r,s=As({state:i()}),l=c?o:(0,Xe.clamp)(o,1,a.getTotalPageCount(i()));a.setCurrentIndex(((e,t)=>t*(e-1))(l,s))},r=Tl(),c=a.isCursorPaging();r&&c?(e.currentPage=1,e.disable()):c?(e.navigationType="arrowsOnly",e.onNextClicked(o((()=>t({delta:1})),D.withMessage("Pagination adapter onNextClicked failed"))),e.onPreviousClicked(o((()=>t({delta:-1})),D.withMessage("Pagination adapter onPreviousClicked failed")))):e.onChange(o((e=>t({index:e.target.currentPage})),D.withMessage("Pagination adapter onChange failed"))),n.log(new s(Ge.types.COMPONENT.BOUND,{component:e}))},async onRecordsLoaded(){c()},async onCurrentViewChanged(){c()}}}],[ge,(e,t,r)=>{const{logger:n}=j,{actions:o,getState:a,getFieldType:i,wixFormatter:s,PresetVerboseMessage:c}=r,l=function(e,t,r){return void 0===t&&(t={}),(0,Xe.reduce)(t,((t,n,o)=>{let{fieldName:a,format:c}=n;const l=Aa(e,a);if("address"===o)return Object.assign(t,{address:(0,Xe.get)(l,"formatted"),location:(0,Xe.get)(l,"location")});if("link"===o&&(0,Xe.isEmpty)(l))return t;const u=vi({value:Aa(e,a),role:r,fieldType:i(a).getOrElse(void 0),propPath:o,format:c,utils:{formatter:s}});return Object.assign(t,{[o]:u})}),{})},u=async()=>{const{role:r}=e,{properties:i}=t;try{const{items:t}=await o.fetchCurrentItems(a());e.markers=t.map((e=>l(e,i,r)))}catch(e){n.log(new D("Failed setting markers",{cause:e}))}};return{...dl(e),isValidConnection(){return pl(t)},bind(){(()=>{const{properties:r}=t,o={};(0,Xe.forEach)(r,((e,t)=>{let{fieldName:r}=e;o[t]=r})),n.log(new c(Ge.types.COMPONENT.BOUND,{component:e,description:o}))})()},async onRecordsLoaded(){u()},async onCurrentViewChanged(){u()},async onCurrentIndexChanged(){const t=Fs({state:a()});e.setCenter((0,Xe.get)(e,["markers",t,"location"]))},async onCurrentRecordModified(){const{properties:r}=t,{role:n}=e,o=Cn(a()),i=Fs({state:a()});e.markers[i]=l(o,r,n),e.setCenter((0,Xe.get)(e,["markers",i,"location"]))}}}]]),Dl=e=>{let{components:t,context:r}=e;const n=(e=>{let{recordStore:t,dispatch:n}=e;const a={fetchRecordById:(e,r)=>t(r).fold((()=>Ye.Maybe.Nothing()),(t=>t.getRecordById(e))),fetchAll:e=>(async(e,t,r,n)=>{const o=await e(n).fold((()=>Qi.Empty()),(e=>e.externalApi.getRecordsLimitedByMaxPageSize(t,r)));return o.get()})(t,0,1e3,e),fetchCurrentItems:e=>nc(t,e).catch((()=>Qi.Empty().get())),fetchOne:()=>rc(t,0,1),fetch:(e,r,n)=>rc(t,e,r,n),getTotalPageCount:e=>ks({state:e,recordStore:t}),getInitialData:()=>t().fold((()=>Qi.Empty()),(e=>e.externalApi.getSeedRecords())),setCurrentIndex:(e,t)=>n(Zs(e,t)),setFieldInCurrentRecordAndSynchronize:(e,t,r)=>{n(Qs({[e]:(0,Xe.cloneDeep)(t)},r))},refresh:()=>n(tc()),resetUserInputFilters:()=>{const e=o.filter((e=>{let{role:t}=e;return t===te||Ce.includes(t)})),t=Un(r.getState());e.length&&(e.forEach((e=>e.resetUserFilter())),t||a.refresh())},isCurrentRecordNew:e=>t().fold((()=>!1),(t=>t.isNewRecord(Fs({state:e})))),isCurrentRecordPristine:e=>t().fold((()=>!1),(t=>t.isPristine(Fs({state:e})))),isCursorPaging:()=>xs({recordStore:t}),hasNextPage:e=>Bs({state:e,recordStore:t}),getUniqueFieldValues:e=>t().fold((()=>!1),(t=>t.getUniqueFieldValues(e)))};return a})(r),o=t.map((e=>((e,t,r)=>(Pl.get(e.role)||(e.isInput?El:fl))(e,t,r))(e,ul(e.connectionConfig,r.getFieldType),{...r,actions:n}))).filter((e=>e.isValidConnection()));return{bindAll:async()=>Promise.all(o.map((e=>(e.bind(),e.onRecordsLoaded())))),hideAll:()=>o.map((e=>e.hide())),showAll:()=>o.map((e=>e.show({ignoreInitiallyHidden:!0}))),clearAll:()=>o.map((e=>e.clear())),onRecordsLoaded:()=>o.map((e=>e.onRecordsLoaded())),onCurrentViewChanged:()=>o.map((e=>e.onCurrentViewChanged())),onCurrentIndexChanged:()=>o.map((e=>e.onCurrentIndexChanged())),onCurrentRecordModified:(e,t)=>o.filter((e=>{let{id:r}=e;return!t||t!==r})).map((t=>t.onCurrentRecordModified(e)))}},xl=e=>{let{datasetId:t,masterIds:r,connectionsGraph:n}=e;const o=e=>n[t].includes(e.id)?"PRIMARY":r.some((t=>n[t].includes(e.id)))?"DETAILS":"OTHER";return{isInsidePrimaryOrDetailsRepeater:e=>{let{parentRepeater:t}=e;return!!(r=t)&&["PRIMARY","DETAILS"].includes(o(r));var r},getDetailsRepeaters:e=>{const t=[];return e.forEach((e=>{let{parentRepeater:r}=e;r&&"DETAILS"===o(r)&&t.push(new Proxy(r,{get(e,t){return"role"===t?Q:e[t]}}))})),(0,Xe.uniqBy)(t,"uniqueId")}}},Al="mediaGalleryRole",Nl=[g.FieldType.text,g.FieldType.number,g.FieldType.image,g.FieldType.video,g.FieldType.mediaGallery,g.FieldType.richContent],Ml={[g.FieldType.text]:"text",[g.FieldType.number]:"number",[g.FieldType.image]:"image",[g.FieldType.video]:"video",[g.FieldType.mediaGallery]:"gallery",[g.FieldType.richContent]:"rich-content"},Fl=e=>{var t;let{recordStore:r,state:n,schema:o,connections:a,isDpItemDataset:i}=e;if(!i&&!a.length)return{collectionData:void 0};const s=Cn(n);if(!s)return{collectionData:void 0};const{id:c,displayName:l,displayField:u,fields:d}=o,p=i&&u?s[u]:void 0,f=i?1:null!=(t=(e=>{let{recordStore:t}=e;const r=Us({recordStore:t});return r?r.total:null})({recordStore:r}))?t:void 0;return{title:p,collectionData:{id:c,name:l||c,totalCount:f,fields:Ll({connections:a,fields:d,currentRecord:s}),primary:i}}},Ll=e=>{let{connections:t,fields:r,currentRecord:n}=e;const o=t.reduce(kl,{});return Object.entries(r).filter((e=>{let[t,r]=e;return!r.pii&&!r.isDeleted&&Nl.includes(r.type)})).map((e=>{var t;let[r,a]=e;return{key:r,type:Ml[a.type],label:a.displayName,connected:!(null==(t=o[r])||!t.length),value:Ul({key:r,field:a,currentRecord:n,connections:o[r]||[]})}}))},Ul=e=>{let{key:t,field:r,currentRecord:n,connections:o}=e;const{type:a}=r,i=n[t];switch(a){case g.FieldType.image:return i&&jl({src:i},o);case g.FieldType.video:return i&&Vl({src:i},o);case g.FieldType.mediaGallery:return Wl(i,o);case g.FieldType.text:case g.FieldType.number:case g.FieldType.richContent:return i;default:throw new Error("Unsupported field type: "+a)}},kl=(e,t)=>{var r;const n=(null==t||null==(r=t.config)?void 0:r.properties)||{};return Object.values(n).map((e=>{let{fieldName:t}=e;return t})).forEach((r=>{e[r]||(e[r]=[]),e[r].push(t)})),e},jl=(e,t)=>{let{src:r}=e;const n=t.some((e=>{var t,r,n;let{role:o,config:a}=e;return o===Al&&Boolean(null==a||null==(t=a.properties)?void 0:t.items)||"galleryRole"===o&&Boolean(null==a||null==(r=a.properties)?void 0:r.src)||"imageRole"===o&&Boolean(null==a||null==(n=a.properties)?void 0:n.src)}));return{url:r,...Gl(r),connectedToSrc:n}},Vl=(e,t)=>{let{src:r,title:n,description:o}=e;const a=t.some((e=>{var t,r,n;let{role:o,config:a}=e;return o===Al&&Boolean(null==a||null==(t=a.properties)?void 0:t.items)||"videoPlayerRole"===o&&Boolean(null==a||null==(r=a.properties)?void 0:r.src)||"videoRole"===o&&Boolean(null==a||null==(n=a.properties)?void 0:n.src)}));if(!zl(r))return{thumbnailUrl:void 0,title:n,description:o,uploadDate:void 0,connectedToSrc:a};const[i,s]=r.match(/posterUri=(\w+)/)||[],[c,l]=r.match(/posterWidth=(\d+)/)||[],[u,d]=r.match(/posterHeight=(\d+)/)||[];return{thumbnailUrl:Bl({uri:s,width:Number(l),height:Number(d)}),title:n,description:o,uploadDate:void 0,connectedToSrc:a}},Wl=function(e,t){return void 0===e&&(e=[]),e.map((e=>"image"===e.type?jl(e,t):Vl(e,t)),t)},Gl=e=>{if(!ql(e))return{height:void 0,width:void 0};const[t,r]=e.match(/originHeight=(\d+)/)||[],[n,o]=e.match(/originWidth=(\d+)/)||[];return{height:r?Number(r):void 0,width:o?Number(o):void 0}},Bl=e=>{let{uri:t,width:r,height:n,filename:o="image.ext"}=e;return"wix:image://v1/"+t+"/"+o+"#originWidth="+r+"&originHeight="+n},ql=e=>e.startsWith("wix:image://"),zl=e=>e.startsWith("wix:video://");var $l=(e,t)=>r=>{let{shouldCollectSeoData:n,controllerConfig:o,datasetType:a,connections:i,connectionsGraph:s,isScoped:c,datasetScope:l,dataProvider:u,dependencyManager:d,seoManager:p,firePlatformEvent:f,dynamicPagesData:h,datasetId:g,fixedRecordId:m,recordStoreService:y,updatedCompIds:v,markControllerAsRendered:w,markDatasetDataFetched:I,renderingRegularControllers:b,modeIsLivePreview:E,modeIsSSR:_,useLowerCaseDynamicPageUrl:S,schemasLoading:R,listenersByEvent:T}=r;const C=i.filter((e=>!(e=>{let{role:t}=e;return Ce.includes(t)})(e)||e.config)),O=!!m,{logger:P,platform:{user:x,settings:{locale:A,env:{renderer:N}},timers:{queueMicrotask:M}}}=j,{setConnectedComponents:F,getConnectedComponents:L}=(()=>{let e;return{setConnectedComponents:t=>e=t,getConnectedComponents:()=>e}})(),U=[],{store:k,subscribe:V,onIdle:W}=dc(P,g),G=xc(f),{fireEvent:B,register:z}=G;U.push(G.dispose);const H=new q({datasetId:ol(g),scopedDatasetId:c?g:void 0,getState:k.getState,getSchema:function(e){return void 0===e&&(e=ee),u.getSchema(e)}}),X=H.subscribe(T);U.push(...X),k.dispatch(_r({controllerConfig:o,connections:C,isScoped:c,datasetType:a}));const{datasetIsVirtual:Y,datasetIsReal:J,datasetIsDeferred:K,datasetIsWriteOnly:Z,datasetIsRouter:Q,datasetCollectionName:ee,dynamicPageNavComponentsShouldBeLinked:te}=(re=k.getState(),{datasetIsRouter:bn(re),datasetIsMaster:En(re),datasetIsVirtual:_n(re),datasetIsReal:Sn(re),datasetIsDeferred:Rn(re),datasetIsWriteOnly:wn(re),datasetCollectionName:dn(re),dynamicPageNavComponentsShouldBeLinked:Tn(re)});var re;const ne=pn(k.getState()),oe=fn(k.getState()),ae=function(e){return void 0===e&&(e=ee),Ye.Maybe.fromNullable(u.getSchema(e))},ie=e=>{const t=ae(ee),r=u.getReferencedSchemas(ee);return t.chain((t=>Ye.Maybe.fromNullable(lo(t,r)(e))))},se=((e,t,r)=>({dataBinding:Ta(e),currentUser:Ra(),userInput:_i({getConnectedComponents:t,getFieldType:r})}))((e=>d.getDependencyById(e,l)),L,ie),ce=Oi({valueResolvers:se,getConnectedComponents:()=>yn(k.getState())?L():[],getFieldType:ie,wasSetFilterCalled:(0,Xe.flow)((e=>k.getState()),Un)}),le=(e=>{let{recordStoreService:t,getFilter:r,getSort:n,getPageSize:o,datasetId:a,filterResolver:i,getSchema:s,fixedRecordId:c}=e;return e=>{const l=o();return t.chain((t=>{if(e)return Ye.Result.fromMaybe(s().map((t=>uo(e,t))),"cannot resolve referenced collection name for field "+e).map((e=>t({pageSize:l,sort:null,filter:null,datasetId:a,referencedCollectionName:e,fixedRecordId:c})));{const e=r();return Ye.Result.fromMaybe(i(e).map((e=>t({pageSize:l,sort:n(),filter:e,datasetId:a,referencedCollectionName:null,fixedRecordId:c}))),"could not resolve dynamic filter")}}))}})({recordStoreService:y,getFilter:(0,Xe.flow)((e=>k.getState()),pn),getSort:(0,Xe.flow)((e=>k.getState()),fn),getPageSize:()=>As({state:k.getState()}),datasetId:g,filterResolver:ce,getSchema:ae,fixedRecordId:m}),de=te?(e=>{let{dataProvider:t,dynamicPagesData:r,collectionName:n,useLowerCaseDynamicPageUrl:o}=e;return{getNextDynamicPageUrl:()=>Hc({dataProvider:t,dynamicPagesData:r,collectionName:n,directionTowardSibling:"asc",useLowerCaseDynamicPageUrl:o}),getPreviousDynamicPageUrl:()=>Hc({dataProvider:t,dynamicPagesData:r,collectionName:n,directionTowardSibling:"desc",useLowerCaseDynamicPageUrl:o})}})({dataProvider:u,dynamicPagesData:h,collectionName:ee,useLowerCaseDynamicPageUrl:S}):null;let pe,fe;te&&(V($c(de)),k.dispatch(ac(C)));const he=new Promise(((e,t)=>{pe=e,fe=t})),ge=c?void 0:()=>he;c||z("datasetReady",pe);const me=Dc({store:k,recordStore:le,eventListeners:G,controllerStore:t,datasetId:g,datasetType:a,isFixedItem:O,siblingDynamicPageUrlGetter:de,onIdle:W,dispatcher:H,onReadyAsync:ge}),ye=me(!1);U.push(y.map((e=>e.onChange(al(k.getState,k.dispatch)))).getOrElse((()=>{})));const{fetchingInitialData:ve,resolveUserInputDependency:Ie}=Qc({dependencyManager:d,shouldFetchInitialData:o&&!Z,recordStore:le,store:k,filter:ne,sort:oe,datasetIsDeferred:K,modeIsSSR:_,queueMicrotask:M,datasetIsReal:J,collectionId:ee,filterResolver:ce,getSchema:ae,schemasLoading:R});ve.then((()=>{I();const e=le().fold((()=>{}),(e=>e.getSeedRecords().matchWith({Empty:()=>{},Results:e=>{let{items:t}=e;return t[0]}})));e&&k.dispatch(oc.setCurrentRecord(e,0))}));c&&!O&&d.getDependenciesByFilter(ne,l).forEach((e=>{let{masterDataset:{api:t}}=e;il({detailsDatasetApis:[ye],store:k,masterDatasetApi:t,controllerConfig:o,unsubscribeHandlers:U})}));n&&J&&!K&&Promise.all([ve,R]).then((()=>{let e={};try{e=Fl({isDpItemDataset:Q,recordStore:le,state:k.getState(),schema:u.getSchema(ee),connections:C})}catch(e){P.log(new D("Failed to extract seo data for dataset "+g,{cause:e}))}p.submitSeoData(e)}));const be=async function(r){x.onLogin((()=>{(()=>{const e=Fs({state:k.getState()}),t=le().fold((()=>!1),(t=>t.isPristine(e)));return t&&!Z})()&&ye.refresh()}));const{components:n,detailsDatasetApis:i}=r(C),c=rl({updatedCompIds:v,datasetIsReal:J,connectionsGraph:s,components:n});F(c);const l=((e,t)=>{let{datasetId:r,connectionsGraph:n,datasetIsReal:o,getDependencies:a}=t;if(!o)return e;const{isInsidePrimaryOrDetailsRepeater:i,getDetailsRepeaters:s}=xl({datasetId:r,connectionsGraph:n,masterIds:a().map((e=>e.masterDatasetId))}),c=e.filter((e=>!i(e)));return c.push(...s(e)),c})(c,{datasetId:g,datasetIsReal:J,connectionsGraph:s,getDependencies:()=>d.getDependenciesByFilter(ne)});if(il({detailsDatasetApis:i,masterDatasetApi:ye,dependencyManager:d,controllerConfig:o,unsubscribeHandlers:U}),J&&await R,Ie(),!mn(k.getState())||!u.hasSchema(o.dataset.collectionName))return ve.then((()=>{w(),d.resolveDependants(g),k.dispatch(cc(!0)),B("datasetReady")})),Promise.resolve();const p=Dl({components:l,context:{connections:C,recordStore:le,dispatch:k.dispatch,getState:k.getState,datasetApi:ye,eventListeners:G,dispatcher:H,getFieldType:ie,getSchema:ae,controllerFactory:e,controllerStore:t,PresetVerboseMessage:Ge.with({collectionId:ee}),modeIsLivePreview:E,wixFormatter:_&&"bolt"===N||!A?null:jc()({locale:A})}});V(((e,t,r,n,o,a,i,s)=>{const c=Gc(e,t,r,n,o,a,i,s),l=e=>{let{from:t,to:r,hasChanged:n,hasChangedToFalse:o,hasChangedToTrue:a,hasChangedToMatch:i}=e;const s=On(r),l=On(t),u=Dn(r),d=kn(r),p=[];return(i(Dn,(e=>e>=0&&e!==s))||a(kn))&&p.push(c.goToRecordByIndex(l,u,d)),(n(On)&&l>=0||o(Ln)&&0===s)&&p.push(c.notifyIndexChange(s)),p},u=e=>{let{from:t,to:r,hasChanged:n,hasChangedToMatch:o,hasChangedToTrue:a}=e;const i=On(r),s=Cn(r),l=Cn(t),u=[];Hi(l,s)?(0,Xe.isEqual)(l,s)||(u.push(c.updateComponents(An(r),l)),u.push(c.fireEvent("itemValuesChanged",(0,Xe.cloneDeep)(l),(0,Xe.cloneDeep)(s)))):null==l||null==s||n(On)||u.push(c.updateComponents());const d=xn(r);return o(xn,(e=>null!=e))&&u.push(c.setFieldsInCurrentRecord(d,i,An(r))),a(Wn)&&u.push(c.revertChanges(i,Pn(r))),a(Vn)&&u.push(c.removeCurrentRecord(i)),u},d=e=>{let{to:t,hasChanged:r,hasChangedToFalse:n,hasChangedToTrue:o}=e;const a=[];return r(Bc)&&a.push(c.refresh(On(t),Pn(t),wn(t))),r(hn)&&a.push(c.notifyRecordSetLoaded()),o(Ln)&&a.push(c.refresh(On(t),Pn(t),wn(t))),n(Ln)&&a.push(c.notifyRecordSetLoaded()),o(jn)&&a.push(c.updateCurrentView()),a},p=e=>{let{from:t,to:r,hasChangedToTrue:n}=e;const o=On(r),a=Cn(r);if(n(Gn))return c.saveRecord(o,a)},f=e=>{let{from:t,to:r,hasChangedToNotNull:n}=e;const o=[];return n(Nn)&&o.push(c.newRecord(Nn(r),Pn(r))),o};return e=>(0,Xe.flatten)([l,u,d,p,f].map((t=>t(e))))})(le,p,ie,G.executeHooks,g,l,B,H)),U.push(((e,t,r,n,o)=>Uc(e,t,r,n,o))(k,l,P,g,le));const f=el(l.filter((e=>{let{role:t}=e;return![ue,we].includes(t)})));k.dispatch(oc.setDefaultRecord(f)),Z&&await k.dispatch(oc.initWriteOnly(Y)),K&&(p.hideAll(),_&&p.clearAll());const h=ve.then((async()=>{if(K&&await b,!_)try{((e,t,r,n,o)=>{if(n)return;const a=dn(e);if(!a)return;const i=gn(e),s=!!Cn(e),{logger:c,platform:{settings:{env:{editor:l}}}}=j;s&&[qn,zn].includes(i)&&t.find((e=>{let{role:t,config:r}=e;return He(t,r)}))&&c.log(new Qn({id:l?153:152,collectionId:a,datasetId:o,datasetType:r,datasetMode:i})),vt(gn(e),t)&&c.log(new Qn({id:l?157:156,collectionId:a,datasetId:o,datasetType:r,datasetMode:i}))})(k.getState(),C,a,Y,g)}catch(e){P.log(new D("Failed to report dataset active BI",{cause:e}))}await p.bindAll(),J&&await(e=>Promise.all(e.getAll().map((e=>new Promise((t=>{e.staticExports.onReady(t)}))))))(t),K&&p.showAll(),d.resolveDependants(g),k.dispatch(cc(!0)),B("datasetReady")}));return K?(w(),Promise.resolve()):(h.then(w),h)},Ee=me(!0),_e=Y?be:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return P.log(new ke("dataset/pageReady",(()=>be(...t))))};return{pageReady:$(_e,(e=>(fe(),P.logError(e,"Dataset pageReady callback failed",{datasetId:g})))),exports:e=>e.type===Js.l.COMPONENT?Ee.inScope(e.compId,e.additionalData.itemId):Ee,staticExports:Ee,dispose:()=>{U.forEach((e=>e()))},api:ye}};var Hl=(e,t)=>{const r=Ys(e),n={createRealDataset:()=>o({...t,isScoped:!1}),createScopedDetailsDataset:e=>{let{datasetScope:r}=e;return o({...t,isScoped:!0,firePlatformEvent:Xe.noop,datasetId:nl(t.datasetId,r),datasetScope:r})},createScopedDataset:e=>{let{datasetScope:r,fixedItem:n}=e;const{dataProvider:a,controllerConfig:i,dynamicPagesData:s}=t,c=(0,Xe.cloneDeep)(i),l={items:[n]};c.dataset.filter=a.createSimpleFilter("_id",n._id);const{collectionName:u}=i.dataset;return a.setCollectionData({collectionId:u,data:l}),o({...t,isScoped:!0,controllerConfig:c,firePlatformEvent:Xe.noop,dynamicPagesData:s,datasetId:nl(t.datasetId,r),fixedRecordId:r.itemId})}},o=$l(n,r);return n};const Xl=e=>Di(e).map((e=>{let{filterExpression:{filterId:t}}=e;return t}));var Yl=a(9025);function Jl(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var Kl=new WeakMap;class Zl{constructor(){Jl(this,Kl,{writable:!0,value:void 0}),u()(this,Kl,new Map)}get datasetConfigs(){return c()(this,Kl)}}function Ql(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var eu=new WeakMap,tu=new WeakMap,ru=new WeakMap,nu=new WeakMap,ou=new WeakMap,au=new WeakMap,iu=new WeakMap;class su{constructor(e){let{platform:t,dataFetcher:r,warmupCache:n,staticCache:o,features:a,listenersByEvent:i,logger:s,i18n:c,global:l}=e;Ql(this,eu,{writable:!0,value:void 0}),Ql(this,tu,{writable:!0,value:void 0}),Ql(this,ru,{writable:!0,value:void 0}),Ql(this,nu,{writable:!0,value:void 0}),Ql(this,ou,{writable:!0,value:void 0}),Ql(this,au,{writable:!0,value:void 0}),Ql(this,iu,{writable:!0,value:void 0});const d=new Yn(s,l);V({platform:t,features:a,dataFetcher:r,i18n:c,appState:new Zl,logger:d,errorReporting:Jn(d),breadcrumbReporting:Kn(d),verboseReporting:Zn(d)}),u()(this,eu,new ma),u()(this,tu,n),u()(this,ru,o),u()(this,nu,a),u()(this,au,d),u()(this,iu,{}),u()(this,ou,i)}initializeDatasets(e){let{datasetConfigs:t,firePlatformEvent:r}=e;try{return c()(this,au).log(new ke("databinding/createControllers",(()=>this._initializeDatasets({datasetConfigs:t,firePlatformEvent:r}))))}catch(e){return c()(this,au).logError(e,"Datasets initialisation failed"),[]}}_initializeDatasets(e){let{datasetConfigs:t,firePlatformEvent:r}=e;const{platform:{settings:{mode:{name:n,csr:o,ssr:a},env:{livePreview:i,live:s}},seo:l,location:u},features:d}=j,p=ki(t),f=this._updateDatasetConfigsState(p),h=c()(this,nu).warmupData,g=[],m=[],{resolve:y,promise:v}=new z;c()(this,eu).setSchemas({...h&&o&&c()(this,tu).getSchemas()||{},...c()(this,ru).getSchemas()||{}});const w=c()(this,au).log(new ke("databinding/loadSchemas",(()=>c()(this,eu).loadSchemas(cu(p)).then((()=>h&&a&&c()(this,tu).setSchemas(c()(this,eu).getSchemas()))))));c()(this,eu).setDatasetConfigs(p.map((e=>{let{config:{dataset:{collectionName:t}},compId:r,type:n}=e;return{collectionId:t,datasetId:r,type:n}})));const I=o&&h&&c()(this,tu).getDataStore();I&&c()(this,eu).setStore(yu(I));const b=c()(this,ru).getDataStore();b&&c()(this,eu).setStaticStore(yu(b)),c()(this,eu).createInitialDataRequest(this._getInitialDataRequestConfigs(p,f));const E=p.reduce(((e,t)=>{let{compId:r,connections:n}=t;return e[r]=n.map((e=>{let{compId:t}=e;return t})),e}),{}),_=(e=>{let{datasetConfigs:t}=e;const r={},n={},o=(e,t)=>{const o=n[e];if(!o)return;const a=r[o.masterDatasetId];return a?{...o,masterDataset:t?{...a,api:a.api.inScope(t.repeaterId,t.itemId)}:a}:o};return t.forEach((e=>{let{id:t,connections:r}=e;r.forEach((e=>{let{role:r,config:o}=e;r===ee&&Object.entries(o.filters).forEach((e=>{let r,[o,{fieldName:a}]=e;n[o]={id:o,fieldName:a,masterDatasetId:t,isResolved:!1,promise:new Promise((e=>r=e)),resolve:()=>{n[o].isResolved=!0,r()}}}))}))})),{resolveDependants:e=>Object.values(n).forEach((t=>{let{id:r,masterDatasetId:o}=t;e===o&&n[r].resolve()})),getDependencyResolutionPromise:e=>{const t=Xl(e).flatMap((e=>n[e]&&!n[e].isResolved?[n[e].promise]:[]));return t.length>0?Promise.all(t):void 0},getDependencyById:o,getDependenciesByFilter:(e,t)=>Xl(e).flatMap((e=>o(e,t)||[])),registerDataset:e=>{let{id:t,api:n,config:o}=e;r[t]={id:t,api:n,config:o}}}})({datasetConfigs:p}),S=p.some((e=>{let{type:t,dynamicPageData:r}=e;return t===Br&&!(null==(n=null==r?void 0:r.dynamicUrl)||!n.match(/\{.+\}/));var n})),R=d.seoIntegration&&a&&s&&S,T=R?(e=>{let{seo:t,pageUrl:r}=e;const{logger:n}=j;let o;const a={title:void 0,pageUrl:r,collections:[]};return{submitSeoData:e=>{let{title:t,collectionData:r}=e;o||(t&&(a.title=t),r&&a.collections.push(r))},renderSeoTagsOnce:()=>(o||(o=t.renderSEOTags({itemType:Yl.ITEM_TYPES.WIX_DATA_PAGE_ITEM,itemData:a}).catch((e=>{n.log(new D("Failed to render seo tags",{cause:e}))}))),o)}})({seo:l,pageUrl:u.pageUrl}):null,C=p.map((e=>{let{type:t,config:o,connections:s,compId:l,livePreviewOptions:{shouldFetchData:u,compsIdsToReset:d=[]}={},dynamicPageData:p}=e;const{datasetIsRouter:f,datasetIsDeferred:h}=o.datasetStaticConfig;c()(this,au).log(new je({category:"createControllers",message:"warmup data contents",data:{datasetId:l,datasetType:t,mode:n,warmupData:Boolean(I)}}));const y=(e=>{let{primaryDatasetId:t,recordStoreCache:r,refreshStoreCache:n,dataProvider:o,controllerConfig:a}=e;return Ye.Result.fromNullable(a,"missing controller configuration").chain((e=>{let{dataset:t}=e;return Ye.Result.fromNullable(t,"controller configuration is missing dataset object")})).chain((e=>{let{collectionName:t}=e;return Ye.Result.fromNullable(t,"dataset is not connected to a collection")})).map((e=>{const i=(0,Xe.get)(a,["dataset","includes"]),s=(0,Xe.get)(a,["dataset","nested"]),c=(0,Xe.get)(a,["dataset","cursor"]),l=(0,Xe.get)(a,["dataset","readWriteType"]),u=(0,Xe.get)(a,["dataset","uniqueFieldValues"]);return Xs({primaryDatasetId:t,recordStoreCache:r,refreshStoreCache:n,dataProvider:o,mainCollectionName:e,includes:i,nestedFieldKeys:s,uniqueFieldValues:u,readWriteType:l,cursorPagingRequired:c})}))})({primaryDatasetId:l,recordStoreCache:c()(this,iu),refreshStoreCache:u,dataProvider:c()(this,eu),controllerConfig:o}),{promise:b,resolve:S}=new z;f||h||g.push(b);const{promise:C,resolve:O}=new z;m.push(C);const P=Hl(c()(this,au),{shouldCollectSeoData:R,seoManager:T,dependencyManager:_,controllerConfig:o,datasetType:t,connections:s,connectionsGraph:E,recordStoreService:y,dataProvider:c()(this,eu),firePlatformEvent:r(l),dynamicPagesData:f&&p?lu({dynamicPageData:p,items:c()(this,ru).getItems(),config:o,convertFromCustomFormat:eo.PL}):void 0,datasetId:l,schemasLoading:w,listenersByEvent:c()(this,ou),updatedCompIds:d,markControllerAsRendered:O,markDatasetDataFetched:S,renderingRegularControllers:v,modeIsLivePreview:i,modeIsSSR:a,useLowerCaseDynamicPageUrl:null==p?void 0:p.lowercase}).createRealDataset();return _.registerDataset({id:l,api:P.api,config:o}),hu(P)}));a&&h&&g.length&&Promise.all(g).then((()=>{c()(this,tu).setDataStore(mu(c()(this,eu).getStore()))})),Promise.all(m).then(y);const O=()=>Promise.all(g).then(T.renderSeoTagsOnce);return R?C.map((e=>({...e,pageReady:function(){return e.pageReady(...arguments).then(O)}}))):C}_updateDatasetConfigsState(e){const{appState:t}=j;return e.reduce(((e,r)=>{let{compId:n,config:{dataset:o}}=r;const a=t.datasetConfigs.get(n);return a&&!(0,Xe.isEqual)(a,o)&&e.push(n),t.datasetConfigs.set(n,o),e}),[])}_getInitialDataRequestConfigs(e,t){return e.reduce(((e,r)=>{let{compId:n,config:{datasetStaticConfig:{sequenceType:o}},livePreviewOptions:{shouldFetchData:a}={}}=r;return o===wa?[...e,{id:n,refresh:a||t.includes(n)}]:e}),[])}}const cu=e=>{const t=e.reduce(((e,t)=>{let{config:{dataset:{collectionName:r}}}=t;return r?e.add(r):e}),new Set);return[...t]},lu=e=>{let{dynamicPageData:t,config:r,items:n,convertFromCustomFormat:o}=e;const{dynamicUrl:a,userDefinedFilter:i}=t,s=o(n)[0],c=(0,Xe.get)(r,"dataset.sort",[])||[],l=a&&s?(u=a,{fields:(u=Gi(u)).match(ji)||[],nonFields:u.replace(ji,"").split(Wi).filter((e=>!!e))}).fields:[];var u;const d=uu(c),p=(0,Xe.difference)(l,d),f=du([...c,...pu(p)]),h=[...d,...p];return{dynamicUrl:a,userDefinedFilter:i,dynamicUrlPatternFieldsValues:fu(s,h,l),sort:f,sortFields:h,patternFields:l}},uu=e=>(0,Xe.flatten)(e.map((e=>Object.keys(e).map((e=>e))))),du=e=>e.reduce(((e,t)=>Object.assign(e,t)),{}),pu=e=>e.map((e=>({[e]:"asc"}))),fu=(e,t,r)=>{const n=r.concat(t);return r.length?(0,Xe.pick)(e,n):null},hu=e=>{let{pageReady:t,exports:r,dispose:n}=e;return{pageReady:t,exports:r,dispose:n}},gu=e=>t=>{if(t)return{...t,recordsByCollectionId:Object.entries(t.recordsByCollectionId).reduce(((t,r)=>{let[n,o]=r;return t[n]=e(o),t}),{})}},mu=gu(eo.ah),yu=gu(eo.PL),vu=e=>{let{datasetId:t,record:r,schema:n,getSchema:o}=e;const a={"form-id":{value:t,keyName:""}},i=(0,Xe.pickBy)(n.fields,((e,t)=>((e,t)=>{const r=e.type,n=R.includes(r),o=!!e.systemField,a=["_createdDate","_updatedDate"].includes(t||e.name);return(!o||a)&&n})(e,t)&&!function(e){return!!e.isDeleted}(e)));return(0,Xe.forEach)(i,((e,n)=>{const i=function(e){let{record:t,fieldData:r,fieldName:n,getSchema:o}=e;if("reference"===r.type){const e=o(r.referencedCollection);if(!e)return;const a=Aa(t[n],e.displayField);return{value:za(a),type:e.fields[e.displayField].type}}return{value:za(Aa(t,n)),type:r.type}}({record:r,fieldData:e,fieldName:n,getSchema:o});if(!i)return;const{value:s,type:c}=i,{displayName:l,index:u}=e,d=((e,t)=>`${e}.${t}`)(t,n);a["field:"+d]={value:s,keyName:l,index:u,valueType:c}})),a};const wu=e=>{let{automationsClientCreator:t}=e;const r=t().reportFormEventToAutomationCreator();return{afterSave:async(e,t,n)=>{let{datasetId:o,getSchema:a,getState:i}=e;const s=i(),c=a();Boolean(s.records.isForm)&&c&&await r((e=>{let{datasetId:t,getSchema:r,record:n,schema:o}=e;return{eventUTCTime:Aa(n,"_updatedDate"),detailedEventPayload:vu({datasetId:t,record:n,schema:o,getSchema:r})}})({datasetId:o,record:n,schema:c,getSchema:a}))}}};var Iu=a(4126),bu=function(e,t){return bu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},bu(e,t)};function Eu(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}bu(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}Object.create;Object.create;var _u=a(5675),Su=a.n(_u);function Ru(e){return"object"===Su()(e)}function Tu(e){return"array"===Su()(e)}function Cu(e){return"string"===Su()(e)}function Ou(e){return function(e){if(!Cu(e))return e;var t=e.slice(0,1).toUpperCase(),r=e.slice(1,e.length);return t+r}(Su()(e))}function Pu(e){if(null==e||"object"!=typeof e)return e;var t=null;if(function(e){return"date"===Su()(e)}(e))t=new Date(e.getTime());else for(var r in t=e.constructor(),e)t[r]=Pu(e[r]);return t}var Du=a(3065);a(5174);var xu=function(){return"WDE0001: Collection name must be a string."},Au=function(){return"WDE0002: ItemId must be a string."},Nu=function(){return"WDE0068: Item ids must be an array of strings"},Mu=function(e){return"WDE0069: Failed to remove items from [".concat(e,"].\nCannot remove more than 1000 items in one request")},Fu=function(){return"WDE0003: FieldName must be a string."},Lu=function(e,t){return"WDE0004: Failed to save [".concat(e,"] into [").concat(t,"].\nItems must be JavaScript objects.")},Uu=function(e){return"WDE0005: Failed to bulk save items into [".concat(e,"].\nItems must be an array of JavaScript objects and itemIds must be strings if present.")},ku=function(e){return"WDE0006: Failed to bulk save items into [".concat(e,"].\nCannot insert more than 1000 items in one request")},ju=function(){return"WDE0007: Invalid update. Updated object must have a string _id property."},Vu=function(e,t,r,n){return"WDE0008: wixData.".concat(e," expects between ").concat(t," and ").concat(r," arguments, but was called with ").concat(n,".")},Wu=function(e){return"WDE0018: Options must be an object with one or all of the following boolean properties: ".concat(e.join(", "),".")},Gu=function(){return"WDE0019: Reference operation takes a string ID or an object with an ID to be connected."},Bu=function(){return"WDE0021: Invalid reference"},qu=function(e){return"WDE0025: The ".concat(e," collection does not exist. You cannot work with a collection using the Data API before it is created in the Editor.")},zu=function(e){return"WDE0026: The ".concat(e," collection was removed, so you cannot work with it. To restore its data, create a new collection with the same name.")},$u={queryInvalid:function(e,t){return"Failed to perform query on [".concat(e,"].\n").concat(t.join("\n"))},isNumber:function(e,t,r){return"WDE0032: Invalid ".concat(e," parameter [").concat(Ou(r),"]. ").concat(e," parameter must be a ").concat(t," number.")},isPositiveNumber:function(e,t){return"WDE0033: Invalid ".concat(e," parameter [").concat(t,"]. ").concat(e," parameter must be a positive number.")},isNonNegativeNumber:function(e,t){return"WDE0034: Invalid ".concat(e," parameter [").concat(t,"]. ").concat(e," parameter must be a non-negative number.")},isInteger:function(e,t){return"WDE0035: Invalid ".concat(e," parameter [").concat(t,"]. ").concat(e," parameter must be an integer.")},isNonEmptyString:function(e){return"WDE0094: Invalid ".concat(e," parameter. ").concat(e," parameter must be non-empty string.")},notGreaterThan:function(e,t,r){return"WDE0036: Invalid ".concat(e," parameter [").concat(t,"]. ").concat(e," parameter cannot exceed ").concat(r,".")},invalidSkipParameter:function(e,t){return"WDE0037: Invalid query on [".concat(e,"].\nInvalid prev positioned query skip on a negative number ").concat(t,".")}},Hu={arityIsZero:function(e){return"WDE0038: Invalid ".concat(e," usage. ").concat(e," does not take parameters.")},arityIsOne:function(e){return"WDE0039: Invalid ".concat(e," usage. ").concat(e," requires one parameter.")},arityIsTwo:function(e){return"WDE0040: Invalid ".concat(e," usage. ").concat(e," requires two parameters.")},arityIsThree:function(e){return"WDE0041: Invalid ".concat(e," usage. ").concat(e," requires three parameters.")},arityIsAtLeastTwo:function(e){return"WDE0042: Invalid ".concat(e," usage. ").concat(e," requires at least two parameters.")},arityIsAtLeastOne:function(e){return"WDE0043: Invalid ".concat(e," usage. ").concat(e," requires at least one parameter.")}},Xu="WD_UNKNOWN_ERROR",Yu="WD_VALIDATION_ERROR",Ju="WD_COLLECTION_DELETED",Ku="WD_SCHEMA_DOES_NOT_EXIST";function Zu(e,t){return Qu(e,t)}function Qu(e,t){var r=new(t&&t!==Xu?td:Error)(e);return r.code=t,r}function ed(e){return Zu(qu(e),Ku)}function td(e){var t=new Du.UserCodeError(e);return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(t,td),t.name=Error.name,t}Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),td.prototype=Object.create(Du.UserCodeError.prototype,{constructor:{value:td,enumerable:!1,writable:!0,configurable:!0}});var rd=function(){function e(){this._validations=[]}return e.prototype.arityIsZero=function(e){var t=this;return this.addValidation((function(){return 0===e.length}),(function(){return Hu.arityIsZero(t.operatorName)}))},e.prototype.arityIsOne=function(e){var t=this;return this.addValidation((function(){return 1===e.length}),(function(){return Hu.arityIsOne(t.operatorName)}))},e.prototype.arityIsTwo=function(e){var t=this;return this.addValidation((function(){return 2===e.length}),(function(){return Hu.arityIsTwo(t.operatorName)}))},e.prototype.arityIsThree=function(e){var t=this;return this.addValidation((function(){return 3===e.length}),(function(){return Hu.arityIsThree(t.operatorName)}))},e.prototype.arityIsAtLeastTwo=function(e){var t=this;return this.addValidation((function(){return e.length>=2}),(function(){return Hu.arityIsAtLeastTwo(t.operatorName)}))},e.prototype.arityIsAtLeastOne=function(e){var t=this;return this.addValidation((function(){return e.length>=1}),(function(){return Hu.arityIsAtLeastOne(t.operatorName)}))},e.prototype.addValidation=function(e,t){return this._validations.push({predicateFn:e,messageFn:t}),this},e}(),nd=(function(e){function t(t){var r=e.call(this)||this;return r._invalidArguments=Pu(t),r}Eu(t,e),t.prototype.validateAndAggregate=function(){var e=this,t=this._validations.every((function(t){var r=t.predicateFn,n=t.messageFn;return e._appendIfInvalid(r(),n())}));return[this._invalidArguments,t]},t.prototype._appendIfInvalid=function(e,t){return!!e||(this._invalidArguments.push(t),!1)}}(rd),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Eu(t,e),t.prototype.validateAndReject=function(){var e=this;return Promise.resolve().then((function(){e._validations.forEach((function(e){var t=e.predicateFn,r=e.messageFn;if(!t())throw Qu(r(),Yu)}))}))},t}(rd));!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Eu(t,e),t.prototype.arity=function(e,t,r,n){return this.addValidation((function(){return t.length<=n&&t.length>=r}),(function(){return Vu(e,r,n,t.length)}))},t.prototype._isObject=function(e,t){return this.addValidation((function(){return Ru(e)}),(function(){return Lu(e,t)}))},t.prototype.item=function(e,t,r){return this._isObject(e,t).addValidation((function(){return void 0!==e._id?Cu(e._id):!r}),(function(){return ju()}))},t.prototype.items=function(e,t){return this.addValidation((function(){return Tu(e)&&e.every((function(e){return Ru(e)&&(void 0===e._id||null===e._id||Cu(e._id))}))}),(function(){return Uu(t)})).addValidation((function(){return e.length<=1e3}),(function(){return ku(t)}))},t.prototype.fieldName=function(e){return this.addValidation((function(){return Cu(e)}),(function(){return Fu()}))},t.prototype.itemId=function(e){return this.addValidation((function(){return Cu(e)}),(function(){return Au()}))},t.prototype.itemIds=function(e,t){return this.addValidation((function(){return Tu(e)&&e.every((function(e){return Cu(e)}))}),(function(){return Nu()})).addValidation((function(){return e.length<=1e3}),(function(){return Mu(t)}))},t.prototype._options=function(e,t){return this.addValidation((function(){var r=Ru(e)&&t.every((function(t){return null==(r=e[t])||(n=r,"boolean"===Su()(n));var r,n}));return null==e||r}),(function(){return Wu(t)}))},t.prototype.referenceRemoveParameters=function(e){return this.addValidation((function(){return Tu(e)&&e.every(ad)}),Gu)},t.prototype.referenceParameters=function(e){return this.addValidation((function(){return Tu(e)&&e.every(od)}),Gu)},t.prototype.referenceParameter=function(e){return this.addValidation((function(){return od(e)}),Gu)},t.prototype.isNonEmptyString=function(e,t){return this.addValidation((function(){return"string"==typeof e&&e.length>0}),(function(){return $u.isNonEmptyString(t)}))},t.prototype.references=function(e){return this.addValidation((function(){return Tu(e)&&e.every((function(e){return Cu(e.relationshipName)&&od(e.left)&&od(e.right)}))}),Bu)},t.prototype.options=function(e){return this._options(e,["suppressAuth","suppressHooks","showDrafts","consistentRead"])},t.prototype.bulkInsertOptions=function(e){return this._options(e,["suppressAuth","suppressHooks","overrideExisting"])},t.prototype.bulkUpdateOptions=function(e){return this._options(e,["suppressAuth","suppressHooks","showDrafts"])},t.prototype.bulkRemoveOptions=function(e){return this._options(e,["suppressAuth","suppressHooks","showDrafts"])},t.prototype.truncateOptions=function(e){return this._options(e,["suppressAuth"])},t.prototype.collectionName=function(e){return this.addValidation((function(){return Cu(e)}),(function(){return xu()}))}}(nd);function od(e){return Cu(e)&&""!==e||Ru(e)&&e.hasOwnProperty("_id")}function ad(e){return Cu(e)||Ru(e)&&e.hasOwnProperty("_id")}function id(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sd(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function cd(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ld(e){return function(e,t){return Promise.reject(Zu(e,t))}(zu(e),Ju)}var ud=function(e){function t(e,r){id(this,t);var n=sd(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object.setPrototypeOf(n,r.prototype),n.name=r.name,Error.captureStackTrace?Error.captureStackTrace(n,r):n.stack=new Error(e).stack,n}return cd(t,Error),t}(),dd=function(e){function t(e){id(this,t);var r=sd(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,t));return r.reason=e,r.message=e,r}return cd(t,e),t}(ud),pd=function(e){function t(e,r,n,o){id(this,t);var a=sd(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,t));return a.status=e,a.responseText=r,a.requestId=o,a}return cd(t,e),t}(ud),fd=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},hd=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),gd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var md=function(e){return"object"===(void 0===e?"undefined":gd(e))&&e.message?e.message:"string"==typeof e?e:JSON.stringify(e)},yd=function(e){return e.reduce((function(e,t){return Object.assign({},e,(r={},n=t.id,o=t,n in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,r));var r,n,o}),{})},vd=function(e,t){return e.endsWith(t)?e.substring(0,e.length-t.length):e},wd=function(){function e(t,r,n,o){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(e){return e=vd(e,"/"),vd(e,"/v1/schemas")}(o&&o.baseUrl||"https://cloud-data.wix-code.com");this.signedInstance=r,this.gridAppId=n,this.mutate=function(e,r,n){return t[e](i+r,n,a._setHeaders()).then((function(e){return e.data})).catch(a._handleError)},this.retrieve=function(e){return t.get(i+e,a._setHeaders()).then((function(e){return e.data})).catch(a._handleError)}}return hd(e,null,[{key:"FailedRequestException",get:function(){return dd}},{key:"UnsuccessfulResponseException",get:function(){return pd}}]),hd(e,[{key:"wrapWithDefaultOptions",value:function(e){return Object.assign({},e,{appId:this.gridAppId})}},{key:"formRequestUrl",value:function(e){return"/v1/schemas?"+Iu.stringify(e)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{includeDeletedCollections:!1},r=this.wrapWithDefaultOptions({includeDeleted:!0,schemaIds:e});return this.retrieve(this.formRequestUrl(r)).then((function(r){var n=fd(r.schemas,1)[0];return n&&n.isDeleted&&!t.includeDeletedCollections?ld(e):n||Promise.reject(ed(e))}))}},{key:"bulkGet",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{includeDeletedCollections:!1,referencedCollectionsDepth:0},r=this.wrapWithDefaultOptions({depth:t.referencedCollectionsDepth||0,includeDeleted:t.includeDeletedCollections||!1,schemaIds:e});return this.retrieve(this.formRequestUrl(r)).then((function(e){var t=e.schemas;return yd(t)}))}},{key:"list",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{includeDeletedCollections:!1},t=this.wrapWithDefaultOptions({schemaIds:[],depth:0,includeDeleted:e.includeDeletedCollections||!1});return this.retrieve(this.formRequestUrl(t)).then((function(e){var t=e.schemas;return yd(t)}))}},{key:"save",value:function(e,t){var r=this.wrapWithDefaultOptions({schemaId:e,schema:t});return this.mutate("post","/v1/schemas",r).then((function(e){return e.schemas}))}},{key:"setIsDeletedFlag",value:function(e,t){var r=this.wrapWithDefaultOptions({schemaId:e,partialSchema:{isDeleted:t}});return this.mutate("patch","/v1/schemas",r).then((function(e){return e.schemas}))}},{key:"remove",value:function(e){return this.setIsDeletedFlag(e,!0)}},{key:"restore",value:function(e){return this.setIsDeletedFlag(e,!1)}},{key:"_setHeaders",value:function(){return{headers:{authorization:this.signedInstance}}}},{key:"_handleError",value:function(e){if(!e.response)return Promise.reject(new dd(md(e)));var t=e.response,r=t.headers["x-wix-request-id"];return Promise.reject(new pd(t.status,t.data,md(t.data),r))}}]),e}(),Id=wd;const bd={SCALE_TO_FILL:"fill",SCALE_TO_FIT:"fit",STRETCH:"stretch",ORIGINAL_SIZE:"original_size",TILE:"tile",TILE_HORIZONTAL:"tile_horizontal",TILE_VERTICAL:"tile_vertical",FIT_AND_TILE:"fit_and_tile",LEGACY_STRIP_TILE:"legacy_strip_tile",LEGACY_STRIP_TILE_HORIZONTAL:"legacy_strip_tile_horizontal",LEGACY_STRIP_TILE_VERTICAL:"legacy_strip_tile_vertical",LEGACY_STRIP_SCALE_TO_FILL:"legacy_strip_fill",LEGACY_STRIP_SCALE_TO_FIT:"legacy_strip_fit",LEGACY_STRIP_FIT_AND_TILE:"legacy_strip_fit_and_tile",LEGACY_STRIP_ORIGINAL_SIZE:"legacy_strip_original_size",LEGACY_ORIGINAL_SIZE:"actual_size",LEGACY_FIT_WIDTH:"fitWidth",LEGACY_FIT_HEIGHT:"fitHeight",LEGACY_FULL:"full",LEGACY_BG_FIT_AND_TILE:"legacy_tile",LEGACY_BG_FIT_AND_TILE_HORIZONTAL:"legacy_tile_horizontal",LEGACY_BG_FIT_AND_TILE_VERTICAL:"legacy_tile_vertical",LEGACY_BG_NORMAL:"legacy_normal"},Ed="fit",_d="fill",Sd="fill_focal",Rd="crop",Td="legacy_crop",Cd="legacy_fill",Od="center",Pd="top",Dd="top_left",xd="top_right",Ad="bottom",Nd="bottom_left",Md="bottom_right",Fd="left",Ld="right",Ud={[Od]:{x:.5,y:.5},[Dd]:{x:0,y:0},[xd]:{x:1,y:.5},[Pd]:{x:.5,y:0},[Nd]:{x:0,y:1},[Md]:{x:1,y:1},[Ad]:{x:.5,y:1},[Ld]:{x:1,y:.5},[Fd]:{x:0,y:.5}},kd={center:"c",top:"t",top_left:"tl",top_right:"tr",bottom:"b",bottom_left:"bl",bottom_right:"br",left:"l",right:"r"},jd="img",Vd={AUTO:"auto",CLASSIC:"classic",SUPER:"super"},Wd=1,Gd=2,Bd={radius:"0.66",amount:"1.00",threshold:"0.01"},qd=25e6,zd=[1.5,2,4],$d={HIGH:{size:196e4,quality:90,maxUpscale:1},MEDIUM:{size:36e4,quality:85,maxUpscale:1},LOW:{size:16e4,quality:80,maxUpscale:1.2},TINY:{size:0,quality:80,maxUpscale:1.4}},Hd="HIGH",Xd="MEDIUM",Yd="LOW",Jd="TINY",Kd="contrast",Zd="brightness",Qd="saturation",ep="hue",tp="blur",rp="jpg",np="jpeg",op="jpe",ap="png",ip="webp",sp="gif",cp="unrecognized",lp={isMobile:!1};function up(){if("undefined"!=typeof window&&"undefined"!=typeof navigator){const t=window.matchMedia&&window.matchMedia("(max-width: 767px)").matches,r=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);e=t&&r,lp["isMobile"]=e}var e}function dp(e,...t){return function(...r){const n=r[r.length-1]||{},o=[e[0]];return t.forEach((function(t,a){const i=Number.isInteger(t)?r[t]:n[t];o.push(i,e[a+1])})),o.join("")}}function pp(e){return e[e.length-1]}const fp=[ap,np,rp,op,"wix_ico_mp","wix_mp"],hp=[np,rp,op];function gp(e){return function(e){return fp.includes(wp(e))}(e)&&!function(e){return/(^https?)|(^data)|(^\/\/)/.test(e)}(e)}const mp=["/","\\","?","<",">","|","\u201c",":",'"'].map(encodeURIComponent),yp=["\\.","\\*"];function vp(e){return function(e){return hp.includes(wp(e))}(e)?rp:function(e){return wp(e)===ap}(e)?ap:function(e){return wp(e)===ip}(e)?ip:cp}function wp(e){return(/[.]([^.]+)$/.exec(e)&&/[.]([^.]+)$/.exec(e)[1]||"").toLowerCase()}function Ip(e,t,r,n,o){let a;return a=o===_d?function(e,t,r,n){return Math.max(r/e,n/t)}(e,t,r,n):o===Ed?function(e,t,r,n){return Math.min(r/e,n/t)}(e,t,r,n):1,a}function bp(e,t,r,n,o,a){e=e||n.width,t=t||n.height;const{scaleFactor:i,width:s,height:c}=function(e,t,r,n,o){let a,i=r,s=n;if(a=Ip(e,t,r,n,o),o===Ed&&(i=e*a,s=t*a),i&&s&&i*s>qd){const r=Math.sqrt(qd/(i*s));i*=r,s*=r,a=Ip(e,t,i,s,o)}return{scaleFactor:a,width:i,height:s}}(e,t,n.width*o,n.height*o,r);return function(e,t,r,n,o,a,i){const{optimizedScaleFactor:s,upscaleMethodValue:c,forceUSM:l}=function(e,t,r,n){if("auto"===n)return function(e,t){const r=Rp(e,t);return{optimizedScaleFactor:$d[r].maxUpscale,upscaleMethodValue:Wd,forceUSM:!1}}(e,t);if("super"===n)return function(e){return{optimizedScaleFactor:pp(zd),upscaleMethodValue:Gd,forceUSM:!(zd.includes(e)||e>pp(zd))}}(r);return function(e,t){const r=Rp(e,t);return{optimizedScaleFactor:$d[r].maxUpscale,upscaleMethodValue:Wd,forceUSM:!1}}(e,t)}(e,t,a,o);let u=r,d=n;if(a<=s)return{width:u,height:d,scaleFactor:a,upscaleMethodValue:c,forceUSM:l,cssUpscaleNeeded:!1};switch(i){case _d:u=r*(s/a),d=n*(s/a);break;case Ed:u=e*s,d=t*s}return{width:u,height:d,scaleFactor:s,upscaleMethodValue:c,forceUSM:l,cssUpscaleNeeded:!0}}(e,t,s,c,a,i,r)}function Ep(e,t,r,n){const o=Sp(r)||function(e=Od){return Ud[e]}(n);return{x:Math.max(0,Math.min(e.width-t.width,o.x*e.width-t.width/2)),y:Math.max(0,Math.min(e.height-t.height,o.y*e.height-t.height/2)),width:Math.min(e.width,t.width),height:Math.min(e.height,t.height)}}function _p(e){return e.alignment&&kd[e.alignment]||kd[Od]}function Sp(e){let t;return!e||"number"!=typeof e.x||isNaN(e.x)||"number"!=typeof e.y||isNaN(e.y)||(t={x:Tp(Math.max(0,Math.min(100,e.x))/100,2),y:Tp(Math.max(0,Math.min(100,e.y))/100,2)}),t}function Rp(e,t){const r=e*t;return r>$d[Hd].size?Hd:r>$d[Xd].size?Xd:r>$d[Yd].size?Yd:Jd}function Tp(e,t){const r=Math.pow(10,t||0);return(e*r/r).toFixed(t)}function Cp(e){return e&&e.upscaleMethod&&Vd[e.upscaleMethod.toUpperCase()]||Vd.AUTO}function Op(){return lp["isMobile"]}function Pp(e,t,r){let n;switch(t.crop&&(n=function(e,t){const r=Math.max(0,Math.min(e.width,t.x+t.width)-Math.max(0,t.x)),n=Math.max(0,Math.min(e.height,t.y+t.height)-Math.max(0,t.y));return r&&n&&(e.width!==r||e.height!==n)?{x:Math.max(0,t.x),y:Math.max(0,t.y),width:r,height:n}:null}(t,t.crop),n&&(e.src.width=n.width,e.src.height=n.height,e.src.isCropped=!0,e.parts.push(xp(n)))),e.fittingType){case bd.SCALE_TO_FIT:case bd.LEGACY_FIT_WIDTH:case bd.LEGACY_FIT_HEIGHT:case bd.LEGACY_FULL:case bd.FIT_AND_TILE:case bd.LEGACY_BG_FIT_AND_TILE:case bd.LEGACY_BG_FIT_AND_TILE_HORIZONTAL:case bd.LEGACY_BG_FIT_AND_TILE_VERTICAL:case bd.LEGACY_BG_NORMAL:e.parts.push(Dp(e,r));break;case bd.SCALE_TO_FILL:e.parts.push(function(e,t){const r=bp(e.src.width,e.src.height,_d,t,e.devicePixelRatio,e.upscaleMethod),n=Sp(e.focalPoint);return{transformType:n?Sd:_d,width:Math.round(r.width),height:Math.round(r.height),alignment:_p(t),focalPointX:n&&n.x,focalPointY:n&&n.y,upscale:r.scaleFactor>1,forceUSM:r.forceUSM,scaleFactor:r.scaleFactor,cssUpscaleNeeded:r.cssUpscaleNeeded,upscaleMethodValue:r.upscaleMethodValue}}(e,r));break;case bd.STRETCH:e.parts.push(function(e,t){const r=Ip(e.src.width,e.src.height,t.width,t.height,_d),n=Object.assign({},t);return n.width=e.src.width*r,n.height=e.src.height*r,Dp(e,n)}(e,r));break;case bd.TILE_HORIZONTAL:case bd.TILE_VERTICAL:case bd.TILE:case bd.LEGACY_ORIGINAL_SIZE:case bd.ORIGINAL_SIZE:n=Ep(e.src,r,e.focalPoint,r.alignment),e.src.isCropped?(Object.assign(e.parts[0],n),e.src.width=n.width,e.src.height=n.height):e.parts.push(xp(n));break;case bd.LEGACY_STRIP_TILE_HORIZONTAL:case bd.LEGACY_STRIP_TILE_VERTICAL:case bd.LEGACY_STRIP_TILE:case bd.LEGACY_STRIP_ORIGINAL_SIZE:e.parts.push(function(e){return{transformType:Td,width:Math.round(e.width),height:Math.round(e.height),alignment:_p(e),upscale:!1,forceUSM:!1,scaleFactor:1,cssUpscaleNeeded:!1}}(r));break;case bd.LEGACY_STRIP_SCALE_TO_FIT:case bd.LEGACY_STRIP_FIT_AND_TILE:e.parts.push(function(e){return{transformType:Ed,width:Math.round(e.width),height:Math.round(e.height),upscale:!1,forceUSM:!0,scaleFactor:1,cssUpscaleNeeded:!1}}(r));break;case bd.LEGACY_STRIP_SCALE_TO_FILL:e.parts.push(function(e){return{transformType:Cd,width:Math.round(e.width),height:Math.round(e.height),alignment:_p(e),upscale:!1,forceUSM:!0,scaleFactor:1,cssUpscaleNeeded:!1}}(r))}}function Dp(e,t){const r=bp(e.src.width,e.src.height,Ed,t,e.devicePixelRatio,e.upscaleMethod);return{transformType:_d,width:Math.round(r.width),height:Math.round(r.height),alignment:kd.center,upscale:r.scaleFactor>1,forceUSM:r.forceUSM,scaleFactor:r.scaleFactor,cssUpscaleNeeded:r.cssUpscaleNeeded,upscaleMethodValue:r.upscaleMethodValue}}function xp(e){return{transformType:Rd,x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height),upscale:!1,forceUSM:!1,scaleFactor:1,cssUpscaleNeeded:!1}}function Ap(e,t){var r;t=t||{},e.quality=function(e,t){const r=e.fileType===ap,n=e.fileType===rp;if(n||r){const n=pp(e.parts),i=(o=n.width,a=n.height,$d[Rp(o,a)].quality);let s=t.quality&&t.quality>=5&&t.quality<=90?t.quality:i;return s=r?s+5:s,s}var o,a;return 0}(e,t),e.progressive=function(e){return!1!==e.progressive}(t),e.watermark=function(e){return e.watermark}(t),e.autoEncode=null===(r=t.autoEncode)||void 0===r||r,e.unsharpMask=function(e,t){var r,n,o;if(function(e){const t="number"==typeof(e=e||{}).radius&&!isNaN(e.radius)&&e.radius>=.1&&e.radius<=500,r="number"==typeof e.amount&&!isNaN(e.amount)&&e.amount>=0&&e.amount<=10,n="number"==typeof e.threshold&&!isNaN(e.threshold)&&e.threshold>=0&&e.threshold<=255;return t&&r&&n}(t.unsharpMask))return{radius:Tp(null===(r=t.unsharpMask)||void 0===r?void 0:r.radius,2),amount:Tp(null===(n=t.unsharpMask)||void 0===n?void 0:n.amount,2),threshold:Tp(null===(o=t.unsharpMask)||void 0===o?void 0:o.threshold,2)};if(("number"!=typeof(a=(a=t.unsharpMask)||{}).radius||isNaN(a.radius)||0!==a.radius||"number"!=typeof a.amount||isNaN(a.amount)||0!==a.amount||"number"!=typeof a.threshold||isNaN(a.threshold)||0!==a.threshold)&&function(e){const t=pp(e.parts);return!(t.scaleFactor>=1)||t.forceUSM}(e))return Bd;var a;return}(e,t),e.filters=function(e){const t=e.filters||{},r={};Np(t[Kd],-100,100)&&(r[Kd]=t[Kd]);Np(t[Zd],-100,100)&&(r[Zd]=t[Zd]);Np(t[Qd],-100,100)&&(r[Qd]=t[Qd]);Np(t[ep],-180,180)&&(r[ep]=t[ep]);Np(t[tp],0,100)&&(r[tp]=t[tp]);return r}(t)}function Np(e,t,r){return"number"==typeof e&&!isNaN(e)&&0!==e&&e>=t&&e<=r}function Mp(e,t,r,n){const o=function(e){var t;return null!==(t=null==e?void 0:e.isSEOBot)&&void 0!==t&&t}(n),a=vp(t.id),i=function(e,t){const r=/\.([^.]*)$/,n=new RegExp(`(${mp.concat(yp).join("|")})`,"g");if(t&&t.length){let e=t;const o=t.match(r);return o&&fp.includes(o[1])&&(e=t.replace(r,"")),encodeURIComponent(e).replace(n,"_")}const o=e.match(/\/(.*?)$/);return(o?o[1]:e).replace(r,"")}(t.id,t.name),s=o?1:function(e){return Math.min(e.pixelAspectRatio||1,2)}(r),c=wp(t.id),l=c,u=gp(t.id),d={fileName:i,fileExtension:c,fileType:a,fittingType:e,preferredExtension:l,src:{id:t.id,width:t.width,height:t.height,isCropped:!1},focalPoint:{x:t.focalPoint&&t.focalPoint.x,y:t.focalPoint&&t.focalPoint.y},parts:[],devicePixelRatio:s,quality:0,upscaleMethod:Cp(n),progressive:!0,watermark:"",unsharpMask:{},filters:{},transformed:u};return u&&(Pp(d,t,r),Ap(d,n)),d}const Fp=dp`fit/w_${"width"},h_${"height"}`,Lp=dp`fill/w_${"width"},h_${"height"},al_${"alignment"}`,Up=dp`fill/w_${"width"},h_${"height"},fp_${"focalPointX"}_${"focalPointY"}`,kp=dp`crop/x_${"x"},y_${"y"},w_${"width"},h_${"height"}`,jp=dp`crop/w_${"width"},h_${"height"},al_${"alignment"}`,Vp=dp`fill/w_${"width"},h_${"height"},al_${"alignment"}`,Wp=dp`,lg_${"upscaleMethodValue"}`,Gp=dp`,q_${"quality"}`,Bp=dp`,usm_${"radius"}_${"amount"}_${"threshold"}`,qp=dp`,bl`,zp=dp`,wm_${"watermark"}`,$p={[Kd]:dp`,con_${"contrast"}`,[Zd]:dp`,br_${"brightness"}`,[Qd]:dp`,sat_${"saturation"}`,[ep]:dp`,hue_${"hue"}`,[tp]:dp`,blur_${"blur"}`},Hp=dp`,enc_auto`;function Xp(e,t,r,n={},o){return gp(t.id)?function(e){const t=[];e.parts.forEach((e=>{switch(e.transformType){case Rd:t.push(kp(e));break;case Td:t.push(jp(e));break;case Cd:let r=Vp(e);e.upscale&&(r+=Wp(e)),t.push(r);break;case Ed:let n=Fp(e);e.upscale&&(n+=Wp(e)),t.push(n);break;case _d:let o=Lp(e);e.upscale&&(o+=Wp(e)),t.push(o);break;case Sd:let a=Up(e);e.upscale&&(a+=Wp(e)),t.push(a)}}));let r=t.join("/");return e.quality&&(r+=Gp(e)),e.unsharpMask&&(r+=Bp(e.unsharpMask)),e.progressive||(r+=qp(e)),e.watermark&&(r+=zp(e)),e.filters&&(r+=Object.keys(e.filters).map((t=>$p[t](e.filters))).join("")),e.autoEncode&&e.fileType!==sp&&(r+=Hp(e)),`${e.src.id}/v1/${r}/${e.fileName}.${e.preferredExtension}`}(o=o||Mp(e,t,r,n)):t.id}const Yp={[Od]:"50% 50%",[Dd]:"0% 0%",[xd]:"100% 0%",[Pd]:"50% 0%",[Nd]:"0% 100%",[Md]:"100% 100%",[Ad]:"50% 100%",[Ld]:"100% 50%",[Fd]:"0% 50%"};Object.entries(Yp).reduce(((e,[t,r])=>(e[r]=t,e)),{});function Jp(e,t,r,n){if(function(e,t,r){return r&&t&&!function(e){return!e||!e.trim()||"none"===e.toLowerCase()}(t.id)&&Object.values(bd).includes(e)}(e,t,r)){const o=function(e,t,r){const n=Object.assign({},r),o=Op();switch(e){case bd.LEGACY_BG_FIT_AND_TILE:case bd.LEGACY_BG_FIT_AND_TILE_HORIZONTAL:case bd.LEGACY_BG_FIT_AND_TILE_VERTICAL:case bd.LEGACY_BG_NORMAL:const e=o?1e3:1920,r=o?1e3:1920;n.width=Math.min(e,t.width),n.height=Math.min(r,Math.round(n.width/(t.width/t.height))),n.pixelAspectRatio=1}return n}(e,t,r);return{uri:Xp(e,t,o,n||{},Mp(e,t,o,n))}}return{uri:""}}const Kp=/^media\//i,Zp="undefined"!=typeof window?window.devicePixelRatio:1,Qp=(e,t)=>{const r=t&&t.baseHostURL;return r?`${r}${e}`:(e=>Kp.test(e)?`https://static.wixstatic.com/${e}`:`https://static.wixstatic.com/media/${e}`)(e)};up(),up();const ef={getScaleToFitImageURL:function(e,t,r,n,o,a){const i=Jp(bd.SCALE_TO_FIT,{id:e,width:t,height:r,name:a&&a.name},{width:n,height:o,htmlTag:jd,alignment:Od,pixelAspectRatio:Zp},a);return Qp(i.uri,a)},getScaleToFillImageURL:function(e,t,r,n,o,a){const i=Jp(bd.SCALE_TO_FILL,{id:e,width:t,height:r,name:a&&a.name,focalPoint:{x:a&&a.focalPoint&&a.focalPoint.x,y:a&&a.focalPoint&&a.focalPoint.y}},{width:n,height:o,htmlTag:jd,alignment:Od,pixelAspectRatio:Zp},a);return Qp(i.uri,a)},getCropImageURL:function(e,t,r,n,o,a,i,s,c,l){const u=Jp(bd.SCALE_TO_FILL,{id:e,width:t,height:r,name:l&&l.name,crop:{x:n,y:o,width:a,height:i}},{width:s,height:c,htmlTag:jd,alignment:Od,pixelAspectRatio:Zp},l);return Qp(u.uri,l)}};function tf(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var rf=new WeakMap,nf=new WeakMap,of=new WeakMap,af=new WeakMap,sf=new WeakMap,cf=new WeakMap,lf=new WeakMap;class uf{constructor(e){let{platformUtils:t,wixSdk:r,bi:n,tpaActionImplementations:o,devMode:a,verbose:i}=e;tf(this,rf,{writable:!0,value:void 0}),tf(this,nf,{writable:!0,value:void 0}),tf(this,of,{writable:!0,value:void 0}),tf(this,af,{writable:!0,value:void 0}),tf(this,sf,{writable:!0,value:void 0}),tf(this,cf,{writable:!0,value:void 0}),tf(this,lf,{writable:!0,value:void 0}),u()(this,rf,this._getSettings({wixSdk:r,bi:n,devMode:a,verbose:i})),u()(this,nf,this._getUser(r.user)),u()(this,of,this._getLocation(r.location,n)),u()(this,af,this._getUtils(t)),u()(this,sf,this._getTimers(r)),u()(this,cf,(async e=>{let{currentItem:t,action:n}=e;const a=o[n];await a({wixSdk:r,currentItem:t})})),u()(this,lf,this._getSeo(r))}get settings(){return c()(this,rf)}get user(){return c()(this,nf)}get location(){return c()(this,of)}get utils(){return c()(this,af)}get timers(){return c()(this,sf)}get executeTpaAction(){return c()(this,cf)}get seo(){return c()(this,lf)}_getSettings(e){let{wixSdk:{window:{viewMode:t,rendering:{env:r},browserLocale:n},site:{regionalSettings:o=n}},bi:{metaSiteId:a,viewerName:i},devMode:s,verbose:c}=e;return{metaSiteId:a,locale:o,mode:{name:r,dev:s,verbose:c,ssr:"backend"===r,csr:"backend"!==r},env:{name:t,live:"Site"===t,preview:"Preview"===t,livePreview:"Editor"===t,editor:"Preview"===t||"Editor"===t,renderer:i}}}_getUser(e){return{get id(){return e.currentUser.id},get loggedIn(){return e.currentUser.loggedIn},onLogin:e.onLogin}}_getLocation(e,t){let{baseUrl:r,url:n,to:o}=e,{pageId:a}=t;return{pageId:a,pageUrl:n,baseUrl:r,navigateTo:o}}_getUtils(e){let{links:t,mediaItemUtils:r}=e;return{links:t,media:{...r,getScaleToFillImageURL:ef.getScaleToFillImageURL}}}_getTimers(e){var t,r;return{queueMicrotask:(null==(t=e.environment)||null==(r=t.timers)?void 0:r.queueMicrotask)||queueMicrotask}}_getSeo(e){return{renderSEOTags:e.seo.renderSEOTags}}}var df=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"V\u0161e"}'),pf=a.t(df,2),ff=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Alle"}'),hf=a.t(ff,2),gf=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Alle"}'),mf=a.t(gf,2),yf=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"All"}'),vf=a.t(yf,2),wf=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Todo"}'),If=a.t(wf,2),bf=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Tout"}'),Ef=a.t(bf,2),_f=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u0938\u092d\u0940"}'),Sf=a.t(_f,2),Rf=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Semua"}'),Tf=a.t(Rf,2),Cf=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Tutti"}'),Of=a.t(Cf,2),Pf=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u3059\u3079\u3066"}'),Df=a.t(Pf,2),xf=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\uc804\uccb4"}'),Af=a.t(xf,2),Nf=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Alle"}'),Mf=a.t(Nf,2),Ff=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Alle"}'),Lf=a.t(Ff,2),Uf=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Wszystkie"}'),kf=a.t(Uf,2),jf=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Todos"}'),Vf=a.t(jf,2),Wf=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u0412\u0441\u0435"}'),Gf=a.t(Wf,2),Bf=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Alla"}'),qf=a.t(Bf,2),zf=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u0e17\u0e31\u0e49\u0e07\u0e2b\u0e21\u0e14"}'),$f=a.t(zf,2),Hf=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Hepsi"}'),Xf=a.t(Hf,2),Yf=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u0423\u0441\u0456"}'),Jf=a.t(Yf,2),Kf=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"T\u1ea5t c\u1ea3"}'),Zf=a.t(Kf,2),Qf=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u6240\u6709"}');const eh={cs:pf,da:hf,de:mf,en:vf,es:If,fr:Ef,hi:Sf,id:Tf,it:Of,ja:Df,ko:Af,nl:Mf,no:Lf,pl:kf,pt:Vf,ru:Gf,sv:qf,th:$f,tr:Xf,uk:Jf,vi:Zf,zh:a.t(Qf,2)},th=eh.en;function rh(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var nh=new WeakMap,oh=new WeakMap,ah=new WeakMap,ih=new WeakMap,sh=new WeakMap,ch=new WeakMap,lh=new WeakMap,uh=new WeakMap;const dh=(e,t)=>{let{instance:r,appData:n}=e;if(r&&n)return{instance:r,gridAppId:n.gridAppId};const{query:{instance:o,gridAppId:a}}=h()("?"+t.queryParameters,!0);return{instance:o,gridAppId:a}},{initAppForPage:ph,createControllers:fh}=new class{constructor(e){var t=this;let{verbose:r=!1,wixDataSchemasForItTests:n,getElementorySupport:a=(()=>self.elementorySupport),automationsClientCreator:i=O,tpaActionImplementations:s=p}=void 0===e?{}:e;return o()(this,"initAppForPage",(function(e,r,n,o){let{bi:a={},monitoring:{createMonitor:i},fedOpsLoggerFactory:s,biLoggerFactory:l,essentials:{httpClient:d,experiments:p}}=void 0===o?{}:o;try{const o=new uf({platformUtils:r,wixSdk:n,bi:a,tpaActionImplementations:c()(t,uh),devMode:!1,verbose:c()(t,ih)}),{settings:f}=o,{instance:g,gridAppId:m}=dh(e,c()(t,ch).call(t)),{data:y,window:{warmupData:v,getRouterData:w},location:{baseUrl:I,protocol:b},site:{language:E}}=n;u()(t,ah,w()),u()(t,oh,new Zo({fedops:{factory:s,hooks:{start:e=>{let{name:r}=e;return c()(t,oh).log(new je({category:"interaction start",message:"interaction "+r+" started"}))},end:e=>{let{name:r,duration:n}=e;return c()(t,oh).log(new je({category:"interaction end",message:"interaction "+r+" ended after "+n+" ms"}))}}},bi:{factory:l},monitor:{factory:i},verbose:{factory:()=>({log:function(){var e;return((null==(e=n.telemetry)?void 0:e.console)||console).verbose(...arguments)}})},console:{factory:()=>{var e;return(null==(e=n.telemetry)?void 0:e.console)||console}},settings:f,global:self})),c()(t,oh).log(new ke("databinding/initAppForPage",ke.types.START));const _=(e=>{var t;const r=null!=(t=eh[e])?t:th;return{t:e=>{var t;return null!=(t=null==r?void 0:r[e])?t:e}}})(E),S=new Mo({experiments:p,settings:f}),R=S.fes?new ro({httpClient:d,getRequestParams:()=>({instance:g,gridAppId:m})}):new yo({wixData:y||self.require("wix-data").default,wixDataSchemas:c()(t,sh)||new Id(d,g,m,{baseUrl:f.env.editor?void 0:b+"://"+h()(I).hostname+"/_api/cloud-data/v1/schemas"})}),T=new Co(v),C=new No(c()(t,ah)),O=wu({automationsClientCreator:()=>c()(t,lh).call(t,{httpClient:d})});return u()(t,nh,new su({platform:o,dataFetcher:R,warmupCache:T,staticCache:C,features:S,listenersByEvent:O,logger:c()(t,oh),i18n:_,global:self})),c()(t,oh).log(new ke("databinding/initAppForPage",ke.types.END)),Promise.resolve()}catch(e){return c()(t,oh)&&c()(t,oh).log(new D("App initialisation failed",{cause:e})),Promise.reject(e)}})),o()(this,"createControllers",(e=>{if(!e.length)return[];const t=(r=e,n=c()(this,ah),r.map((e=>{let{compId:t,config:{dataset:{collectionName:r,filter:o,sort:a,includes:i,nested:s,pageSize:c,readWriteType:l,deferred:u,cursor:d}={}}={},type:p,connections:f,livePreviewOptions:{shouldFetchData:h,compsIdsToReset:g=[]}={}}=e;const m={id:t,type:p,collectionId:r,filter:o,sort:a,pageSize:c,readWriteType:l,includes:i,nested:s,deferred:u,connections:f,dataIsInvalidated:h,updatedCompIds:g,cursor:d};return p===Br&&n?((e,t)=>{const{readWriteType:r}=e,{config:{dataset:{collectionName:n,filter:o,sort:a,includes:i,pageSize:s,lowercase:c}},dynamicUrl:l,userDefinedFilter:u}=t;return{...e,collectionId:n,filter:o,sort:a,includes:i,pageSize:s,readWriteType:r,dynamicPageData:{lowercase:c,dynamicUrl:l,userDefinedFilter:u}}})(m,n):m})));var r,n;const o=e.reduce(((e,t)=>{let{$w:r,compId:n}=t;return e[n]=r.fireEvent,e}),{});return c()(this,nh).initializeDatasets({datasetConfigs:t,firePlatformEvent:e=>o[e]}).map((e=>({...e,pageReady:t=>e.pageReady(bl(t))})))})),rh(this,nh,{writable:!0,value:void 0}),rh(this,oh,{writable:!0,value:void 0}),rh(this,ah,{writable:!0,value:void 0}),rh(this,ih,{writable:!0,value:void 0}),rh(this,sh,{writable:!0,value:void 0}),rh(this,ch,{writable:!0,value:void 0}),rh(this,lh,{writable:!0,value:void 0}),rh(this,uh,{writable:!0,value:void 0}),u()(this,sh,n),u()(this,ch,a),u()(this,lh,i),u()(this,ih,r),u()(this,uh,s),{initAppForPage:this.initAppForPage,createControllers:this.createControllers}}}}(),i}()}));
//# sourceMappingURL=app.js.map