!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("lodash")):"function"==typeof define&&define.amd?define(["lodash"],e):"object"==typeof exports?exports.productWidgetController=e(require("lodash")):t.productWidgetController=e(t._)}("undefined"!=typeof self?self:this,(function(t){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="https://static.parastorage.com/services/wixstores-client-product-widget/1.1017.0/",r(r.s=83)}({1:function(t,e,r){"use strict";r.r(e),r.d(e,"__extends",(function(){return i})),r.d(e,"__assign",(function(){return o})),r.d(e,"__rest",(function(){return a})),r.d(e,"__decorate",(function(){return s})),r.d(e,"__param",(function(){return c})),r.d(e,"__metadata",(function(){return u})),r.d(e,"__awaiter",(function(){return d})),r.d(e,"__generator",(function(){return l})),r.d(e,"__createBinding",(function(){return p})),r.d(e,"__exportStar",(function(){return f})),r.d(e,"__values",(function(){return h})),r.d(e,"__read",(function(){return g})),r.d(e,"__spread",(function(){return b})),r.d(e,"__spreadArrays",(function(){return S})),r.d(e,"__await",(function(){return _})),r.d(e,"__asyncGenerator",(function(){return y})),r.d(e,"__asyncDelegator",(function(){return v})),r.d(e,"__asyncValues",(function(){return T})),r.d(e,"__makeTemplateObject",(function(){return O})),r.d(e,"__importStar",(function(){return P})),r.d(e,"__importDefault",(function(){return m})),r.d(e,"__classPrivateFieldGet",(function(){return E})),r.d(e,"__classPrivateFieldSet",(function(){return I}));var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function i(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var o=function(){return(o=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}function s(t,e,r,n){var i,o=arguments.length,a=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,r,a):i(e,r))||a);return o>3&&a&&Object.defineProperty(e,r,a),a}function c(t,e){return function(r,n){e(r,n,t)}}function u(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function d(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{c(n.next(t))}catch(t){o(t)}}function s(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}c((n=n.apply(t,e||[])).next())}))}function l(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function p(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}function f(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||(e[r]=t[r])}function h(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function b(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(g(arguments[e]));return t}function S(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n}function _(t){return this instanceof _?(this.v=t,this):new _(t)}function y(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(t,e||[]),o=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(t){i[t]&&(n[t]=function(e){return new Promise((function(r,n){o.push([t,e,r,n])>1||s(t,e)}))})}function s(t,e){try{(r=i[t](e)).value instanceof _?Promise.resolve(r.value.v).then(c,u):d(o[0][2],r)}catch(t){d(o[0][3],t)}var r}function c(t){s("next",t)}function u(t){s("throw",t)}function d(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function v(t){var e,r;return e={},n("next"),n("throw",(function(t){throw t})),n("return"),e[Symbol.iterator]=function(){return this},e;function n(n,i){e[n]=t[n]?function(e){return(r=!r)?{value:_(t[n](e)),done:"return"===n}:i?i(e):e}:i}}function T(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t=h(t),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,i){(function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)})(n,i,(e=t[r](e)).done,e.value)}))}}}function O(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function P(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function m(t){return t&&t.__esModule?t:{default:t}}function E(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function I(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}},10:function(t,e,r){"use strict";r.d(e,"e",(function(){return a})),r.d(e,"a",(function(){return n})),r.d(e,"d",(function(){return c})),r.d(e,"c",(function(){return u})),r.d(e,"b",(function(){return d}));var n,i=r(1),o=r(12),a=function(t,e){return t+"assets/locale/productWidget/productWidget_"+e+".json"};!function(t){t.Desktop="Desktop",t.Mobile="Mobile",t.Tablet="Tablet"}(n||(n={}));var s,c="product-widget",u=Object(i.__assign)(Object(i.__assign)({},o.b),{URL_CUSTOMIZE:"specs.stores.EnableUrlCustomizeInProductPage",EDITABLE_HEADING_TAGS:"specs.stores.EditableHeadingTags",PRICE_RANGE_VIEWER:"specs.stores.PriceRangeViewer",BASE_PRICE_IN_GALLERY:"specs.stores.BasePriceInGallery"}),d={NAVIGATE_TO_PRODUCT_PAGE_BUTTON:"PRODUCT_WIDGET_BUTTON_TEXT",ADD_TO_CART_BUTTON:"PRODUCT_WIDGET_BUTTON_TEXT",OUT_OF_STOCK:"PRODUCT_WIDGET_BUTTON_OOS_TEXT"};s||(s={})},12:function(t,e,r){"use strict";var n,i,o,a;r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return i})),function(t){t.URL_CUSTOMIZE="specs.stores.EnableUrlCustomizeInProductPage",t.USE_LIGHTBOXES="specs.stores.UseLightboxes",t.SHOW_PRODUCT_PRICE_BREAKDOWN="specs.stores.ShowProductPriceBreakdown",t.SHOW_SHIPPING_DISCLAIMER="specs.stores.ShowShippingDisclaimer",t.PRICE_RANGE_VIEWER="specs.stores.PriceRangeViewer",t.USE_IS_OWNER_IN_CART_OOI="specs.stores.UseIsOwnerInCartOOI"}(n||(n={})),function(t){t.SITE="site",t.PREVIEW="preview",t.EDITOR="editor"}(i||(i={})),function(t){t.COLOR="color",t.LIST="list"}(o||(o={})),function(t){t.CHECKED="checked",t.UNCHECKED="unchecked"}(a||(a={}))},16:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.translate=void 0,e.translate=function(t,e){return t.replace(/\{\{([^}]+)\}\}/gi,(function(t,r){return e[r.trim()]||""}))}},19:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r(1),i=function(t){function e(e,r){var n=t.call(this,e)||this;return n.data=r,n.name="FetchError",n}return Object(n.__extends)(e,t),e}(Error)},2:function(e,r){e.exports=t},20:function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return o})),r.d(e,"c",(function(){return a}));var n=r(19);function i(t){return fetch(t,{method:"get"}).then((function(t){return t.json()})).catch((function(e){throw new n.a("Could not fetch translation",{originalError:e.message,path:t})}))}function o(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}function a(t){return t.replace(/(\r\n|\n|\r)/g,"").replace(/ +(?= )/g,"").replace(/: /g,":").replace(/, \$/g,",$").replace(/\{ /g,"{").replace(/ {/g,"{").replace(/ }/g,"}").replace(/} /g,"}").replace(/, /g,",").replace(/ /g,",")}},22:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getStyleParamsWithDefaults=void 0;var n=r(2);e.getStyleParamsWithDefaults=function(t,e){var r=e(),i=r.defaults,o=r.overrides;return n.defaultsDeep(n.merge(n.cloneDeep(t),o),i)}},3:function(t,e,r){"use strict";var n,i,o,a,s,c;r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return i})),r.d(e,"e",(function(){return o})),r.d(e,"c",(function(){return a})),r.d(e,"f",(function(){return s})),r.d(e,"d",(function(){return c})),function(t){t.NAVIGATE="navigate",t.ADDTOCART="addToCart"}(n||(n={})),function(t){t.CROP="crop",t.FIT="fit"}(i||(i={})),function(t){t.LEFT="left",t.RIGHT="right"}(o||(o={})),function(t){t.LEFT="left",t.CENTER="center",t.RIGHT="right"}(a||(a={})),function(t){t.VERTICAL="Wix_Store_Product_Widget_Vertical",t.HORIZONTAL="Wix_Store_Product_Widget_Horizontal"}(s||(s={})),function(t){t.CONTENT="content",t.VISUAL="visual",t.ALL="all"}(c||(c={}))},4:function(t,e,r){"use strict";r.d(e,"a",(function(){return p})),r.d(e,"m",(function(){return n})),r.d(e,"n",(function(){return i})),r.d(e,"c",(function(){return o})),r.d(e,"j",(function(){return s})),r.d(e,"g",(function(){return c})),r.d(e,"d",(function(){return d})),r.d(e,"f",(function(){return g})),r.d(e,"i",(function(){return b})),r.d(e,"e",(function(){return S})),r.d(e,"o",(function(){return _})),r.d(e,"k",(function(){return y})),r.d(e,"b",(function(){return v})),r.d(e,"h",(function(){return T})),r.d(e,"l",(function(){return f}));var n,i,o,a,s,c,u,d,l,p="1380b703-ce81-ff05-f115-39571d94dfcd";!function(t){t.CART_ICON="1380bbc4-1485-9d44-4616-92e36b1ead6b",t.PRODUCT_PAGE="13a94f09-2766-3c40-4a32-8edb5acdd8bc",t.PRODUCT_WIDGET="13ec3e79-e668-cc0c-2d48-e99d53a213dd",t.GALLERY_PAGE="1380bba0-253e-a800-a235-88821cf3f8a4",t.GRID_GALLERY="13afb094-84f9-739f-44fd-78d036adb028",t.SLIDER_GALLERY="139a41fd-0b1d-975f-6f67-e8cbdf8ccc82",t.THANK_YOU_PAGE="1380bbb4-8df0-fd38-a235-88821cf3f8a4",t.ADD_TO_CART="14666402-0bc7-b763-e875-e99840d131bd",t.WISHLIST_PAGE="a63a5215-8aa6-42af-96b1-583bfd74cff5",t.CART="1380bbab-4da3-36b0-efb4-2e0599971d14",t.CHECKOUT="14fd5970-8072-c276-1246-058b79e70c1a"}(n||(n={})),function(t){t.CART_COMMANDS_URL="/_api/wix-ecommerce-renderer-web/store-front/cart/{commandName}",t.NODE_GRAPHQL_URL="_api/wixstores-graphql-server/graphql",t.READ_WRITE_GRAPHQL_URL="_api/wix-ecommerce-graphql-web/api",t.STOREFRONT_GRAPHQL_URL="_api/wix-ecommerce-storefront-web/api",t.WISHLIST_BASE_URL="/_api/wishlist-server"}(i||(i={})),function(t){t[t.MINI_CART=1]="MINI_CART",t[t.CART=2]="CART",t[t.NONE=3]="NONE"}(o||(o={})),function(t){t[t.IDLE=0]="IDLE",t[t.SUCCESSFUL=1]="SUCCESSFUL",t[t.FAILED=2]="FAILED"}(a||(a={})),function(t){t.CART="shopping_cart",t.CHECKOUT="checkout",t.GALLERY="product_gallery",t.THANKYOU="thank_you_page",t.PRODUCT="product_page",t.ORDER_HISTORY="order_history",t.WISHLIST="wishlist"}(s||(s={})),function(t){t.GET_CONFIG="getConfig",t.MULTI_LANG="multiLang",t.MINICART_OPEN="miniCartOpen"}(c||(c={})),function(t){t.RELATED_PRODUCTS="relatedProductIds"}(u||(u={})),function(t){t.AddToCart="add to cart",t.BuyNow="buy now",t.Subscribe="subscribe"}(d||(d={})),function(t){t.USE_LIGHTBOXES="specs.stores.UseLightboxes"}(l||(l={}));var f,h,g="x-wix-currency",b="x-wix-linguist",S="X-XSRF-TOKEN",_="https://8bc29fb6cd064a49a9945743de020bf2@sentry.io/1186457",y="wixstores-pagination-map",v="https://settings.parastorage.com",T="https://ecom.wix.com/storefront/cartwidgetPopup";!function(t){t.PRODUCT_PAGE="wix.stores.sub_pages.product"}(f||(f={})),function(t){t.Undefined="UNDEFINED",t.Dispute="DISPUTE",t.CompletedFundsHeld="COMPLETED_FUNDS_HELD",t.Initialization="INITIALIZATION",t.Initialized="INITIALIZED",t.Pending="PENDING",t.InProcess="IN_PROCESS",t.PartialRefund="PARTIAL_REFUND",t.Approved="APPROVED",t.PendingMerchant="PENDING_MERCHANT",t.PendingBuyer="PENDING_BUYER",t.ChargeBack="CHARGE_BACK",t.Declined="DECLINED",t.Expired="EXPIRED",t.Failed="FAILED",t.BuyerCanceled="BUYER_CANCELED",t.TpaCanceled="TPA_CANCELED",t.Void="VOID",t.Timeout="TIMEOUT",t.Refund="REFUND",t.Offline="OFFLINE"}(h||(h={}))},56:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(1),i=r(4),o=function(){function t(t){this.buildCustomizedUrl=t}return t.prototype.init=function(){return Object(n.__awaiter)(this,void 0,void 0,(function(){var t,e,r,o;return Object(n.__generator)(this,(function(n){switch(n.label){case 0:return t=/abc/g,e="{stub}",r={pathPrefix:"product-page"},[4,this.buildCustomizedUrl(i.l.PRODUCT_PAGE,{slug:"abc"},r)];case 1:return(o=n.sent())?(this.stub=o.replace(t,e),[2,!0]):[2,!1]}}))}))},t.prototype.buildProductPageUrl=function(t){return this.getProductWithStub(t)},t.prototype.getProductWithStub=function(t){if(this.stub)return this.stub.replace(/{stub}/g,t.slug);throw new Error("init CustomUrlApi wasn`t called")},t}()},7:function(t,e,r){"use strict";r.d(e,"c",(function(){return u})),r.d(e,"a",(function(){return l})),r.d(e,"b",(function(){return p}));var n=r(1),i=r(10),o=r(22),a=r(3),s=function(t){return t===i.a.Mobile},c=function(t){return{value:t,fontStyleParam:!1}};function u(t,e){var r=e.formFactor,n=e.widgetPreset;return Object(o.getStyleParamsWithDefaults)(t,(function(){return{defaults:(t={isMobile:s(r),orientation:n},{booleans:{titleToggle:!0,priceToggle:!0,separatorToggle:t.orientation===a.f.HORIZONTAL,extendOnHoverToggle:!0,extendOnHolidayToggle:!1,extendFullImageOnHoverToggle:!1,hoverButtonToggle:!t.isMobile&&t.orientation===a.f.VERTICAL,widgetButtonToggle:!(t.isMobile&&t.orientation===a.f.VERTICAL)},numbers:{hoverBackgroundColorOpacity:0,hoverBorderSize:0,actionButton_borderSize:0,actionButton_cornersRadius:0},fonts:{imageScaling:c(a.a.CROP),widgetAction:c(a.b.NAVIGATE),layout:c(""),alignment:c(t.orientation===a.f.HORIZONTAL?a.c.CENTER:a.c.LEFT),widgetDirection:c(a.e.LEFT),hoverArea:c(a.d.CONTENT),hoverBorderArea:c(a.d.CONTENT),hoverButtonArea:c(a.d.CONTENT),visualWidth:c("50%"),hoverState:c("zoom")}})};var t}))}var d=["alignment","widgetAction","imageScaling","visualWidth","widgetDirection","hoverArea","hoverBorderArea","hoverButtonArea","hoverState","layout"];function l(t){var e,r,i=t.numbers,o=i.hoverBackgroundColorOpacity,a=i.hoverBorderSize,s=i.actionButton_cornersRadius,c=t.booleans,u=c.widgetButtonToggle,l=c.titleToggle,p=c.full_width,f=c.priceToggle,h=c.separatorToggle,g=c.hoverButtonToggle,b=c.extendOnHoverToggle,S=c.extendOnHolidayToggle,_=c.extendFullImageOnHoverToggle,y=(e=t.fonts,r={},d.forEach((function(t){r[t]=e[t].value})),{fonts:r}).fonts;return Object(n.__assign)(Object(n.__assign)({},y),{fullWidth:p,hoverBackgroundColorOpacity:o,hoverBorderSize:a,actionButton_cornersRadius:s,widgetButtonToggle:u,titleToggle:l,priceToggle:f,separatorToggle:h,hoverButtonToggle:g,extendOnHoverToggle:b,extendOnHolidayToggle:S,extendFullImageOnHoverToggle:_})}function p(t){return l(t.globals.style.styleParams)}},76:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultilingualService=void 0;var n=r(1),i=r(88),o=r(89),a=n.__importStar(r(2)),s=function(){function t(t,e,r,n){void 0===t&&(t={}),this.publicData=t,this.widgetSettings=e,this.multiLangFields=r,this.defaultLocale=n,r?(this.isPrimaryLanguage=this.multiLangFields.isPrimaryLanguage,this.lang=this.multiLangFields.lang,this.locale=this.multiLangFields.locale):(this.isPrimaryLanguage=!0,this.lang=this.defaultLocale)}return t.prototype.get=function(t){if(this.isPrimaryLanguage)return this.publicData[t];var e=this.widgetSettings[i.getLocaleNamespace(this.lang)];return null==e?void 0:e[t]},t.prototype.getAll=function(){return this.isPrimaryLanguage?this.publicData:this.widgetSettings[i.getLocaleNamespace(this.lang)]},t.prototype.setWidgetSettings=function(t){this.widgetSettings=t},t.prototype.setPublicData=function(t){this.publicData=t},t.prototype.getMergedTranslationsAsPublicData=function(t){var e=a.omit(this.publicData,t);return o.compact(a.merge({},e,this.getAll()))},t}();e.MultilingualService=s},83:function(t,e,r){"use strict";r.r(e),r.d(e,"productWidgetController",(function(){return N}));var n,i,o,a=r(1),s=r(20),c=r(10),u=r(4),d=function(){function t(t){this.siteStore=t}return t.prototype.getData=function(t,e,r){return Object(a.__awaiter)(this,void 0,Promise,(function(){var n;return Object(a.__generator)(this,(function(i){return n={query:"query getData($externalId: String!, $compid: String!, $withPriceRange: Boolean = false) {\n  appSettings(externalId: $externalId) {\n    widgetSettings\n  }\n  catalog {\n    product(compId: $compid, onlyVisible: true) {\n      id\n      name\n      urlPart\n      price\n      comparePrice\n      formattedPrice\n      formattedComparePrice\n      pricePerUnit\n      formattedPricePerUnit\n      pricePerUnitData {\n        baseQuantity\n        baseMeasurementUnit\n      }\n      discount {\n        mode\n        value\n      }\n      priceRange(withSubscriptionPriceRange: true) @include(if: $withPriceRange) {\n        fromPriceFormatted\n      }\n      hasOptions\n      media {\n        id\n        url\n        mediaType\n        width\n        height\n        index\n      }\n      ribbon\n      isInStock\n      productType\n      digitalProductFileItems {\n        fileType\n      }\n      productType\n      subscriptionPlans {\n        list {\n           id\n           visible\n        }\n      }\n    }\n  }\n}",source:"WixStoresWebClient",variables:{externalId:t,compid:e,withPriceRange:r},operationName:"getProductWidgetData"},[2,this.siteStore.tryGetGqlAndFallbackToPost(this.siteStore.resolveAbsoluteUrl("/"+u.n.STOREFRONT_GRAPHQL_URL),n)]}))}))},t}(),l=r(76),p=r(12),f=function(){function t(t){this.siteStore=t}return t.prototype.getQuickViewUrl=function(t){var e=t.externalId,r=t.instance,n=t.origin,i=t.urlPart,o=t.selectionIds,a=t.quantity,s="https://ecom.wix.com/storefront/product/"+i,c={layout:"quickview",origin:n,instance:r};return e&&(c.externalId=e),(null==o?void 0:o.length)&&(c.selectionIds=encodeURIComponent(o.join(","))),a&&a>1&&(c.quantity=a.toString()),s+"?"+Object.keys(c).map((function(t){return t+"="+c[t]})).join("&")},t.prototype.openQuickViewLightbox=function(t){return this.siteStore.windowApis.openLightbox("Quick View",{productSlug:t})},t.prototype.quickViewProduct=function(t,e,r,n,i,o,a){if(this.siteStore.isMobile())return this.siteStore.navigate({sectionId:u.j.PRODUCT,state:r,queryParams:void 0},!0);var s=this.getQuickViewUrl({externalId:i,instance:this.siteStore.instanceManager.getInstance(),origin:e,urlPart:r,selectionIds:o,quantity:a});return this.siteStore.experiments.enabled(p.b.USE_LIGHTBOXES)?this.openQuickViewLightbox(r):this.siteStore.windowApis.openModal(s,{width:940,height:660,theme:"BARE"},n)},t}(),h=r(2),g={defaultQuantitiesRange:Object(h.range)(1,1e5),getQuantitiesRange:function(t,e){return void 0===e&&(e=[]),t.isManageProductItems?g.getFromUserSelections(t,e):g.getFromProduct(t)},getFromProduct:function(t){var e=g.defaultQuantitiesRange;return t.isTrackingInventory?e=Object(h.range)(1,t.inventory.quantity+1):"out_of_stock"===t.inventory.status&&(e=[]),e},getFromUserSelections:function(t,e){var r=g.defaultQuantitiesRange,n=g.getVariantsRepresentation(t,e);return n&&(t.isTrackingInventory?r=Object(h.range)(1,n.inventory.quantity+1):"out_of_stock"===n.inventory.status&&(r=[])),r},getVariantsRepresentation:function(t,e){var r;if(t.isManageProductItems&&t.productItems&&!Object(h.includes)(e,null)){var n=e.map((function(t){return t.id}));r=t.productItems.filter((function(t){return Object(h.isEqual)(t.optionsSelections,n)}))[0]}return r}};function b(t){var e;return(null===(e=t.subscriptionPlans)||void 0===e?void 0:e.list.filter((function(t){return!0===t.visible})).length)>0}function S(t,e){var r=_(t),n=e||t;return function(t){return(null==t?void 0:t.surcharge)<0}(e)?r?e.comparePrice:e.price:r?n.comparePrice:n.price}function _(t){var e;return(null===(e=t.discount)||void 0===e?void 0:e.value)>0}function y(t,e){return(null==e?void 0:e.sku)||t.sku}!function(t){t.DIGITAL="digital",t.PHYSICAL="physical"}(n||(n={})),function(t){t.OUT_OF_STOCK="out_of_stock",t.IN_STOCK="in_stock"}(i||(i={})),function(t){t.SECURE_PICTURE="secure_picture",t.SECURE_VIDEO="secure_video",t.SECURE_DOCUMENT="secure_document",t.SECURE_MUSIC="secure_music",t.SECURE_ARCHIVE="secure_archive"}(o||(o={}));var v,T=function(){function t(t,e,r,n){this.siteStore=t,this.compId=e,this.externalId=r,this.fedopsLogger=n,this.productActions=new f(this.siteStore)}return t.prototype.trackAddToCartBI=function(t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var e;return Object(a.__generator)(this,(function(r){return e={buttonType:u.d.AddToCart,appName:"productWidgetApp",hasOptions:!1,productId:t.id,isNavigateCart:this.siteStore.cartActions.shouldNavigateToCart(),navigationClick:this.siteStore.cartActions.shouldNavigateToCart()?"cart":"mini-cart",productType:t.productType,origin:c.d},[2,this.siteStore.biLogger.clickOnAddToCartSf(e)]}))}))},t.prototype.hasSubscriptions=function(t){return b(t)},t.prototype.storeNavigationHistory=function(){var t={pageId:this.siteStore.siteApis.currentPage.id,paginationMap:[]};this.siteStore.storage.local.setItem(u.k,JSON.stringify(t))},t.prototype.trackParams=function(t){return{id:t.id,name:t.name,price:S(t),sku:y(t),type:t.productType}},t.prototype.handleClick=function(t,e){var r=this;return e?(this.storeNavigationHistory(),this.siteStore.navigate({sectionId:u.j.PRODUCT,state:t.urlPart,queryParams:void 0},!0)):t.hasOptions||this.hasSubscriptions(t)?(this.siteStore.biLogger.clickAddToCartWithOptionsSf({appName:"productWidgetApp",origin:c.d,hasOptions:!0,productId:t.id,productType:t.productType,navigationClick:this.siteStore.isMobile()?"product-page":"quick-view"}),this.productActions.quickViewProduct(t.id,"productwidget",t.urlPart,this.compId,this.externalId)):(this.trackAddToCartBI(t),this.fedopsLogger.interactionStarted("add-to-cart"),this.siteStore.cartActions.addToCart(t.id,void 0,1,void 0,u.c.MINI_CART,c.d,(function(){r.fedopsLogger.interactionEnded("add-to-cart")}),this.trackParams(t)))},t}(),O=r(7),P=r(3),m=r(19);!function(t){t.DISABLED="DISABLED",t.ENABLED="ENABLED",t.OUT_OF_STOCK="OUT_OF_STOCK"}(v||(v={}));var E,I="ALLOW_FREE_PRODUCTS",C=function(){function t(t,e){void 0===e&&(e={});var r=e.APP&&!1===e.APP[I];this.allowFreeProducts=!r}return t.prototype.getButtonState=function(t){var e=t.price;return t.inStock?0===e?this.allowFreeProducts?v.ENABLED:v.DISABLED:e<0?v.DISABLED:v.ENABLED:v.OUT_OF_STOCK},t}(),R=r(56);!function(t){t.P="p",t.H1="h1",t.H2="h2",t.H3="h3",t.H4="h4",t.H5="h5",t.H6="h6"}(E||(E={}));var A=function(){function t(t){this.siteStore=t}return t.prototype.shouldShowPriceRange=function(){return this.siteStore.experiments.enabled(p.b.PRICE_RANGE_VIEWER)&&Boolean(this.siteStore.priceSettings.showPriceRange)},t}(),w=r(16),D=function(){function t(t,e,r){this.siteStore=t,this.translationsMap=e,this.taxDisclaimerKeys=r}return Object.defineProperty(t.prototype,"taxDisclaimer",{get:function(){if(this.siteStore.taxName)return this.siteStore.priceSettings.taxOnProduct?Object(w.translate)(this.translationsMap[this.taxDisclaimerKeys.includedPattern],{taxOrVAT:this.siteStore.taxName,included:this.translationsMap[this.taxDisclaimerKeys.includedKey]}):Object(w.translate)(this.translationsMap[this.taxDisclaimerKeys.excludedPattern],{taxOrVAT:this.siteStore.taxName,excluding:this.translationsMap[this.taxDisclaimerKeys.excludedKey]})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shouldShowTaxDisclaimer",{get:function(){return this.siteStore.priceSettings.showTaxDisclaimer&&!!this.siteStore.taxName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shippingDisclaimer",{get:function(){return this.siteStore.priceSettings.shippingDisclaimer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"priceBreakdownBIParam",{get:function(){var t,e=null===(t=this.siteStore.priceSettings.shippingDisclaimer)||void 0===t?void 0:t.show,r=this.shouldShowTaxDisclaimer;if(r||e){var n=[];return r&&n.push("tax"),e&&n.push("shipping"),n.join(", ")}},enumerable:!1,configurable:!0}),t}(),L=function(){function t(t,e,r,n,i,o,l){var p=this;this.styleParams=t,this.publicData=e,this.setProps=r,this.siteStore=n,this.externalId=i,this.compId=o,this.reportError=l,this.isStartReported=!1,this.isExternalRequestsValid=!0,this.isUrlWithOverrides=!1,this.onAppLoaded=function(){(!Object(s.b)()||p.siteStore.isInteractive()&&p.isStartReported)&&(p.fedopsLogger.appLoaded(),p.reportBIOnAppLoaded()),p.isStartReported=!1},this.showButtonSetting=function(t){return!p.siteStore.isMobile()&&t.hoverButtonToggle?"hover":t.widgetButtonToggle?"always":"never"},this.handleAddToCart=function(){return Object(a.__awaiter)(p,void 0,Promise,(function(){var t,e=this;return Object(a.__generator)(this,(function(r){return t=this.siteStore.pubSubManager.subscribe("Minicart.DidClose",(function(){e.setProps({shouldFocusAddToCartButton:Math.random()}),e.siteStore.pubSubManager.unsubscribe("Minicart.DidClose",t)}),!0),[2,this.productService.handleClick(this.product,this.isActionNavigate())]}))}))},this.navigate=function(){return Object(a.__awaiter)(p,void 0,Promise,(function(){return Object(a.__generator)(this,(function(t){return[2,this.productService.handleClick(this.product,!0)]}))}))};var f=this.siteStore.platformServices.fedOpsLoggerFactory;this.fedopsLogger=f.getLoggerForWidget({appId:u.a,widgetId:u.m.PRODUCT_WIDGET}),Object(s.b)()&&(this.fedopsLogger.appLoadStarted(),this.isStartReported=!0),null!==this.publicData.COMPONENT&&void 0!==this.publicData.COMPONENT||(this.publicData.COMPONENT={}),this.productApi=new d(this.siteStore),this.productService=new T(n,o,i,this.fedopsLogger),this.addToCartService=new C(n,e),this.siteStore.experiments.enabled(c.c.URL_CUSTOMIZE)&&(this.customUrlApi=new R.a(this.siteStore.location.buildCustomizedUrl)),this.handleCurrencyChange()}return t.prototype.handleCurrencyChange=function(){var t=this,e=this.siteStore.location.query.currency;this.siteStore.location.onChange((function(){e!==t.siteStore.location.query.currency&&(e=t.siteStore.location.query.currency,t.setInitialState().catch(t.reportError))}))},t.prototype.isActionNavigate=function(){return this.styleParams.fonts.widgetAction.value===P.b.NAVIGATE||this.addToCartService.getButtonState({price:S(this.product),inStock:!0})===v.DISABLED},Object.defineProperty(t.prototype,"shouldRenderPriceRange",{get:function(){return new A(this.siteStore).shouldShowPriceRange()},enumerable:!1,configurable:!0}),t.prototype.reportBIOnAppLoaded=function(){var t=Object(O.a)(this.styleParams);this.siteStore.biLogger.productWidgetLoadedSf(this.product?{isMobileFriendly:this.siteStore.isMobileFriendly,productId:this.product.id,hasPlans:b(this.product),navigationClick:this.isActionNavigate()?"navigate":"add-to-cart",hasOptions:this.product.hasOptions,buttonType:this.showButtonSetting(t),type:this.styleParams.fonts.layout.value,productType:this.product.digitalProductFileItems.length?"digital":"physical",priceBreakdown:this.productPriceBreakdown.priceBreakdownBIParam}:{productId:""})},t.prototype.getTexts=function(){var t=this;return Object.keys(c.b).reduce((function(e,r){var n=c.b[r],i=t.multilingualService.get(n);return i&&(e[r]=i),e}),Object(a.__assign)({},this.translations))},t.prototype.getProductWidgetTranslations=function(){return Object(s.a)(Object(c.e)(this.siteStore.baseUrls.productWidgetBaseUrl,this.siteStore.locale))},t.prototype.getDefaultProps=function(){return{cssBaseUrl:this.siteStore.baseUrls.productWidgetBaseUrl,onAppLoaded:this.onAppLoaded,horizontalLayout:this.widgetPreset===P.f.HORIZONTAL&&!this.siteStore.isMobile(),isInteractive:this.siteStore.isInteractive(),widgetPreset:this.widgetPreset,isMobile:this.siteStore.isMobile(),isRTL:this.siteStore.isRTL(),experiments:{isEditableHeadingTags:this.siteStore.experiments.enabled(c.c.EDITABLE_HEADING_TAGS),isBasePriceEnabled:this.siteStore.experiments.enabled(c.c.BASE_PRICE_IN_GALLERY)},texts:this.getTexts(),htmlTags:this.getHtmlTags()}},t.prototype.getHtmlTags=function(){return{productNameHtmlTag:this.publicData.COMPONENT.nameHtmlTag||E.H3}},t.prototype.setEmptyStateProps=function(){this.setProps(Object(a.__assign)(Object(a.__assign)({},this.getDefaultProps()),{product:null,emptyState:!0})),this.siteStore.isSSR()&&this.fedopsLogger.appLoaded()},t.prototype.setInitialState=function(){var t;return Object(a.__awaiter)(this,void 0,Promise,(function(){var e,r,n,i,o,s,d,p,f,h=this;return Object(a.__generator)(this,(function(g){switch(g.label){case 0:return[4,Promise.all([this.getProductWidgetTranslations(),this.productApi.getData(this.externalId||"",this.compId,this.shouldRenderPriceRange),this.siteStore.getSectionUrl(u.j.PRODUCT)]).catch((function(t){h.reportError(t),h.isExternalRequestsValid=!1}))];case 1:return e=g.sent(),this.siteStore.experiments.enabled(c.c.URL_CUSTOMIZE)?(r=this,[4,this.customUrlApi.init()]):[3,3];case 2:r.isUrlWithOverrides=g.sent(),g.label=3;case 3:return this.isExternalRequestsValid?(n=Object(a.__read)(e,3),i=n[0],o=n[1],s=n[2].url,(d=o.data).appSettings||(p=new m.a("Got 200 from the server, but appSettings is undefined",{response:o,responseData:d}),this.reportError(p)),this.translations=i,this.productPriceBreakdown=new D(this.siteStore,this.translations,{excludedPattern:"productWidget.price.tax.excludedParam.label",includedKey:"productWidget.price.tax.included.label",includedPattern:"productWidget.price.tax.includedParam.label",excludedKey:"productWidget.price.tax.excluded.label"}),this.multilingualService=new l.MultilingualService(this.publicData.COMPONENT||{},d.appSettings.widgetSettings,this.siteStore.getMultiLangFields(),this.siteStore.locale),this.product=null===(t=null==d?void 0:d.catalog)||void 0===t?void 0:t.product,this.product?(f=Object(a.__assign)(Object(a.__assign)({},this.getDefaultProps()),{emptyState:!1,handleAddToCart:this.handleAddToCart,hasDiscount:this.isDisabled?this.product.comparePrice>0:_(this.product),isDisabled:this.isDisabled,isSEO:this.siteStore.seo.isInSEO(),navigate:this.navigate,product:this.product,shouldRenderPriceRange:this.shouldRenderPriceRange,productPageUrl:this.product&&this.product.urlPart?this.getProductPageUrl(s,this.product.urlPart):"",ravenUserContextOverrides:{id:this.siteStore.storeId,uuid:this.siteStore.uuid},shouldFocusAddToCartButton:!1,clickShippingInfoLinkSf:this.sendClickShippingInfoLinkSf.bind(this),priceBreakdown:{shouldRenderTaxDisclaimer:this.productPriceBreakdown.shouldShowTaxDisclaimer,shippingDisclaimer:this.productPriceBreakdown.shippingDisclaimer,taxDisclaimer:this.productPriceBreakdown.taxDisclaimer}}),this.setProps(f),this.siteStore.isSSR()&&this.fedopsLogger.appLoaded(),[2]):(this.setEmptyStateProps(),[2])):[2]}}))}))},t.prototype.sendClickShippingInfoLinkSf=function(){this.siteStore.biLogger.clickShippingInfoLinkSf({productId:this.product.id})},t.prototype.getProductPageUrl=function(t,e){return this.siteStore.experiments.enabled(c.c.URL_CUSTOMIZE)&&this.isUrlWithOverrides?this.customUrlApi.buildProductPageUrl({slug:e}):t+"/"+this.product.urlPart},Object.defineProperty(t.prototype,"isDisabled",{get:function(){return this.addToCartService.getButtonState({price:S(this.product),inStock:!0})===v.DISABLED},enumerable:!1,configurable:!0}),t.prototype.updatePublicData=function(t){var e=this;Object.keys(t.COMPONENT).forEach((function(r){e.publicData.COMPONENT[r]=t.COMPONENT[r]}))},t.prototype.updateState=function(t,e){this.updatePublicData(e),this.styleParams=t,this.multilingualService.setWidgetSettings(e.appSettings),this.setProps({texts:this.getTexts(),htmlTags:this.getHtmlTags()})},Object.defineProperty(t.prototype,"widgetPreset",{get:function(){return this.publicData.COMPONENT.presetId||P.f.VERTICAL},enumerable:!1,configurable:!0}),t}();function N(t){var e,r=t.context,n=t.config,i=t.compId,o=t.setProps,a=t.reportError,s=r.siteStore,c=n.style.styleParams,u=n.publicData,d=n.externalId,l=void 0===d?"":d,p=function(t){return Object(O.c)(t||c,{formFactor:s.formFactor,widgetPreset:u.COMPONENT&&u.COMPONENT.presetId})};return{pageReady:function(){return(e=new L(p(),u,o,s,l,i,a)).setInitialState().catch(a)},updateConfig:function(t,r){var n=r.style.styleParams,i=r.publicData;e.updateState(p(n),i)}}}},88:function(t,e,r){"use strict";r.r(e),r.d(e,"MULTILINGUAL_NAMESPACE",(function(){return n})),r.d(e,"getLocaleNamespace",(function(){return i}));var n="multilingual";function i(t){return n+"_"+t}},89:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compact=void 0;var n=r(1);e.compact=function(t){return Object.entries(t).reduce((function(t,e){var r=n.__read(e,2),i=r[0],o=r[1];return o&&(t[i]=o),t}),{})}}})}));
//# sourceMappingURL=productWidgetController.bundle.min.js.map